function gotoElement(a,b){if(0!=a.length){var c=$("#"+a);c.length>0&&(void 0!==b&&b?$("html,body").scrollTop(c.offset().top):$("html,body").animate({scrollTop:c.offset().top},200))}}function multimd_table_plugin(a,b){function c(a,b){var c=a.bMarks[b]+a.blkIndent,d=a.eMarks[b];return a.src.slice(c,d)}function d(a){for(var b=[],c=a.length,d=0,e=!1,f=!1,g=0;g<c;g++)switch(a.charCodeAt(g)){case 92:e=!0;break;case 96:!f&&e||(f=!f),e=!1;break;case 124:f||e||(b.push(a.slice(d,g)),d=g+1),e=!1;break;default:e=!1}return b.push(a.slice(d)),b}function e(a){for(var b=0,c=[],d=a.length-1;d>=0;d--)a[d]?(c.unshift(b+1),b=0):b++;return b>0&&c.unshift(b+1),c}function f(a,b,c,d){var e=b.match(/^\[([^\[\]]+)\](\[([^\[\]]+)\])?\s*$/);if(!e)return!1;if(d)return!0;var f={caption:null,label:null};f.content=e[1],f.label=e[2]||e[1];var g;return g=a.push("caption_open","caption",1),g.map=[c,c+1],g.attrs=[["id",f.label.toLowerCase().replace(/\W+/g,"")]],g=a.push("inline","",0),g.content=f.content,g.map=[c,c+1],g.children=[],g=a.push("caption_close","caption",-1),f}function g(a,b,c,d){var e,f,g,h;e=b.split(/\n/).length,e>1?(f=a.md.block,g=new f.State(b,a.md,a.env,a.tokens),f.tokenize(g,0,e)):(h=a.push("inline","",0),h.content=b,h.map=[c,d],h.children=[])}function h(a,f,h,i,j,k){var l,m;if(l={colspans:null,columns:null,extractedTextLinesCount:1},m=d(f.replace(/^\||([^\\])\|$/g,"$1")),1===m.length&&!/^\||[^\\]\|$/.test(f))return!1;if(i)return!0;if(b.enableMultilineRows&&"\\"===f.slice(-1)){var n,o,p,q=Function.prototype.call.bind(String.prototype.trim);m=d(f.replace(/\\$/,"").replace(/^\||([^\\])\|$/g,"$1")),m=m.map(q);do{if(n=c(a,h+l.extractedTextLinesCount),o=d(n.replace(/\\$/,"").replace(/^\||([^\\])\|$/g,"$1")),p="\\"!==n.slice(-1),1===o.length&&!/^\||[^\\]\|$|\\$/.test(n))return!1;if(o.length!==m.length&&!p)return!1;for(var r=0;r<o.length;r++)m[r]=m[r]||"",m[r]+="\n"+o[r].trim();l.extractedTextLinesCount+=1}while(!p)}var s=RegExp.prototype.test.bind(/[^\n]/);l.columns=m.filter(s),l.colspans=e(m.map(s));var t=a.push("tr_open","tr",1);t.map=[h,h+l.extractedTextLinesCount];for(var u=0,v=0;u<l.columns.length&&v<j.aligns.length;v+=l.colspans[u],u++)t=a.push(k+"_open",k,1),t.map=[h,h+l.extractedTextLinesCount],t.attrs=[],j.aligns[v]&&t.attrs.push(["style","text-align:"+j.aligns[v]]),j.wraps[v]&&t.attrs.push(["class","extend"]),l.colspans[u]>1&&t.attrs.push(["colspan",l.colspans[u]]),g(a,l.columns[u].trim(),h,h+l.extractedTextLinesCount),t=a.push(k+"_close",k,-1);return a.push("tr_close","tr",-1),l}function i(a,b,c,e){if(a.sCount[c]-a.blkIndent>=4)return!1;var f=d(b.replace(/^\||([^\\])\|$/g,"$1"));if(1===f.length&&!/^\||[^\\]\|$/.test(b))return!1;for(var g={aligns:[],wraps:[]},h=0;h<f.length;h++){var i=f[h].trim();if(!/^:?(-+|=+):?\+?$/.test(i))return!1;switch(g.wraps.push(43===i.charCodeAt(i.length-1)),g.wraps[h]&&(i=i.slice(0,-1)),((58===i.charCodeAt(0))<<4)+(58===i.charCodeAt(i.length-1))){case 0:g.aligns.push("");break;case 1:g.aligns.push("right");break;case 16:g.aligns.push("left");break;case 17:g.aligns.push("center")}}return e||g}function j(a,b,d,e){var g={65536:function(a,b,c){return f(a,c,b,!0)},4096:function(a,b,c){return i(a,c,b)},256:function(a,b,c){return h(a,c,b,!0,null,"th")},16:function(a,b,c){return h(a,c,b,!0,null,"td")},1:function(a,b,c){return!c}},j={65792:{65536:256,256:4352},256:{256:4352},4352:{4096:65552,256:4352},65552:{65536:0,16:65553},65553:{65536:0,16:65553,1:65552}};if(b+2>d)return!1;var k,l,m,n,o,p,q=!1;for(k=65792,l=b;k&&l<d;l++){for(o=c(a,l).trim(),m=65536;m>0&&!(k&m&&g[m].call(this,a,l,o));m>>=4);switch(m){case 65536:65792===k&&(q=!0);break;case 4096:if(p=i(a,o,l),e)return!0;break;case 256:case 16:case 1:break;case 0:if(256&k)return!1}k=j[k][m]||0}if(!p)return!1;var r,s,t,u;for(r=a.push("table_open","table",1),r.map=s=[b,0],k=65792,l=b;k&&l<d;l++){for(o=c(a,l).trim(),m=65536;m>0&&!(k&m&&g[m].call(this,a,l,o));m>>=4);switch(m){case 65536:65792!==k&&(u[1]=l,r=a.push("tbody_close","tbody",-1)),65792!==k&&q?l--:f(a,o,l,!1);break;case 4096:t[1]=l,r=a.push("thead_close","thead",-1);break;case 256:4352!==k&&(r=a.push("thead_open","thead",1),r.map=t=[l+1,0]),n=h(a,o,l,!1,p,"th"),l+=n.extractedTextLinesCount-1;break;case 16:65553!==k&&(r=a.push("tbody_open","tbody",1),r.map=u=[l+1,0]),n=h(a,o,l,!1,p,"td"),l+=n.extractedTextLinesCount-1;break;case 1:u[1]=l,r=a.push("tbody_close","tbody",-1);break;case 0:l--}k=j[k][m]||0}return u&&!u[1]&&(u[1]=l,r=a.push("tbody_close","tbody",-1)),s[1]=l,r=a.push("table_close","table",-1),a.line=l,!0}b=b||{},a.block.ruler.at("table",j,{alt:["paragraph","reference"]})}function __loadjs(a,b){return b=$.extend(b||{},{dataType:"script",cache:!0,url:a}),jQuery.ajax(b)}function loadBlockly(a){if("undefined"!=typeof Blockly)return void a();__loadjs("/pkg/blockly.js").done(function(b,c){patchBlockly(),a()})}function loadJSHint(a){if("undefined"!=typeof JSHINT)return void a();__loadjs("/pkg/jshint.js").done(function(b,c){a()})}function patchBlockly(){Blockly.JavaScript.INFINITE_LOOP_TRAP=null,Blockly.svgResize_raw=Blockly.svgResize,Blockly.svgResize=function(a){if(Blockly.svgResize_raw(a),-1!=a.svgBackground_.style.fill.indexOf("#")&&-1==a.svgBackground_.style.fill.indexOf("://")){var b=window.location.hash?window.location.href.replace(window.location.hash,""):window.location.href;a.svgBackground_.style.fill=a.svgBackground_.style.fill.replace("#",b+"#")}},Blockly.utils.createSvgElement_raw=Blockly.utils.createSvgElement,Blockly.utils.createSvgElement=function(a,b,c){var d=window.location.hash?window.location.href.replace(window.location.hash,""):window.location.href;if(void 0!==b&&"string"==typeof b["clip-path"]){var e=b["clip-path"];if(-1!=e.indexOf("#")&&-1==e.indexOf("://")){var f=e.split("#");f[1]=d+"#"+f[1],b["clip-path"]=f.join("")}}return Blockly.utils.createSvgElement_raw(a,b,c)},void 0===Blockly.g&&(Blockly.g={})}function convertToHex(a){for(var b="",c=0;c<a.length;c++)b+=""+a.charCodeAt(c).toString(16);return b}function trans_lang(a,b){if("string"!=typeof b)return b;var c=b.split("|");return 2!=c.length&&(c=b.split("||"),2!=c.length)?b:/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(c[0])?"zh_CN"==a?c[0]:c[1]:"en_US"==a?c[0]:c[1]}function addTemplateBlock(a,b,c,d,e){_.each(b,function(b){"string"==typeof b.message0&&(b.message0=trans_lang(a,b.message0)),"string"==typeof b.tooltip&&(b.tooltip=trans_lang(a,b.tooltip)),void 0!==b.args0&&_.each(b.args0,function(b){void 0!==b.options&&_.each(b.options,function(b){b[0]=trans_lang(a,b[0])})})});var f=[];b.map(function(b,c){"string"==typeof b.template&&(void 0===b.args0&&(b.args0=[]),"string"!=typeof b.type&&(b.type="template_"+e+"_type_"+convertToHex(b.template.replace(/\s/g,""))),b.args0.map(function(b,c){if("string"!=typeof b.name&&(b.name="INPUT_"+c),"field_exchanges"==b.type){b.type="field_dropdown",b.options=[];var d="number"==typeof Blockly.g.exchanges?Blockly.g.exchanges:1;d=Math.max(d,3);for(var e=0;e<d;e++){var f=0==e?"Default":""+(e+1);"zh_CN"==a&&(f=0==e?"默认":"第"+(e+1)+"个"),b.options.push([f,e.toString()])}}}),void 0===b.colour&&(b.colour=c%24*15),f.push(b),Blockly.JavaScript[b.type]=function(a){var c=b.template;return b.args0.map(function(b,d){var e=null;e="field_dropdown"==b.type?a.getFieldValue(b.name):"field_checkbox"==b.type?"TRUE"==a.getFieldValue(b.name):"input_statement"==b.type?Blockly.JavaScript.statementToCode(a,b.name):Blockly.JavaScript.valueToCode(a,b.name,Blockly.JavaScript.ORDER_NONE)||"null",c=c.split("%"+(d+1)).join(e)}),"string"==typeof b.order?[c,Blockly.JavaScript[b.order]]:c})}),"string"!=typeof e&&(e="TEMPLATE_BLOCK"),Blockly.defineBlocksWithJsonArray(f),c.registerToolboxCategoryCallback(e,function(a){0==f.length&&"function"==typeof d&&d();var b=[];return f.map(function(a){var c='<xml><block type="'+a.type+'">';a.args0.map(function(a,b){if("string"==typeof a.check)if("Number"==a.check){var d=void 0!==a.default?a.default:0;c+='<value name="'+a.name+'"><shadow type="math_number"><field name="NUM">'+d+"</field></shadow></value>"}else if("String"==a.check){var d=void 0!==a.default?a.default:"";c+='<value name="'+a.name+'"><shadow type="text"><field name="TEXT">'+d+"</field></shadow></value>"}}),c+="</block></xml>";var a=Blockly.Xml.textToDom(c).firstChild;b.push(a)}),b})}function fetchBlocklyMeta(a){var b="/*blockly",c=a.indexOf(b);if(-1!=c){var d=a.indexOf("*/",c+b.length);if(-1!=d)return angular.fromJson("["+a.slice(c+b.length,d)+"]")}return[]}function updateToolBox(a,b,c,d,e){var f=[];b.map(function(a){if("string"==typeof a)try{f=f.concat(fetchBlocklyMeta(a))}catch(a){console.log("Parse blockly "+a)}else f=f.concat(a)}),addTemplateBlock(a,f,c,d,e)}void 0===window.__OEM__&&(window.__OEM__=-1!=document.cookie.indexOf("oem=true")),function(a){a.fn.shake=function(b){"function"==typeof b&&(b={callback:b});var b=a.extend({direction:"left",distance:20,times:3,speed:140,easing:"swing"},b);return this.each(function(){var c=a(this),d={position:c.css("position"),top:c.css("top"),bottom:c.css("bottom"),left:c.css("left"),right:c.css("right")};c.css("position","relative");var e="up"==b.direction||"down"==b.direction?"top":"left",f="up"==b.direction||"left"==b.direction?"pos":"neg",g={},h={},i={};g[e]=("pos"==f?"-=":"+=")+b.distance,h[e]=("pos"==f?"+=":"-=")+2*b.distance,i[e]=("pos"==f?"-=":"+=")+2*b.distance,c.animate(g,b.speed,b.easing);for(var j=1;j<b.times;j++)c.animate(h,b.speed,b.easing).animate(i,b.speed,b.easing);c.animate(h,b.speed,b.easing).animate(g,b.speed/2,b.easing,function(){c.css(d),b.callback&&b.callback.apply(this,arguments)})})}}(jQuery),function(a){"use strict";function b(a,b){return a=0|a||0,a<0?Math.max(a+b,0):Math.min(a,b)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,c){var d=this.byteLength,e=b(a,d),f=d;if(void 0!==c&&(f=b(c,d)),e>f)return new ArrayBuffer(0);var g=f-e,h=new ArrayBuffer(g),i=new Uint8Array(h),j=new Uint8Array(this,e,g);return i.set(j),h})}(),jQuery(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(){$(".chart").each(function(){$(this).highcharts().reflow()})}),$(function(){angular.bootstrap(document,["botvsApp"]),window.top.location!==window.self.location&&(window.top.location.href=window.self.location.href);var a={};moment&&"en"!==moment.locale()&&(a={contextButtonTitle:"图表导出菜单",decimalPoint:".",downloadJPEG:"下载JPEG图片",downloadPDF:"下载PDF文件",downloadPNG:"下载PNG文件",downloadSVG:"下载SVG文件",drillUpText:"返回 {series.name}",loading:"加载中",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],noData:"没有数据",printChart:"打印图表",resetZoom:"恢复缩放",resetZoomTitle:"恢复图表",weekdays:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"]}),a.numericSymbols=["k","M","G","T","P","E"],Highcharts.setOptions({global:{useUTC:!1},lang:a,credits:{enabled:!1}})}),function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports?module.exports=b():a.ReconnectingWebSocket=b()}(this,function(){function a(e,f,g){function h(a,b){var c;return void 0!==window.CustomEvent?(c=document.createEvent("CustomEvent"),c.initCustomEvent(a,!1,!1,b)):(c=document.createEvent("Event"),c.initEvent(a,!1,!1)),c}var i={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:null};g||(g={});for(var j in i)void 0!==g[j]?this[j]=g[j]:this[j]=i[j];this.url=e,this.reconnectAttempts=0,this.readyState=b,this.protocol=null;var k,l=this,m=!1,n=!1,o=document.createElement("div");o.addEventListener("open",function(a){l.onopen(a)}),o.addEventListener("close",function(a){l.onclose(a)}),o.addEventListener("connecting",function(a){l.onconnecting(a)}),o.addEventListener("message",function(a){l.onmessage(a)}),o.addEventListener("error",function(a){l.onerror(a)}),this.addEventListener=o.addEventListener.bind(o),this.removeEventListener=o.removeEventListener.bind(o),this.dispatchEvent=o.dispatchEvent.bind(o),this.open=function(e){if(k=new WebSocket(l.url,f||[]),"string"==typeof this.binaryType&&(k.binaryType=this.binaryType),e){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else o.dispatchEvent(h("connecting")),this.reconnectAttempts=0;(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",l.url);var g=k,i=setTimeout(function(){(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",l.url),n=!0,g.close(),n=!1},l.timeoutInterval);k.onopen=function(b){clearTimeout(i),(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onopen",l.url),l.protocol=k.protocol,l.readyState=c,l.reconnectAttempts=0;var d=h("open");d.isReconnect=e,e=!1,o.dispatchEvent(d)},k.onclose=function(c){if(clearTimeout(g),k=null,m)l.readyState=d,o.dispatchEvent(h("close"));else{l.readyState=b;var f=h("connecting");f.code=c.code,f.reason=c.reason,f.wasClean=c.wasClean,o.dispatchEvent(f),e||n||((l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onclose",l.url),o.dispatchEvent(h("close")));var g=l.reconnectInterval*Math.pow(l.reconnectDecay,l.reconnectAttempts);setTimeout(function(){l.reconnectAttempts++,l.open(!0)},g>l.maxReconnectInterval?l.maxReconnectInterval:g)}},k.onmessage=function(b){(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",l.url,b.data);var c=h("message");c.data=b.data,o.dispatchEvent(c)},k.onerror=function(b){(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","onerror",l.url,b),o.dispatchEvent(h("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(b){if(k)return(l.debug||a.debugAll)&&console.debug("ReconnectingWebSocket","send",l.url,b),k.send(b);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(a,b){void 0===a&&(a=1e3),m=!0,k&&k.close(a,b)},this.refresh=function(){k&&k.close()}}"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b=Array.prototype.slice,c=this;return function(){var d=b.call(arguments,1);return d.length?arguments.length?c.apply(a,d.concat(b.call(arguments))):c.apply(a,d):arguments.length?c.apply(a,arguments):c.call(a)}});var b=0,c=1,d=3;return a.prototype.onopen=function(a){},a.prototype.onclose=function(a){},a.prototype.onconnecting=function(a){},a.prototype.onmessage=function(a){},a.prototype.onerror=function(a){},a.debugAll=!1,a.CONNECTING=b,a.OPEN=c,a.CLOSING=2,a.CLOSED=d,a}),CodeMirror.defineMode("mylanguage",function(){function a(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)c[d].length>0&&(b[c[d]]=!0);return b}function b(a,b){var e=a.next();if("#"==e&&b.startOfLine)return a.skipToEnd(),"meta";if('"'==e||"'"==e)return b.tokenize=c(e),b.tokenize(a,b);if("("==e&&a.eat("*"))return b.tokenize=d,d(a,b);if(/[\[\]{}\(\),;\:\.\^]/.test(e))return null;if(/\d/.test(e))return a.eatWhile(/[\w\.]/),"number";if("/"==e&&a.eat("/"))return a.skipToEnd(),"comment";if(i.test(e))return a.eatWhile(i),"operator";a.eatWhile(/[\w\$_]/);var f=a.current();return h.propertyIsEnumerable(f)?"keyword":g.propertyIsEnumerable(f)?"builtin":"variable"}function c(a){return function(b,c){for(var d,e=!1,f=!1;null!=(d=b.next());){if(d==a&&!e){f=!0;break}e=!e&&"\\"==d}return!f&&e||(c.tokenize=null),"string"}}function d(a,b){for(var c,d=!1;c=a.next();){if(")"==c&&d){b.tokenize=null;break}d="*"==c}return"comment"}var e=["RGB","NOP","REF","ISLASTBAR","PERIOD","MYVOL","SETSIGPRICETYPE","AUTOFINANCING","DAYTRADE","DAYTRADE1","BACKGROUNDSTYLE","DRAWKLINE","DRAWKLINE2","AUTOFILTER","TRADE_AGAIN","MULTSIG_MIN","MULTSIG","ISCONTRACT","SELECT","BK","BP","BPK","SK","SP","SPK","CLOSEOUT","EXIT","INFO","ASK1","BID1","ASK1VOL","BID1VOL","ASK2","BID2","ASK2VOL","BID2VOL","ASK3","BID3","ASK3VOL","BID3VOL","ASK4","BID4","ASK4VOL","BID4VOL","ASK5","BID5","ASK5VOL","BID5VOL","BKPRICE","BKPRICEAV","BKVOL","BKHIGH","BKLOW","SKPRICE","SKPRICEAV","SKVOL","SKHIGH","SKLOW","DATE","TIME","YEAR","MONTH","DAY","HOUR","MINUTE","WEEKDAY","COINS","MONEY","MONEYTOT","UNIT","MARGIN","MINPRICE","MINPRICE1","ISLASTBK","ISLASTSK","ISLASTBP","ISLASTSP","ISLASTBPK","ISLASTSPK","ISLASTSTOP","ISLASTCLOSEOUT","BARSBK","BARSSK","BARSBP","BARSSP","BARSCOUNT","BARSLAST","BARSSINCE","BARSSINCEN","CONDBARS","COUNT","DMA","EMA","EMA2","EMAWH","HARMEAN","HHV","HV","HHVBARS","LLV","LV","LLVBARS","MA","WMA","MV","NUMPOW","SMA","LWMA","SMMA","SORT","SUM","SUMBARS","AVEDEV","COEFFICIENTR","CORRELATION","COVAR","DEVSQ","FORCAST","FILTER","KURTOSIS","NORMPDF","SKEWNESS","SLOPE","STD","STDP","VAR","VARP","ABS","ACOS","ASIN","ATAN","CEILING","COS","CUBE","EXP","FLOOR","INTPART","LN","LOG","MAX","MAX1","MEDIAN","MEDIAN1","MIN","MIN1","MOD","MODE","POW","RAND","REVERSE","ROUND","SGN","SIN","SQRT","SQUARE","TAN","BETWEEN","RANGE","CROSS","CROSSDOWN","CROSSUP","EVERY","EXIST","IF","IFELSE","VALUEWHEN","ISNULL","LAST","LONGCROSS","NOT","SAR","O","OPEN","H","HIGH","L","LOW","NEW","C","CLOSE","V","VOL","TIMESTAMP","BARPOS","ISUP","ISDOWN","ISEQUAL","NULL","BARSTATUS","NODRAW","LINETHICK1","LINETHICK2","LINETHICK3","LINETHICK4","LINETHICK5","LINETHICK6","LINETHICK7","DOT","DASH","DASHDOT","DASHDOTDOT","COLORSTICK","VOLUMESTICK","BAMBOOLINE","CIRCLEDOT","OPISTICK","COLORRED","COLORGREEN","COLORBLUE","COLORMAGENTA","COLORYELLOW","COLORLIGHTGREY","COLORLIGHTRED","COLORLIGHTGREEN","COLORLIGHTBLUE","COLORBLACK","COLORWHITE","COLORCYAN","COLORGRAY","NEW_ORDER","TRACING_ORDER"],f=" AND OR LOOP2 ";f+=e.join(" ");var g=a(f),h=a("BEGIN END THEN VARIABLE #EXPORT #END #IMPORT INFO SELECT AUTOFILTER TRADE_AGAIN MULTSIG_MIN MULTSIG BK SK BP SP BPK SPK CLOSEOUT EXIT"),i=/[+\-*&%=<>!?|\/]/;return{startState:function(){return{tokenize:null}},token:function(a,c){if(a.eatSpace())return null;var d=(c.tokenize||b)(a,c);return d},electricChars:"{}"}}),CodeMirror.defineMIME("text/x-mylanguage","mylanguage"),function(){"use strict";function a(a,b){function c(a){if(!d.parentNode)return CodeMirror.off(document,"mousemove",c);d.style.top=Math.max(0,a.clientY-d.offsetHeight-5)+"px",d.style.left=a.clientX+5+"px"}var d=document.createElement("div");return d.className="CodeMirror-hover-tooltip","string"==typeof b&&(b=document.createTextNode(b)),d.appendChild(b),document.body.appendChild(d),CodeMirror.on(document,"mousemove",c),c(a),null!=d.style.opacity&&(d.style.opacity=1),d}function b(a){a.parentNode&&a.parentNode.removeChild(a)}function c(a){a.parentNode&&(null==a.style.opacity&&b(a),a.style.opacity=0,setTimeout(function(){b(a)},600))}function d(b,d,e,f){function g(){CodeMirror.off(e,"mouseout",g),CodeMirror.off(e,"click",g),e.className=e.className.substring(0,e.className.length-" CodeMirror-hover".length),h&&(c(h),f.node===e&&(f.node=e),h=null)}if(f.node==e){var h=a(b,d),i=setInterval(function(){if(h)for(var a=e;;a=a.parentNode){if(a==document.body)return;if(!a){g();break}}if(!h)return clearInterval(i)},400);CodeMirror.on(e,"mouseout",g),CodeMirror.on(e,"click",g)}}function e(a){this.options=a.options,this.timeout=null,this.onMouseOver=function(b){f(a,b)}}function f(a,b){var c=b.target||b.srcElement;if(c){var e=a.state.textHover;e.node=c;var f=e.options.getTextHover(a,c,b);f&&(c.className+=" CodeMirror-hover",d(b,f,c,e))}}function g(a,b,c){if(c&&c!=CodeMirror.Init&&(CodeMirror.off(a.getWrapperElement(),"mouseover",a.state.textHover.onMouseOver),delete a.state.textHover),b){var d=a.state.textHover=new e(a);CodeMirror.on(a.getWrapperElement(),"mouseover",d.onMouseOver)}}function h(a,b){return!!a&&-1!=a.indexOf(b)}function i(a,b,c){var d=a.getTokenTypeAt(b);if(d){if(!c)return a.getTokenAt(b);for(var e=0;e<c.length;e++)if(h(d,c[e]))return a.getTokenAt(b)}}CodeMirror.isTokenType=h;var j=[0,0,0,5,0,-5,5,0,-5,0];CodeMirror.defineExtension("findTokenAt",function(a,b){for(var c=this,d=0;d<j.length;d+=2){var e=c.coordsChar({left:a.clientX+j[d],top:a.clientY+j[d+1]}),f=i(c,e,b);if(f)return f}}),CodeMirror.defineOption("textHover",!1,g)}(),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.TradingView={})}(this,function(a){"use strict";function b(a,c){var e=d({},a);for(var f in c)"object"!=typeof a[f]||null===a[f]||Array.isArray(a[f])?void 0!==c[f]&&(e[f]=c[f]):e[f]=b(a[f],c[f]);return e}function c(){return"1.14 (internal id aaac22e2 @ 2019-04-04 08:31:56.077488)"}var d=Object.assign||function(a){for(var b,c=arguments,d=1,e=arguments.length;d<e;d++)for(var f in b=c[d])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a},e={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},f={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},g=function(){function a(a){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!a.datafeed)throw new Error("Datafeed is not defined");if(this._options=b(f,a),a.preset){var c=e[a.preset];c?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(c.disabled_features):this._options.disabled_features=c.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(c.enabled_features):this._options.enabled_features=c.enabled_features):console.warn("Unknown preset: `"+a.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return a.prototype.onChartReady=function(a){this._ready?a.call(this):this._readyHandlers.push(a)},a.prototype.headerReady=function(){var a=this;return this._innerWindowLoaded.then(function(){return a._innerWindow().headerReady()})},a.prototype.onGrayedObjectClicked=function(a){this._innerAPI().onGrayedObjectClicked(a)},a.prototype.onShortcut=function(a,b){this._innerWindow().createShortcutAction(a,b)},a.prototype.subscribe=function(a,b){this._innerAPI().subscribe(a,b)},a.prototype.unsubscribe=function(a,b){this._innerAPI().unsubscribe(a,b)},a.prototype.chart=function(a){return this._innerAPI().chart(a)},a.prototype.setLanguage=function(a){this.remove(),this._options.locale=a,this._create()},a.prototype.setSymbol=function(a,b,c){this._innerAPI().changeSymbol(a,b+"",c)},a.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},a.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},a.prototype.selectLineTool=function(a){this._innerAPI().selectLineTool(a)},a.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},a.prototype.save=function(a){this._innerAPI().saveChart(a)},a.prototype.load=function(a,b){this._innerAPI().loadChart({json:a,extendedData:b})},a.prototype.getSavedCharts=function(a){this._innerAPI().getSavedCharts(a)},a.prototype.loadChartFromServer=function(a){this._innerAPI().loadChartFromServer(a)},a.prototype.saveChartToServer=function(a,b,c,d){this._innerAPI().saveChartToServer(a,b,c,d)},a.prototype.removeChartFromServer=function(a,b){this._innerAPI().removeChartFromServer(a,b)},a.prototype.onContextMenu=function(a){this._innerAPI().onContextMenu(a)},a.prototype.createButton=function(a){return this._innerWindow().createButton(a)},a.prototype.showNoticeDialog=function(a){this._innerAPI().showNoticeDialog(a)},a.prototype.showConfirmDialog=function(a){this._innerAPI().showConfirmDialog(a)},a.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},a.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},a.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},a.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},a.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},a.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},a.prototype.addCustomCSSFile=function(a){this._innerWindow().addCustomCSSFile(a)},a.prototype.applyOverrides=function(a){this._options=b(this._options,{overrides:a}),this._innerWindow().applyOverrides(a)},a.prototype.applyStudiesOverrides=function(a){this._innerWindow().applyStudiesOverrides(a)},a.prototype.watchList=function(){return this._innerAPI().watchlist()},a.prototype.activeChart=function(){return this._innerAPI().activeChart()},a.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},a.prototype.layout=function(){return this._innerAPI().layout()},a.prototype.setLayout=function(a){this._innerAPI().setLayout(a)},a.prototype.layoutName=function(){return this._innerAPI().layoutName()},a.prototype.changeTheme=function(a){this._innerWindow().changeTheme(a)},a.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},a.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},a.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},a.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},a.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},a.prototype._innerWindow=function(){return this._iFrame.contentWindow},a.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},a.prototype._create=function(){var a=this,b=this._render(),c=document.getElementById(this._options.container_id);if(null===c)throw new Error("There is no such element - #"+this._options.container_id);c.innerHTML=b,this._iFrame=c.querySelector("#"+this._id);var d=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(d.style.width="100%",this._options.fullscreen||(d.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(a){var b=function(){d.removeEventListener("load",b,!1),a()};d.addEventListener("load",b,!1)}),this._innerWindowLoaded.then(function(){a._innerWindow().widgetReady(function(){a._ready=!0;for(var b=0,c=a._readyHandlers;b<c.length;b++){var d=c[b];try{d.call(a)}catch(a){console.error(a)}}a._innerWindow().initializationFinished()})})},a.prototype._render=function(){var a=window;a[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(a[this._id].chartContent={json:this._options.saved_data});var b=(this._options.library_path||"")+"static/"+this._options.locale+"-tv-chart.aaac22e21df68f2f7bad.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+b+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},a}();window.TradingView=window.TradingView||{},window.TradingView.version=c,a.version=c,a.widget=g,Object.defineProperty(a,"__esModule",{value:!0})});var NewTradingView=function(a,b,c){var d=null,e=null,f=[],g=[],h=!1,i=!1,j=0,k={},l={},m={},n=null,o=[],p=function(a,b,c,d){var e=[];if(0==a.length)return{data:[],nextTime:0};void 0===d&&(d=!1),b*=1e3,c*=1e3;var f=-1,g=-1;0==c&&(c=a[a.length-1].time);for(var h=0,i=0;i<a.length&&a[i].time<=c;i++)a[i].time>=b?(-1==f&&(f=i),g=i+1):h=a[i].time/1e3;return f>=0&&(e=a.slice(f,g),d&&a.splice(f,g-f)),{data:e,nextTime:h}};return l.widget=null,l.reset=function(){d(),f=[],g=[],e=null,o=[],h=!1,j=0,l.widget&&l.widget.chart().resetData()},l.onReady=function(){j++,(h=i||j>2)&&(i=!0,c&&(c(l.widget),c=null),o.forEach(function(a){a(l.widget)}),o=[])},l.addFlags=function(a){var b=g.length,c=g.length>0?g[b-1].time:0;a.forEach(function(a){a.time>c&&g.push(a)})},l.update=function(c,d,i,j,q){if(void 0===c&&(c=[]),0!=c.length){var r=86400==j,s=r?"1D":(j/60).toString(),t=0;c.forEach(function(a){if(r){var b=a.time%864e5;b>0&&(a.time+=864e5-b)}var c=a.open.toString().split(".");t=c.length>1?Math.max(t,c[1].length+1):Math.max(t,2)}),t=Math.min(t,8),-1==i.indexOf(":")&&(i=d+":"+i);var u=-1!=d.indexOf("_CTP");if(m.name=i,m.full_name=i,m.timezone="Asia/Shanghai",m.pricescale=Math.pow(10,Math.min(t,8)),m.minmov=1,m.has_intraday=!0,m.has_no_volume=!1,m.ticker=d+":"+i,m.has_weekly_and_monthly=!1,m.session=-1!=u?"24x7":"0900-1130,1330-1500,2100-0000,0000-0230:23456",n||(n={symbol:i,resolution:s}),null==l.widget){var v=document.getElementById(a);if(v)for(;v.firstChild;)v.removeChild(v.firstChild);l.widget=new TradingView.widget({autosize:!0,symbol:i,interval:s,container_id:a,datafeed:k,library_path:"/pkg/charting_library/",timezone:"Asia/Shanghai",locale:b||"zh",debug:!1,
disabled_features:["header_compare","header_undo_redo","header_resolutions","symbol_search_hot_key","timeframes_toolbar","header_symbol_search","use_localstorage_for_settings","display_market_status"],indicators_file_name:"/pkg/tv_indicators.js",overrides:{volumePaneSize:"medium","scalesProperties.showLeftScale":!1,"paneProperties.legendProperties.showLegend":!0,"paneProperties.legendProperties.showStudyArguments":!0,"paneProperties.legendProperties.showStudyTitles":!0,"paneProperties.legendProperties.showStudyValues":!0,"paneProperties.legendProperties.showSeriesTitle":!0,"paneProperties.legendProperties.showSeriesOHLC":!0,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.priceLineWidth":1},studies_overrides:{"MACD.histogram.color":"#606060","MACD.MACD.color":"#ce5277","MACD.signal.color":"#a0d75b"},enabled_features:["side_toolbar_in_fullscreen_mode","keep_left_toolbar_visible_on_small_screens","adaptive_logo"]}),l.widget.headerReady().then(function(){l.onReady()}),l.widget.onChartReady(function(){l.onReady();var a=l.widget.chart();a.onVisibleRangeChanged().subscribe(null,function(){if(0!=g.length){var b=a.getVisibleRange(),c=p(g,b.from,b.to,!0).data;_.each(c,function(b){a.createShape({time:b.time/1e3,channel:b.channel},{shape:b.shape,color:b.color,zOrder:"top",overrides:b.overrides})})}})})}var w=!1;n.symbol==i&&n.resolution==s||(n={symbol:i,resolution:s},l.reset(),w=!0);var x=f.length,y=f.length>0?f[x-1].time:0;c.forEach(function(a){if(a.time>y)f.push(a);else{if(a.time!=y)return;f[x-1]=a}h&&e(a)}),"function"==typeof q&&(h?q(l.widget):o.push(q)),w&&l.widget.setSymbol(i,s)}},k.onReady=function(a){setTimeout(function(){a({supports_search:!1,supports_group_request:!1,supported_resolutions:["1","3","5","15","30","60","1D"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0})},0)},k.resolveSymbol=function(a,b,c){var d=_.clone(m);0==a.indexOf("#V:")&&(d.ticker=a),setTimeout(function(){b(d)},0)},k.getBars=function(a,b,c,d,e,g,h){if(n.resolution!=b||n.symbol!=a.name)return void e([],{noData:!0});var i=a.ticker.split(":"),j=2==i.length&&"#V"==i[0];h&&(d=0);var k=p(f,c,d),l=k.data;if(j){var m=[];_.each(l,function(a){var c={time:a.time};if(void 0!==a.runtime){var d=a.runtime[i[1]];void 0!==d&&(c={time:a.time,close:d[0]})}"1D"==b&&(c.time+=288e5),m.push(c)}),l=m}e(l,{noData:0==l.length,nextTime:0==l.length&&k.nextTime>0?k.nextTime:void 0})},k.subscribeBars=function(a,b,c,f,g){n.resolution==b&&n.symbol==a.name&&(-1==a.ticker.indexOf("#V:")&&(d=g,e=c),l.onReady())},k.unsubscribeBars=function(a){},l};!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Split=b()}(this,function(){"use strict";var a=window,b=a.document,c="addEventListener",d="removeEventListener",e="getBoundingClientRect",f="horizontal",g=function(){return!1},h=a.attachEvent&&!a[c],i=["","-webkit-","-moz-","-o-"].filter(function(a){var c=b.createElement("div");return c.style.cssText="width:"+a+"calc(9px)",!!c.style.length}).shift()+"calc",j=function(a){return"string"==typeof a||a instanceof String},k=function(a){if(j(a)){var c=b.querySelector(a);if(!c)throw new Error("Selector "+a+" did not match a DOM element");return c}return a},l=function(a,b,c){var d=a[b];return void 0!==d?d:c},m=function(a,b,c,d){if(b){if("end"===d)return 0;if("center"===d)return a/2}else if(c){if("start"===d)return 0;if("center"===d)return a/2}return a},n=function(a,c){var d=b.createElement("div");return d.className="gutter gutter-"+c,d},o=function(a,b,c){var d={};return j(b)?d[a]=b:d[a]=h?b+"%":i+"("+b+"% - "+c+"px)",d},p=function(a,b){var c;return(c={})[a]=b+"px",c};return function(i,j){function q(a,b,c,d){var e=V(A,b,c,d);Object.keys(e).forEach(function(b){a.style[b]=e[b]})}function r(){return F.map(function(a){return a.size})}function s(a){return"touches"in a?a.touches[0][B]:a[B]}function t(a){var b=F[this.a],c=F[this.b],d=b.size+c.size;b.size=a/this.size*d,c.size=d-a/this.size*d,q(b.element,b.size,this._b,b.i),q(c.element,c.size,this._c,c.i)}function u(){var a=F[this.a].element,b=F[this.b].element,c=a[e](),d=b[e]();this.size=c[A]+d[A]+this._b+this._c,this.start=c[C],this.end=c[D]}function v(a){var b=function(a){if(!getComputedStyle)return null;var b=getComputedStyle(a);if(!b)return null;var c=a[E];return 0===c?null:c-=S===f?parseFloat(b.paddingLeft)+parseFloat(b.paddingRight):parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)}(H);if(null===b)return a;if(M.reduce(function(a,b){return a+b},0)>b)return a;var c=0,d=[],e=a.map(function(e,f){var g=b*e/100,h=m(O,0===f,f===a.length-1,P),i=M[f]+h;return g<i?(c+=i-g,d.push(0),i):(d.push(g-i),g)});return 0===c?a:e.map(function(a,e){var f=a;if(0<c&&0<d[e]-c){var g=Math.min(c,d[e]-c);c-=g,f=a-g}return f/b*100})}function w(e){if(!("button"in e&&0!==e.button)){var f=this,h=F[f.a].element,i=F[f.b].element;f.dragging||l(j,"onDragStart",g)(r()),e.preventDefault(),f.dragging=!0,f.move=function(a){var b,c=F[this.a],d=F[this.b];this.dragging&&(b=s(a)-this.start+(this._b-this.dragOffset),1<R&&(b=Math.round(b/R)*R),b<=c.minSize+Q+this._b?b=c.minSize+this._b:b>=this.size-(d.minSize+Q+this._c)&&(b=this.size-(d.minSize+this._c)),t.call(this,b),l(j,"onDrag",g)())}.bind(f),f.stop=function(){var c=this,e=F[c.a].element,f=F[c.b].element;c.dragging&&l(j,"onDragEnd",g)(r()),c.dragging=!1,a[d]("mouseup",c.stop),a[d]("touchend",c.stop),a[d]("touchcancel",c.stop),a[d]("mousemove",c.move),a[d]("touchmove",c.move),c.stop=null,c.move=null,e[d]("selectstart",g),e[d]("dragstart",g),f[d]("selectstart",g),f[d]("dragstart",g),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",f.style.userSelect="",f.style.webkitUserSelect="",f.style.MozUserSelect="",f.style.pointerEvents="",c.gutter.style.cursor="",c.parent.style.cursor="",b.body.style.cursor=""}.bind(f),a[c]("mouseup",f.stop),a[c]("touchend",f.stop),a[c]("touchcancel",f.stop),a[c]("mousemove",f.move),a[c]("touchmove",f.move),h[c]("selectstart",g),h[c]("dragstart",g),i[c]("selectstart",g),i[c]("dragstart",g),h.style.userSelect="none",h.style.webkitUserSelect="none",h.style.MozUserSelect="none",h.style.pointerEvents="none",i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",f.gutter.style.cursor=T,f.parent.style.cursor=T,b.body.style.cursor=T,u.call(f),f.dragOffset=s(e)-f.end}}function x(a){var b=a.i===X.length,c=b?X[a.i-1]:X[a.i];u.call(c);var d=b?c.size-a.minSize-c._c:a.minSize+c._b;t.call(c,d)}function y(a){var b=v(a);b.forEach(function(a,c){if(0<c){var d=X[c-1],e=F[d.a],f=F[d.b];e.size=b[c-1],f.size=a,q(e.element,e.size,d._b),q(f.element,f.size,d._c)}})}function z(a,b){X.forEach(function(c){if(!0!==b?c.parent.removeChild(c.gutter):(c.gutter[d]("mousedown",c._a),c.gutter[d]("touchstart",c._a)),!0!==a){var e=V(A,c.a.size,c._b);Object.keys(e).forEach(function(a){F[c.a].element.style[a]="",F[c.b].element.style[a]=""})}})}void 0===j&&(j={});var A,B,C,D,E,F,G=i;Array.from&&(G=Array.from(G));var H=k(G[0]).parentNode,I=getComputedStyle?getComputedStyle(H):null,J=I?I.flexDirection:null,K=l(j,"sizes")||G.map(function(){return 100/G.length}),L=l(j,"minSize",100),M=Array.isArray(L)?L:G.map(function(){return L}),N=l(j,"expandToMin",!1),O=l(j,"gutterSize",10),P=l(j,"gutterAlign","center"),Q=l(j,"snapOffset",30),R=l(j,"dragInterval",1),S=l(j,"direction",f),T=l(j,"cursor",S===f?"col-resize":"row-resize"),U=l(j,"gutter",n),V=l(j,"elementStyle",o),W=l(j,"gutterStyle",p);S===f?(A="width",B="clientX",C="left",D="right",E="clientWidth"):"vertical"===S&&(A="height",B="clientY",C="top",D="bottom",E="clientHeight"),K=v(K);var X=[];return(F=G.map(function(a,b){var d,e,f,g={element:k(a),size:K[b],minSize:M[b],i:b};if(0<b&&((d={a:b-1,b:b,dragging:!1,direction:S,parent:H})._b=m(O,b-1==0,!1,P),d._c=m(O,!1,b===G.length-1,P),"row-reverse"===J||"column-reverse"===J)){var i=d.a;d.a=d.b,d.b=i}if(!h&&0<b){var j=U(b,S,g.element);e=j,f=W(A,O,b),Object.keys(f).forEach(function(a){e.style[a]=f[a]}),d._a=w.bind(d),j[c]("mousedown",d._a),j[c]("touchstart",d._a),H.insertBefore(j,g.element),d.gutter=j}return q(g.element,g.size,m(O,0===b,b===G.length-1,P)),0<b&&X.push(d),g})).forEach(function(a){var b=a.element[e]()[A];b<a.minSize&&(N?x(a):a.minSize=b)}),h?{setSizes:y,destroy:z}:{setSizes:y,getSizes:r,collapse:function(a){x(F[a])},destroy:z,parent:H,pairs:X}}}),angular.module("botvsApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngFileUpload","ngFileSaver","LocalStorageModule","duScroll","templates-all","ui.bootstrap","ui.bootstrap.collapse","ui.bootstrap.popover","ui.select","ng-sortable","uiSwitch","ngRateIt","pascalprecht.translate"]).config(["$routeProvider","$uibTooltipProvider","$locationProvider","$translateProvider","localStorageServiceProvider",function(a,b,c,d,e){if(-1!=location.href.indexOf("?")){var f=document.getElementsByTagName("base");if(f&&f.length>0&&-1!=f[0].outerHTML.indexOf("http"))throw"Stop"}e.setPrefix("botvsApp");var g="",h=Cookies.get("oem")||window.__OEM__;void 0!==window.__oem_custom&&"string"==typeof window.__oem_custom.Title&&(g=window.__oem_custom.Title),d.translations("en_US",locales_en_US),d.translations("zh_CN",locales_zh_CN),d.useSanitizeValueStrategy(["sanitizeParameters"]),b.options({appendToBody:!0}),c.html5Mode(!0).hashPrefix("!"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",seo:{description:"ui.seo.main.description"}}).when("/login",{title:g||"ui.nav.login",templateUrl:h?"views/oem-login.html":"views/login.html",controller:"LoginCtrl"}).when("/api",{title:"ui.nav.api",templateUrl:"views/api.html",controller:"ApiCtrl"}).when("/api/:page",{title:"ui.nav.api",templateUrl:"views/api.html",controller:"ApiCtrl"}).when("/doc/:id",{title:"ui.nav.api",templateUrl:"views/api.html",controller:"ApiCtrl"}).when("/api/redirect/:url",{title:"ui.nav.api",templateUrl:"views/api.html",controller:"ApiCtrl"}).when("/sign-up",{title:g||"ui.nav.signup",templateUrl:h?"views/oem-sign-up.html":"views/sign-up.html",controller:"SignUpCtrl"}).when("/sign-up/:ref",{title:"ui.nav.signup",templateUrl:"views/sign-up.html",controller:"SignUpCtrl"}).when("/reset-password",{title:"ui.nav.findPassword",templateUrl:"views/reset-password.html",controller:"ResetPasswordCtrl"}).when("/reset-twofactor",{title:"ui.nav.resetTwofactor",templateUrl:"views/reset-twofactor.html",controller:"ResetTwofactorCtrl"}).when("/disable-twofactor/:token",{title:"ui.nav.disableTwofactor",templateUrl:"views/disable-twofactor.html",controller:"DisableTwofactorCtrl"}).when("/set-password/:token",{title:"ui.nav.resetPassword",templateUrl:"views/set-password.html",controller:"SetPasswordCtrl"}).when("/square",{title:"ui.nav.square",templateUrl:"views/square.html",controller:"SquareCtrl",seo:{description:"ui.seo.main.square"}}).when("/square/:category/:page",{title:"ui.nav.square",templateUrl:"views/square.html",controller:"SquareCtrl"}).when("/m",{title:"Dashboard",templateUrl:"views/m/dashboard.html",controller:"MDashboardCtrl"}).when("/stats",{title:"Statistics",templateUrl:"views/m/stats.html",controller:"MStatsCtrl"}).when("/m/dashboard",{title:"Dashboard",templateUrl:"views/m/dashboard.html",controller:"MDashboardCtrl"}).when("/m/account",{title:"ui.nav.account",templateUrl:"views/m/account.html",controller:"MAccountCtrl"}).when("/m/account/:tab",{title:"ui.nav.account",templateUrl:"views/m/account.html",controller:"MAccountCtrl"}).when("/m/robot/:id",{templateUrl:"views/m/robot.html",controller:"MRobotCtrl"}).when("/m/add-robot",{title:"ui.nav.addRobot",templateUrl:"views/m/add-robot.html",controller:"MAddRobotCtrl"}).when("/m/add-robot/:sid",{title:"ui.nav.addRobot",templateUrl:"views/m/add-robot.html",controller:"MAddRobotCtrl"}).when("/m/add-platform",{title:"ui.nav.addPlatform",templateUrl:"views/m/add-platform.html",controller:"MAddPlatformCtrl"}).when("/m/edit-platform/:id",{title:"ui.nav.editPlatform",templateUrl:"views/m/add-platform.html",controller:"MAddPlatformCtrl"}).when("/m/add-node",{title:"ui.nav.addNode",templateUrl:"views/m/add-node.html",controller:"MAddNodeCtrl"}).when("/m/backtest-strategy/:id",{title:"ui.nav.backtestStrategy",templateUrl:"views/m/add-strategy.html",controller:"MAddStrategyCtrl"}).when("/m/edit-strategy/:id",{title:"ui.nav.editStrategy",templateUrl:"views/m/add-strategy.html",controller:"MAddStrategyCtrl"}).when("/m/add-strategy",{title:"ui.nav.addStrategy",templateUrl:"views/m/add-strategy.html",controller:"MAddStrategyCtrl"}).when("/m/copy-strategy/:id",{title:"ui.nav.copyStrategy",templateUrl:"views/m/add-strategy.html",controller:"MAddStrategyCtrl"}).when("/strategy/:id",{title:"ui.nav.viewStrategy",templateUrl:"views/strategy.html",controller:"StrategyCtrl"}).when("/robot/:id",{title:"ui.nav.viewRobot",templateUrl:"views/robot.html",controller:"RobotCtrl"}).when("/m/message",{title:"ui.nav.messages",templateUrl:"views/m/message.html",controller:"MMessageCtrl"}).when("/bbs",{title:"ui.nav.bbs",templateUrl:"views/bbs.html",controller:"BbsCtrl"}).when("/bbs/:slug/:page",{templateUrl:"views/bbs.html",controller:"BbsCtrl"}).when("/bbs/:page",{templateUrl:"views/bbs.html",controller:"BbsCtrl"}).when("/bbs-topic/:id",{templateUrl:"views/bbs-topic.html",controller:"BbsTopicCtrl"}).when("/bbs-topic/:id/:page",{templateUrl:"views/bbs-topic.html",controller:"BbsTopicCtrl"}).when("/bbs-topic-new",{templateUrl:"views/bbs-topic-new.html",controller:"BbsTopicNewCtrl"}).when("/bbs-topic-new/:id",{templateUrl:"views/bbs-topic-new.html",controller:"BbsTopicNewCtrl"}).when("/competition",{title:"ui.nav.competition",templateUrl:"views/competition.html",controller:"CompetitionCtrl"}).when("/m/stats",{templateUrl:"views/m/stats.html",controller:"MStatsCtrl"}).when("/m/pricing",{templateUrl:"views/m/pricing.html",controller:"MPricingCtrl",title:"ui.dashboard.charge"}).when("/live",{templateUrl:"views/live.html",controller:"LiveCtrl"}).when("/m/sales",{templateUrl:"views/m/sales.html",controller:"MSalesCtrl"}).when("/m/s/:id",{templateUrl:"views/m/rent.html",controller:"MRentCtrl"}).when("/m/t/:id",{templateUrl:"views/m/share.html",controller:"MShareCtrl"}).when("/m/rent/:id",{templateUrl:"views/m/rent.html",controller:"MRentCtrl"}).when("/about",{title:"ui.nav.about",templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/agreement",{title:"ui.nav.agreement",templateUrl:"views/agreement.html",controller:"AgreementCtrl"}).when("/m/share",{templateUrl:"views/m/share.html",controller:"MShareCtrl"}).when("/m/route",{title:"ui.nav.route",templateUrl:"views/m/route.html",controller:"MRouteCtrl"}).when("/m/debug",{title:"ui.nav.debug",templateUrl:"views/m/debug.html",controller:"MDebugCtrl"}).when("/m/tokens",{templateUrl:"views/m/tokens.html",controller:"MTokensCtrl"}).when("/market-demand-new",{title:"ui.nav.market.demand.new",templateUrl:"views/market-item-new.html",controller:"MarketItemNewCtrl"}).when("/market-demand-new/:id",{title:"ui.nav.market.demand.edit",templateUrl:"views/market-item-new.html",controller:"MarketItemNewCtrl"}).when("/market-offer-new",{title:"ui.nav.market.demand.new",templateUrl:"views/market-item-new.html",controller:"MarketItemNewCtrl"}).when("/market-offer-new/:id",{title:"ui.nav.market.demand.edit",templateUrl:"views/market-item-new.html",controller:"MarketItemNewCtrl"}).when("/markets",{title:"ui.nav.market.index",templateUrl:"views/market.html",controller:"MarketCtrl"}).when("/market-item/:id",{templateUrl:"views/market-item.html",controller:"MarketItemCtrl"}).when("/market-demand/:id",{templateUrl:"views/market-item.html",controller:"MarketItemCtrl"}).when("/market-offer/:id",{templateUrl:"views/market-item.html",controller:"MarketItemCtrl"}).when("/m/robots",{templateUrl:"views/m/robots.html",controller:"MRobotsCtrl",title:"ui.dashboard.tabs.robotNav"}).when("/m/strategies",{templateUrl:"views/m/strategies.html",controller:"MStrategiesCtrl",title:"ui.dashboard.tabs.strategyNav"}).when("/m/nodes",{templateUrl:"views/m/nodes.html",controller:"MNodesCtrl",title:"ui.dashboard.tabs.dockerNav"}).when("/m/platforms",{templateUrl:"views/m/platforms.html",controller:"MPlatformsCtrl",title:"ui.dashboard.tabs.platformNav"}).when("/m/tickets",{templateUrl:"views/m/tickets.html",controller:"MTicketsCtrl",title:"ui.nav.ticket"}).when("/m/add-ticket",{templateUrl:"views/m/add-ticket.html",controller:"MAddTicketCtrl",title:"ui.nav.addTicket"}).when("/m/ticket-topic/:id",{templateUrl:"views/m/ticket-topic.html",controller:"MTicketTopicCtrl"}).when("/m/invoice",{templateUrl:"views/m/invoice.html",controller:"MInvoiceCtrl",title:"ui.nav.invoice"}).when("/m/trade",{templateUrl:"views/m/trade.html",controller:"MTradeCtrl",title:"ui.nav.trade"}).when("/m/trade/:id",{templateUrl:"views/m/trade.html",controller:"MTradeCtrl",title:"ui.nav.trade"}).when("/timeline",{templateUrl:"views/timeline.html",controller:"TimelineCtrl",title:"ui.nav.timeline"}).when("/products",{templateUrl:"views/products.html",controller:"ProductsCtrl",title:"ui.nav.products"}).when("/digest",{templateUrl:"views/digest.html",controller:"BbsCtrl",title:"ui.nav.digest"}).when("/digest/:slug/:page",{templateUrl:"views/digest.html",controller:"BbsCtrl"}).when("/digest/:page",{templateUrl:"views/digest.html",controller:"BbsCtrl"}).when("/digest-topic/:id",{templateUrl:"views/bbs-topic.html",controller:"BbsTopicCtrl"}).when("/digest-topic/:id/:page",{templateUrl:"views/bbs-topic.html",controller:"BbsTopicCtrl"}).otherwise({title:"404",templateUrl:"views/notfound.html",controller:"NotFoundCtl"})}]);var locales_en_US={ui:{account:{addShadowTitle:"Add",affiliate:{image:"Ad image",init_balance:"Register Balance(CNY)",level:"Level",needPoints:"need Points",returnPoints:"Deposit Return Points",rules:"Level Rules"},alert:{apmEmpty:"Alert is empty !",bindGoogleSuccess:"Has been successfully bound to verify the code, the lifting of the binding, please enter the verification code of Google",msgEmpty:"Message is empty!",notBindWeixin:"You are not bind wechat, unable to receive robot push message !",queueEmpty:"Queue is empty !",resend:"Retry after 6 minutes",ticketMsgEmpty:"Ticket Message is empty !"},alertThreshold:"Alert Threshold(CNY)",alertThresholdDesc:"When the available balance of the account is less than this value, you will receive mail and WeChat notification. 0 is disable this function, If there is no recharge or change this setting, it will be notified only once within 24 hours.",bindGoogleCode:"Enable twofactor",bindGoogleStep:'<b>First you need to download and install the GOOGLE authenticator app on your mobile phone</b>: <br> 1. Open the AppStore (iOS) or Play store (Android) on your phone<br> 2. Search "Google Authenticator (authenticator)". WP8 search "validator"<br> 3. Download and install the application<br> <b>After the installation is complete, you need to configure the application as follows: </b><br> 1. Open the app, click "add new account" then scanning bar code.<br> 2. The camera lens on the phone to scan the bar code<br> <b>OR  manually enter the key: <font color=red>{{ googleKey }}</font></b>',btnAddShadow:"Add sub-member",btnChangeShadow:"Modify sub-member",btnUnbind:"Unbind",cancelChangeSahdow:"Cancel",change:"Change",changeNickname:"Change nickname",changePassword:"Change password",changeShadowTitle:"Change",changeThreshold:"Apply",cols:{action:"Action",alive:"Alive",date:"Date",lastLoginIp:"Last Login",lastLoginTime:"Login Time",status:"Status",username:"Username"},createdAt:"Created:",currentPassword:"Current password",emptyAlert:"Empty all alerts",emptyPush:"Empty all push",emptyReply:"Empty all reply",emptyTicketNotify:"Emtpy Ticket Notify",go:"Go",googleCode:"Google code",levelTips:"Your account level",lock:"Lock",newNickname:"New nickname",newPassword:"New password",points:"Points",pointsTips:"Your points",promotionRights:'Registered as a new user via this link will get <b color="red">{{money}}</b> CNY',promotionTips:"Invite friends via this link to sign up and you can getting points 1:1 when user recharged, the effective time is 6 months.",sendAt:"Send at",sentAt:"Send at",shadowInfo:"User information",shadowPermissions:"Available permissions",sns:{bound:"Already Bound",notBound:"Not Bound Yet",send:"Send",telegramSearch:"Contact",wechatSearch:"Follow"},tabs:{affiliate:"Affiliate",alert:"Alert Message",apikey:"ApiKey",google:"Google twofactor",license:"License",message:"Message",nickname:"Nickname",notify:"Notify Message",password:"Password",push:"Push Message",pushSettings:"Push Settings",settings:"Threshold Alert",shadow:"Sub-Account",ticket:"Ticket Message",weixin:"Wechat bind"},transPoints:"Points to Balance",transPointsBtn:"Trans",transPointsFail:"Trans Failed, Please check your input !",transPointsSuccess:"Success",transPointsTo:"Trans To",unbindGoogleCode:"Disable twofactor",unboundGoogle:"Unbound Google Authenticator",unboundGoogleSuccess:"Unbound success",unlock:"Unlock",vpointsTips:"Your history points"},addNode:{bit:"Bit",dockerAddr:"Address",dockerCmdTips:"-p is optional",dockerPassword:"(Your Login Password)",downloadTips:"Download and run command",head:"Deploying private Docker will not be affected by the performance of our platform server. The Docker communicates directly with the exchange and saves the log information privately.",headArch:"Version",headCmd:"Command",headOS:"OS",speedTips:"If your docker is unstable to connect to &nbsp;<b>node.fmz.com</b>&nbsp;, try Hong Kong backup node&nbsp;<b>node-hk.fmz.com</b>&nbsp;",step1:"Step 1",step2:"Step 2",step3:"Step 3",stepFinished:"Finished",stepReturn:"Return to dashboard and refresh page",update:"Update Time",updateLog:"Update Log",version:"Latest Version",versionCLI:"CLI Version",versionGUI:"GUI Version",wxTips:" Focus on the bottom of the wechat account (or search public number botvs or botvs123) can be the first time to receive the latest update notification !"},alert:{agreementDocker:" You are now using a public free server hosting. For more stability, please deploy your own private hosting service as soon as possible!",btLeaveMesssage:"Backtest is running, continue leave ?",changePlatform:" confirm modify this exchange ?",dialog:{inputError:"{{ inputname }} error, please retry after 3 seconds !"},fileForbidden:"please upload pictures or multimedia types of files!",genKey:"Continue gen key ?",insufficientBalance:" Insufficient balance !",invalidForm:"The form is not complete, save failed!",invalidInput:"Invaid Input",leaveMesssage:"If you leave this page you are going to lose all unsaved changes.\\nare you sure you want to leave?",login:{incorrect:"Incorrect username or password !",locked:"User is Blocked !",twofactorError:"Google twofactor code error, retry 3s later !!",unknownError:"Unknow error, retry 3s later !!"},logoutError:"Logout error {{ error }}, force logout ?",noDocker:"You haven't added any docker",noPlatform:"You haven't added any platform",noStrategy:"You haven't added any strategy",planTrialExpired:"Your free trial plan is expired, please rebuy plan, all running robots will force stop in next 3 hours !",platformPeriodError:"{{name}} not support this period",retry:"Failed, Please retry later !",robot:{create:{nameRepeat:"Robot name is repeat, please rename it!",noDocker:"No available online docker!",strategyExceed:"Strategy max concurrency exceed !",strategyExpired:"The strategy has expired, please contact the author to buy",success:"Create success !",syntaxError:"Create success, But failed when dispatched, please restart!"}},selectPublicDocker:"Please select a public server to run strategy!",shadowMember:"You are a Sub-Account and can only operate the allowed robots !",signup:{authCodeWrong:"AuthCode Invalid !",emailWrong:"Invalid email address!",inputWrong:"Invalid username or email!",limit:"Can register up to 3 times within an hour!",passwordShort:"Password is to weak, please set a password at least 9 chars!",refWrong:"Invalid Recommender",repeat:"Username or email is repeat!",unCompleted:"Incomplete form !"},startegy:{emptyStringArg:"String parameters can not be empty!",historyEmpty:"History data is empty, please retry !",invalidArg:"Digital parameter is incorrect",logs:"Logs",longCommand:"Command is too long, max 200 characters.!",notSupportWorker:"Browser not support 'worker', please switch a html5 standard browser",platformEmpty:"Please click the red plus button to add the exchange that needs to be tested, and then click to start the test !",previewCommand:'Determined send command "<b>{{cmd}}</b>"',tickSupport:"only support commodity futures and OKEX/Huobi’s coins to coins trading Tick mode."},strategy:{busy:"System is busy, please retry later !",checkTemplate:"{{strategy}} refers to snapshot mode, to cancel the reference and save it from the list, you will not be able to recover the reference",copyAlert:"Be sure to check the security of this policy code before running it. Are you sure you want to copy it and save it ?",invalidArgBoolean:"Illegal boolean variable, Must be true/false",invalidArgName:"Illegal variable name, variable name initials (A-Z A-Z) should be a letter, underscore (_), or the dollar sign ($) to start",invalidArgNumber:"Illegal number",invalidName:"Please input the strategy name !",invalidSelect:'The select type must be split with "|", such as aaa|bbb',invalidSource:"Stratey source can not empty !",lostTemplate:" Lost {{num}} Template strategy, please check the template parameters !",notfound:"not found",outofRange:"The scope of the test is beyond the scope of the low - level K - line coverage of {{range}}, please reduce the accuracy of the high and low level K line cycle",outofTickSize:"Tick level test because the data is too large, only allowed within 7 days tick range",outofTimeLine:"The bottom-level tick generated based on the 1-minute K-line starts at 2016-02-22. If you need a wider range of tests, please select a higher bottom-level K-line cycle, which may reduce the accuracy!",platformNotSupport:"Not support this platform!",platformRepeat:"Already exists: {{platform}}",repeatArg:"Variable name or description repeat, determine to cover the old variable",saveRepeat:"Name is repeat, please change the name !",saveSuccess:"Save success !",saveSuccessWithSync:"Save success, but the rsync token is change !",uncompletedArg:"All need expect tips"},ticketNodeEmpty:"Please select category",titleEmpty:"Title can not be empty",topicNodeEmpty:"Please select node",updateKey:"Continue update key ?"},args:{boolean:"Boolean(true/false)",button:"Button",encrypt:"Encrypt String",number:"Number",selected:"Selected",string:"String"},asset:{free:"Free",frozen:"Frozen",symbol:"Symbol"},backtest:{account:{closeProfit:"CloseProfit",commission:"Comission",currMargin:"Current Margin",currency:"Currency",name:"Name",positionProfit:"Position Profit",quoteCurrency:"QuoteCurrency",returns:"Returns",status:"Account Status"},chart:"Market",closeProfit:"CloseProfit",collect:"Fetching backtest data",compiling:"Compiling, wait ....",completed:"Completed",coverProfitChart:"Cover Profit chart",download:"Download Results",downloadLogs:"Download Logs",elapsed:"Elapsed(second)",faultTolerantTesting:"Backtesting, wait ....",loading:"Wait Loading Sandbox",logCount:"Log Count",logExceed:"Exceed Log Limit",logs:"Logs",maxDrawdown:"MaxDrawDown",noLogs:"Empty",pnlChart:"PnL",profit:"Profit",profitChart:"Profit chart",progress:"Progress",pullingResult:"Pulling result, wait ....",remain:"Remain",returns:"Returns",running:"Wait backtesting",sharp:"Sharp",statistics:"InitAssets : {{statistics.totalAssets}}, {{isCoverProfit ? 'CoverProfit' : 'TotalProfit'}} : {{(statistics.totalReturns * 100).toFixed(3)}} %, AnnualizedReturns ({{statistics.yearDays}} Days) : {{(statistics.annualizedReturns * 100).toFixed(3)}} %, Sharp : {{(statistics.volatility == 0 ? '--' : statistics.sharpeRatio.toFixed(3))}}, Volatility : {{(statistics.volatility == 0 ? '--' : statistics.volatility.toFixed(3))}} %, MaxDrawdown : {{(statistics.maxDrawdown * 100).toFixed(3)}} % {{((typeof(showWinningRate) !== 'undefined' && showWinningRate) ? (', WinningRate : ' + (statistics.winningRate * 100).toFixed(3) + ' %') : '')}}",stopped:"Stopped",strategyChart:"Strategy Chart",summary:"Status",tasks:"Tasks",tips:{chart:"Regrouped market information",myvars:"MyLang Variables",profit:"The value of LogProfit",profitChart:"The value of LogProfit",returns:"Estimated revenue refers to the revenue(including commission fee) after all positions are closed at the latest price. Only the spot total profit is displayed when the spots and the futures are mixed.",sharp:"Calculated based on revenue recorded by LogProfit"},tradeCount:"Trade Count",updated:"Update at",winningRate:"Winning Rate"},bbs:{all:"All",chinese:"Chinese",copyright:"The copyright of the content belong to the platform (FMZ.COM), and can not be reproduced without authorization.",created:"Created",edit:"Edit",hideTitle:"The node content list is visible to your self",hits:"Hits",latest:"Latest",nav:"Nodes",new:{cancel:"Cancel",content:"Content",editMarkdown:"Edit Mode",node:"Node",pending:"Submit...",previewMarkdown:"Preview Mode",selectNode:"Select node",statusBlock:"Readonly <b>{{topicStatus == 1 ? 'locked' : 'deleted'}}</b> topic !",submit:"Submit",title:"Title",vimOff:"Close Vim Mode",vimOn:"Open Vim Mode"},newDigest:"New Digest",newTopic:"New Topic",orderHot:"Hot",orderLatest:"Latest",return:"Return",topicEmpty:"Content is empty",updated:"Updated"},btn:{continueUseFreeDocker:"Continue with free pubic Server"},comment:{alertExpired:"comment to old, action failed !",confirmDelete:"Deleted this reply ?",delete:"Delete",forbiddenFile:"Forbidden file type !",forbiddenReply:"Topic is Locked !",loginReply:"Login to reply !",reply:"Post Reply",replyEdit:"Edit",say:"Say something ..."},const:{alipay:"Alipay",available:"Available",balance:"Balance",bills:"Bills",buynew:"Buy",consumed:"Consumed",consumedAbout:"About to",date:"Date",day:"Days",doller:"Dollars",ecs:{status:{expired:"Expired",failed:"Failed",installing:"Installing",pending:"Install Docker ...",running:"Running",starting:"Starting",stopped:"Stoppped",wait:"Wait Install"}},email:"Email",hour:"Hour",hours:"Hours",in_arrears:"In arrears",ms:"Millisecond",node:{line:{cdn:"CDN",direct:"Direct",unknown:"Unknown"}},password:"Password",pay:"Pay",paymentAmount:"Amount",paymentConcurrent:"Concurrent",paymentDate:"Date",paymentDays:"Days",paymentMethod:"Method",paypal:"Paypal",paypalTips:"Only support non-Chinese users to pay",privateDocker:"Private Docker",publicDocker:"Public Docker",publicUse:"Public Use",range:{last30days:"Last 30 Days",last7days:"Last 7 Days",lastmonth:"Last Month",lastyear:"Last Year",thismonth:"This Month",thisyear:"This Year",today:"Today",yesterday:"Yesterday"},region:{"cn-hangzhou":"China HongZhou","cn-hongkong":"Hongkong"},renew:"Renew",rent:"Rent",report:{coverProfit:"CoverProfit",event:"Event",maxDrawdown:"Max Drawdown",maxProfit:"Max Profit",totalCoverProfit:"Total Cover Profit",totalProfit:"Total Profit",vLineTips:"dotted line show max drawdown range"},rmb:"CNY",security:"Security",selectDocker:"Select public server",share:"Get Code",summary:"Summary",token:{typeApp:"Application",typeCopy:"Copy",typeRent:"Rent"},weixin:"WeChat",weixinQRClickTips:"Click the pay button to generate a QR code",weixinQRMakingTips:"Is generating QR image, please scan later ...",weixinQRTips:"WeChat QR Scan",welcome:"Welcome !"},dashboard:{addRobot:"Add robot",alert:{alreadyRunning:"Robot already running!",deletedRobotError:"Delete failed, Robot may be running..",deletedWithLog:"Delete success, but this robot's docker is offline, please remove the {{id}}.db3 manually",dockerBusy:"Please stop all the robots on this docker !",exceedConcurrency:"Exceed strateby concurrency !",insufficientBalance:"Insufficient Balance, Please recharge and retry !",internalError:"Internal error!",killRobot:"Are you sure you want to force stop this robot?",noDocker:"Can not find online docker!",
passwordNeed:"Use public docker need auth password, please relogin !",planExpired:" Plan expired, olny allow add sandbox platform, Please return to the dashboard and Renewal Plan !",shareSuccess:"Successful submission, please disclose the real-market robot associated with this strategy, so that the administrator can review it!",stopError:"Failed, The associated docker may already be offline, Please confirm and delete the offline docker !",stopRobot:"Are you sure you want to stop this robot?",strategyBusy:"Please delete all the robots that use this strategy.!!",strategyExpire:"The strategy has expired, please contact the author to buy !",strategyUpdate:"strategy modified at {{date}}"},alreadyBuy:"Owned",alreadyExpired:"Expired",appSale:"Application Key",charge:"Payment",chart:"Quote chart",confirmBatchDelete:"Are you sure you want delete {{ num }} robots?",confirmBatchReboot:"Are you sure you want to restart {{ num }} robots?",confirmBatchStop:"Are you sure you want to stop {{ num }} robots?",confirmCancelPublicRobot:"Are you sure you want to cancel public this robot's trade logs ?",confirmCancelPublicStrategy:"Are you sure you want to cancel public/sale this strategy ?",confirmDeleteDocker:"Please stop all the robots that running on this docker, determine to delete it?",confirmDeletePlatform:"Are you sure you want to delete {{platform}}?",confirmDeleteRobot:"Delete this robot?",confirmDeleteStrategyPremium:"<font color='red'><b>{{strategy}}</b> is the charging strategy, determine to delete it?</font>",confirmDeleteStrategySelf:"Are you sure you want to delete <b>{{strategy}}</b>?",confirmMoniterDockerOff:"When you close the monitor, if the docker does not exit properly, you will not receive any notification. Are you sure you want to close it?",confirmMoniterDockerOn:"After opening the monitor, if the docker is not normally offline, the mailbox with the bound WeChat will receive a notification, be sure to open it ?",confirmMoniterRobotOff:"After closing the monitor, if the robot does not exit properly, you will not receive any notification, be sure to close it?",confirmMoniterRobotOn:"After opening the monitor, if the robot does not manually exit, the mailbox with the bound WeChat will receive a notification, be sure to open it ?",confirmPublicRobot:"Are you sure you want to public this robot's trade logs ?",confirmPublicStrategy:"Are you sure you want to share the &nbsp;<font color='red'><b>Source Code</b></font>&nbsp; of this strategy ?",confirmReboot:"Are you sure you want to restart this robot?",confirmSaleStrategy:"Please select your sale mode",consumedAbout:"Robots can be running about",expiredTime:"Expired time",freeTip:"your free trial will expired:",inputBatchDeleteRobot:"Delete robot log file ?",inputDeleteRobot:"Delete log file {{id}}.db3 ?",link:{bindApi:"Add platform"},planUsed:"Package usage rate: Number of created",platform:{action:"Action",currency:"Currency Pair",delete:"Delete",edit:"Edit",name:"Name",new:"Add platform"},privateSale:"Internal Sale",privateShare:"Internal Share",publicSale:"Public Sale",publicShare:"Public Share",robot:{alertNoAction:"No robots can to you command",btn:{cancelAlert:"Cancel",cancelPublic:"Cancel",delete:"Delete",kill:"Kill",openAlert:"Monitor",public:"Share"},cancelPublic:"Unshare this robot",checkAll:"Check All",doBatchDelete:"Batch Delete",doBatchRestart:"Batch Restart",doBatchStop:"Batch Stop",doPublic:"Share this robot",doRestart:"Restart",doStop:"Stop",restarting:"Restart ...",reverseCheck:"Reverse Check",stopping:"Stopping ...",tipsCancelAlert:"Cancel Exception Alert",tipsOpenAlert:"Open Exception Alert",title:"Robot",uncheckAll:"Uncheck All"},route:"Trade Route",step1:"Create or copy a strategy",step2:"Bind the exchange platform",step3:"Deploy a server to run strategy",step4:"Done ! Run the strategy now",step5:"Click here to review guide page",tabs:{docker:{action:"Action",btn:{action:"Action",delete:"Delete",offMoniter:"Cancel",openMoniter:"Monitor"},ip:"IP Address",label:"Label",loaded:"Running",location:"Location",new:"Add Docker",newManually:"Add Docker Manually",newPrivate:"Add Private Docker",offline:"Offline",online:"Online",os:"OS",pingTime:"Recent communication",status:"Login",tips:{versionOld:"Need update"},tunnel:"Protocol",ver:"Ver"},dockerNav:"Docker",ecs:{installDocker:"ReInstall",installDockerIng:"Install Docker ...",new:"One-click Rent a docker VPS"},ecsNav:"VPS",fastLink:"Link",platformNav:"Platform",robot:{action:"Action",created:"Created",docker:"Docker",name:"Name",profit:"Profit",public:"Share",refresh:"Last Ping",status:"Status",strategy:"Strategy",tipsRefresh:"Show or hide recent active time"},robotNav:"Robot",strategy:{action:"Action",btn:{backtest:"Backtest",cancel:"Cancel",cancelPublic:"Cancel",copy:"Copy",delete:"Delete",edit:"Edit",makeKey:"Make Key",public:"Share",rebuy:"Rebuy",run:"Run",sale:"Sale"},created:"Created",enableSync:"Open remote editing",gosquare:"Go to square",isDeleted:"Deleted",isInterPremium:"Internal sale",isPublic:"Publicly",isSold:"Sold",isSystem:"System",isTemplate:" Template library",lastModified:"Last Modified",name:"Name",new:"Add strategy",share:"Public",status:{action:"Action",buy:"Owned",expired:"Expired",public:"Publicly",review:"Review",sold:"Sold",system:"System"},statusReview:"Waiting for Review",tipsCancelPremium:"Cancel the sale of this strategy",tipsCancelPublic:"Cancel publish this strategy",tipsCancelSystem:"Cancel embed this strategy",tipsLastModified:"Modified",tipsMakeKey:"Make register code",tipsMakeShare:"Make share code",tipsPublic:"Public for private or for all users",title:"Strategy"},strategyNav:"Strategy"},tips:{custompair:"<b>Currency pair</b> that are not listed, you can add a <b>custom currency pair</b> when creating a robot",docker:"<b>Docker</b>&nbsp;refers to a program deployed on the server to run and manage the <b>Robot</b>",ecs:"<b>VPS</b>&nbsp;refers to a server deployed the <b>Docker</b>",platform:"<b>Platform</b>&nbsp;refers to a trading exchange, and one&nbsp;<b>Strategy</b>&nbsp;can connects multi-exchanges",robot:"<b>Robot</b>&nbsp;refers to a process managed by docker, running custom&nbsp;<b>Strategy</b>",strategy:"<b>Strategy</b>&nbsp;refers to the transaction logic code, Managed by <b>Robot</b>",systemTemplate:"Embed Defualt Template",viewSource:"View Template Source"},totalProfit:"Total profit"},debug:{alertDocker:"Please install a docker and retry !",alertRestart:"Debugging is a separate process, Are you sure to force the debugging process to exit ?",execute:"Execute",restartDebug:"Restart Debug Process",result:"Result",running:"Running ...",selectPlatform:"Please select platform to test !",tips:"The debug code runs directly on the specified docker and the bound exchange, must immediately returns result. The timeout is 3 minutes."},dialog:{account:{GoogleCodeError:"Google twofactor code error !!",bindGoogleConfirm:"After binding Google verification code, can only be tied to the mailbox, determined to do so?",changeAlertThresholdConfirm:"You will receive alert message when account balance less than this value, is it sure to do so ?",changeAlertThresholdError:"Failed !",changeMemberConfirm:"Are you sure to modify shadow member ?",changeNickNameConfirm:"The name of the public display will be replaced with this nickname, are you sure you want to do this ?",changeNickNameError:"Failed to operate, may be repeated with others nickname !",changePasswordConfirm:"After modifying the password, the platform API needs to be re added, is it sure to do so?",changePasswordError:"Current password error!",changePasswordSuccess:"The operation is successful, please log in again and re-add the exchange platform !",changePushSettings:"Strategy push message will be according to this setting, are you sure you want to change the settings?",changePushSettingsError:"Failed !",createApiKey:"Create New ApiKey",createApiKeyConfirm:" Ensure create ApiKey ?",createApiKeyTitle:"For Create Your App",createMemberConfirm:"Are you sure to create shadow member?",deleteApiKeyConfirm:"Ensure Delete ApiKey ?",deleteApm:"Are you sure you want to delete this alert ?",deleteMemberConfirm:"Are you sure you want to delete this shadow member ?",deleteNotify:"Are you sure you want to delete this message ?",deleteQueue:"Are you sure you want to delete this push ?",emptyACL:"ACL is empty",emptyApm:"Are you sure you want to delete all alert ?",emptyNotify:"Are you sure you want to delete all message ?",emptyQueue:"Are you sure you want to delete all push message ?",lockApiKeyConfirm:"Ensure Lock ApiKey ?",lockMemberConfirm:"Are you sure you want to lock this shadow member?",memberRepeat:"Username repeat!",shortPassword:"Password is to weak, please set a password at least 9 chars!",unbindGoogleConfirm:"After the release of Google verification code, account security will be reduced, determined to do so?",unbindWeixinConfirm:"After the unbind the wechat account, robot can not push the message, determined to do so?",unlockApiKeyConfirm:"Ensure Unlock ApiKey ?",unlockMemberConfirm:"Are you sure you want to ulock this shadow member?"},addGroup:{btnConfirm:"Sumit",description:"Strategies can be managed as groupings after add groups",name:"Group Name",title:"Add group"},alertConfirm:" Are you sure you want to do this ?",alertFailure:"Operation failure!",alertSuccess:"Success",alertTitle:"Message",authDesc:"<font color=red>Sensitive information will encrypted after authorization, it's very safe!</font>",btnLogin:"Login",buy:{btnConfirm:"Buy",btnConfirmRenew:"Renew",description:"Strategy:&nbsp;<b><font color=red>{{strategy}}</font></b><br>Author:&nbsp;<b><font color=red><i>{{author}}</i></b></font>{{ email ? ('<br>Email:&nbsp;<font color=red>' + email + '</font>') : ''}}",errorKey:"Invalid Register Code, retry 3 second later",key:"Register Code",success:"Buy success, go to dashboard to use it!!",successRenew:"Renew success, refresh this page to see the effect !",title:"Buy"},cancel:"Cancel",changeGroup:{title:"Change group"},close:"Close",concurrent:"Max Concurrent",concurrentTip:"Policy allows the number of concurrent runs, 0 means no limit",confirm:"OK",confirmBtn0:"Confirm",confirmSlient:"Auto confirmed",confirmTitle:"Confirm",genKey:{btnConfirm:"Make code",days:"Days",description:"<font color=red>The generated registration code will expire after the specified number of days, each registered code can only be used once.</font>",descriptionApp:"</font>The generated registration code will expire after the specified number of days, each registered code can only be used by one device.</font>",descriptionAppCalc:"generate <b>{{days}}</b> days registration code will cost you <b>{{(days*24*(fee/1e8)).toFixed(3)}}</b> CNY.",downDesc:"Download URL",key:"Register code",noPermission:"Insufficient permissions or balance, 10 seconds after the retry!",title:"Generate registration code",urlDesc:"Buy URL"},genKeyApp:{title:"Generate Application registration code"},genShare:{btnConfirm:"Make code",days:"Days",description:"<font color=red>The generated copy code will expire after the specified number of days or exceed max copy times</font>",key:"Copy code",title:"Generate share code",urlDesc:"Copy URL"},input:{google:"Google code",googleTips:"<font color=red>Please enter a six bit Google verification code</font>&nbsp; <a href ng-click=\"jump('reset-twofactor')\" class='label label-warning'>Disable verification?</a>"},inputMasterPass:"Your Login password",invalidDays:"Days must big than 0 !",maxCopy:"Max Copies time",maxCopyTip:"Policy allows the number of copy times, 0 means no limit",platform:{platformRepeat:"Lable is repeat !"},title:{twofactor:"Twofactor verification"},titleAuth:"Authorization"},digiest:{latest:"Latest"},ecs:{btnRentNow:"Rent now",buyFailed:" buy failed, the account balance must be more than 10 CNY, Please recharge and retry !",buySuccess:" Success, please wait auto install task completed, It takes about three to five minutes !",buyTips:"Will be charged by the hour after successful purchase. Are you sure you want to do this?",deleteConfirm:"All contents of this server will be deleted. Are you sure you want to delete this server?",headTips:"Rental cloud servers provided by third-party cloud service providers, it will be deleted automatically when the balance is insufficient. please strictly abide by the laws of your area!",installFailed:"Install failed, can not repeat install",installSuccess:"Install success",region:"Region",reinstallTips:"The redeployment operation will stop all robots running under the server. Are you sure you want to do this?"},edit:{startegy:{logs:"Logs"},strategy:{addCode:"Insert Snippet",addMeta:"Save settings",arg:{button:"Button",default:"Default",description:"Description",edit:"Action",name:"Variable",tips:"Tips",type:"Type"},argTips:"Parameters (drag cross icon to sort)",backtestTolerant:" Some functions in randomized mode may fail randomly, simulating the real-market environment",beauty:"JSFormat",button:"Button",buttons:"Buttons",cloud:"Backtest on cloud",cmdPreview:"Button preview",cmpLeast:"Least",config:"Settings",create:"Create",default:"Default",delKey:"Delete Key",description:"Description",downloadSource:"Download",downloadStrategy:"Export",hideChart:"Hide Market Chart",importStrategy:"Import",noArg:"No Arguments",nodeCloud:"Public Backtest Cluster",optimizeFilter:"Filter",range:"Range",remote:"Remote Edit",save:"Save",showChart:"Draw Market Chart",startBacktest:"Start backtest",startBacktestTolerant:"Backtest faultTolerant",tabBacktest:"Backtest",tabEdit:"Edit Strategy",templateRef:"Template Include",tickReal:"Real Tick",tickSimulate:"Simulate Tick",tips:{addArg:"Click the plus icon to add parameters",addButton:"Click the plus icon to add button",cloud:"Install the editor plug-in, download the source file, and insert the key into the the first line, synchronization will enable!",cloudUpdate:"The current key is empty. If you want to get it, click Update key",copy:"Copy to edit box, save after change",remove:"Delete it"},tootips:{addCode:"Insert Indicator or Demo Strategy",meta:"Save backtest settings to source file"},updateKey:"Update Key",varGlobal:"Strategy Arguments",varTemplate:"Template Arguments",vimOff:"Close Vim Mode",vimOn:"Open Vim Mode"}},editor:{pasteTips:"Support drop or paste images and markdown"},exchange:{796:"796",btc38:"BTC38",btctrade:"BTCTrade",bter:"Bter",chbtc:"CHBTC",futures:{bitmex:"BitMEX",bitvc:"BitVC Futures",ctp:"Futures CTP",okcoin:"OKEX Futures"},huobi:"Huobi",okcoinEN:"OKCoin EN",okex:"OKEX Spot",protocol:"Common",stocks:"Stocks LTS",yunbi:"Yunbi"},footer:{copyright:"© 2015 - ∞ FMZ - All rights reserved",copyrightProduct:"© 2019 - ∞ FMZ - 发明者量化企业版",copyrightProductDemo:"© 2019 - ∞ FMZ - 发明者量化企业版 - (演示版)",icp:""},g:{account:{balance:"Balance",stocks:"Stocks"},add:"Add",apply:"Apply",arguments:"Arguments",cancel:"Cancel",category:"Category",chart:"Chart",checkTips:"Check is true",code:"Code",created:"Created",delete:"Delete",description:"Description",dispatch:"Docker",download:"Download",faultTolerant:"FaultTolerant",feeBuy:"Buy",feeMin:"Min",feeSell:"Sell",font:"Font",fullscreen:"FullScreen",goBottom:"Goto Bottom",goTop:"Goto Top",hide:"Hide",loadMore:"Loading more....",loading:"Loading",log:"Logs",login:"Sign in",manual:"Manual",maxBarLen:"BarLen",message:"Message",modified:"Modified",netDelay:"Net Delay",note:"NOTE",optimize:"Optimize",options:"Options",platform:"Platform",profit:"Profit",refresh:"Refresh",reply:"Replay",rmb:"CNY",run:"Run",save:"Save",search:"Search",searchEmpty:"No result here",searchResult:"Result of <font color='red'>{{ keyword }}</font>",seconds:"Seconds",show:"Show",signup:"Sign up",slipPoint:"SlipPoint",stop:"Stop",template_arguments:"Template Arguments",theme:"Theme"},invoice:{btn:{search:"Search"},col:{balance:"Balance (CNY)",created:"Created",expenses:"Expenses",id:"ID",income:"Income",remark:"Details",type:"Type"},empty:"No Invoice",summary:"Total {{ all_items }} items, Income: <b>{{ income ? income/1e8 : '--'}}</b> Expenses: <b>{{ expenses ? expenses/1e8 : '--' }}</b>",transDesc:"{{ item.remark.points }} Points trans to {{ item.remark.amount/1e8 }} CNY",type:{all:"All",deposit:"Deposit",ecs:"ECS",market:"Ad-budget",robot:"Robot Charge",strategy:"Rent Strategy",system:"System"}},lang:{enUS:"English",jaJP:"日本の",zhCN:"简体中文"},live:{action:{view:"View"},cols:{action:"Action",created:"Created",member:"Member",profit:"Profit",robot:"Robot",strategy:"Strategy"},empty:"No public robots to view",hideAll:"Hide More",showAll:"Show All",status:"Stats",subtitle:"Here is a other members public robot, click to view live transaction information and binding strategy",tips:{sandbox:"This robot is running on the simulating environment...",stopped:"Strategy has stopped"}},log:{type:{buy:"Buy",buyCover:"CloseShort",buyLong:"Long",cancel:"Cancel",error:"Error",message:"Message",profit:"Profit",reboot:"Reboot",sell:"Sell",sellClose:"CloseLong",sellShort:"Short"}},login:{forgotPassword:"Forgot password",pending:"Login...",register:"New Quant? Create an account.",success:"Already login success",title:"Sign in",username:"Username or email address"},main:{btnBegin:"Get Started",carousel:{subtitle1:"FMZ.COM - Financial Management Zen<br>Quant Strategy Development, Quantitative Learning Resources<br> Strategy Rental and Sale, Online Communication Community",subtitle2:"One-click deployment and run your strategy",subtitle3:"Support: JavaScript Python C++ MyLang Blockly",subtitle4:"Seamless Support for China Commodity Futures, Block Chain Assets",title1:"Explore Marvelous Quants World",title2:"Easy use and Stable",title3:"Various programming languages",title4:"Cross market and symbol"},content1:"Unify multi-markets into one API interface<br><b>Share, Sale, Discuss, Learn</b><br>Be the best efficient quantitative platform",content2:"Stable and highly scalable cloud platform<br>Control your robots anytime and anywhere.<br>Language: <b>JavaScript&nbsp;Python&nbsp;C++&nbsp;MyLang&nbsp;Blockly</b>",content3:"<b>Superior<b> stability and compatibility<br>Only focus on logic of algorithms<br>No concerns for underlying details",description1:"Professional",description2:"Marvelous",description3:"Reliable",description4:"Efficient",followWechat:"Follow Wechat",joinQQGroup:"Join Chat Group",joinWxGroup:"Join Weixin",partners:"Platforms Support",products:{description:"Made for professional investment institutions and exchange platform",ribbon:"HOT",title:"Products",view:"View Details"},quantinfo:"All kinds of quant learning resources",tipsSNS:'<i class="fa fa-telegram" aria-hidden="true"></i>&nbsp;<a href="https://t.me/fmzquant_cn" target="_blank" style="color:#ff0000;font-weight:bold">Telegram</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=49f3ee4dc9f4c1b4b01289582072786f1cf349df4ca0d5e4d6e18891136f3e6c" style="color:#ff0000;font-weight:bold">863946592</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=65643596841007e0d6bd90d51183c4caa6d6b2328f6bc2a1a0f1b229966c60e0" style="color:#ff0000;font-weight:bold">456221748</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=7ca2d1e1da54b8f0a4811f69954df50355d02afa77141ad3958400b92f685bac" style="color:#ff0000;font-weight:bold">469046711</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=9536481ba8678742ac0e3b2006b1792f9705f1bdee1468bbca30abf45ac39bed" style="color:#ff0000;font-weight:bold">608262365</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=9b1e45a27629ad6e319393f179f3bdda89a1cabec45634502cb52227b39a80bf" style="color:#ff0000;font-weight:bold">309368835</a>',title1:"Cross-platform",title2:"Cloud deployment",title3:"Stable and flexible"},market:{alert:{confirmSubmit:"After the project is released, if the contact information is obtained by other users, there will be a fee. Are you sure to do this?",insufficientBalance:"Insufficient balance, need at least one operating amount balance, please recharge the balance!",invalidForm:"The form must be filled in.",invalidInfo:"The information is wrong or the unit price is too high!",invalidPrice:"The price setting is incorrect, the unit price cannot be greater than the budget and cannot be lower than the minimum unit price",invalidUnitPrice:"The unit price is set too low, please increase the unit price!",unknownError:"Operation failed, unknown error"},alertSessionCharge:"Getting this information will cost you {{price}} CNY, are you sure you want to view it?",alertSessionFailed:"Failed to get information, please check if you have enough balance",alertSessionSuccess:"To get the information successfully, please follow the contact information displayed.",budget:"Budget",budgetTips:"Set the budget of this information, and it will stop showing when it is exceeded.",clickPrice:"Unit Price",closeItem:"Close this Project",consumedStatus:"Expended {{ consumed }} CNY, participating in {{ sns_hits}} persons",demand:{content:"Demand",title:"Title"},demandsZone:"Demands",editItem:"Edit Project",empty:"No Items",limitPrice:"At least <b>{{price}} CNY</b>",limitUnitPrice:"At least <b>{{min_unit_price}}</b> CNY, currently bidding up to <b>{{max_unit_price}}</b> CNY",limitUnitPriceTips:"Every time a user gets your contact information, the cost you will pay, the index page will be sorted by this",marketIsClosed:"The project is closed",marketIsDelete:"This project has been deleted by the administrator and cannot be edited.",new:{resubmit:"ReSubmit",submit:"Submit"},offer:{content:"Skill",title:"Title"},offersZone:"Offers",openItem:"Publish this Project",riskTips:"Disclaimer: The information of this section is released freely. This platform does not guarantee or verify the authenticity of the content, risk undertaken by yourself.",sessionBrief:"got your contact information",sessionNow:"Communicate immediately",sessionSuccessTips:"You have paid for contact information",sessionSummary:"Already have <b>{{ session_count }}</b> individuals to get your contact information, spend <b>{{ consumed }}</b> CNY, please wait to contact !",side:{allItems:"All Items",closed:"Closed",myPublished:"My Published",mySessions:"My Conversation"},snsHits:"{{sns_hits}} User communicated",snsMethod:"Contact",snsWarning:"Please do not fill in the contact form in this input box. Please fill in the contact form in the bottom input box.",tipsInsufficientBalance:"Your balance is insufficient, this information will not be displayed on the index page",tipsNoSessions:"No one has checked my contact details yet",tipsOverBudget:"The project has reached the maximum consumption expenditure, the information will not be displayed on the index page",tipsRate:" Rating user {{ obj.rate }} star for this project success",tipsTotalRate:"total of {{ rate_count }} users rated the author {{ rate_avg }} points",totalHitsStatus:"All item was visited <b>{{ total_hits }}</b> times.",userAvgRate:"Average Rate",userSessionRate:"Your Rate"},nav:{about:"About",account:"Account",addECS:"Rent VPS",addNode:"Add node",addPlatform:"Add platform",addRobot:"Add robot",addStrategy:"Add strategy",addTicket:"Open Ticket",affiliate:"Affiliate",agreement:"Agreement",api:"API",backtestStrategy:"Backtest strategy",bbs:"Forums",blog:"Blog",competition:"Competition",copyStrategy:"Copy strategy",dashboard:"Dashboard",debug:"Debug Tool",digest:"Digest",disableTwofactor:"Close twofactor",editPlatform:"Edit platform",editStrategy:"Edit strategy",fastlink:"Fast Link",findPassword:"Reset password",index:"Home",invoice:"Invoice",live:"Live",live_oem:"Live",login:"Sign in",logout:"Logout",market:{demand:{edit:"Edit Demand",new:"New Demand"},index:"Offers",offer:{edit:"Edit Offer",new:"New Offer"}},message:"Messages",messages:"Messages",partner:"Partner",products:"Products",resetPassword:"Set pasword",resetTwofactor:"Reset twofactor",returnMarket:"Return Market",route:"Trade Route",sales:"Sales records",sandbox:"Simulated Exchange",signup:"Sign up",sitemap:"SiteMap",square:"Square",square_oem:"Square",status:"Stats",ticket:"Ticket",timeline:"Update Log",tokens:"Tokens records",tools:{alpha:"Analyzing tool",market:"Market Chart",sandbox:"Sandbox",title:"Tools"},trade:"Trade Panel",viewRobot:"Watch robot",viewStrategy:"Strategy",zhihu:"Zhihu"},nodes:{tips:{status:{logout:"Docker {{ node.ip }} status is logout",offline:"Docker {{ node.ip }} status is offline",online:"Docker {{ node.ip }} status is online"}}},notify:{rentStrategySuccess:"Rent success !",syncStrategySuccess:"Updated to the latest version success !"},order:{amount:"Amount",contractType:"ContractType",fee:"Fee",id:"Id",limit:"Limit",market:"Market",net:"Total Value",price:"Price",side:{ask:"Ask",avg:"Avg.",bid:"Bid",deal:"Filled"},state:"State",status:{cancelled:"Cancelled",filled:"Filled"},symbol:"Symbol",time:"Time",type:"Type"},pages:{current:" Page {{ number }}",first:" Home",last:"Last",next:"Next »",previous:"« Previous"},period:{"15m":"15 Minutes","1d":"1 Day","1h":"1 Hour","1m":"1 Minutes","30m":"30 Minutes","3m":"3 Minutes","5m":"5 Minutes"},placeholder:{arg:{canEmpty:"Can Empty",default:"Value",description:"Description",name:"English",tips:"Comment"},authCode:"Auth Code",description:"Description",email:"Email",googleCode:"6 bit Google verification code",manual:"Strategy manual, can only be viewed after purchase",nickName:"Public display name",note:"Record work notes or to-do lists for this strategy",password:"Password",passwordEmpty:"Password (Can be empty)",regEmail:"Email",repassword:"Confirm new password",search:"Search",strategy:"Strategy Name",topicTitle:"Please enter a topic title, if the title can explain the full content, the content can be empty",username:"Username"},platformNew:{accessKey:"Secret Key",accessKeyEncrypt:"Key has been encrypted",add:"Add Platform",addTitle:"Add",configer:"Config Settings",editTitle:"Edit",label:"Label",labelEsunny:"Esunny",labelLTS:"Stock LTS",labelTips:"Custom platform label",platform:"Platform",platformLabel:"Exchange Label",protocol:"Protocol",protocolServer:"Server",save:"Save",selector:"Select Type",tipsAccessKey:"secret key is encrypted to improve the security, modify the configuration required to re enter the key, click cancel to give up the modify.",type:{cryptocurrency:"Cryptocurrency(BTC)",encryptTips:"This message will encrypt save",foreignfutures:"Futures Esunny",futures:"Futures CTP",protocol:"Custom Protocol",simulate:"Futures(simulate)",stocks:"Stocks"}},platforms:{trade:"Trade"},position:{long:"Long",longyd:"Long Yesterday",price:"Price",profit:"Profit",short:"Short",shortyd:"Short Yesterday"},pricing:{alertInvalidCode:"Invalid Coupon-codes Code",applyPromotionCode:"Apply",charge:"Payment",chargeAmount:"Amount",chargeTips:" each robot, {{fee/1e8}} CNY per hour.",history:"Payment history",historyTips:"The following will show you all the success history of the payment, the total amount paid",noPromotionProject:"No promotional discounts at present",orderPromotion:"Discount",promotionCode:"Coupon-codes",promotionTips:"The Coupon-codes is valid. if you paying more than <b>{{ promotion.min }}</b> CNY, the price is <b>{{ promotion.discount }}</b>% off",successTips:"Payment success, your plan is updated!"},rent:{balanceTips:"Are you sure you want to pay with the balance?",buyFail:"Failure to purchase, please ensure that the balance is sufficient !",buySuccess:"Buy success, go to dashboard to use it!!",dayTips:"at least {{periodMin}} days",expireTips:"Strategy Expire Date",internalRent:"Internal rent",internalRentTips:"This strategy does not show the name in this page, can be viewed in the control center after renting",invalidKey:"Invalid Register Code, retry 3 second later",newExpireTips:"after payment, you can use the strategy to"},resetpassword:{btnSendEmail:"Send Email",mailSent:"Has been sent the link to your mailbox, if you can not find in the inbox, it is possible to be treated as spam, please go to the trash to find",returnLogin:"Return to login",title:"Reset password"},resettwofactor:{alertError:"User name or password error or mailbox does not exist !!",btnSendEmail:"Send Email",mailSent:"Has been sent the link to your mailbox, if you can not find in the inbox, it is possible to be treated as spam, please go to the trash to find",returnLogin:"Return to login",title:"Reset twofactor"},returnHome:"Return Home",robot:{action:{alertOff:"Cancel",alertOffTitle:"Cancel the abnormal alarm",alertOn:"Monitor",alertOnTitle:"Turn on the abnormal alarm function",exportArg:"Export",hideError:"Hide error logs",importArg:"Import",kill:"Kill",restart:"Restart",saveArg:"Save",showError:"Show error logs",stop:"Stop"},alert:{argError:"Parameter error, please check before submission!",argUpdateError:"Can not modify when robot is still running!",argUpdateSuccess:"The parameters successfully update, restart the robot to effect!",dockerVersionOld:"Requires docker version 3.0 above !",noPermission:"No Permission !",platformDelete:"The robot association exchange has been deleted !",platformRepeat:"The platform is already added !",robotNotfound:"Robot not found",senCmdFailure:"Failed to send command, it may be a command to repeat or the robot is not running state",senCmdSuccess:"To send commands successed, please wait for the robot to respond!",sendCmdConfirm:"Determined send command <b>{{cmd}}</b> ?",sendCmdStatusError:"Command must be sent in the state that the robot is running !"},alertFromAPI:"This robot is created by API, can only stop or modify strategy arguments !",autoDistribution:"Auto-Distribution",autoRefresh:" Auto refresh Log (5s)",created:"Created:",date:"Date",docker:"Docker",dockerOffline:"Docker is offline, please re-select docker",dockerOn:"Docker on",endTime:"Stopped:",filter:"Filter",in_arrears:" The robot has arrears and cannot communicate with the docker. Please recharge or stop the robot to ending the billing.",jumpTips:"Goto Page",log:{amount:"Amount",date:"Date",message:"Message",platform:"Platform",price:"Price",type:"Type"},logsEmpty:"No logs...",maxPoint:"Page Points",maxPointTips:"Max Points Chart will render per Page",musicAlert:" Alert",pages:"All: {{count}} items, {{ pages }} Pages",period:"Bar Period",platform:"Platform",playTips:"Click to play",publicBy:"Public by",publicBySuffix:"Bind strategy",restarting:"Restart ...",robotName:"Robot name",startAt:"Start at",started:"Started:",status:{complete:"Complete",error:"Error",queue:"Queue",running:"Running",stopped:"Stopped",stopping:"Stopping",stoppped:"Stopped"},statusTitle:"Status",strategy:"Strategy",strategyLastModified:"Strategy last modified",strategyUpdated:"Last modified:",tab:{changeOption:"Change option",cmd:"Interactive Command",debug:"Debug",debug_stderr:"Stderr",debug_stdout:"Stdout",logs:"Logs",profitChart:"Profit chart",status:"Status",strategyChart:"Strategy chart"},tips:{addPlatform:"Click plus to add exchange platform, red color is major exchange"},tipsRestart:"After the update, please restart the robot for effect.",updatedAt:"Updated",usePublic:'this robot is running on the public docker ({{nodeAddress}}), to ensure stability, suggest&nbsp;<a href="m/add-node">deploy private docker</a>.',wait:"Wait",waitingLogs:"Waiting logs ..."},robotNew:{add:"Add robot",addPlatform:"Add Exchange",adding:"Adding ...",arg:"Parameters",docker:"Docker",dockerAuto:"Auto",heading:"Add robot",name:"Label",needPython:"The Docker server needs to install Python",noArg:"The library has no parameters",period:"KLine Period",platform:"Platform",strategy:"Strategy",tipsAddPlatform:"Click plus to add exchange platform, red color is major exchange"},sales:{alreadyExpired:"Expired",cols:{buyTime:"Buy Time",concurrency:"Concurrency",createdTime:"Created Time",expireTime:"Expired Time",key:"Key",strategy:"Strategy",tokenType:"Type",used:"Used",username:"Member"},
concurrencyTips:"Max concurrency robots used this strategy, 0 means no limit",dialogTitle:"Change",empty:"You have not sold any strategies or have no users used your rental strategy"},sandbox:{actionBuy:"Bid",actionSell:"Ask",amount:"Amount",ask:"Ask",assets:{action:"Action",currency:"Currency",deposit:"Deposit",fee:"Fee",free:"Available",frozen:"Frozen",overflow:"USD is allowed to hold up max to 10,000, and other currencies hold up max to 10, and if there is an excess, please simulate the withdrawal of excess currency and then the simulated deposit",title:"Assets",withdraw:"Withdraw"},bid:"Bid",empty:"Empty",frozen:"Frozen",high:"High",history:"History",last:"Last",low:"Low",net:"Assets",nomore:"No more data",opens:"My Orders",priceAsk:"Ask",priceBid:"Bid",trade:"Trade",vAmount:"Amount",vdeposit:"Virtual Deposit",vol:"24H Volume",volAsk:"Total Amount",volBid:"Total QuoteCurrency",vwithdraw:"Virtual Withdraw"},seo:{main:{description:"The Place For Learning Quant Trading and Crypto Trading, Support BTC, ETH, LTC, BCH, EOS, etc...",keywords:"CTP, Futures, Crypto Trading, BTC, LTC, ETH, EOS, ETC",square:"the largest open source strategy market for digital currency, BTC, LTC, ETH, etc..."}},setpassword:{btnSet:"Reset password",returnLogin:"Log in",success:"Change password success! The platform API key encrypt depends on the login password, please log in to modify the key information of the platform !!!",title:"Reset password"},share:{copySuccess:"Copy success, go to use it !",internalShare:"Internal copy",internalShareTips:"This strategy does not show the name in this page, can be viewed in the control center after input copy code",invalidKey:"Invalid Copy Code, retry 3 second later"},signup:{agreementCheck:"Agreed to the",agreementTitle:"User Agreement",btnHasAccount:"Login",btnSignup:"Sign up",title:"Sign up"},sns:{email:"Email",phone:"Phone",qq:"QQ",settings:"Push Settings",tel:"Tel",telegram:"Telegram",weixin:"WeChat"},square:{action:{buy:"Buy",copy:"Copy",rebuy:"Rebuy"},cancelSearch:"Cancel searching",cols:{action:"Action",member:"Author",modified:"Last Modified",name:"Name",type:"Category"},copyNum:"The number of times the strategy was copied",returnSquare:"Square",review:"Review"},strategy:{actionCopy:"Copy and Backtest",alert:{addSnippet:" Are you sure you want to override it with this code ?",busy:"Backtest server is busy, please retry later",expired:"Strategy Expired",maxChartItemError:"Cloud backtest allows up 8000 chart items",maxLogItemError:"Cloud backtest allows up 8000 log items !",maxProfitItemError:"Cloud backtest allows up 8000 profit log items",offline:"Backtest server is offline",rangeError:"Backtest time range error !"},alertBlocklyTemplate:"Please select the template that supports Blockly",alertCastTemplate:"After converting to template library, After saving, the operation is irreversible",alertChangeCodeType:"The language type cannot be changed. Please create a new strategy !",alertDel:"After deletion, all strategies with this group will be moved to the default group. Are you sure?",author:"Author",blocklyTips:"Blockly is an auxiliary feature that only opens a limited function to help you get started faster",btnLogEvent:"Log Event",cmd:"Buttons",deleteArgConfirm:"Are you sure you want to deleting this parameter ?",deleteCmdConfirm:"Are you sure you want to deleting this command ?",forked:"Forked",goBack:"Back",group:{add:"Add group",applySortOrder:"Save Group Order",change:"Rename",default:"Default",del:"Delete",emptyTips:"No item under this group. You can drag the strategy directly to the group name for classification!",rent:"Rent",settings:"Group Setting"},loginCopy:"Login to Copy",noArgs:"No parameters",noDescription:"Description is empty",noManual:"Manual is empty",notFound:"Strategy not found",relevants:"Related recommendations",source:"Source",tips:{alreadyBuy:"This strategy has been purchased on {{ buy_date }}. Expires: {{expire_date}}",logEvent:"Log BitMEX Funding Event",makerFee:"Maker Fee, 0.01 Means 0.01%",premium:'The current strategy is a payment requiring strategy, please rent the strategy in the &nbsp;<a href="/square">Strategy square</a>&nbsp; Click here to buy',review:"Premium strategy is in review ...",snapshot:"Strategy is removed !!",takerFee:"Taker Fee, 0.01 Means 0.01%"},type:{all:"All Categories",common:"Common",cryptocurrency:"Digital currency",futures:"Futures",futuresStocks:"Futures/Stocks",na:"N/A",snapshot:"Snapshot",stocks:"Stocks",template:"Template"},wasmWarning:"This browser does not support <b>WebAssembly</b>. to achieve the fastest test-back speed, recommended to upgrade to a browser that supports this feature!"},ticket:{alertAddSuccess:"Open Ticket Success !",alertClosed:"Ticket is closed",closeConfirm:"Customer service will not process this ticket after closed, are you sure ?",closeDelete:"Are you sure you want to delete this ticket?",closeTicket:"Close Ticket",closedByAdmin:"Administrator closed the ticket",closedByUser:"You closed the ticket",deleteTicket:"Delete Ticket",new:{category:"Category",content:"Message",selectNode:"Select category",title:"Subject"},reply:"Post Reply",status:{all:"All",closed:"Closed",feedback:"Feedback",open:"Open",processing:"Processing"},step:{accepted:"Accepted",close:"Close",closed:"Closed",confirmed:"Confirmed",open:"Wait Accept",process:"It's in troubleshooting!",processed:"Processed",wait:"Pending for confirmation"},topicEmpty:"No ticket here"},timeline:{latest:"Latest"},tips:{account:{balance:"Available Balance",stocks:"Available Stocks"},addPlatform:"Click to add exchange platform, red color is major exchange",basePeriod:"bottom level K-line cycle, used to generate tick",checkbox:"Check is True",currMargin:"Margin occupied by current position",customSymbol:"Custom Currency Pair",customSymbolSwitch:"Custom",dispatch:"Private docker can also accept backtest",dockerMoniterOff:"Open offline alert",dockerMoniterOn:"Cancel offline alert",faultTolerant:"fault-tolerant ratio, 0.5 means 50% fail, max value is 1",getrecords:"GetRecords default period",hideChart:"Hide show market chart",maxBarLen:"GetRecords max return length",maxChartItem:"Max Chart Log Items",maxLogItem:"Max Log Items",maxProfitItem:"Max Profit Log Items",maxvalue:"Max",minvalue:"Min",netDelay:"Simulate networkd delay milliseconds",opt:{maker:"Maker",taker:"Taker"},payLoading:"Loading the payment page, please wait ...",returns:"Returns",robotLoading:"Loading the data from docker, please wait ...",showAdv:"Show Hide Advanced Option",slipPoint:"The default sliding point is 0, if the 1 refers to the opponent price cost increase 1 times PriceTick",stepvalue:"Step",tickOption:"The simulation level is generated based on a one-minute K-line simulation. The real-market level is backtested based on real market data. The maximum-level 20M data can be used for each contract at the real-market level (no limit range)."},title:{index:"FMZ(Financial Management Zen) - The Place For Learning Quant Trading"},tokens:{empty:"You have not make any strategy key code"},trade:{accountInfo:"Account Info",alertRestart:"Terminal is a separate process, Are you sure to force the terminal process to exit ?",assets:"Assets",autoRefresh:"Auto Refresh Market",coverToday:"Cover Today",fastSync:"Fast-Tunnel Connected",flowRate:"Flow Rate",flowRateDesc:"The interval between API calls",history:"Trade History",marginLevel:"Leverage",op:{buy:"Buy",close:"Close",closelong:"Close Long",closeshort:"Close Short",open:"Open",openlong:"Open Long",openshort:"Open Short",sell:"Sell",trade:"Trade"},openInterest:"OpenInterest",orders:"Open Orders",positions:"Positions",refresh:"Refresh",refreshPrivate:"Refresh Asset",restartDebug:"Restart Terminal Process",settings:"Settings",symbolInfo:"Contract Info",tip:{error:"Error when fetch information",market:"Market Trade",marketShort:"Market",refresh:"Beta version Market and Account Info need manually refresh",retry:"Account not login, Please refresh and retry again !"},update:"Update"}}},locales_zh_CN={ui:{account:{addShadowTitle:"添加",affiliate:{image:"推广素材演示",init_balance:"注册加送(元)",level:"等级",needPoints:"需积分",returnPoints:"充值返分",rules:"等级规则"},alert:{apmEmpty:"告警推送队列为空 !",bindGoogleSuccess:"已经成功绑定谷歌验证码, 解除绑定请输入谷歌验证码 .",msgEmpty:"消息为空, 没有发现通知消息 ! ",notBindWeixin:"您还没有绑定微信, 无法接收推送与告警消息 !",queueEmpty:"消息推送队列为空 !",resend:"6分钟后重试",ticketMsgEmpty:"工单消息为空 !"},alertThreshold:"预警阈值(元)",alertThresholdDesc:"当账户可用余额小于此值时, 您将会收到邮件与微信通知, 设置为0禁止用此功能, 没有充值或者更改此设置的情况下, 24小时内只通知一次",bindGoogleCode:"绑定谷歌验证",bindGoogleStep:"<b>首先您需要在您的手机上下载并安装GOOGLE身份验证器应用程序</b>: <br> 1. 在您的手机上打开 App Store (iOS) 或 Play 商店 (Android)<br> 2. 搜“Google Authenticator(身份验证器)”。 WP8搜“验证器”<br> 3. 下载并安装该应用程序<br> <b>安装完成后，您需要对该应用程序进行如下配置：</b><br> 1. 打开程序, 在应用程序中，点击“添加新账户 (iOS 下是 + 号)” 点击 “扫描条形码”。<br> 2. 将手机上的相机镜头对准上图扫描该条形码。<br> <b>无法扫描可以手动添加账户，输入密匙：<font color=red>{{ googleKey }}</font></b>",btnAddShadow:"创建子账户",btnChangeShadow:"修改子账户",btnUnbind:"解除绑定",cancelChangeSahdow:"取消修改",change:"修改",changeNickname:"修改昵称",changePassword:"修改密码",changeShadowTitle:"修改",changeThreshold:"确定",cols:{action:"操作",alive:"活跃",date:"日期",lastLoginIp:"最近登录",lastLoginTime:"登录时间",status:"状态",username:"用户名"},createdAt:"创建于:",currentPassword:"旧密码",emptyAlert:"清空告警",emptyPush:"清空推送",emptyReply:"清空通知",emptyTicketNotify:"清空工单信息",go:"转到",googleCode:"谷歌验证码",levelTips:"您的账号等级",lock:"锁定",newNickname:"新昵称",newPassword:"新密码",points:"积分",pointsTips:"可兑换积分",promotionRights:'通过此链接注册的新用户可免费获取 <b color="red">{{money}}</b> 元的可用额度',promotionTips:"邀请好友请使用此链接注册并充值(非官方打折)您将获取积分(充值1元积1分), 积分可直接以10:1比例兑换成可用余额, 有效时间6个月.",sendAt:"发送于",sentAt:"发送于:",shadowInfo:"用户信息",shadowPermissions:"操作权限",sns:{bound:"已绑定",notBound:"还没有绑定",send:"发送",telegramSearch:"联系",wechatSearch:"扫码关注微信"},tabs:{affiliate:"推广返佣",alert:"告警消息",apikey:"API 接口",google:"谷歌验证",license:"授权信息",message:"消息中心",nickname:"管理昵称",notify:"站内通知",password:"修改密码",push:"推送消息",pushSettings:"推送设置",settings:"额度预警",shadow:"子账户组",ticket:"工单消息",weixin:"微信绑定"},transPoints:"兑换积分为余额",transPointsBtn:"兑换",transPointsFail:"兑换失败, 请检测输入是否正确 !",transPointsSuccess:"兑换余额成功",transPointsTo:"兑换为",unbindGoogleCode:"解除谷歌验证",unboundGoogle:"解除谷歌二次验证码",unboundGoogleSuccess:"解除二次验证成功",unlock:"解锁",vpointsTips:"历史总积分"},addNode:{bit:"位",dockerAddr:"地址",dockerCmdTips:"-p为可选参数",dockerPassword:"你的登录密码",downloadTips:"下载并运行命令",head:"布署的私有托管者不受本平台服务器性能的影响, 托管者直接与交易所进行通信, 只在本地保存日志信息.",headArch:"版本",headCmd:"运行命令",headOS:"操作系统",speedTips:"如果您的服务器在境外连接&nbsp;<b>node.fmz.com</b>&nbsp;不稳定, 可以尝试&nbsp;<b>node-hk.fmz.com</b>&nbsp;我们的香港备用节点",step1:"第一步",step2:"第二步",step3:"第三步",stepFinished:"完成部署",stepReturn:"返回首页刷新",update:"更新时间",updateLog:"更新日志",version:"最新版本",versionCLI:"命令版",versionGUI:"界面版",wxTips:"关注下方微信号(或搜索公众号botvs)  绑定后可查看机器人状态与接收策略推送消息 ! "},alert:{agreementDocker:"您现在使用的是公用免费服务器托管, 为了更加稳定, 请尽快布署自己的私有托管服务!",btLeaveMesssage:"检测到有未完成的回测任务, 直接离开此页面系统将强制停止此任务..\\n确定要离开此页面吗?",changePlatform:"确定修改该交易所的配置? ",dialog:{inputError:"输入的 {{inputname}} 不正确, 请3秒后重新输入!"},fileForbidden:"禁止的类型, 请上传图片或多媒体类型的文件 !",genKey:"确定要生成密钥吗? 此秘钥可使第三方插件更新此策略源码.",insufficientBalance:"余额不足 ! ",invalidForm:"表单不完整, 保存失败 !",invalidInput:"输入不正确",leaveMesssage:"检测到内容被更改但还没有保存, 离开将丢失所有改动.\\n确定要离开此页面吗?",login:{incorrect:"用户名或者密码错误!",locked:"该用户被锁定禁止登录, 请联系管理员!",twofactorError:"验证码错误, 3秒后重试 !",unknownError:"未知错误, 3秒后重试 !"},logoutError:"退出时发生错误 {{ error }}, 要强制退出吗?",noDocker:"您还没有添加托管者",noPlatform:"您还没有添加交易所",noStrategy:"您还没有添加新策略",planTrialExpired:"你的免费试用已过期, 请您点击下面的续费按钮进行续费, 逾期3小时后运行中的机器人将被强制停止 !",platformPeriodError:"{{name}} 不支持选定的K线周期",retry:"操作失败, 请稍后重试 !",robot:{create:{nameRepeat:"创建失败, 机器人重名了, 请重新命名 !",noDocker:"没有在线可用的托管者, 请布署托管者 !",strategyExceed:"超出该策略允许的最大并发个数, 请联系策略作者 !",strategyExpired:"该策略已过使用期, 请联系作者重新购买 !",success:"创建成功 !",syntaxError:"创建成功, 但指派时发生错误, 可能是策略存在语法错误, 请修改策略后重启机器人 !"}},selectPublicDocker:"请选择一台公用服务器来运行策略 !",shadowMember:"您是子账户, 只能操作被允许的机器人 !",signup:{authCodeWrong:"授权码错误",emailWrong:"邮箱不存在!",inputWrong:"不合法的输入",limit:"一小时内最多只能注册3次!",passwordShort:"密码太短了, 大大降低安全系数, 请设置一个超过9位数的密码!!",refWrong:"推荐人信息不正确, 请点击右上角注册!",repeat:"用户名或邮箱重复!",unCompleted:"信息不完整!"},startegy:{emptyStringArg:"字符串参数不能为空 !",historyEmpty:"获取历史数据失败或为空, 请稍后或更改时间段重试 !",invalidArg:"数字参数不正确 !",logs:"回测日志",longCommand:"指令过长, 最多支持200个字符 !",notSupportWorker:"不支持Worker, 请升级至支持标准HTML5的浏览器",platformEmpty:"请点击红色加号按钮添加需要回测的交易所, 再点击开始回测 !",previewCommand:'实盘时会向机器人发送命令 "<b>{{cmd}}</b>" ',tickSupport:"只支持商品期货 与 OKEX/Huobi的币币Tick模拟 !"},strategy:{busy:"系统忙, 请稍后重试 !",checkTemplate:"{{strategy}} 引用为快照模式, 取消引用并保存后将从列表中删除, 您将无法恢复引用 !",copyAlert:"实盘运行前请务必检测此策略代码的安全性, 确定要复制并保存吗 ?",invalidArgBoolean:"不合法的布尔值,必须为true或者false ",invalidArgName:"非法变量名, 变量名首字母必须为字母(a-z A-Z)，下划线(_)，或者美元符号($)开始",invalidArgNumber:"不合法的数字",invalidName:"请输入策略要保存的名称 !",invalidSelect:'下拉框类型必须是以 "|" 隔开的一个字符串, 如aaa|bbb',invalidSource:"策略内容不能为空 !",lostTemplate:"丢失 {{num}} 个引用的模板, 请检查策略模板引用参数是否正确 !",notfound:"没有找到该策略",outofRange:"回测范围超出低层K线周期覆盖的范围 {{range}}, 请降低精度调高低层K线周期 !",outofTickSize:"实盘级 Tick 回测因为数据量过大, 只允许 7 天内的回测 !",outofTimeLine:"低层基于1分钟K线生成的tick最多从2016-02-22号开始, 如果需要更大范围测试请选择更高的低层K线周期, 这可能会降低精度!",platformNotSupport:"暂不支持该平台回测!",platformRepeat:"已经添加过: {{platform}}",repeatArg:"变量名或者描述重复, 确定要覆盖旧的变量吗?",saveRepeat:"策略重名了, 请更改策略名称! ",saveSuccess:"保存成功 !",saveSuccessWithSync:"保存成功, 为了防止最新源码被覆盖, 同步秘钥已经改变 !",uncompletedArg:"除了备注所有项都是必填项"},ticketNodeEmpty:"请选择种类进行操作!",titleEmpty:"标题不能为空!",topicNodeEmpty:"请选择节点进行操作!",updateKey:"该操作会导致之前密钥失效, 确定要这样做吗? "},args:{boolean:"布尔型(true/false)",button:"按钮(button)",encrypt:"加密串(string)",number:"数字型(number)",selected:"下拉框(selected)",string:"字符串(string)"},asset:{free:"可用",frozen:"冻结",symbol:"品种"},backtest:{account:{closeProfit:"平仓盈亏",commission:"手续费",currMargin:"保证金",currency:"交易品种",name:"名称",positionProfit:"持仓盈亏",quoteCurrency:"定价货币",returns:"预估收益",status:"账户信息"},chart:"行情数据",closeProfit:"平仓盈亏",collect:"正在获取历史数据",compiling:"正在编译, 耐心等待...",completed:"已完成",coverProfitChart:"平仓盈亏",download:"下载结果",downloadLogs:"下载日志",elapsed:"耗时(秒)",faultTolerantTesting:"容错回测, 耐心等待...",loading:"正在加载回测系统 ...",logCount:"日志总数",logExceed:"超过最大限度",logs:"日志信息",maxDrawdown:"最大回撤",noLogs:"暂无日志",pnlChart:"浮动盈亏",profit:"利润",profitChart:"收益曲线",progress:"进度",pullingResult:"回测完成, 接收日志...",remain:"剩余",returns:"预估收益",running:"正在回测, 回测完成后将显示",sharp:"夏普",statistics:"初始净值 : {{statistics.totalAssets}}, {{isCoverProfit ? '平仓盈亏' : '累计收益'}} : {{(statistics.totalReturns * 100).toFixed(3)}} %, 年化收益({{statistics.yearDays}}天) : {{(statistics.annualizedReturns * 100).toFixed(3)}} %, 夏普比率 : {{(statistics.volatility == 0 ? '--' : statistics.sharpeRatio.toFixed(3))}}, 年化波动率 : {{(statistics.volatility == 0 ? '--' : statistics.volatility.toFixed(3))}} %, 最大回撤 : {{(statistics.maxDrawdown * 100).toFixed(3)}} % {{((typeof(showWinningRate) !== 'undefined' && showWinningRate) ? (', 胜率 : ' + (statistics.winningRate * 100).toFixed(3) + ' %') : '')}}",stopped:"被中止",strategyChart:"策略图表",summary:"状态信息",tasks:"回测任务",tips:{chart:"重新组合过的行情信息",myvars:"My语言变量",profit:"LogProfit打印的值",profitChart:"LogProfit打印的数字",returns:"预估收益指按最新价格全部平仓后的收益(含手续费), 期现混合时只显示现货总利润",sharp:"根据LogProfit记录的收益计算"},tradeCount:"交易次数",updated:"更新于",winningRate:"胜率"},bbs:{all:"全部",chinese:"中文区",copyright:"版权声明: 文库原创内容版权归本平台所有, 未经本平台授权不得随意转载, 如有侵权请联系我们.",created:"创建于",edit:"编辑",hideTitle:"该节点内容列表仅自己可见",hits:"次点击",latest:"最新话题",nav:"节点导航",new:{cancel:"取消",content:"内容",editMarkdown:"编辑 Markdown",node:"节点",pending:"提交中...",previewMarkdown:"预览 Markdown",selectNode:"选择节点",statusBlock:"该主题已经由管理员设置为 <b>{{topicStatus == 1 ? '锁定' : '删除'}}</b> 状态, 无法进行修改或回复 !",submit:"提交",title:"标题",vimOff:"关闭 Vim 模式",vimOn:"开启 Vim 模式"},newDigest:"我要投稿",newTopic:"创建主题",orderHot:"最热",orderLatest:"最新",return:"返回",topicEmpty:"内容为空或仅作者可见",updated:"更新于"},btn:{continueUseFreeDocker:"继续使用公用主机运行"},comment:{alertExpired:"该主题时间太久, 禁止此操作 !",confirmDelete:"确定要删除这条评论吗?",delete:"删除回复",forbiddenFile:"禁止的类型, 请上传图片类型 !",forbiddenReply:"该主题可能已经锁定或者删除, 无法回复 !",loginReply:"请登录后发表评论",reply:"回复",replyEdit:"编辑回复",say:"说点什么吧..."},const:{alipay:"支付宝",available:"可用",balance:"余额",bills:"账单",buynew:"购买",consumed:"已消费",consumedAbout:"约至",date:"日期",day:"天",doller:"美元",ecs:{status:{expired:"已过期",failed:"创建失败",installing:"安装中",pending:"布署中",running:"运行中",starting:"启动中",stopped:"已停止",wait:"待安装"}},email:"邮箱",hour:"小时",hours:"小时",in_arrears:"欠费",ms:"毫秒",node:{line:{cdn:"加速",direct:"直连",unknown:"未知"}},password:"密码",pay:"支付",paymentAmount:"金额",paymentConcurrent:"并发",paymentDate:"日期",paymentDays:"天数",paymentMethod:"途径",paypal:"Paypal",paypalTips:"只支持非中国用户付款",privateDocker:"私有托管者",publicDocker:"公用托管者",publicUse:"公用",range:{last30days:"最近30天",last7days:"最近7天",lastmonth:"上月",lastyear:"最近一年",thismonth:"当月",thisyear:"今年",today:"今天",yesterday:"咋天"},region:{"cn-hangzhou":"中国杭州","cn-hongkong":"中国香港"},renew:"续费",rent:"租用",report:{coverProfit:"平仓盈亏",event:"事件",maxDrawdown:"最大回撤",maxProfit:"最高收益",totalCoverProfit:"累计平仓利润",totalProfit:"累计收益",vLineTips:"虚线指最大回撤区间"},rmb:"元",security:"安全",selectDocker:"选择公用服务器",share:"获取源码",summary:"概览",token:{typeApp:"应用码",typeCopy:"复制码",typeRent:"租售码"},weixin:"微信",weixinQRClickTips:"点击支付按钮生成二维码",weixinQRMakingTips:"正在生成二维码, 请稍后扫码支付 ...",weixinQRTips:"微信扫码支付",welcome:"欢迎回来 !"},dashboard:{addRobot:"创建机器人",alert:{alreadyRunning:"机器人已经在运行!",deletedRobotError:"删除失败, 机器人可能还没有停止",deletedWithLog:"删除成功, 但无法与机器人关联的托管联系, 请手动删除文件 {{id}}.db3 !",dockerBusy:"请先停止所有使用该托管者的机器人 !",exceedConcurrency:"超出该策略允许的最大并发个数, 请联系策略作者 !",insufficientBalance:"余额不足, 请充值后重试 !",internalError:"内部错误!",killRobot:"强制结束可能会导致日志不同步, 确定要强制停止这个机器人吗?",noDocker:"找不到在线可用的托管者!",passwordNeed:"使用公用托管者需要验证密码, 请重新登录",planExpired:"您的套餐已过期, 只能添加模拟盘, 实盘请在控制中心续费后操作 ! ",shareSuccess:"提交成功, 请公开与此策略相关的实盘机器人, 以便管理员进行审核上架!",stopError:"停止失败, 关联的托管者可能已经离线, 请确认并删除离线的托管者 !",stopRobot:"确定要停止这个机器人吗?",strategyBusy:"请先删除所有使用该策略的机器人!!",strategyExpire:"策略已过期, 请联系作者重新购买!",strategyUpdate:"策略更新于: {{date}}"},alreadyBuy:"已购买",alreadyExpired:"已过期",appSale:"软件注册",charge:"充值",chart:"行情图表",confirmBatchDelete:"确定要删除这 {{ num }} 个机器人吗?",confirmBatchReboot:"确定要重启这 {{ num }} 个机器人吗?",confirmBatchStop:"确定要停止这 {{ num }} 个机器人吗?",confirmCancelPublicRobot:"确定要取消公开这个机器人的交易日志吗?",confirmCancelPublicStrategy:"确定取消公开或者售卖这个策略吗?",confirmDeleteDocker:"删除之前请先停止所有此托管者上的机器人, 确定要删除这个托管者吗 ?",confirmDeletePlatform:"确定要删除 {{platform}} 的配置吗?",confirmDeleteRobot:"确定要删除这个机器人吗?",confirmDeleteStrategyPremium:"<font color='red'><b>{{strategy}}</b> 为收费策略, 确定要删除吗?</font>",confirmDeleteStrategySelf:"确定要删除 <b>{{strategy}}</b> 吗?",confirmMoniterDockerOff:"关闭监控后，如果托管者不正常退出, 将不会收到任何通知, 确定要关闭吗 ?",confirmMoniterDockerOn:"打开监控后，如果托管者不正常离线, 邮箱与绑定的微信将收到通知, 确定要打开吗 ?",confirmMoniterRobotOff:"关闭监控后，如果机器人不正常退出, 将不会收到任何通知, 确定要关闭吗 ?",confirmMoniterRobotOn:"打开监控后，如果机器人非手工操作退出, 邮箱与绑定的微信将收到通知, 确定要打开吗 ?",confirmPublicRobot:"确定要公开这个机器人的交易日志吗?",confirmPublicStrategy:"确定要分享此策略&nbsp;<font color='red'><b>源码</b></font>&nbsp;吗?",confirmReboot:"确定要重启这个机器人吗?",confirmSaleStrategy:"请选择你的出售方式",consumedAbout:"个机器人大约可使用",expiredTime:"过期时间",freeTip:"您的免费试用截止日期:",inputBatchDeleteRobot:"删除该机器关联的日志文件 ? ",inputDeleteRobot:"删除该机器人关联的日志文件 {{id}}.db3 ? ",link:{bindApi:"绑定API"},planUsed:"套餐使用率: 已创建个数",platform:{action:"操作项",currency:"交易对",delete:"删除",edit:"修改",name:"名称",new:"添加交易所"},privateSale:"内部出售",privateShare:"内部分享",publicSale:"公开出售",publicShare:"公开分享",robot:{alertNoAction:"没有满足条件可以操作的机器人",btn:{cancelAlert:"取消",cancelPublic:"取消",delete:"删除",kill:"杀掉",openAlert:"监控",public:"公开"},cancelPublic:"取消公开此机器人",checkAll:"全选",doBatchDelete:"批量删除",doBatchRestart:"批量重启",doBatchStop:"批量停止",doPublic:"公开此机器人到实盘围观",doRestart:"重启",doStop:"停止",restarting:"重启中...",reverseCheck:"反选",stopping:"停止中...",tipsCancelAlert:"取消异常报警",tipsOpenAlert:"打开异常报警功能",title:"机器人",uncheckAll:"取消"},route:"交易终端",step1:"首先创建或复制一个策略",step2:"绑定策略运行的交易所",step3:"布署策略运行的服务器",step4:"创建实盘运行的策略",step5:"点击这里重新展示向导",tabs:{docker:{action:"操作",btn:{action:"操作项",delete:"删除",offMoniter:"取消",openMoniter:"监控"},ip:"IP地址",label:"标签",loaded:"机器人",location:"地理位置",new:"布署托管者",newManually:"手动布署托管者",newPrivate:"布署私有托管者",offline:"离线",online:"正常",os:"操作系统",pingTime:"最近通信",status:"状态",tips:{versionOld:"不是最新版本"},tunnel:"协议",ver:"版本"},dockerNav:"托管者",ecs:{installDocker:"重新布署",installDockerIng:"部署中 ...",new:"一键租用托管者"},ecsNav:"服务器",fastLink:"快捷方式",platformNav:"交易所",robot:{action:"操作",created:"创建日期",docker:"托管者",name:"名称",profit:"盈利",public:"围观",refresh:"最近活跃",status:"状态",strategy:"策略",tipsRefresh:"显示或隐藏最近活跃时间"},robotNav:"机器人",strategy:{action:"操作项",btn:{backtest:"回测",cancel:"取消",cancelPublic:"取消",copy:"复制",delete:"删除",edit:"编辑",makeKey:"制码",public:"公开",rebuy:"续费",run:"运行",sale:"售卖"},created:"创建日期",enableSync:"开启了远程编辑",gosquare:"去策略广场看看",isDeleted:"已删除",isInterPremium:"内部出售",isPublic:"已公开",isSold:"已出售",isSystem:"内置",isTemplate:"模板类库",lastModified:"最后修改",name:"名称",new:"新建策略",share:"分享",status:{action:"操作项",buy:"已购买",expired:"已过期",public:"已公开",review:"待审核",sold:"已出售",system:"内置库"},statusReview:"待审核",tipsCancelPremium:"取消出售此策略",tipsCancelPublic:"取消公开此策略",tipsCancelSystem:"取消内置此策略",tipsLastModified:"修改于",tipsMakeKey:"生成注册码",tipsMakeShare:"生成复制码",tipsPublic:"内部公开此策略或者在广场上给所有人",title:"策略"},strategyNav:"策略库"},tips:{custompair:"<b>交易对</b>&nbsp;没有列出的&nbsp;<b>交易对</b>, 可以在创建机器人时&nbsp;<b>自定义交易对</b>&nbsp;来添加",docker:"<b>托管者</b>&nbsp;指部署到服务器上的一个程序, 用来运行和管理&nbsp;<b>机器人</b>",ecs:"<b>服务器</b>&nbsp;指用来部署&nbsp;<b>托管者</b>&nbsp;的一个主机",platform:"<b>交易所</b>&nbsp;指具体执行买卖交易的平台, 一个&nbsp;<b>策略</b>&nbsp;可以连接多个交易所",robot:"<b>机器人</b>&nbsp;指托管者创建的一个进程, 用来运行指定的&nbsp;<b>策略</b>",strategy:"<b>策略</b>&nbsp;指编写的交易逻辑代码模块, 由&nbsp;<b>托管者</b>&nbsp;创建的&nbsp;<b>机器人</b>&nbsp;运行",systemTemplate:"内置类库,点击图标查看源码",viewSource:"查看模板源码"},totalProfit:"总利润"},debug:{alertDocker:"完整使用此功能请布署自己的私有托管者!",alertRestart:"调试工具是一个独立的进程, 该操作将强制调试进程退出, 确定这样做吗 ?",execute:"执行",restartDebug:"重启调试进程",result:"函数结果",running:"执行中 ...",selectPlatform:"请选择要执行插件的交易所!",tips:"调试的代码, 直接在指定的托管者上与绑定的交易所运行, 立即返回执行结果. 超时时间为3分钟, 可以调用API里的任何函数"},dialog:{account:{GoogleCodeError:"Google验证码错误!!",bindGoogleConfirm:"绑定Google验证码以后, 如果丢失只能通过邮箱解绑, 确定要这样做吗?",changeAlertThresholdConfirm:"账户额度小于此值时将会收到报警信息, 确定保存吗?",changeAlertThresholdError:"操作失败!",changeMemberConfirm:"确定要修改子账户口吗",changeNickNameConfirm:"公开显示的名称将用此昵称代替, 确定要这样做吗?",changeNickNameError:"操作失败, 可能是跟别人重复了!",changePasswordConfirm:"修改密码后交易平台API需要重新添加, 确定要这样做吗?",changePasswordError:"旧密码错误!",changePasswordSuccess:"操作成功，请重新登录, 并重新添加交易所!",changePushSettings:"策略推送信息会按照该设置进行推送, 确定要变更设置吗?",changePushSettingsError:"操作失败!",createApiKey:"创建新的ApiKey",createApiKeyConfirm:"确定要创建一个ApiKey吗? ",createApiKeyTitle:"用来创建您的扩展程序",createMemberConfirm:"确定要创建子账户口吗",deleteApiKeyConfirm:"确定删除此ApiKey? ",deleteApm:"此操作不可逆, 确定吗?",deleteMemberConfirm:"确定要删除这个子账户吗?",deleteNotify:"删除后此消息将不在显示, 确定吗?",deleteQueue:"删除后此消息将不推送到移动端, 确定吗?",emptyACL:"权限列表不能为空",emptyApm:"此操作将清空全部告警信息, 此操作不可逆, 确定吗?",emptyNotify:"清空将不在显示这些通知消息, 确定吗?",emptyQueue:"清空后消息队列将不再推送, 确定吗?",lockApiKeyConfirm:"确定锁定此ApiKey ?",lockMemberConfirm:"确定要锁定这个子账户吗",memberRepeat:"子账户用户名被占用, 请重新添写用户名!",shortPassword:"密码太短了, 大大降低安全系数, 请设置一个超过9位数的密码!!",unbindGoogleConfirm:"解除Google验证码以后, 账户安全系数将降低, 确定要这样做吗?",unbindWeixinConfirm:"解除微信绑定以后, 策略将无法推送消息, 确定要这样做吗?",unlockApiKeyConfirm:"确定解锁此ApiKey ?",unlockMemberConfirm:"确定要解锁这个子账户吗"},addGroup:{btnConfirm:"提交",description:"添加分组以后可以分组形式管理策略",name:"分组名称",title:"添加分组"},alertConfirm:"确定要这样做吗 ? ",alertFailure:"操作失败!",alertSuccess:"操作成功!",alertTitle:"消息",authDesc:"<font color=red>认证后, 敏感数据会加密后传输到服务器, 不用担心数据被泄漏 !</font>",btnLogin:"验证登录",buy:{btnConfirm:"购买",btnConfirmRenew:"续费",description:"策略名称:&nbsp;<b><font color=red>{{strategy}}</font></b><br>策略作者:&nbsp;<b><font color=red><i>{{author}}</i></b></font>{{ email ? ('<br>联系邮箱:&nbsp;<font color=red>' + email + '</font>') : ''}}",errorKey:"注册码无效, 3秒后重试 !",key:"注册码",success:"购买成功, 请到控制台主页查看购买到的策略!!",successRenew:"续费成功, 刷新本页面即可看到效果!",title:"购买"},cancel:"取消",changeGroup:{title:"修改分组"},close:"关闭",concurrent:"最多并发",concurrentTip:"策略允许最多并发运行的个数, 0指不限制",confirm:"确定",confirmBtn0:"确定",confirmSlient:"自动确认",confirmTitle:"确认提示",genKey:{btnConfirm:"生成注册码",days:"使用天数",description:"<font color=red>生成的注册码会在指定天数后到期, 每个注册码只允许使用一次.</font>",descriptionApp:"<font color=red>生成的注册码会在指定天数后到期, 每个注册码同时只允许一台设备使用.</font>",descriptionAppCalc:"生成 <b>{{days}}</b> 天的注册码需要一次性花费您 <b>{{(days*24*(fee/1e8)).toFixed(3)}}</b> 元",downDesc:"下载地址",key:"注册码",noPermission:"权限或余额不足, 10秒后重试 !",title:"生成注册码",urlDesc:"购买地址"},genKeyApp:{title:"生成应用注册码"},genShare:{btnConfirm:"生成复制码",days:"有效天数",description:"<font color=red>生成的复制码会在超过最大复制数或指定天数后到期</font>",key:"复制码",title:"生成复制码",urlDesc:"复制地址"},input:{google:"谷歌验证码",googleTips:"<font color=red>用户开启了二次验证机制, 请输入6位谷歌验证码</font>&nbsp;<a href ng-click=\"jump('reset-twofactor')\" class='label label-warning'>解除验证?</a>"},inputMasterPass:"本平台登录密码",invalidDays:"天数必须大于0 !",maxCopy:"分享次数",maxCopyTip:"策略复制源码的最大次数, 0指不限制",platform:{platformRepeat:"名称已经存在"},title:{twofactor:"二次验证"},titleAuth:"安全验证"},digiest:{latest:"最新文章"},ecs:{btnRentNow:"立即租用",buyFailed:"购买失败, 账户余额必须大于 10 元, 请充值后再购买 ! ",buySuccess:"购买成功, 请等待后台自动安装, 大概需要3到5分钟时间 ! ",buyTips:"购买成功后, 后台将按小时进行计费, 请确保余额充足, 确定要这样做吗?",deleteConfirm:"此服务器所有的内容将会被删除, 确定要删除此服务器吗? ",headTips:"本平台出租的云服务器由第三方云服务商提供, 余额不足后会自动删除, 请严格遵守您所在地区的法律法规 !",installFailed:"安装失败, 不可重复安装",installSuccess:"安装成功",region:"区域",reinstallTips:"重新布署托管者会停止该服务器下运行的所有机器人任务, 确定要这样做吗?"},edit:{startegy:{logs:"回测日志"},strategy:{addCode:"插入代码",addMeta:"保存回测设置",arg:{button:"按钮",default:"默认值",description:"描述",edit:"编辑",name:"变量",tips:"备注",type:"类型"},argTips:"个参数 (拖动十字图标排序)",backtestTolerant:"容错模式下一些函数会随机失败, 模拟实盘环境",beauty:"代码美化",button:"按钮",buttons:"策略交互",cloud:"云端回测",cmdPreview:"交互预览",cmpLeast:"至少",config:"配置参数",create:"创建策略",default:"默认",delKey:"删除密钥",description:"描述",downloadSource:"下载源码",downloadStrategy:"导出策略",hideChart:"隐藏行情图表",importStrategy:"导入策略",noArg:"策略没有参数",nodeCloud:"云端公用回测服务集群",optimizeFilter:"优化过滤器",range:"时间",remote:"远程编辑",save:"保存策略",showChart:"绘制行情图表",startBacktest:"开始回测",startBacktestTolerant:"容错模式回测",tabBacktest:"模拟回测",tabEdit:"策略编辑",templateRef:"模板引用",tickReal:"实盘级 Tick",tickSimulate:"模拟级 Tick",tips:{addArg:"请点击加号添加策略参数",addButton:"请点击加号添加交互功能",cloud:"安装对应编辑器插件后, 下载保存策略源码, 并插入下行密钥到本地源码第一行, 保存即可自动同步 !",cloudUpdate:"当前密钥为空, 如需获取请点击 更新密钥",copy:"复制变量到编辑框, 更改后点保存",remove:"删除此功能"},tootips:{addCode:"插入指标或者例子",meta:"保存回测设置到源文件"},updateKey:"更新密钥",varGlobal:"策略参数",varTemplate:"模板参数",vimOff:"关闭 Vim 模式",vimOn:"开启 Vim 模式"}},editor:{pasteTips:"支持直接拖拽或粘贴图片与Markdown语法"},exchange:{796:"796期货",btc38:"比特时代",btctrade:"比特币交易网",bter:"比特儿",chbtc:"中国比特币",futures:{bitmex:"BitMEX",bitvc:"BitVC期货",ctp:"商品期货(CTP)",okcoin:"OKEX期货"},huobi:"火币",okcoinEN:"OKCoin国际",okex:"OKEX币币",protocol:"交易所",stocks:"股票证券(LTS)",yunbi:"云币网"},footer:{copyright:"© 2015 - ∞ FMZ - 发明者量化",copyrightProduct:"© 2019 - ∞ FMZ - 发明者量化企业版",copyrightProductDemo:"© 2019 - ∞ FMZ - 发明者量化企业版 - (演示版)",icp:"- 京ICP备15046776号"},g:{account:{balance:"余额",stocks:"余币"},add:"添加",apply:"应用",arguments:"参数",cancel:"取消",category:"类别",chart:"图表",checkTips:"勾上为true",code:"代码",created:"创建日期",delete:"删除",description:"描述",dispatch:"分发",download:"下载",faultTolerant:"容错",feeBuy:"买入",feeMin:"最低",feeSell:"卖出",font:"字体",fullscreen:"全屏",goBottom:"回到低部",goTop:"回到顶部",hide:"隐藏",loadMore:"加载更多....",loading:"刷新中...",log:"日志",login:"登录",manual:"手册",maxBarLen:"柱长",message:"信息",modified:"最后修改",netDelay:"延迟",note:"笔记",optimize:"调优",options:"选项",platform:"平台",profit:"收益",refresh:"刷新",reply:"回复主题",rmb:"元",run:"运行",save:"保存",search:"搜索",searchEmpty:"搜索结果为空",searchResult:"<font color='red'>{{ keyword }}</font> 的搜索结果",seconds:"秒",show:"显示",signup:"注册",slipPoint:"滑点",stop:"停止",template_arguments:"类库参数",theme:"皮肤"},invoice:{btn:{search:"搜索"},col:{balance:"余额 (元)",created:"时间",expenses:"支出",id:"ID",income:"存入",remark:"详情",type:"类型"},empty:"没有任何账单",summary:"共 {{ all_items }} 条, 总存入: <b>{{ income ? income/1e8 : '--'}}</b> 总支出: <b>{{ expenses ? expenses/1e8 : '--' }}</b>",transDesc:"{{ item.remark.points }} 积分兑换为 {{ item.remark.amount/1e8 }} 元",type:{all:"所有",deposit:"余额充值",ecs:"主机租用",market:"众包费用",robot:"实盘扣费",strategy:"策略租用",system:"系统充值"}},lang:{enUS:"English",jaJP:"日本の",zhCN:"简体中文"},live:{action:{view:"围观"},cols:{action:"操作",created:"创建日期",member:"用户",profit:"收益",robot:"名称",strategy:"策略"},empty:"没有公开的机器人",hideAll:"隐藏部分",showAll:"显示全部",status:"状态信息",subtitle:"这里是其它会员公开机器人列表, 点击可以查看机器人的交易信息以及绑定的策略, 如果对此机器人使用的策略感兴趣, 可以在策略广场里联系作者.",tips:{sandbox:"此机器人在模拟盘运行... ",stopped:"策略已停止"}},log:{type:{buy:"买入",buyCover:"平空",buyLong:"开多",cancel:"撤销",error:"错误",message:"信息",profit:"收益",reboot:"重启",sell:"卖出",sellClose:"平多",sellShort:"开空"}},login:{forgotPassword:"忘记密码",pending:"登录中...",register:"还没有账号? 注册一个账号",success:"您已经成功登录!",title:"用户登录",username:"用户名或邮箱"},main:{btnBegin:"开始使用",carousel:{subtitle1:"FMZ.COM - 交易策略开发、量化学习资源、策略出租出售、在线交流社区",subtitle2:"一键布署并实盘运行, 支持微信交互与消息推送",subtitle3:"支持JavaScript Python C++ My语言 Blockly",subtitle4:"无缝支持商品期货, 外盘期货, 区块链资产",title1:"发明者 - 筑就非凡的量化世界",title2:"操作简单",title3:"编程语言多样化",title4:"跨市场跨品种"},content1:"统一了所有市场为一套API接口<br><b>跨平台, 策略分享与出售, 实盘围观, 量化社区</b><br>助您获得华尔街专业量化机构的装备",content2:"稳定高可扩展的云平台<br>让您的交易策略,随时随地都在掌控之中<br>策略支持: <b>JavaScript&nbsp;Python&nbsp;C++&nbsp;My语言&nbsp;Blockly</b>",content3:"<b>唯一</b>支持三大金融市场的量化平台<br>您无需关注底层, 只需专注策略实现的算法逻辑<br>策略可一键布署为Windows/Mac端软件",description1:"专注, 匠人品质",description2:"简约, 而不简单",description3:"实盘, 千锤百炼",description4:"高效, 超前架构",followWechat:"宽客在线",joinQQGroup:"加入社群",joinWxGroup:"微信群组",partners:"支持的交易所",products:{description:"为专业投资机构和交易所量身定制",ribbon:"推荐",title:"产品",view:"查看详情"},quantinfo:"应有尽有的宽客资源",tipsSNS:'<i class="fa fa-telegram" aria-hidden="true"></i>&nbsp;<a href="https://t.me/fmzquant_cn" target="_blank" style="color:#ff0000;font-weight:bold">Telegram</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=49f3ee4dc9f4c1b4b01289582072786f1cf349df4ca0d5e4d6e18891136f3e6c" style="color:#ff0000;font-weight:bold">863946592</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=65643596841007e0d6bd90d51183c4caa6d6b2328f6bc2a1a0f1b229966c60e0" style="color:#ff0000;font-weight:bold">456221748</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=7ca2d1e1da54b8f0a4811f69954df50355d02afa77141ad3958400b92f685bac" style="color:#ff0000;font-weight:bold">469046711</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=9536481ba8678742ac0e3b2006b1792f9705f1bdee1468bbca30abf45ac39bed" style="color:#ff0000;font-weight:bold">608262365</a><br><i class="fa fa-qq" aria-hidden="true"></i>&nbsp;<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=9b1e45a27629ad6e319393f179f3bdda89a1cabec45634502cb52227b39a80bf" style="color:#ff0000;font-weight:bold">309368835</a>',title1:"跨平台 跨品种",title2:"云端部署 在线编程",title3:"免费灵活 策略可简可繁"},market:{alert:{confirmSubmit:"发布项目后如果联系方式被其它用户获取将会产生费用, 确定这样做吗 ?",insufficientBalance:"余额不足, 最少需要够一次的单价, 请充值后再操作 !",invalidForm:"必须完整填写表单",invalidInfo:"信息有误或单价过高 !",invalidPrice:"价格设置不正确, 单价不能大于预算且不能低于最小单价",invalidUnitPrice:"单价设置过低, 请提高单价 !",unknownError:"操作失败, 未知错误"},alertSessionCharge:"获取此条信息将花费您 {{price}}  元, 确定要查看吗?",alertSessionFailed:"获取信息失败, 请检测你是否有足够的余额",alertSessionSuccess:"获取信息成功, 请按照显示的联系方式联系",budget:"推广预算",budgetTips:"设置此推广最高花费的金额, 超过后将停止显示",clickPrice:"沟通单价",closeItem:"关闭此项目",consumedStatus:"已支出 {{ consumed }} 元, 参于 {{ sns_hits}} 人",demand:{content:"具体要求",title:"需求概要"},demandsZone:"需求区",editItem:"修改此项目",empty:"没有数据",limitPrice:"最少为 <b>{{price}} 元</b>",limitUnitPrice:"最少为 <b>{{min_unit_price}}</b> 元, 当前有人出价最高为 <b>{{max_unit_price}}</b> 元",limitUnitPriceTips:"每次有用户获取您的联系方式, 您要付出的成本, 主页将会按此排序",marketIsClosed:"该项目已关闭",marketIsDelete:"该项目已被管理员删除, 不可编辑",new:{resubmit:"重新发布",submit:"发布项目"},offer:{content:"技能描述",title:"我的技能"},offersZone:"自荐区",openItem:"开放此项目",riskTips:"免责声明：该版块信息自由发布, 本平台不对内容真实性做担保或核验, 风险自担.",sessionBrief:"获取了您的联系方式",sessionNow:"马上沟通",sessionSuccessTips:"您已付费取得联系方式",sessionSummary:"已经有 <b>{{ session_count }}</b> 个人取得您的联系方式, 共支出 <b>{{ consumed }}</b> 元, 请等待对方与您联系 !",side:{allItems:"所有项目",closed:"已关闭",myPublished:"我发布的",mySessions:"我沟通的"},snsHits:"{{sns_hits}} 人参于沟通",snsMethod:"联系方式",snsWarning:"请勿在正文里填写联系方式, 联系方式请在下方填写",tipsInsufficientBalance:"您的余额不足, 该信息将不在首页显示",
tipsNoSessions:"还没有人查看我的联系方式",tipsOverBudget:"该项目已达到最大消费支出, 该信息将不在首页显示",tipsRate:"您就此项目对此用户评价为 {{ obj.rate }} 分",tipsTotalRate:"共 {{ rate_count }} 个用户对作者综合评价为 {{ rate_avg }} 分",totalHitsStatus:"所有项目一共被访问 <b>{{ total_hits }}</b> 次",userAvgRate:"综合评分",userSessionRate:"您的评分"},nav:{about:"关于我们",account:"账户管理",addECS:"租用服务器",addNode:"添加托管者",addPlatform:"添加交易所",addRobot:"添加机器人",addStrategy:"添加策略",addTicket:"发起工单",affiliate:"推广返佣",agreement:"用户协议",api:"API文档",backtestStrategy:"回测策略",bbs:"社区",blog:"博客",competition:"交易大赛",copyStrategy:"复制策略",dashboard:"控制中心",debug:"调试工具",digest:"文库",disableTwofactor:"关闭二次验证",editPlatform:"编辑交易所",editStrategy:"编辑策略",fastlink:"快速链接",findPassword:"找回密码",index:"首页",invoice:"账单",live:"围观",live_oem:"实盘围观",login:"登录",logout:"退出",market:{demand:{edit:"修改需求",new:"发布需求"},index:"众包",offer:{edit:"修改自荐",new:"毛遂自荐"}},message:"消息通知",messages:"消息中心",partner:"合作伙伴",products:"产品",resetPassword:"重置密码",resetTwofactor:"重置二次验证码",returnMarket:"返回市场",route:"交易终端",sales:"出售记录",sandbox:"模拟交易",signup:"注册",sitemap:"网站地图",square:"策略",square_oem:"策略广场",status:"状态",ticket:"工单",timeline:"更新日志",tokens:"注册码管理",tools:{alpha:"分析工具",market:"行情图表",sandbox:"模拟交易",title:"工具"},trade:"交易终端",viewRobot:"围观机器人",viewStrategy:"查看公开策略",zhihu:"知乎专栏"},nodes:{tips:{status:{logout:"托管者 {{ node.ip }} 状态为退出",offline:"托管者 {{ node.ip }} 状态为离线",online:"托管者 {{ node.ip }} 状态为正常"}}},notify:{rentStrategySuccess:"租用成功, 已存入策略库 !",syncStrategySuccess:"已成功更新到最新版本 !"},order:{amount:"数量",contractType:"合约",fee:"手续费",id:"单号",limit:"限价",market:"市价",net:"总价值",price:"价格",side:{ask:"卖",avg:"均价",bid:"买",deal:"数量"},state:"状态",status:{cancelled:"撤销",filled:"完成"},symbol:"品种",time:"时间",type:"类型"},pages:{current:"第 {{ number }} 页 ",first:"首页",last:"末页",next:"下页 »",previous:"« 上页"},period:{"15m":"15分钟","1d":"1天","1h":"1小时","1m":"1分钟","30m":"30分钟","3m":"3分钟","5m":"5分钟"},placeholder:{arg:{canEmpty:"可留空",default:"默认值",description:"变量描述",name:"英文",tips:"提示"},authCode:"授权码",description:"策略描述 (支持Markdown语法)",email:"邮箱",googleCode:"6位谷歌验证码",manual:"策略使用手册, 购买后才可查看 (支持Markdown语法)",nickName:"公开显示的名子",note:"记录该策略的工作笔记或者待办事项",password:"密码",passwordEmpty:"密码 (不更改可留空)",regEmail:"注册时的邮箱",repassword:"请再次输入新密码",search:"搜索",strategy:"策略名称",topicTitle:"请输入主题标题，如果标题能够表达完整内容，则正文可以为空",username:"用户名"},platformNew:{accessKey:"Secret Key",accessKeyEncrypt:"密钥已经加密",add:"添加交易所",addTitle:"添加",configer:"配置参数",editTitle:"编辑",label:"标签",labelEsunny:"易盛期货",labelLTS:"华宝证券",labelTips:"自定义显示名称, 一个交易所可以添加多个账号的API",platform:"交易平台",platformLabel:"交易所名称",protocol:"协议",protocolServer:"服务地址",save:"保存",selector:"选择分类",tipsAccessKey:"密钥为了提高安全度已经加密, 修改配置需重新输入密钥, 点击返回放弃修改. ",type:{cryptocurrency:"数字货币",encryptTips:"此信息将密保存",foreignfutures:"期货易盛协议",futures:"期货CTP协议",protocol:"通用协议",simulate:"商品期货(模拟)",stocks:"证券公司"}},platforms:{trade:"交易"},position:{long:"多仓",longyd:"昨多",price:"持仓均价",profit:"持仓盈亏",short:"空仓",shortyd:"昨空"},pricing:{alertInvalidCode:"打折码不正确或已过期",applyPromotionCode:"使用",charge:"充值",chargeAmount:"充值金额",chargeTips:"按小时计费, 每个机器人, 每小时 {{fee/1e8}} 元, 不足一小时按一小时计费.",history:"支付历史",historyTips:"下面将显示您的所有支付成功的历史记录, 共支付总金额",noPromotionProject:"没有促销打折活动或不在活动时间",orderPromotion:"折扣",promotionCode:"打折代码",promotionTips:"打折码已生效 支付超过 <b>{{ promotion.min }}</b> 元可优惠 <b>{{ promotion.discount }}</b>%",successTips:"支付成功, 支付信息已更新!"},rent:{balanceTips:"请确保余额充足, 确定要使用余额支付吗?",buyFail:"购买失败, 请确保余额充足 !",buySuccess:"购买成功, 请到控制台主页查看购买到的策略!!",dayTips:"最少 {{periodMin}} 天",expireTips:"策略到期时间",internalRent:"内部租用",internalRentTips:"此策略在内部出租界面不显示策略名称, 租用后可以在控制中心查看.",invalidKey:"注册码无效或已使用, 请重试 !",newExpireTips:"按当前额度支付成功后, 可使用策略到"},resetpassword:{btnSendEmail:"找回密码",mailSent:"已经发送重置密码链接到您的邮箱, 如果收件箱里找不到, 有可能被当成垃圾邮件, 请到垃圾箱里找一下",returnLogin:"回到登录界面",title:"找回密码"},resettwofactor:{alertError:"用户名密码错误或邮箱不存在!!",btnSendEmail:"发送邮件",mailSent:"已经发送重置链接到您的邮箱, 如果收件箱里找不到, 有可能被当成垃圾邮件, 请到垃圾箱里找一下",returnLogin:"回到登录界面",title:"取消二次验证"},returnHome:"返回主页",robot:{action:{alertOff:"取消",alertOffTitle:"取消异常报警",alertOn:"监控",alertOnTitle:"打开异常报警功能",exportArg:"导出参数",hideError:"隐藏错误日志",importArg:"导入参数",kill:"杀掉",restart:"重启",saveArg:"更新参数",showError:"显示错误日志",stop:"停止"},alert:{argError:"参数错误, 请检测后提交!",argUpdateError:"更新参数失败, 请确认机器人处于停止状态!",argUpdateSuccess:"更新参数成功, 请重新启动策略以生效!",dockerVersionOld:"要求托管者版本 3.0 以上 !",noPermission:"没有权限 !",platformDelete:"该机器人关联的交易所已被删除 !",platformRepeat:"已经添加了这个交易所 !",robotNotfound:"没有找到该机器人",senCmdFailure:"发送命令失败, 可能是命令重复或机器人不在运行状态!",senCmdSuccess:"发送指令成功, 请等待机器人响应 !",sendCmdConfirm:"确定要向机器人发送命令 <b>{{cmd}}</b> ?",sendCmdStatusError:"必须要在机器人运行的情况下发送指令!"},alertFromAPI:"该机器人由 API 创建 (系统没有保存密钥), 只能停止或修改策略参数, 只能通过 API 重启 ! ",autoDistribution:"自动分配",autoRefresh:"自动同步日志(5秒)",created:"创建于",date:"日期",docker:"托管者",dockerOffline:"此机器人指定的节点已经离线, 如需重启, 请重新指定并更新参数",dockerOn:"托管于",endTime:"停止于",filter:"过滤器",in_arrears:"机器人已欠费且不能与托管者通信, 请及时充值或者停止机器人结束计费 ! ",jumpTips:"转到指定页数",log:{amount:"数量",date:"日期",message:"信息",platform:"平台",price:"价格",type:"类型"},logsEmpty:"没有日志信息",maxPoint:"每页数据",maxPointTips:"图表每页显示的总数据点的个数",musicAlert:"声音提醒",pages:"共: {{count}} 条, {{ pages }} 页",period:"K线周期",platform:"交易平台",playTips:"点击试听提示音",publicBy:"该机器人由",publicBySuffix:"公开, 绑定策略",restarting:"重启中...",robotName:"机器人名称",startAt:"最近开始于",started:"最近开始于",status:{complete:"已完成",error:"有错误",queue:"排队中",running:"运行中",stopped:"已停止",stopping:"停止中",stoppped:"已停止"},statusTitle:"状态",strategy:"策略",strategyLastModified:"策略最后更新",strategyUpdated:"最后更新",tab:{changeOption:"修改配置",cmd:"策略交互",debug:"调试信息",debug_stderr:"错误输出",debug_stdout:"正常输出",logs:"日志信息",profitChart:"收益曲线",status:"状态信息",strategyChart:"策略图表"},tips:{addPlatform:"请点击加号添加交易所平台, 红色标签为主交易所"},tipsRestart:"更新后请重启机器人以使参数生效",updatedAt:"更新于",usePublic:'该机器人目前在公用服务器 ({{nodeAddress}}) 上运行, 为保证稳定, 建议&nbsp;<a href="m/add-node">布署私有托管者</a>&nbsp;运行策略.',wait:"等待",waitingLogs:"正在等待日志回传..."},robotNew:{add:"创建机器人",addPlatform:"添加其它交易所",adding:"创建中...",arg:"策略参数",docker:"托管主机",dockerAuto:"自动分配",heading:"添加机器人",name:"标签名称",needPython:"托管者服务器需安装Python",noArg:"该库没有任何参数",period:"K 线周期",platform:"交易平台",strategy:"运行策略",tipsAddPlatform:"请点击加号添加交易所平台, 红色标签为主交易所."},sales:{alreadyExpired:"已过期",cols:{buyTime:"购买日期",concurrency:"并发",createdTime:"生成日期",expireTime:"过期日期",key:"注册码",strategy:"策略",tokenType:"类型",used:"使用",username:"用户名"},concurrencyTips:"策略允许最多并发运行的个数, 0指不限制",dialogTitle:"更改",empty:"您还没有出售任何策略或还没有用户使用您出租的策略"},sandbox:{actionBuy:"买入",actionSell:"卖出",amount:"数量",ask:"卖一",assets:{action:"操作",currency:"货币",deposit:"存款",fee:"手续费",free:"可用",frozen:"冻结",overflow:"USD最多允许持有10000, 其它货币最多持有10个, 如果有超额，请模拟取款减少超额货币再模拟存款",title:"我的资产",withdraw:"取款"},bid:"买一",empty:"暂无",frozen:"冻结",high:"最高",history:"历史订单",last:"最新成交价",low:"最低",net:"净值约",nomore:"已经到尾页",opens:"我的委托",priceAsk:"卖价",priceBid:"买价",trade:"买卖操作",vAmount:"的数量",vdeposit:"模拟存入",vol:"24小时成交量",volAsk:"总卖出量",volBid:"总买入金额",vwithdraw:"模拟转出"},seo:{main:{description:"发明者量化是首家支持商品期货与数字货币(币安, Bitfinex, 火币, BitMEX等主流平台的 比特币量化交易, BTC量化交易, ETH量化交易, LTC量化交易, EOS 等所有区块链资产)的量化交易平台, 支持聚合交易, 支持Javascript/Python/可视化/My语言/C++ 五种编程语言进行商品期货量化与比特币量化",keywords:"商品期货,比特币,量化,交易软件,数字货币,btc,eos,eth,虚拟货币,加密货币,量化交易,程序化交易,交易策略",square:"涵盖国内商品期货, 数字货币的最大的开源策略市场"}},setpassword:{btnSet:"重置密码",returnLogin:"登录",success:"修改密码成功! 由于API密钥保存依赖登录密码, 请登录后重新修改平台的密钥信息!",title:"重置密码"},share:{copySuccess:"复制源码成功, 请到控制台主页查看策略!!",internalShare:"内部分享源码",internalShareTips:"此策略在内部分享界面不显示策略名称, 输入复制码后可以在控制中心查看.",invalidKey:"复制码无效或已使用, 请重试 !"},signup:{agreementCheck:"我已阅读并同意",agreementTitle:"《用户协议》",btnHasAccount:"我有账号",btnSignup:"注册",title:"用户注册"},sns:{email:"邮箱",phone:"手机",qq:"QQ",settings:"推送设置",tel:"电话",telegram:"电报",weixin:"微信"},square:{action:{buy:"购买",copy:"复制",rebuy:"续费"},cancelSearch:"取消搜索",cols:{action:"操作",member:"作者",modified:"最后修改",name:"名称",type:"策略种类"},copyNum:"该策略被复制次数",returnSquare:"返回广场",review:"待审核"},strategy:{actionCopy:"点击完整复制并进行在线回测",alert:{addSnippet:"确定要用此代码覆盖吗 ? ",busy:"回测系统正忙, 请稍后重试",expired:"该策略已到期, 不能进行回测, 请及时续费",maxChartItemError:"云端回测最多允许 8000 条图表日志",maxLogItemError:"云端回测最多允许 8000 条运行日志",maxProfitItemError:"云端回测最多允许 8000 条收益日志",offline:"回测服务器不在线, 请重新选择执行回测任务的托管者, 或添加后刷新页面",rangeError:"时间范围不正确 !"},alertBlocklyTemplate:"请勾选支持Blockly的类库",alertCastTemplate:"将策略转换为模板类库以后, 不允许引用其它模板类库, 保存后该操作不可逆",alertChangeCodeType:"语言类型不可更改, 请新建一个策略 !",alertDel:"删除后该分组的所有策略都会移动到默认分组, 确定吗?",author:"策略作者",blocklyTips:"可视化编程 是辅助功能, 只开放有限的模块, 目的是帮助您更快的入门量化交易",btnLogEvent:"记录事件",cmd:"策略交互",deleteArgConfirm:"删除参数后有可能会导致策略不能正常工作，确定要这样做吗?",deleteCmdConfirm:"删除命令后有可能会导致策略不能正常工作，确定要这样做吗?",forked:"复制次数",goBack:"返回上一页",group:{add:"添加分组",applySortOrder:"保存排列顺序",change:"改名",default:"默认",del:"删除",emptyTips:"该分组下没有策略, 可以直接拖拽策略到分组名称处进行分类 !",rent:"租用",settings:"分组管理"},loginCopy:"登录后可复制完整策略",noArgs:"没有任何参数",noDescription:"该策略没有任何描述",noManual:"该策略没有专门的使用说明手册",notFound:"没有找到该策略",relevants:"相关推荐",source:"策略源码",tips:{alreadyBuy:"已在 {{ buy_date }} 购买过该策略. 过期时间: {{expire_date}}",logEvent:"输出BitMEX收取资金费率的日志",makerFee:"挂单成交手续费, 0.01指0.01%, 万分之1",premium:'当前策略为收费策略, 请在&nbsp;<a href="/square">策略广场</a>&nbsp;点击购买租用该策略',review:"该收费策略正在等待管理员审核 ... ",snapshot:"作者已删除该策略, 当前为快照模式",takerFee:"吃单成交手续费, 0.01指0.01%, 万分之1"},type:{all:"全部种类",common:"通用策略",cryptocurrency:"数字货币",futures:"商品期货",futuresStocks:"期货证券",na:"未知类型",snapshot:"模板快照",stocks:"股票证券",template:"模板类库"},wasmWarning:"该浏览器不支持 <b>WebAssembly</b> 技术, 为达到最快的回测速度, 建议升级为支持该特性的浏览器 !"},ticket:{alertAddSuccess:"提交工单成功!",alertClosed:"该工单状态为关闭",closeConfirm:"关闭工单以后客服将不处理此工单的信息, 确定这样做吗 ?",closeDelete:"确定要删除此工单吗?",closeTicket:"关闭工单",closedByAdmin:"管理员关闭了工单",closedByUser:"您关闭了工单",deleteTicket:"删除工单",new:{category:"分类",content:"描述",selectNode:"选择分类",title:"标题"},reply:"回复",status:{all:"全部",closed:"已关闭",feedback:"待您反馈",open:"等待受理",processing:"正在处理"},step:{accepted:"已受理",close:"关闭",closed:"已关闭",confirmed:"已确认",open:"等待受理",process:"工程师正在处理您的问题",processed:"已处理",wait:"待您确认处理结果"},topicEmpty:"没有任何工单"},timeline:{latest:"最新版"},tips:{account:{balance:"可用资金量",stocks:"可用数字货币量"},addPlatform:"点击加号添加平台, 红色标签为主交易所",basePeriod:"低层K线周期, 用来生成tick",checkbox:"勾上为True",currMargin:"当前仓位占用的保证金",customSymbol:"自定义交易对",customSymbolSwitch:"自定义",dispatch:"私有托管者也可以接收回测任务",dockerMoniterOff:"打开离线报警功能",dockerMoniterOn:"取消离线报警",faultTolerant:"API容错测试产生错误的机率, 如0.5指有50%机率调用失败, 最大为1",getrecords:"GetRecords默认K线周期",hideChart:"订阅合约过多时可以隐藏行情图表加快回测结果显示",maxBarLen:"GetRecords返回最长长度",maxChartItem:"最大图表条数",maxLogItem:"最大日志条数",maxProfitItem:"最大收益条数",maxvalue:"最大值",minvalue:"最小值",netDelay:"单位为毫秒, 默认200, 模拟实盘调用API产生的网络延迟",opt:{maker:"Maker",taker:"Taker"},payLoading:"正在跳转到支付页面, 请稍等 ...",returns:"预估收益指按最新价格全部平仓后的收益(已扣除手续费)",robotLoading:"正在向托管者请求日志信息 ...",showAdv:"显示或隐藏高级选项",slipPoint:"默认是对手价成交, 滑点为0, 如果为1指对手价成本增加1倍的PriceTick, 商品期货根据合约不同PriceTick也不同",stepvalue:"步长",tickOption:"模拟级是根据一分钟K线模拟生成的, 实盘级是根据真实的实盘数据进行回测, 实盘级每个合约最多可用20M数据(不限制范围)"},title:{index:"FMZ - 发明者量化交易平台 - 首家支持商品期货与数字货币的量化平台"},tokens:{empty:"您还没有生成任何注册码或者App应用码"},trade:{accountInfo:"资产详细",alertRestart:"终端进程是一个独立的进程, 该操作将强制终端进程退出, 确定这样做吗 ?",assets:"资产",autoRefresh:"自动刷新行情",coverToday:"平今",fastSync:"高速通道已连接",flowRate:"接口频率",flowRateDesc:"每两次API调用的间隔",history:"交易历史",marginLevel:"杆杠倍数",op:{buy:"买入",close:"平仓",closelong:"卖出平多",closeshort:"买入平空",open:"开仓",openlong:"买入开多",openshort:"卖出开空",sell:"卖出",trade:"交易"},openInterest:"持仓",orders:"订单",positions:"持仓",refresh:"刷新数据",refreshPrivate:"刷新资产",restartDebug:"重启终端进程",settings:"设置",symbolInfo:"合约信息",tip:{error:"获取信息失败",market:"市价交易",marketShort:"市价",refresh:"Beta版市场与资产数据需要手工刷新",retry:"账号没有登录, 请稍后刷新重试"},update:"更新时间"}}};angular.module("templates-all",["views/about.html","views/agreement.html","views/api.html","views/bbs-topic-new.html","views/bbs-topic.html","views/bbs.html","views/competition.html","views/dialog-alert.html","views/dialog-confirm.html","views/dialog-prompt.html","views/dialog-show.html","views/digest.html","views/directive-editor.html","views/directive-footer.html","views/directive-framework.html","views/directive-robot.html","views/directive-summary.html","views/disable-twofactor.html","views/live.html","views/login.html","views/m/account.html","views/m/add-node.html","views/m/add-platform.html","views/m/add-robot.html","views/m/add-strategy.html","views/m/add-ticket.html","views/m/dashboard.html","views/m/debug.html","views/m/invoice.html","views/m/nodes.html","views/m/platforms.html","views/m/pricing.html","views/m/rent.html","views/m/robot.html","views/m/robots.html","views/m/route.html","views/m/sales.html","views/m/share.html","views/m/stats.html","views/m/strategies.html","views/m/ticket-topic.html","views/m/tickets.html","views/m/tokens.html","views/m/trade.html","views/main.html","views/market-item-new.html","views/market-item.html","views/market.html","views/notfound.html","views/oem-login.html","views/oem-sign-up.html","views/products.html","views/reset-password.html","views/reset-twofactor.html","views/robot.html","views/set-password.html","views/sign-up.html","views/square.html","views/strategy.html","views/timeline.html"]),angular.module("views/about.html",[]).run(["$templateCache",function(a){a.put("views/about.html",'<div ng-loading> <div class="container"> <p style="font-size:16px" ng-bind-html="content | trans: true | markdown"></p> </div> </div> ')}]),angular.module("views/agreement.html",[]).run(["$templateCache",function(a){a.put("views/agreement.html",'<div ng-loading> <div class="container"> <p style="font-size:16px" ng-bind-html="content | trans:true | markdown"></p> </div> <footer footer></footer> </div> ')}]),angular.module("views/api.html",[]).run(["$templateCache",function(a){a.put("views/api.html",'<div ng-loading> <div ng-if="showJump" class="container" align="center"> <div class="alert alert-success"> <b>{{counter}}</b> s, Loading <a ng-href="{{showJump}}">{{showJump}}</a> ... </div> </div> <div class="row" ng-show="content.length>0"> <div id="tocBlock" class="tocBlock" style="right:auto;left:12px;max-width:50%;top:120px"></div> <div style="margin-left:300px;margin-right:12px"> <div class="panel panel-default"> <div class="panel-heading"> <span class="label label-default">{{ title | trans}}</span> </div> <div class="panel-body"> <p style="font-size:16px" ng-bind-html="content | markdown:{toc:\'tocBlock\'}"></p> </div> </div> </div> </div> </div> ')}]),angular.module("views/bbs-topic-new.html",[]).run(["$templateCache",function(a){a.put("views/bbs-topic-new.html",'<div class="row" ng-loading> <div id="tocBlock" class="tocBlock"></div> <ol class="breadcrumb"> <li><a ng-href="bbs" translate="ui.nav.bbs"></a></li> <li class="active" translate="ui.bbs.newTopic"></li> </ol> <table class="table" style="table-layout: fixed"> <tr><td width="80" translate="ui.bbs.new.title"><td><input ng-disabled="topicStatus!=0" ng-model="title" type="text" autofocus translate-attr="{ placeholder: \'ui.placeholder.topicTitle\'}" class="form-control"></tr> <tr> <td translate="ui.bbs.new.content"><td> <editor ng-model="content" read-only="{{topicStatus>0}}"></editor> </tr> <tr> <td translate="ui.bbs.new.node"></td> <td> <select class="form-control" ng-disabled="topicStatus!=0" style="width:150px" ng-model="node_selected" convert-to-number> <option value="-1" style="display:none">--- {{ \'ui.bbs.new.selectNode\' | translate }} ---</option> <optgroup ng-repeat="plane in planes | filter: {node: true}" label="{{ plane.name | trans }}"> <option ng-repeat="node in nodes | filter: {display: true}" ng-selected="node_selected==node.id" ng-if="node.plane_id==plane.id" value="{{node.id}}">{{ node.name | trans }}</option> </optgroup> </select> </td> </tr> <tr> <td colspan="2"> <button class="btn btn-default" ng-click="submit()" ng-disabled="isPending || topicStatus!=0"><span class="glyphicon glyphicon-ok"></span>&nbsp;{{(isPending ? \'ui.bbs.new.pending\' : \'ui.bbs.new.submit\')|translate}}</button>&nbsp;<a href="javascript:history.back(-1)"><span class="btn btn-warning btn-xs" translate="ui.bbs.new.cancel"></span></a> </td> </tr> </table> <div ng-if="topicStatus>0"> <div class="alert alert-danger" role="alert" translate="ui.bbs.new.statusBlock" translate-values="{status: topicStatus}"></div> </div> </div> ')}]),angular.module("views/bbs-topic.html",[]).run(["$templateCache",function(a){a.put("views/bbs-topic.html",'<div class="row" ng-loading> <div id="tocBlock" class="tocBlock"></div> <adminbar ref="topic" type="\'topic\'"></adminbar> <div class="panel panel-default"> <div class="panel-heading"> <a ng-href="{{zone_prefix}}" class="label label-default outline" translate="{{zone == 0 ? \'ui.nav.bbs\' : \'ui.nav.digest\'}}"></a>&nbsp;››&nbsp;<a ng-href="{{zone_prefix}}/{{ topic.node_slug }}/1" class="label label-default outline">{{ topic.node_name | trans }}</a>&nbsp;››&nbsp;<span style="font-size:16px;font-weight:bold">{{ topic.title | trans}}</span> </div> <div class="panel-body"> <div ng-if="topic.tags" style="margin-bottom:20px"> <span class="label label-default" style="margin-right:10px" ng-repeat="tag in topic.tags.split(\',\')"> <a href="{{zone_prefix}}/s:tag:{{ tag | trans}}/1" style="color:white">{{ tag | trans}}</a> </span> </div> <p style="font-size:16px" ng-bind-html="topic.content | markdown:{toc:\'tocBlock\'}"></p> <br> <em class="pull-right">{{ topic.hits }} {{ \'ui.bbs.hits\' | translate }}&nbsp;•&nbsp;{{ topic.author }}&nbsp;•&nbsp;{{\'ui.bbs.created\' | translate}}: {{ topic.created }}<span ng-if="topic.updated">&nbsp;•&nbsp;{{\'ui.bbs.updated\'|translate}}: {{ topic.updated }}</span></em> </div> </div> <div ng-if="topic.is_owner && topic.zone == 0"> <div ng-if="topic.status==0"> <a href="bbs-topic-new/{{topic.id}}" class="label label-primary pull-right"><span class="glyphicon glyphicon-pencil"></span>&nbsp;{{\'ui.bbs.edit\'|translate}}</a> </div> <div style="clear:both;margin-bottom:10px"></div> </div> <div class="alert alert-warning" translate="ui.bbs.copyright"> </div> <div ng-if="topic.status>0"> <div class="alert alert-danger" role="alert" translate="ui.bbs.new.statusBlock" translate-values="{status: topic.status}"></div> </div> <blockquote ng-if="relevants.length>0"> {{\'ui.strategy.relevants\'|translate}} <div ng-repeat="ele in relevants" style="margin-left:15px;margin-top:5px;font-size: 80%;"> <a ng-href="{{ele.zone == 0 ? \'bbs-topic\' : \'digest-topic\'}}/{{ele.id}}">{{ ele.title | trans }}</a> </div> </blockquote> <div comment="topic.md5"></div> </div> ')}]),angular.module("views/bbs.html",[]).run(["$templateCache",function(a){a.put("views/bbs.html",'<div class="row" ng-loading> <div class="panel panel-default"> <div class="panel-body"> <a style="line-height:20pt;margin-right:8px" href="{{zone_prefix}}" ng-class="(node_slug==\'\'&&skw==\'\') ? \'label label-primary outline focus\' : \'label label-default outline\'" translate="ui.bbs.all"></a> <span ng-repeat="tag in tags"> <a style="line-height:20pt;margin-right:8px" ng-href="{{zone_prefix}}/s:tag:{{ tag.name | trans}}/1" ng-class="tag.focus ? \'label label-primary outline focus\' : \'label label-default outline\'">{{ tag.name | trans}}</a> </span> <span ng-repeat="plane in planes" ng-if="plane.zone==plane_zone"> <span ng-repeat="node in nodes" ng-if="isLogin || node.hide != 1"> <a style="line-height:20pt;margin-right:8px" ng-href="{{zone_prefix}}/{{node.slug}}/1" uib-tooltip="{{node.hide == 1 ? (\'ui.bbs.hideTitle\' | translate): \'\'}}" ng-if="node.plane_id==plane.id" ng-class="(node.id == node_id || node.slug == node_slug) ? \'label label-primary outline focus\' : (node.hide == 1 ? \'label label-warning outline\' : \'label label-default outline\')">{{ node.name | trans }}</a> </span> </span> </div> </div> <div> <div class="btn-group btn-group-xs" role="group"> <button ng-disabled="loading" ng-click="refresh(language, false)" class="btn btn-default" ng-style="{\'color\':(orderByHot ? \'#999\' : \'black\')}">{{\'ui.bbs.orderLatest\'|translate}}</button> <button ng-disabled="loading" ng-click="refresh(language, true)" class="btn btn-default" ng-style="{\'color\':(orderByHot ? \'black\' : \'#999\')}">{{\'ui.bbs.orderHot\'|translate}}</button> </div> <div class="btn-group btn-group-xs" role="group" style="margin-left:20px"> <button ng-disabled="loading" ng-click="refresh(\'zh_CN\')" class="btn btn-default" ng-style="{\'color\':(language==\'zh_CN\' ? \'black\' : \'#999\')}">{{\'ui.bbs.chinese\'|translate}}</button> <button ng-disabled="loading" ng-click="refresh(\'en_US\')" class="btn btn-default" ng-style="{\'color\':(language==\'zh_CN\' ? \'#999\' : \'black\')}">English</button> </div> <div class="pull-right"> <form> <input type="search" style="width:150px" ng-model="skw" translate-attr="{ placeholder: \'ui.placeholder.search\'}" class="searchbox"> <button ng-disabled="skw==keyword" class="btn btn-info btn-xs" ng-click="search()"><i class="glyphicon glyphicon-search"></i></button> <a style="margin-left:5px" ng-href="{{ isLogin ? \'bbs-topic-new\' : \'login\' }}" class="label label-primary outline"><span class="glyphicon glyphicon-pencil"></span>&nbsp;{{ \'ui.bbs.newTopic\' | translate }}</a> </form> </div> </div> <div class="panel panel-default" style="margin-top:8px"> <div class="panel-body"> <div ng-if="keyword" style="margin-bottom:10px"> <span class="bootstrap-tags"> <span class="tag label label-danger outline">{{keyword}}<span data-role="remove" ng-click="go(zone_prefix)"></span></span> </span> <span class="badge pull-right" style="background-color:#bbbbbb">{{ topics_count }}</span> </div> <div ng-show="topics.length>0"> <table class="table"> <tr ng-repeat="topic in topics" style="margin-bottom:10px"> <td ng-style="{\'border-top\':(($index==0&&!skw)?\'none\':\'1px solid #DDC\')}" width="20" valign="top" align="center"> <div ng-style="{\'color\':(topic.top > 0 ? \'#576057\' : \'#677067\'),\'font-size\':\'33px\',\'line-height\':\'38px\',\'font-weight\':\'bold\',\'border\':\'1px solid #\'+(topic.top > 0 ? \'BC836A\' : \'778077\'),\'padding\':\'2px\',\'width\':\'45px\',\'height\':\'45px\'}">{{topic.title | letter}}</div> </td> <td ng-style="{\'border-top\':(($index==0&&!skw)?\'none\':\'1px solid #DDC\')}"> <div><a href="bbs-topic/{{ topic.id }}" ng-style="{\'font-size\':\'16px\',\'color\':\'#576057\',\'font-weight\': (topic.top>0?\'bold\':\'normal\')}">{{ topic.title | trans }}</a></div> <div style="margin-top:5px;font-size:11px;color:#cccccc;"> <a ng-href="{{zone_prefix}}/{{topic.node_slug}}/1" class="label label-default" style="background-color:#f5f5f5;color:#999">{{topic.node_name | trans}}</a>&nbsp;•&nbsp;<em>By {{ topic.author }}</em>&nbsp;•&nbsp;{{topic.timeAgo}} <span ng-if="topic.tags"> <a ng-repeat="tag in topic.tags.split(\',\')" class="label label-default noradius" style="font-weight:normal;background-color:#f5f5f5;color:#999;margin-left:10px" href="{{zone_prefix}}/s:tag:{{ tag | trans}}/1">{{ tag | trans}}</a> </span> <span ng-if="topic.top>0" style="color:#337ab7;margin-left:5px" class="glyphicon glyphicon-pushpin"></span> <div class="pull-right"> <span> {{ topic.content | cut: 60}}&nbsp;&nbsp; </span> <span class="badge" style="background-color:#bbbbbb" ng-if="topic.reply_count>0">{{ topic.reply_count}} </span> </div> </div> </td> </tr> </table> </div> <div class="alert alert-success" ng-show="topics.length==0" style="margin-top:20px"> <span ng-if="!keyword"> <b>{{ node_name | trans | translate }}</b> {{\'ui.bbs.topicEmpty\'|translate}} </span> <span ng-if="keyword" translate="ui.g.searchEmpty" translate-values="{keyword: keyword}"></span> &nbsp;<a ng-href="{{zone_prefix}}" class="btn btn-success btn-xs" translate="ui.bbs.return"></a> </div> </div> </div> <nav> <ul class="pagination" ng-if="pages.length>1"> <li ng-repeat="page in pages" ng-class="page.cls + (loading ? \' disabled\' : \'\')"><a ng-disabled="loading" ng-href="{{zone_prefix}}/{{ keyword == \'\' ? (node_slug == \'\' ? page.id : node_slug+\'/\'+page.id) : (\'s:\'+keyword+\'/\'+page.id)}}" href="">{{page.name | translate}}</a></li> </ul> </nav> <div style="margin-bottom:50px"></div> <div> </div></div>')}]),angular.module("views/competition.html",[]).run(["$templateCache",function(a){a.put("views/competition.html",'<div ng-loading> <blockquote> <p><span class="glyphicon glyphicon-equalizer"></span>&nbsp;{{ \'ui.competition.title\' | translate }}</p> <small style="margin-top:5px"> <span class="label label-warning">{{ ts }}</span> <b>--</b> <span class="label label-info">{{ update }}</span> </small> </blockquote> <div class="alert alert-success"> <span class="glyphicon glyphicon-education"></span>&nbsp;<span translate="ui.competition.subtitle" translate-values="{busy: items.length, idle: items_idle.length}"></span> </div> <div style="margin-bottom:10px"> <button popover-trigger="mouseenter" uib-popover="{{\'ui.competition.sortProfitTitle\'|translate}}" ng-class="(order==\'profit\'||order==\'-profit\') ? \'btn btn-xs btn-success\' : \'btn btn-xs btn-default\'" ng-click="sort(\'profit\')">{{\'ui.competition.sortProfit\'|translate}}&nbsp;<span ng-class="\'glyphicon glyphicon-sort-by-attributes\' + ((order==\'profit\' || order !=\'-profit\') ? \'\' : \'-alt\')"></span></button> <button popover-trigger="mouseenter" uib-popover="{{\'ui.competition.sortVolTitle\'|translate}}" ng-class="(order==\'Tx\'||order==\'-Tx\') ? \'btn btn-xs btn-success\' : \'btn btn-xs btn-default\'" ng-click="sort(\'Tx\')">{{\'ui.competition.sortVol\'|translate}}&nbsp;<span ng-class="\'glyphicon glyphicon-sort-by-attributes\' + ((order==\'Tx\' || order !=\'-Tx\') ? \'\' : \'-alt\')"></span> </button> <button popover-trigger="mouseenter" uib-popover="{{\'ui.competition.sortSharpTitle\'|translate}}" ng-class="(order==\'sharpeRatio\'||order==\'-sharpeRatio\') ? \'btn btn-xs btn-success\' : \'btn btn-xs btn-default\'" ng-click="sort(\'sharpeRatio\')">{{\'ui.competition.sortSharp\'|translate}}&nbsp;<span ng-class="\'glyphicon glyphicon-sort-by-attributes\' + ((order==\'sharpeRatio\' || order !=\'-sharpeRatio\') ? \'\' : \'-alt\')"></span> </button> <button popover-trigger="mouseenter" uib-popover="{{\'ui.competition.sortMddTitle\'|translate}}" ng-class="(order==\'Mdd\'||order==\'-Mdd\') ? \'btn btn-xs btn-success\' : \'btn btn-xs btn-default\'" ng-click="sort(\'Mdd\')">{{\'ui.competition.sortMdd\'|translate}}&nbsp;<span ng-class="\'glyphicon glyphicon-sort-by-attributes\' + ((order==\'-Mdd\' || order !=\'Mdd\') ? \'-alt\' : \'\')"></span> </button> \x3c!-- Split button --\x3e <div class="btn-group pull-right"> <button type="button" ng-disabled="pending" class="btn btn-xs btn-danger" translate="ui.competition.epoch" translate-values="{epoch: epoch}"></button> <button type="button" ng-disabled="pending" class="btn btn-xs btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu"> <li><a href ng-click="refresh(epoch)"><span class="glyphicon glyphicon-refresh"></span></a></li> <li role="separator" class="divider"></li> <li ng-repeat="n in range(currentEpoch, 0, -1)"><a href ng-click="refresh(n)"><span translate="ui.competition.epoch" translate-values="{epoch: n}"></span><span ng-if="epoch==n" class="glyphicon glyphicon-ok"></span></a></li> </ul> </div> </div> <div ng-show="pending" align="center" style="margin-top:100px;margin-bottom:500px"><i class="fa fa-spinner fa-spin"></i></div> <div class="row" ng-hide="pending"> <div ng-repeat="item in items" ng-class="item.cls" ng-if="!item.hide"> <div class="panel panel-default" ng-mouseenter="item.focus=true" ng-mouseleave="item.focus=false"> <div class="panel-heading"> <span class="badge" ng-style="{\'background-color\':$index < 10 && item.profit > 0 ? \'#d9544d\' : \'#48b2a6\'}">{{$index+1}}</span>&nbsp;<b>{{item.username}}</b> <a href ng-hide="!item.focus" ng-click="zoom(item)" style="text-decoration:none" ng-class="item.zoom ? \'pull-right glyphicon glyphicon-resize-small text-muted\' : \'pull-right glyphicon glyphicon-resize-full text-muted\'"></a> </div> <div class="panel-body"> <span class="glyphicon glyphicon-yen"></span>{{item.profit.toFixed(2)}} <span class="pull-right text-danger">{{ (item.profitRatio * 100).toFixed(2) }} %</span> <flot dataset="item.data" on-plot-hover="onChartHover(event, pos, item)" options="plotOptions" height="{{item.height}}"></flot> <div> <span ng-if="item.Txn>0" popover-trigger="mouseenter" uib-popover-template="\'popover-competition-1.html\'"><span class="text-muted"><span class="glyphicon glyphicon-btc"></span>&nbsp;{{item.Tx}}</span> </span> <span class="pull-right text-muted" popover-trigger="mouseenter" uib-popover-template="\'popover-competition-2.html\'"><b>{{ ((item.Mdd > 0 ? item.Mdd : 0) * 100).toFixed(2) }} %</b>&nbsp;/&nbsp;{{ item.sharpeRatio.toFixed(2) }}</span> </div> </div> </div> </div> </div> <div comment="\'Competition\'" id="competition_comment"></div> </div> <script type="text/ng-template" id="popover-competition-1.html"> <table>\n    <tr><td width=60 translate="ui.competition.profit"></td> <td>{{ item.profit.toFixed(2) }} ￥</td></tr>\n    <tr><td width=60 translate="ui.competition.totalVol"></td><td>BTC: {{ item.Tx }}</td></tr>\n    <tr><td translate="ui.competition.makerVol"></td><td>BTC: {{item.TMaker.toFixed(4)}}</td></tr>\n    <tr><td translate="ui.competition.takerVol"></td><td>BTC: {{item.TTaker.toFixed(4)}}</td></tr>\n    <tr><td translate="ui.competition.makerRatio"></td><td>{{ (item.TMaker * 100 / (item.TMaker+item.TTaker)).toFixed(2) }} %</td></tr>\n    <tr><td translate="ui.competition.takerRatio"></td><td>{{ (item.TTaker * 100 / (item.TMaker+item.TTaker)).toFixed(2) }} %</td></tr>\n    <tr><td translate="ui.competition.matched"></td><td>{{item.Txn}}</td></tr>\n</table> <\/script> <script type="text/ng-template" id="popover-competition-2.html"> <table>\n    <tr><td width=60 translate="ui.competition.mdd"></td><td><b>{{ ((item.Mdd > 0 ? item.Mdd : 0) * 100).toFixed(2) }} %</b></td></tr>\n    <tr><td width=60 translate="ui.competition.sharp"></td><td><b>{{ item.sharpeRatio.toFixed(2) }}</b></td></tr>\n    <tr><td width=60 translate="ui.competition.period"></td><td><b>1</b> <span translate="ui.competition.hours"></span></td></tr>\n</table> <\/script> ')}]),angular.module("views/dialog-alert.html",[]).run(["$templateCache",function(a){a.put("views/dialog-alert.html",'<div class="modal-header"> <button type="button" class="close" ng-click="ok()">&times;</button> <h3 class="modal-title">{{ title | translate}}</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> <div ng-if="style!=\'textarea\'" style="word-wrap: break-word; white-space: pre-wrap;" compile="msg | translate"></div> <textarea spellcheck="false" ng-if="style==\'textarea\'" class="form-control" rows="10" ng-bind="msg">\n            </textarea> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-success" ng-click="ok()" translate="ui.dialog.confirm"></button> </div> ')}]),angular.module("views/dialog-confirm.html",[]).run(["$templateCache",function(a){a.put("views/dialog-confirm.html",'<div class="modal-header"> <button type="button" class="close" ng-click="cancel()">&times;</button> <h3 class="modal-title">{{ title | translate }}</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> <div compile="msg | translate"></div> </div> </div> </div> <div class="modal-footer"> <span ng-show="showSlientInput"><label for="remember">{{ \'ui.dialog.confirmSlient\' | translate }}</label><input style="margin-left:5px;margin-right:5px" ng-model="settings.slient" type="checkbox" id="remember"></span> <button class="btn btn-danger" ng-click="cancel()" translate="ui.dialog.cancel"></button> <button ng-show="btn1" class="btn btn-info" ng-disabled="isBusy" ng-click="confirm(1)">{{btn1 | translate}}</button> <button ng-show="btn2" class="btn btn-warning" ng-disabled="isBusy" ng-click="confirm(2)">{{btn2 | translate}}</button> <button ng-show="btn0" class="btn btn-success" ng-disabled="isBusy" ng-click="confirm(0)">{{ btn0 | translate }}</button> </div> ')}]),angular.module("views/dialog-prompt.html",[]).run(["$templateCache",function(a){
inputBox“type =”{{cfg.inputtype}}“ng-focus =”true“ng-model =”inputTxt“class =”form-control“placeholder =”{{cfg.inputname | 翻译}}“> </ div> </ div> <div class =”form-group“ng-if =”cfg.showConcurrent“> <label for =”inputBox2“class =”col-md-4 control-label “translate =”{{cfg.concurrentLabel}}“> </ label> <div class =”col-md-4“> <input id =”inputBox2“type =”number“tooltip-append-to-body =” true“tooltip-placement =”bottom“uib-tooltip =”{{cfg.concurrentTip | 翻译}}“ng-model =”cfg.maxConcurrent“class =”form-control“> </ div> </ div> <div ng-show =”cfg.inputtype == \'checkbox \'“class =” form-group“> <input type =”checkbox“ng-model =”checkValue“style =”margin-right：8px“> {{cfg.inputname | translate}} </ div> <div class =”form-group “> <div class =”col-md-12“> <div compile =”cfg.description | 翻译“> </ div> </ div> <div class =”col-md-12“ng-show =”cfg.keyType == 2 && inputTxt> 0“> <div style =”color：red; text- align：center“translate-values =”{fee：cfg.fee，days：inputTxt}“translate =”ui.dialog.genKey.descriptionAppCalc“> </ div> </ div> </ div> </ form> < / div> <div class =“alert alert-danger”ng-if =“error”translate =“{{error}}”> </ div> <div ng-show =“error && cfg.url” class =“alert alert-success”> {{cfg.urlDesc | 翻译}}：{{cfg.url}} </ div> </ div> <div class =“modal-footer”> <button class =“btn btn-danger”ng-click =“cancel（）”translate = “ui.dialog.close”> </ button> <button class =“btn btn-success”ng-disabled =“isPending”ng-click =“submit（inputTxt）”> {{cfg.confirmname | 翻译}} </ button> </ div>'）}]），angular.module（“views / dialog-show.html”，[]）。run（[“$ templateCache”，function（a）{a。 put（“views / dialog-show.html”，'<div class =“modal-header”> <button type =“button”class =“close”ng-click =“ok（）”>＆times; </ button > <h3 class =“modal-title”> {{title | translate}} </ h3> < label label-primary outline focus \'：\'label label-default outline \'“translate =”ui.bbs.all“> </a> <span ng-repeat =”tag in tags“> <a style =” line-height：20pt; margin-right：8px“ng-href =”{{zone_prefix}} / s：tag：{{tag.name | trans}} / 1“ng-class =”tag.focus？\'标签标签 - 主要轮廓焦点\'：\'标签标签 - 默认大纲\'“> {{tag.name | trans}} </a> </ span> <span ng-repeat =”飞机上的飞机“ ng-if =“plane.zone == plane_zone”> <span ng-repeat =“节点中的节点”> <a style =“line-height：20pt; margin-right：8px”ng-href =“{{zone_prefix } / {{node.slug}} / 1“uib-tooltip =”{{node.hide == 1？（\'ui.bbs.hideTitle \'| translate）：\'\'}}“ng-if =”节点。plane_id == plane.id“ng-class =”（node.id == node_id || node.slug == node_slug）？\'标签标签 - 主要轮廓焦点\':( node.hide == 1？\'label label-warning outline \'：\'label label-default outline \'）“> {{node.name | trans}} </a> </ span> </ span> </ div> </ div> <div style =“margin-bottom：10px”> <div class =“btn-group btn-group-xs”role =“group “> <button ng-disabled =”loading“ng-click =”refresh（\'zh_CN \'）“class =”btn btn-default“ng-style =”{\'color \':( language == \ 'zh_CN \'？\'black \'：\'＃999 \'）}“> {{\'ui.bbs.chinese \'|翻译}} </ button> <button ng-disabled =”loading“ng -click =“refresh（\'en_US \'）”class =“ btn btn-default“ng-style =”{\'color \':( language == \'zh_CN \'？\'＃999 \'：\'black \'）}“>英文</ button> </ div> <div class =“pull-right”> <form> <input type =“search”style =“width：150px”ng-model =“skw”translate-attr =“{placeholder：\'ui.placeholder。 search \'}“class =”searchbox“> <button ng-disabled =”skw == keyword“class =”btn btn-info btn-xs“ng-click =”search（）“> <i class =”glyphicon glyphicon-search“> </ i> </ button> <a style =”margin-left：5px“ng-href =”{{isLogin？\'bbs-topic-new \'：\'login \'}}“class =”label label-primary outline“> <span class =”glyphicon glyphicon-pencil“> < / span>＆nbsp; {{\'ui.bbs.newDigest \'| 翻译}} </a> </ form> </ div> </ div> <div> <div style =“margin-bottom：10px; margin-top：10px”ng-if =“keyword”> <span class =“bootstrap-tags”> <span class =“tag label label-danger outline”> {{keyword}} <span data-role =“remove”ng-click =“go（zone_prefix）”> </ span> < / span> </ span> <span class =“badge pull-right”style =“background-color：#bbbbbb”> {{topics_count}} </ span> </ div> <div class =“panel panel-default主题中的“ng-repeat =”主题“style =”margin-bottom：10px; border-style：dashed“> <div class =”panel-body“> <div> <a href =”digest-topic / {{ topic.id}}“ng-style =” {{zone_prefix}} / s：tag：{{tag | trans}} / 1“> {{tag | trans}} </a> </ span> <span ng-if =”topic.top> 0“style =”color：＃337ab7; margin-left：5px“class =“glyphicon glyphicon-pushpin”> </ span> <div class =“pull-right”> <span> <a href =“digest-topic / {{topic.id}}”style =“color：#cccccc” > {{topic.content | cut：60}} </a>＆nbsp;＆nbsp; </ span> <span class =“badge”style =“background-color：#bbbbbb”ng-if =“topic.reply_count> 0“> {{topic.reply_count}} </ span> </ div> </ div> </ div> </ div> <div class =”alert alert-success“ng-show =”topics.length == 0“style =”margin-top：20px“> <span ng-if =”！keyword“> <b> {{node_name | trans | 翻译}} </ b> {{\'ui.bbs.topicEmpty \'|翻译}} </ span> <span ng-if =“keyword”translate =“ui.g.searchEmpty”translate-values =“{关键字：关键字}“> </ span>＆nbsp; <a ng-href="{{zone_prefix}}" class="btn btn-success btn-xs" translate="ui.bbs.return"> </a> </ div> </ div> <nav> <ul class =“pagination”ng-if =“pages.length> 1”> <li ng-repeat =“页面中的页面”ng-class =“page.cls + （加载？\'禁用\'：\'\'）“> <a ng-disabled =”loading“ng-href =”{{zone_prefix}} / {{keyword == \'\'？（node_slug == \'\'？page.id：node_slug + \'/ \'+ page.id）:( \'s：\'+ keyword + \'/ \'+ page.id）}}“ href =“”> {{page.name | 翻译}} </a> </ li> </ ul> </ nav> <div style =“margin-bottom：50px”> </ div> <div> </ div> </ div>'）}] ），angular.module（ “视图/指令-editor.html”，[]）。执行（[ “$ templateCache”，功能的（a）{a.put（ “视图/指令-editor.html”，'<DIV ng-style =“{\'position \'：\'relative \'，\'height \'：height}”> <div ng-style =“{\'height \'：height，\'padding-bottom \ '：\'80px \'}“> <div style =”width：100％; height：100％“id =”{{editorId}}“> </ div> </ div> <div style =”position：绝对;底部：0px;左：0px;宽度：100％“> <div ng-file-select =”onFileSelect（$ files）“accept =”。png，.jpg，.zip，.7z，.tar，。 GZ，操作.bz2，.MP4，。ng-class =“clsAdmin（）”> <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="padding:10px"> <span letter-avatar =“{{getUser（ }}}“img-size =”28“> </ span> <span class =”badge“ng-if =”getNotify（）> 0“style =”margin-left：-10px; margin-right：5px; border-radius：1em; padding：2px 3px; font-size：10.025px; background-color：＃92a4b9“> {{getNotify（）}} </ span> </a> <ul class =”dropdown-menu“ ng-if =“！isShadow（）”> <li> <div style =“font-style：italic; margin-right：10px; margin-bottom：10px; font-weight：bold;” class =“pull-right”> {{getUser（）}} </ div> </ li> <li> <a href="/m/account"> {{\'ui.nav.account \'|翻译}}＆NBSP; < </ div> </ div> </ div> <div class =“btn-group-vertical goTopFix”style =“display：none;” role =“group”> <button class =“btn btn-default btn-xs”tooltip-placement =“left”tooltip-append-to-body =“true”uib-tooltip =“{{\'ui.g。 goTop \'| translate}}“ng-click =”goTop（0）“> <i class =”glyphicon glyphicon-chevron-up“> </ i> </ button> <button class =”btn btn-default btn -xs“tooltip-placement =”left“tooltip-append-to-body =”true“uib-tooltip =”{{\'ui.g.goBottom \'| translate}}“ng-click =”goTop（ - 1）“> <i class =”glyphicon glyphicon-chevron-down“> </ i> </ button> </ div>'）}]），angular.module（”views / directive-robot.html“，[ ]）。
a.put("views/directive-robot.html",'<div class="row"> <ol class="breadcrumb" ng-show="!isPending && isPrivate"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/robots" translate="ui.dashboard.tabs.robotNav"></a></li> <li class="active">{{ robot.name | trans }}</li> </ol> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> <div class="row" ng-if="isPending && !error"> <div align="center" style="margin-top:100px;"><img src="images/loading.gif"></div> </div> <div class="row" ng-show="!isPending && !isOld"> <adminbar ng-show="!isPrivate" type="\'robot\'" ref="robot"></adminbar> <blockquote> {{ robot.name | trans }} <small ng-if="isPrivate">{{\'ui.robot.strategy\'|translate}}: {{ robot.strategy_name | trans}} &nbsp;(<i ng-if="robot.desc" class="text-danger fa fa-feed" uib-tooltip="{{robot.desc}}" tooltip-append-to-body="true" style="margin-left:5px;margin-right:5px"></i><span>{{\'ui.robot.strategyUpdated\'|translate}}&nbsp;{{ robot.strategy_last_modified }}</span>)</small> <small ng-if="isPrivate">{{\'ui.robot.date\'|translate}}: <span class="visible-lg-inline">{{\'ui.robot.created\'|translate}} {{ robot.date }}</span><span ng-if="robot.start_time"> {{\'ui.robot.started\'|translate}} {{ robot.start_time }}</span><span ng-if="robot.end_time"> {{\'ui.robot.endTime\'|translate}} {{ robot.end_time }}</span></small> <small>{{\'ui.robot.statusTitle\'|translate}}: {{\'ui.robot.period\'|translate}} {{ ktick_selected.name | translate}}&nbsp;<span class="badge">{{ [\'ui.robot.status.queue\', \'ui.robot.status.running\', \'ui.robot.status.stopping\', \'ui.robot.status.complete\', \'ui.robot.status.stoppped\', \'ui.robot.status.error\'][robotstatus] | translate }}</span> <span ng-if="isPrivate"> <button ng-disabled="io_loading" ng-show="robotstatus>2" ng-click="restartRobot(robot)" class="btn btn-success btn-xs outline"><i ng-class="\'glyphicon glyphicon-repeat \' + (io_loading ? \'icon-spin\' : \'\')"></i>&nbsp;{{(io_loading ? \'ui.robot.restarting\' : \'ui.robot.action.restart\')|translate}}</button>&nbsp;<span ng-if="!node_selected"><font color="red" translate="ui.robot.dockerOffline"></font></span> <button ng-disabled="io_loading" ng-show="robotstatus<=2" ng-click="stopRobot(robot)" class="btn btn-warning btn-xs outline"><i class="glyphicon glyphicon-stop"></i>&nbsp;{{robot.status==2?\'ui.robot.action.kill\' : (io_loading ? \'ui.robot.status.stopping\' : \'ui.robot.action.stop\')|translate}}</button> <button ng-disabled="io_loading" ng-show="robotstatus<=2" ng-click="setRobotWD(robot)" uib-tooltip="{{(robotwd>0 ? \'ui.robot.action.alertOffTitle\' : \'ui.robot.action.alertOnTitle\')|translate}}" ng-class="{true:\'btn btn-success btn-xs outline\', false: \'btn btn-default btn-xs outline\'}[robotwd>0]"><i ng-class="{true:\'glyphicon glyphicon-eye-close\', false: \'glyphicon glyphicon-eye-open\'}[robotwd>0]"></i>&nbsp;{{ (robotwd==0 ? \'ui.robot.action.alertOn\' : \'ui.robot.action.alertOff\')|translate}}</button> <span ng-if="robotstatus == 0 && (!bindNode || bindNode.id == -1)" class="label label-success">{{\'ui.robot.wait\'|translate}} {{ node_selected.name }}</span><span ng-if="bindNode && bindNode.id!=-1" class="label label-success">{{\'ui.robot.dockerOn\'|translate}} <font color="#eeeeee">{{ bindNode.name }}</font>, ID:&nbsp;<font color="#eeeeee">{{robotId}}</font></span> </span> </small> <small ng-show="!isShadow" style="overflow-x:auto;padding-bottom:2px;line-height:18pt"><span ng-show="pairs_select.length==0" class="label label-danger outline">{{\'ui.tips.addPlatform\'|translate}}</span><span tooltip-append-to-body="true" uib-tooltip="{{pair.eid}}" ng-class="$first ? \'label label-danger outline\' : \'label label-info outline\'" style="margin-right:3px" ng-repeat="pair in pairs_select">{{ pair.label }}/{{ pair.stock }}</span></small> </blockquote> <p class="alert alert-success" ng-if="!isPrivate"> {{ \'ui.robot.publicBy\' | translate }} <b><i>{{ robot.username }}</i></b> {{ \'ui.robot.publicBySuffix\' | translate }}: <b><font color="red">{{ robot.strategy_name | trans }}</font></b> , <span ng-if="robot.start_time"> {{ \'ui.robot.startAt\' | translate }} {{ robot.start_time }}</span>&nbsp;<span>{{ \'ui.robot.strategyLastModified\' | translate }} <font color="red">{{ robot.strategy_last_modified }}</font></span></p> <p class="alert alert-warning" ng-if="isPrivate && bindNode && bindNode.public==1 && !bindNode.is_owner" translate="ui.robot.usePublic" translate-values="{nodeAddress:bindNode.ip + \' - \' + (bindNode.region | trans)}"></p> <blockquote ng-show="isPrivate && (scriptArgList.length > 0 || !isShadow)"> {{\'ui.robot.tab.changeOption\'|translate}} <small><a href="" ng-init="showArgs=false" ng-click="showArgs=!showArgs" class="label label-warning">{{ !showArgs ? \'ui.g.show\' : \'ui.g.hide\' | translate}}</a></small> </blockquote> <form class="form-horizontal" role="form" novalidate name="frm" ng-submit="submit()" ng-show="showArgs"> <div class="row" style="margin-top:2px;margin-bottom:8px"> <div class="col-md-2 col-xs-2"><span class="label label-danger pull-right" style="margin-top:7px" translate="ui.robot.robotName"></span></div> <div class="col-md-3 col-xs-8"> <input type="text" ng-model="robot.name" ng-readonly="isShadow" class="form-control"> </div> </div> <div class="row" style="margin-top:2px;margin-bottom:8px"> <div class="col-md-2 col-xs-2"><span class="label label-danger pull-right" style="margin-top:7px" translate="ui.robot.period"></span></div> <div class="col-md-3 col-xs-8"> <select ng-model="ktick_selected" ng-disabled="isShadow" ng-options="(m.name | translate) for m in kticks" class="form-control" required> </select> </div> </div> <div class="row" ng-if="!canChangePlatform" style="margin-top:2px;margin-bottom:8px"> <div class="col-md-11 col-xs-11 col-md-offset-2"> <p class="alert alert-danger">{{\'ui.robot.alertFromAPI\'|translate}}</p> </div> </div> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-show="!isShadow && canChangePlatform"> <div class="col-md-2 col-xs-2"><span class="label label-danger pull-right" style="margin-top:7px" translate="ui.robot.platform"></span></div> <div class="col-md-2 col-xs-4"> <ui-select ng-model="option.platform" on-select="option.stock=option.platform.stocks[0]"> <ui-select-match placeholder="{{\'ui.g.search\'|translate}} ...">{{$select.selected.label}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.label"> <div ng-bind-html="m.label | trans | highlight: $select.search"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2 col-xs-3" ng-if="!option.platform.custom"> <select ng-model="option.stock" ng-options="m for m in option.platform.stocks" class="form-control" ng-required="!isShadow"></select> </div> <div class="col-md-2 col-xs-3" ng-if="option.platform.custom"> <input type="text" class="form-control" ng-model="option.stock" required> </div> <div class="col-md-1 col-xs-1" ng-if="option.platform.eid!=\'Futures_CTP\' && option.platform.eid!=\'Futures_LTS\'"> <switch ng-model="option.platform.custom" off="{{\'ui.tips.customSymbolSwitch\'|translate}}" uib-tooltip="{{\'ui.tips.customSymbol\'|translate}}" tooltip-append-to-body="true"></switch> </div> <div class="col-md-1 col-xs-1"> <a ng-class="pairs_select.length > 0 ? \'btn btn-success outline\' : \'btn btn-danger outline\'" ng-click="addPair()"><i class="glyphicon glyphicon-plus"></i></a> </div> </div> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-show="!isShadow && canChangePlatform"> <div class="col-md-8 col-md-offset-2" ng-if="pairs_select.length == 0"> <span class="label label-danger outline" translate="ui.robot.tips.addPlatform"></span> </div> <div class="col-md-9 col-md-offset-2"> <div class="bootstrap-tags" style="overflow-x: auto;padding-bottom:2px;line-height:18pt" ng-if="pairs_select.length > 0"> <span uib-tooltip="{{pair.eid}}" tooltip-append-to-body="true" ng-class="$first ? \'tag label label-danger outline\' : \'tag label label-info outline\'" ng-repeat="pair in pairs_select">{{pair.label}} / {{ pair.stock }}<span data-role="remove" ng-click="removePair(pair)"></span></span> </div> </div> </div> <div class="row" style="margin-top:2px;margin-bottom:38px" ng-show="!isShadow"> <div class="col-md-2 col-xs-2"><span class="label label-danger pull-right" style="margin-top:7px" translate="ui.robot.docker"></span></div> \x3c!--<div class="col-md-3 col-xs-8">--\x3e \x3c!--<select ng-model="node_selected" ng-options="n.name for n in nodes | orderBy:\'id\'" class="form-control" required></select>--\x3e \x3c!--</div>--\x3e <div class="col-md-4 col-xs-8"> <select ng-model="node_selected_id" class="form-control" required> <optgroup label="{{\'ui.const.privateDocker\'|translate}}" ng-if="hasPrivate()"> <option ng-repeat="node in nodes | filter:{ is_owner: true } | orderBy:\'id\'" ng-value="node.id">{{ node.name }}</option> </optgroup> <optgroup label="{{\'ui.const.publicDocker\'|translate}}" ng-if="hasPublic()"> <option ng-repeat="node in nodes | filter:{ is_owner: false } | orderBy:\'id\'" ng-value="node.id">{{ node.name }}</option> </optgroup> </select> </div> </div> <div class="row"> <div class="col-md-9 col-md-offset-2 col-xs-offset-2" ng-repeat="argList in scriptArgList"> <div ng-class="argList.cls"> <div class="panel-heading"> <small>{{argList.name | trans}}</small> </div> <div class="panel-body"> <div ng-if="argList.list.length==0" translate="ui.edit.strategy.noArg"></div> <div class="panel panel-default" ng-repeat="group in argList.group"> <div class="panel-heading" ng-if="group.name"> {{group.name | trans}} </div> <div class="panel-body"> <div class="row" ng-repeat="pair in group.data" style="margin-top:2px;margin-bottom:8px" ng-show="showArg(argList.list, pair)"> <div class="col-md-4 col-xs-5"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans }}</span></div> <div ng-class="(pair[3].inputType == \'text\' || pair[3].inputType == \'password\') ? \'col-md-8 col-xs-8\' : \'col-lg-4 col-xs-6\'" uib-popover="{{ pair[2] | trans }}" popover-trigger="mouseenter" popover-title="{{ pair[3].name | translate}}"> <input autocomplete="on" ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'number\'" type="{{ pair[3].inputType }}" title="{{ pair[3].name | trans}}" ng-model="pair.value" class="form-control" placeholder="{{\'ui.placeholder.arg.canEmpty\'|translate}}"> <input ng-if="pair[3].inputType == \'number\'" type="{{ pair[3].inputType }}" title="{{ pair[3].name | translate}}" ng-model="pair.value" class="form-control" required> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.g.checkTips\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-selected="pair.indexValue==$index" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="row" style="margin-top:10px;"> <div class="col-md-8 col-md-offset-2 col-xs-offset-2"> <button ng-disabled="btnpending || name.length == 0 || (pairs_select.length == 0 && !isShadow)" uib-popover="{{\'ui.robot.tipsRestart\'|translate}}" popover-trigger="mouseenter" class="btn btn-success outline" type="submit"><span class="glyphicon glyphicon-upload"></span>&nbsp;{{ \'ui.robot.action.saveArg\' | translate }}</button> <a style="margin-left:10px" ng-show="robot.robot_args.length > 2" href class="label label-primary outline" ng-click="submit(true)"><span class="glyphicon glyphicon-export"></span>&nbsp;{{ \'ui.robot.action.exportArg\' | translate }}</a> <a style="margin-left:10px" ng-show="robot.robot_args.length > 2" href class="label label-danger outline" ngf-multiple="false" ngf-select="importArgs($file)" ngf-pattern="\'.json,.txt\'" ngf-accept="\'.json,.txt\'"><span class="glyphicon glyphicon-import"></span>&nbsp;{{ \'ui.robot.action.importArg\' | translate }}</a> </div> </div> </form> <blockquote ng-show="show_chart_profit"> {{ \'ui.robot.tab.profitChart\' | translate }} <small class="hidden-xs"> <a href="" ng-init="showProfits=true" ng-click="showProfits=!showProfits" class="label label-warning">{{ !showProfits ? \'ui.g.show\' : \'ui.g.hide\' | translate }}</a> <span translate="ui.robot.pages" translate-values="{count : profit_count, pages: pageProfitCount}"></span> </small> </blockquote> <div ng-show="show_chart_profit && showProfits"> <div style="height:400px; width:100%;margin-top:3px"> <div id="chart_profit" style="height:100%;width:100%"> <div align="center" style="padding-top:200px"> <p class="label label-info" translate="ui.g.loading"></p> </div> </div> </div> <nav ng-init="showProfitJump=true" ng-mouseenter="showProfitJump=false" ng-mouseleave="showProfitJump=true"> <ul class="pagination pagination-sm" ng-if="profit_pages.length>1"> <li ng-repeat="page in profit_pages" ng-class="page.cls + (profit_loading ? \' disabled\' : \'\')"><a ng-click="goProfit(page.id)" href="">{{page.name | translate}}</a></li> </ul> <div class="pagination pull-right hidden-xs" ng-show="pages.length>1 && !showProfitJump"> <div uib-tooltip="{{ ui.robot.jumpTips | translate}}" style="width:120px"> <div class="input-group"> <input type="number" ng-model="profitJumpPage" min="0" max="{{pageProfitCount}}" style="text-align:center;margin-left:5px;margin-right:5px;border-right:0px" class="form-control input-sm"> <span class="input-group-btn"> <button ng-disabled="profit_loading" class="btn btn-sm btn-default outline pull-right" ng-click="goProfit(profitJumpPage)" type="button"><i class="glyphicon glyphicon-share-alt"></i></button> </span> </div> </div> </div> </nav> </div> <div ng-show="show_chart_strategy"> <blockquote> {{ \'ui.robot.tab.strategyChart\' | translate }} <small> <a href="" ng-init="showChart=true" ng-click="showChart=!showChart" class="label label-warning">{{ !showChart ? \'ui.g.show\' : \'ui.g.hide\' | translate }}</a> <span translate="ui.robot.pages" translate-values="{count : chart_count, pages: pageChartCount}"></span>, {{ \'ui.robot.updatedAt\' | translate }}: {{ chartTime }} </small> </blockquote> <div ng-show="showChart"> <div id="chart_strategy"> <div align="center" style="padding-top:100px"> <p class="label label-info">{{ \'ui.g.loading\' | translate }} ...</p> </div> </div> <nav> <ul class="pagination pagination-sm" ng-if="chart_pages.length>1"> <li ng-repeat="page in chart_pages" ng-class="page.cls + (chart_loading ? \' disabled\' : \'\')"><a ng-click="goChart(page.id)" href="">{{page.name | translate}}</a></li> </ul> <div class="pagination pull-right hidden-xs"> <div style="width:230px"> <div class="input-group" uib-tooltip="{{\'ui.robot.maxPointTips\'|translate}}"> <span class="input-group-addon">{{\'ui.robot.maxPoint\'|translate}}</span> <input type="number" min="10" max="100000" class="form-control" style="text-align:center" ng-model="maxPoint"> <span class="input-group-btn"> <button class="btn btn-default" ng-disabled="chart_loading" ng-click="goChart(1, true)" type="button"><i ng-class="chart_loading ? \'fa fa-spinner fa-spin\' : \'fa fa-check\'"></i></button> </span> </div> </div> </div> </nav> </div> </div> <blockquote ng-if="isPrivate && scriptCMDList.length > 0"> {{\'ui.robot.tab.cmd\'|translate}} <small> <a href="" ng-init="showCMD=false" ng-click="showCMD=!showCMD" class="label label-warning">{{ !showCMD ? \'ui.g.show\' : \'ui.g.hide\' | translate }}</a> <span ng-show="showCMD"><label style="margin-left:5px;margin-right:5px" for="remember">{{ \'ui.dialog.confirmSlient\' | translate }}</label><input style="margin-right:5px" ng-model="confirmSettings.slient" type="checkbox" id="remember"></span> </small> <div ng-show="showCMD" style="padding-top:10px"> <div class="panel panel-default" ng-repeat="group in scriptCMDGroup"> <div class="panel-heading" ng-if="group.name"> {{group.name | trans}} </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in group.data"> <div class="col-md-2 col-xs-5" ng-if="pair[1][0]!=\'@\'"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans }}</span></div> <div ng-if="pair[3].inputType != \'button\'" ng-class="pair[3].inputType == \'text\' ? \'col-md-6 col-xs-3\' : \'col-md-3 col-xs-3\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans }}" popover-title="{{ pair[3].name | translate}}" popover-append-to-body="true"> <input ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'button\'" type="{{ pair[3].inputType }}" ng-pattern="{{ pair[3].inputPattern }}" ng-model="pair.value" class="form-control"> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.g.checkTips\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> <div class="col-md-3 col-xs-4"><label class="btn btn-success btn-sm outline" ng-disabled="io_loading" ng-click="cmdRobot(pair)">{{ pair[0] | trans }}</label></div> </div> </div> </div> </div> </blockquote> <blockquote ng-show="summary.length>0"> {{ \'ui.robot.tab.status\' | translate }} <small> <a href="" ng-init="showStats=true" ng-click="showStats=!showStats" class="label label-warning">{{ !showStats ? \'ui.g.show\' : \'ui.g.hide\' | translate }}</a> </small> </blockquote> <div class="panel panel-default" ng-show="showStats && summary.length>0" id="summary-tbl"> <div class="panel-body"> <div summary="summary"></div> </div> </div> <blockquote ng-if="isPrivate && robot.debug && (robot.debug.Stdout.length>0||robot.debug.Stderr.length>0)"> {{\'ui.robot.tab.debug\' | translate}} <small> <a href="" ng-init="showDebug=true" ng-click="showDebug=!showDebug" class="label label-warning">{{ !showDebug ? \'ui.g.show\' : \'ui.g.hide\' | translate }}</a> </small> <div style="margin-top:10px;margin-bottom:10px;font-size:10pt" ng-show="showDebug"> <ul class="nav nav-tabs"> <li role="presentation" class="active" ng-if="robot.debug.Stdout.length>0"> <a ng-href="#tab_debug_0" role="tab" data-toggle="tab"><i class="fa fa-terminal" aria-hidden="true"></i>&nbsp;{{\'ui.robot.tab.debug_stdout\'|translate}}</a> </li> <li role="presentation" ng-class="robot.debug.Stdout.length>0?\'inactive\':\'active\'" ng-if="robot.debug.Stderr.length>0"> <a ng-href="#tab_debug_1" role="tab" data-toggle="tab"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;{{\'ui.robot.tab.debug_stderr\'|translate}}</a> </li> <span class="pull-right">{{ \'ui.robot.updatedAt\' | translate }}: {{ robot.debugTime }}</span> </ul> <div class="tab-content"> <div role="tabpanel" class="tab-pane fade in active" id="tab_debug_0" ng-if="robot.debug.Stdout.length>0"> <pre class="shell-body" style="width:100%" rows="10">{{robot.debug.Stdout}}</pre> </div> <div role="tabpanel" ng-class="getStderroCls()" id="tab_debug_1" ng-if="robot.debug.Stderr.length>0"> <pre class="shell-body" style="width:100%" rows="10">{{robot.debug.Stderr}}</pre> </div> </div> </div> </blockquote> <blockquote> {{ \'ui.robot.tab.logs\' | translate }} <small class="hidden-xs"> <span translate="ui.robot.pages" translate-values="{count : log_count, pages: pageCount}"></span> <span class="pull-right" ng-if="hasFutures" style="margin-left:5px"><a href ng-click="showTradeTime()"><i class="fa fa-calendar"></i></a></span> </small> <small> <a href="" ng-click="hideErrors(!isHideErrors)" class="label label-success">{{ isHideErrors ? \'ui.robot.action.showError\' : \'ui.robot.action.hideError\' | translate }}</a>&nbsp; <button ng-disabled="log_loading" ng-click="go(1)" class="btn btn-warning btn-xs outline" translate="ui.g.refresh"></button>&nbsp; <span ng-show="refreshTime==0"><input type="checkbox" ng-model="autoRefresh">&nbsp;{{\'ui.robot.autoRefresh\' | translate }}</span> <input type="checkbox" ng-disabled="refreshTime==0 && !autoRefresh" ng-model="autoPlay">&nbsp;{{\'ui.robot.musicAlert\'|translate}}&nbsp;<a href="" ng-click="playAudio()" uib-popover="{{\'ui.robot.playTips\' | translate }}" popover-trigger="mouseenter"><font size="2"><span ng-class="autoPlay ? \'glyphicon glyphicon-volume-up\' : \'glyphicon glyphicon-volume-off\'"></span></font></a> <div class="btn-group" dropdown ng-if="autoPlay"> <button type="button" class="btn btn-xs btn-default outline dropdown-toggle" id="dropdownFilter" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{\'ui.robot.filter\'|translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownFilter"> <li ng-repeat="t in logFilter"> <a href="javascript:void(0)"><input type="checkbox" ng-model="t.selected">&nbsp;&nbsp;<label ng-class="\'label \' + [\'label-primary\',\'label-success\',\'label-default\',\'label-default\',\'label-danger\',\'label-info\',\'label-warning\'][$index]">{{ t.name | translate }}</label></a> </li> </ul> </div> </small> </blockquote> <p ng-if="!online" class="alert alert-danger" translate="ui.robot.dockerOffline"></p> <p ng-if="logs.length == 0" class="alert alert-success" translate="ui.robot.logsEmpty"></p> <div class="table-responsive nowrap"> <table ng-show="logs.length>0" class="table table-condensed"> <thead> <tr> <th width="150" translate="ui.robot.log.date"></th> <th width="110" translate="ui.robot.log.platform"></th> <th width="50" translate="ui.robot.log.type"></th> <th width="90" translate="ui.robot.log.price"></th> <th width="90" translate="ui.robot.log.amount"></th> <th translate="ui.robot.log.message"></th> </tr> </thead> <tr ng-repeat="item in logs" ng-hide="item.log_type == 3 && isHideErrors" ng-class="\'slide-left\'" ng-style="item.style"> <td>{{ item.date }}</td> <td><span ng-if="item.log_type < 4">{{ item.eid | eid2str }}</span></td> <td><label popover-trigger="mouseenter" uib-popover="{{(item.order_id !=\'\'&&item.order_id!=\'-1\') ? \'Order Id: \' + item.order_id : \'\'}}" ng-class="item.labelStyle">{{ item.logTypeStr | translate }}</label><label ng-class="item.directionStyle" style="margin-left:5px" ng-if="item.directionStr">{{ item.directionStr | translate }} - {{ item.contractType}}</label></td> <td ng-if="item.show_price">{{ item.priceStr }}</td> <td ng-if="item.show_price">{{ item.amountStr }}</td> <td ng-if="item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | cut | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> <td colspan="3" ng-if="!item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | cut | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> </tr> </table> </div> <nav ng-init="showLogJump=true" ng-mouseenter="showLogJump=false" ng-mouseleave="showLogJump=true"> <ul class="pagination" ng-show="pages.length>1"> <li ng-repeat="page in pages" ng-class="page.cls + (log_loading ? \' disabled\' : \'\')"><a ng-click="go(page.id)" href translate="{{page.name | translate}}"></a></li> </ul> <div class="pagination pull-right hidden-xs" ng-show="pages.length>1 && !showLogJump"> <div uib-tooltip="{{ \'ui.robot.jumpTips\' | translate }}" style="width:120px"> <div class="input-group"> <input type="number" ng-model="logsJumpPage" min="0" max="{{pageCount}}" style="text-align:center;margin-left:5px;margin-right:5px;border-right:0px;" class="form-control"> <span class="input-group-btn"> <button ng-disabled="log_loading" class="btn btn-default outline pull-right" ng-click="go(logsJumpPage)" type="button"><i class="glyphicon glyphicon-share-alt"></i></button> </span> </div> </div> </div> </nav> <div class="alert alert-warning" ng-if="!isPrivate" style="margin-top:15px"> {{ \'ui.market.riskTips\' | translate }} </div> <div comment="\'R_\' + robotId" ng-if="!isOEM && !isPrivate"></div> </div> ')}]),angular.module("views/directive-summary.html",[]).run(["$templateCache",function(a){a.put("views/directive-summary.html",'<div class="pull-right" ng-if="showFullScreen && hasTable"> <button class="btn btn-default btn-xs" ng-click="switchFullScreen()"><i class="glyphicon glyphicon-resize-full"></i></button> </div> <div ng-repeat="s in summary"> <p ng-if="!s[0].title && s.type == \'string\'" ng-style="s.style" ng-bind-html="s.body | text"></p> <button ng-class="s[0].class" ng-disabled="btnDisabled" ng-if="!s[0].title && s[0].type == \'button\'" ng-click="sendCommand(s[0].cmd)">{{s[0].name}}</button> <div ng-if="s[0].title"> <ul class="nav nav-tabs"> <li role="presentation" ng-class="getTabActive($parent.$index, $index)" ng-repeat="t in s"> <a ng-href="#tab_{{unique_kv.id}}_{{$parent.$index}}_{{$index}}" ng-click="setTabActive($parent.$index, $index)" role="tab" data-toggle="tab">{{t.title}}</a> </li> </ul> <div class="tab-content"> <div role="tabpanel" ng-class="\'tab-pane fade in \' + getTabActive($parent.$index, $index)" ng-repeat="t in s" id="tab_{{unique_kv.id}}_{{$parent.$index}}_{{$index}}"> <table class="table table-hover table-condensed"> <thead ng-mouseenter="setFocus($parent.$index, $index)" ng-mouseleave="setFocus(-1, -1)"> <tr> <th ng-repeat="col in t.cols track by $index"> {{col}}<span style="display:inline-block;width:10px;margin-left:5px"><a href="" ng-show="isFocus($parent.$parent.$index, $parent.$index, $index)" ng-click="setSortBy($parent.$parent.$index, $parent.$index, $index)"><i ng-class="getSortStyle($parent.$parent.$index, $parent.$index, $index)"></i></a></span> </th> </tr> </thead> <tbody> <tr ng-repeat="row in t.rows"> <td ng-repeat="item in row" rowspan="{{item.rowspan ? item.rowspan : 1 }}" colspan="{{item.colspan ? item.colspan : 1 }}"> <span ng-style="item.style" ng-if="item.type==\'string\'" ng-bind-html="item.body | text"></span> <button ng-class="item.class" ng-disabled="btnDisabled" ng-if="item.type==\'button\'" ng-click="sendCommand(item.cmd)">{{item.name}}</button> </td> </tr> </tbody> </table> </div> </div> </div> </div> ')}]),angular.module("views/disable-twofactor.html",[]).run(["$templateCache",function(a){a.put("views/disable-twofactor.html",'<div class="row"> <div class="col-md-6 col-md-offset-3" ng-show="uncompleted"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.account.unboundGoogle"></h3> </div> <div class="panel-body"> <button class="btn btn-warning" type="submit" ng-disabled="pending" ng-click="submit()" translate="ui.account.unboundGoogle"></button> </div> </div> <div class="alert alert-danger" ng-if="error">{{ error | translate }}</div> </div> </div> <div class="alert alert-success" ng-show="!uncompleted"> {{\'ui.account.unboundGoogleSuccess\'|translate}}! <a class="label label-success" href="login" translate="ui.g.login"></a> </div> ')}]),angular.module("views/live.html",[]).run(["$templateCache",function(a){a.put("views/live.html",'<div class="row" ng-loading> <div class="panel panel-default" ng-repeat="ele in public_robots"> <div class="panel-heading"> <h3 class="panel-title">{{ele.name | trans | cut : 50}}</h3> </div> <table class="table table-condensed table-hover"> <thead> <tr> <th class="col-lg-7 col-xs-11">{{\'ui.live.cols.robot\'|translate}}</th> <th class="col-lg-1 visible-lg" style="text-align:right" translate="ui.live.cols.profit"></th> <th class="col-lg-1 visible-lg" translate="ui.live.cols.member"></th> <th class="col-lg-2 visible-lg" translate="ui.live.cols.created"></th> <th class="col-lg-1" translate="ui.live.cols.action"></th> </tr> </thead> <tbody ng-repeat="item in ele.robots" ng-mouseleave="focus(0)" ng-show="$index<3 || ele.showMore"> <tr> <td> <a ng-href="{{isLogin ? \'robot/\' + item.id : \'login\'}}" ng-mouseenter="focus(item.id)">{{ item.name | trans | cut: 40}}</a> <span class="glyphicon glyphicon-pause text-warning" uib-tooltip="{{ \'ui.live.tips.stopped\' | translate}}" ng-if="item.status!==1"></span> </td> <td class="visible-lg" align="right">{{ item.profitStr }}</td> <td class="visible-lg"><span class="label label-default outline noradius">{{ item.username | cut: 15}}</span> </td> <td class="visible-lg">{{ item.date }}</td> <td> <a ng-href="{{isLogin ? \'robot/\' + item.id : \'login\'}}" ng-class="item.cls" style="width:60px" uib-tooltip="{{item.is_sandbox ? (\'ui.live.tips.sandbox\' | translate) : \'\'}}"><i class="glyphicon glyphicon-play-circle"></i>&nbsp;{{\'ui.live.action.view\'|translate}}</a> </td> </tr> <tr ng-if="item.summary.length>0 && showIndex==item.id"> <td colspan="5"> <div class="panel panel-default"> <div class="panel-heading"> <span class="glyphicon glyphicon-stats"></span>&nbsp;{{ \'ui.live.status\' | translate }} </div> <div class="panel-body"> <div summary="item.summary"></div> </div> </div> </td> </tr> </tbody> </table> <div class="panel-body" ng-if="ele.robots.length > 3"> <button class="btn btn-default btn-xs outline" ng-click="ele.showMore=!ele.showMore">{{(ele.showMore ? \'ui.live.hideAll\' : \'ui.live.showAll\') | translate}}&nbsp;<i ng-class="{false: \'glyphicon glyphicon-plus\', true:\'glyphicon glyphicon-minus\'}[ele.showMore]"></i></button> </div> </div> <div class="alert alert-success" ng-show="public_robots.length==0"> <b>{{ node_name | trans}}</b> {{\'ui.live.empty\'|translate}} </div> <div class="alert alert-success" ng-show="public_robots.length>0"> {{ "ui.market.riskTips" | translate }} </div> <div style="margin-bottom:50px"></div> \x3c!--<div comment="\'live\'"></div>--\x3e </div> ')}]),angular.module("views/login.html",[]).run(["$templateCache",function(a){a.put("views/login.html",'<div class="row" ng-hide="isLogin()"> <div class="col-md-4 col-md-offset-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.login.title"></h3> </div> <div class="panel-body"> <form name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <label for="inputUsername">{{\'ui.login.username\' | translate }}</label> <input tabindex="1" spellcheck="false" type="text" ng-focus="!detectdUser" ng-model="username" class="form-control" id="inputUsername" placeholder="{{\'ui.login.username\' | translate }}"> </div> <div class="form-group"> <div> <label for="inputPassword">{{\'ui.placeholder.password\' | translate }}</label> <span class="pull-right"> <a href="reset-password">{{\'ui.login.forgotPassword\'|translate}} ? </a> </span> </div> <input tabindex="2" spellcheck="false" type="password" ng-focus="detectdUser" ng-model="password" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\' | translate }}"> </div> <div class="form-group"> <button tabindex="3" class="btn btn-success outline col-md-12" type="submit" ng-disabled="pending">{{ pending ? \'ui.login.pending\' : \'ui.g.login\' | translate}}</button> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-danger" ng-show="isLogin()">{{ "ui.login.success" | translate }}&nbsp;<a href="m/dashboard" translate="ui.returnHome"></a></div> ')}]),angular.module("views/m/account.html",[]).run(["$templateCache",function(a){
a.put("views/m/account.html",'<div class="row" ng-loading> <div class="col-md-2"> <div class="panel panel-default"> <div class="panel-heading"><b>{{getUser()}}</b></div> <div class="panel-body"> <ul class="nav nav-pills nav-stacked" role="tablist"> <li role="presentation" ng-class="::getCls(\'tabMessage\')"> <a href data-target="#tabMessage" role="tab" data-toggle="tab"><i class="fa fa-bell"></i>&nbsp;{{\'ui.account.tabs.message\'|translate}}</a> </li> <li role="presentation"> <a href data-target="#tabPassword" role="tab" data-toggle="tab"><i class="fa fa-key"></i>&nbsp;{{\'ui.account.tabs.password\'|translate}}</a> </li> <li role="presentation" ng-if="!isOEM"> <a href data-target="#tabNickName" role="tab" data-toggle="tab"><i class="fa fa-user-secret"></i>&nbsp;{{\'ui.account.tabs.nickname\'|translate}}</a> </li> <li role="presentation"> <a href data-target="#tabGoogle" role="tab" data-toggle="tab"><i class="fa fa-google"></i>&nbsp;{{\'ui.account.tabs.google\'|translate}}</a> </li> <li role="presentation" ng-if="!isOEM"> <a href data-target="#tabSettings" role="tab" data-toggle="tab"><i class="fa fa-clock-o"></i>&nbsp;{{\'ui.account.tabs.settings\'|translate}}</a> </li> <li role="presentation"> <a href data-target="#tabPushSettings" role="tab" data-toggle="tab"><i class="fa fa-at"></i>&nbsp;{{\'ui.account.tabs.pushSettings\'|translate}}</a> </li> <li role="presentation"> <a href data-target="#tabApiKey" role="tab" data-toggle="tab"><i class="fa fa-sitemap"></i>&nbsp;{{\'ui.account.tabs.apikey\'|translate}}</a> </li> <li role="presentation"> <a href data-target="#tabShadow" role="tab" data-toggle="tab"><i class="fa fa-group"></i>&nbsp;{{\'ui.account.tabs.shadow\'|translate}}</a> </li> <li role="presentation" ng-if="!isOEM" ng-class="::getCls(\'affiliate\')"> <a href data-target="#affiliate" role="tab" data-toggle="tab"><i class="fa fa-share-alt"></i>&nbsp;{{\'ui.account.tabs.affiliate\'|translate}}</a> </li> <li role="presentation" ng-show="g.expired"> <a href data-target="#tabLicense" role="tab" data-toggle="tab"><i class="fa fa-id-card-o"></i>&nbsp;{{\'ui.account.tabs.license\'|translate}}</a> </li> </ul> </div> </div> </div> <div class="col-md-10"> <div class="alert alert-warning" ng-if="!isOEM"> {{\'ui.const.balance\'|translate}}: <b style="color:red">{{ (g.balance/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}}, {{\'ui.const.consumed\'|translate}}: <b>{{(g.consumed/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}} <span class="pull-right"><a href="m/pricing" class="label label-danger outline"><i class="glyphicon glyphicon-flash"></i>&nbsp;{{\'ui.dashboard.charge\'|translate}}</a></span> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> <div class="tab-content"> <div role="tabpanel" ng-class="::getCls(\'tabMessage\', \'tab-pane fade in\')" id="tabMessage"> <ul class="nav nav-tabs"> <li role="presentation" class="active"> <a ng-href="#pushMessage" role="tab" data-toggle="tab"><i class="fa fa-send"></i>&nbsp;{{\'ui.account.tabs.push\'|translate}}&nbsp;<span class="badge">{{messages.length}}</span></a> </li> <li role="presentation" class="inactive" ng-hide="isOEM && notifications.length==0"> <a ng-href="#notifyMessage" role="tab" data-toggle="tab"><i class="fa fa-comments"></i>&nbsp;{{\'ui.account.tabs.notify\'|translate}}&nbsp;<span class="badge">{{notifications.length}}</span></a> </li> <li role="presentation" class="inactive"> <a ng-href="#apmMessage" role="tab" data-toggle="tab"><i class="fa fa-warning"></i>&nbsp;{{\'ui.account.tabs.alert\'|translate}}&nbsp;<span class="badge">{{apms.length}}</span></a> </li> <li role="presentation" class="inactive" ng-hide="isOEM && ticket_notifications.length==0"> <a ng-href="#ticketMessage" role="tab" data-toggle="tab"><i class="fa fa-commenting-o"></i>&nbsp;{{\'ui.account.tabs.ticket\'|translate}}&nbsp;<span class="badge">{{ticket_notifications.length}}</span></a> </li> <div class="pull-right"> <button class="btn btn-success btn-sm outline" ng-click="refreshMessage()" ng-disabled="pending"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ pending ? \'ui.g.loading\' : \'ui.g.refresh\' | translate}}</button> <button ng-show="messages.length>0" class="btn btn-primary btn-sm outline" ng-click="remove_message(-1)" ng-disabled="pending" translate="ui.account.emptyPush"></button> <button ng-show="notifications.length>0" class="btn btn-info btn-sm outline" ng-click="remove_notify(-1)" ng-disabled="pending" translate="ui.account.emptyReply"></button> <button ng-show="ticket_notifications.length>0" class="btn btn-info btn-sm outline" ng-click="remove_ticket_notify(-1)" ng-disabled="pending" translate="ui.account.emptyTicketNotify"></button> <button ng-show="apms.length>0" class="btn btn-warning btn-sm outline" ng-click="remove_apm(-1)" ng-disabled="pending" translate="ui.account.emptyAlert"></button> </div> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in active" id="pushMessage"> <div class="alert alert-danger" ng-if="isSupportWechat && !account.sns.wechat" style="margin-top:10px">{{\'ui.account.alert.notBindWeixin\'|translate}}</div> <div ng-repeat="item in messages" class="slide-left col-md-6 col-xs-6" ng-mouseleave="item.focus=false" ng-mouseenter="item.focus=true"> <div class="panel panel-default"> <div class="panel-body"> <div ng-style="item.data.style">{{ item.data.body }}</div> </div> <div class="panel-footer"><div align="right"><small ng-if="item.send_date">{{\'ui.account.sendAt\' | translate}} <font color="red">{{item.send_date | ago}}</font>&nbsp;({{\'ui.account.alert.resend\'|translate}})</small>&nbsp;<small>{{\'ui.account.createdAt\'|translate}} {{ item.date }}</small><a href="" style="margin-left:10px" ng-show="item.focus" ng-click="remove_message(item.id)" class="label label-danger" translate="ui.g.delete"></a></div></div> </div> </div> <div class="alert alert-success" ng-if="messages.length==0">{{\'ui.account.alert.queueEmpty\'|translate}}</div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="notifyMessage"> <div ng-repeat="item in notifications" class="slide-left col-md-6 col-xs-6" ng-mouseleave="item.focus=false" ng-mouseenter="item.focus=true"> <div class="panel panel-default"> <div class="panel-body"> <p style="font-size:16px" ng-bind-html="item.text | markdown"></p> </div> <div class="panel-footer">{{ item.username }}&nbsp;&nbsp;<small>{{\'ui.g.reply\'|translate}}&nbsp;<b>{{item.topic||item.md5}}</b>&nbsp; {{ item.timeAgo }}</small><span ng-show="item.focus" style="padding-left:10px"><a ng-if="item.link" class="label label-success" href="{{ item.link}}" translate="ui.account.go"></a>&nbsp;&nbsp;<a href="" ng-click="remove_notify(item.id)" class="label label-danger" translate="ui.g.delete"></a></span></div> </div> </div> <div class="alert alert-warning" ng-if="notifications.length==0" translate="ui.account.alert.msgEmpty"></div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="apmMessage"> <div class="alert alert-danger" ng-if="isSupportWechat && !account.sns.wechat" style="margin-top:10px">{{\'ui.account.alert.notBindWeixin\'|translate}}</div> <div ng-repeat="item in apms" class="slide-left col-md-6 col-xs-6" ng-mouseleave="item.focus=false" ng-mouseenter="item.focus=true"> <div class="panel panel-default"> <div class="panel-body"> <div>{{ item.text }}</div> </div> <div class="panel-footer"><div align="right"><small ng-if="item.send_date">{{\'ui.account.sentAt\' | translate}} <font color="red">{{item.send_date | ago}}</font>&nbsp;({{item.statusStr}})</small>&nbsp;<small>{{\'ui.account.createdAt\'|translate}} {{ item.date }}</small><a href="" style="margin-left:10px" ng-show="item.focus" ng-click="remove_apm(item.id)" class="label label-danger" translate="ui.g.delete"></a></div></div> </div> </div> <div class="alert alert-success" ng-if="apms.length==0">{{\'ui.account.alert.apmEmpty\'|translate}}</div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="ticketMessage"> <div ng-repeat="item in ticket_notifications" class="slide-left col-md-6 col-xs-6" ng-mouseleave="item.focus=false" ng-mouseenter="item.focus=true"> <div class="panel panel-default"> <div class="panel-body"> <div>{{ item.text }}</div> </div> <div class="panel-footer"><small><b>{{item.topic}}</b>&nbsp; {{ item.date | ago }}</small><span ng-show="item.focus" style="padding-left:10px"><a ng-href="m/ticket-topic/{{item.topic_id}}" class="label label-success" translate="ui.account.go"></a>&nbsp;<a href="" ng-click="remove_ticket_notify(item.id)" class="label label-danger" translate="ui.g.delete"></a></span></div> </div> </div> <div class="alert alert-success" ng-if="ticket_notifications.length==0">{{\'ui.account.alert.ticketMsgEmpty\'|translate}}</div> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabPassword"> <form novalidate name="frm" class="form-horizontal col-md-5" role="form" ng-submit="changePassword()"> <div class="form-group"> <label for="inputPasswordOld" translate="ui.account.currentPassword"></label> <input type="password" ng-model="oldPassword" class="form-control" id="inputPasswordOld" required> </div> <div class="form-group"> <label for="inputPassword" translate="ui.account.newPassword"></label> <input type="password" ng-model="password" equals="{{repassword}}" class="form-control" id="inputPassword" required> </div> <div class="form-group"> <label for="inputPasswordAgain" translate="ui.account.newPassword"></label> <input type="password" ng-model="repassword" equals="{{password}}" class="form-control" id="inputPasswordAgain" required> </div> <div class="form-group"> <button class="btn btn-default" type="submit" ng-disabled="pending || oldPassword == password" translate="ui.account.changePassword"></button> </div> </form> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabNickName"> <form novalidate class="form-horizontal col-md-5" role="form" ng-submit="changeNickName()"> <div class="form-group"> <label for="inputPassword" translate="ui.account.newNickname"></label> <input type="text" ng-model="nickName" class="form-control" placeholder="{{\'ui.placeholder.nickName\' | translate }}" required> </div> <div class="form-group"> <button class="btn btn-default" type="submit" ng-disabled="pending" translate="ui.account.changeNickname"></button> </div> </form> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabGoogle"> <div class="panel panel-default" ng-show="!useGoogleAuth"> <div class="panel-body"> <div class="col-md-9"> <div translate="ui.account.bindGoogleStep" translate-values="{googleKey : googleKey}"></div> </div> <div class="col-md-3"> <div id="qrcode" align="left"></div> </div> </div> </div> <div class="alert alert-success" ng-if="useGoogleAuth" translate="ui.account.alert.bindGoogleSuccess"></div> <div class="row"> <div class="col-md-3"> <div class="form-group"> <label for="inputAuthCode" translate="ui.account.googleCode"></label> <input id="inputAuthCode" type="text" ng-model="googleCode" class="form-control" placeholder="{{\'ui.placeholder.googleCode\'|translate}}" required> </div> <div class="form-group"> <button ng-click="bindGoogle()" ng-if="!useGoogleAuth" ng-disabled="pending || googleCode.length != 6" class="btn btn-warning outline" translate="ui.account.bindGoogleCode"></button> <button ng-click="bindGoogle()" ng-if="useGoogleAuth" ng-disabled="pending || googleCode.length != 6" class="btn btn-warning outline" translate="ui.account.unbindGoogleCode"></button> </div> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabApiKey"> <div class="row" style="margin-top:30px;margin-bottom:30px"> <div class="col-md-8"> <p><b>{{\'ui.dialog.account.createApiKeyTitle\'|translate}}</b> </div> <div class="pull-right" class="col-md-4"> <button ng-click="createApiKey()" class="btn btn-large btn-success outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dialog.account.createApiKey\'|translate}}</button> <a class="btn btn-default" uib-tooltip="View Api Document" tooltip-append-to-body="true" href="/api#%E6%89%A9%E5%B1%95API" target="_blank"><i class="glyphicon glyphicon-question-sign"></i></a> </div> </div> <table class="table" ng-init="showMosaic=true" ng-mouseenter="showMosaic=false" ng-mouseleave="showMosaic=true"> <tr> <th>#</th> <th translate="AccessKey"></th> <th translate="SecretKey" style="width:280px"></th> <th translate="ui.account.cols.date"></th> <th style="text-align:center" translate="ui.account.cols.status"></th> <th translate="ui.account.cols.action"></th> </tr> <tr ng-repeat="apikey in apiKeyList"> <td width="8">{{$index+1}}</td> <td><span ng-class="showMosaic ? \'mosaic\': \'\'">{{apikey.access_key}}</span></td> <td><span ng-class="showMosaic ? \'mosaic\': \'\'">{{apikey.secret_key}}</span></td> <td>{{apikey.date | tfmt}}</td> <td align="center"><i ng-class="[\'glyphicon glyphicon-ok-sign text-success\', \'glyphicon glyphicon-ban-circle\'][apikey.status]"></i></td> <td> <button ng-class="[\'btn btn-xs btn-success outline\', \'btn btn-xs btn-warning outline\'][apikey.status]" ng-click="lockApiKey(apikey)"><i ng-class="[\'glyphicon glyphicon-ban-circle\', \'glyphicon glyphicon-ok-sign\'][apikey.status]"></i>&nbsp;{{[\'ui.account.lock\', \'ui.account.unlock\'][apikey.status]|translate}}</button> <button class="btn btn-xs btn-danger outline" ng-click="deleteApiKey(apikey)"><i class="glyphicon glyphicon-remove-circle"></i>&nbsp;{{\'ui.g.delete\'|translate}}</button> </td> </tr> </table> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabShadow"> <div ng-class="newMember.id>0 ? \'panel panel-info\' : \'panel panel-default\'" style="margin-bottom:8px"> <div class="panel-heading"> <span ng-if="newMember.id<0"><i class="glyphicon glyphicon-plus-sign"></i>&nbsp;{{"ui.account.addShadowTitle"|translate}}</span> <span ng-if="newMember.id>0"><i class="glyphicon glyphicon-user"></i>&nbsp;{{"ui.account.changeShadowTitle"|translate}}</span> </div> <div class="panel-body row expand"> <div class="col-md-6"> <div translate="ui.account.shadowPermissions"></div> <select multiple ng-model="newMember.permission" class="form-control" style="height:140px" ng-options="item.name for item in permissions"> </select> </div> <div class="col-md-6"> <p translate="ui.account.shadowInfo"></p> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span> <input type="text" ng-readonly="newMember.id>0" ng-model="newMember.username" class="form-control" placeholder="{{\'ui.placeholder.username\' | translate }}"> </div> </div> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span> <input type="password" ng-model="newMember.password" class="form-control" placeholder="{{newMember.id>0 ? \'ui.placeholder.passwordEmpty\' : \'ui.placeholder.password\' | translate }}"> </div> </div> <div class="form-group"> <button ng-if="newMember.id<0" class="btn btn-success outline" ng-click="saveShadowMember(-1)" translate="ui.account.btnAddShadow"></button> <button ng-if="newMember.id>0" class="btn btn-success outline" ng-click="saveShadowMember(newMember.id)" translate="ui.account.btnChangeShadow"></button> <button ng-if="newMember.id>0" href="" ng-click="newMember.id=-1" class="btn btn-success outline" translate="ui.account.cancelChangeSahdow" style="margin-left:8px"></button> </div> </div> </div> </div> <table class="table" ng-if="shadowMember.length > 0"> <tr> <th>#</th> <th translate="ui.account.cols.username"></th> <th translate="ui.account.cols.lastLoginIp"></th> <th translate="ui.account.cols.lastLoginTime"></th> <th style="text-align:center" translate="ui.account.cols.alive"></th> <th style="text-align:center" translate="ui.account.cols.status"></th> <th translate="ui.account.cols.action"></th> </tr> <tr ng-repeat="member in shadowMember"> <td width="8">{{$index+1}}</td> <td>{{member.username}}</td> <td>{{member.last_login_ip}}</td> <td>{{member.last_login}}</td> <td>{{member.alive}}</td> <td align="center"><i ng-class="[\'glyphicon glyphicon-ok-sign text-success\', \'glyphicon glyphicon-ban-circle\'][member.status]"></i></td> <td> <button class="btn btn-xs btn-success outline" ng-click="changeShadowMember(member)"><i class="glyphicon glyphicon-user"></i>&nbsp;{{\'ui.account.change\'|translate}}</button> <button ng-class="[\'btn btn-xs btn-success outline\', \'btn btn-xs btn-warning outline\'][member.status]" ng-click="lockShadowMember(member)"><i ng-class="[\'glyphicon glyphicon-ban-circle\', \'glyphicon glyphicon-ok-sign\'][member.status]"></i>&nbsp;{{[\'ui.account.lock\', \'ui.account.unlock\'][member.status]|translate}}</button> <button class="btn btn-xs btn-danger outline" ng-click="deleteShadowMember(member)"><i class="glyphicon glyphicon-remove-circle"></i>&nbsp;{{\'ui.g.delete\'|translate}}</button> </td> </tr> </table> </div> <div role="tabpanel" ng-class="::getCls(\'affiliate\', \'tab-pane fade in\')" id="affiliate"> <div> <span> {{ \'ui.account.levelTips\' | translate }}: <font color="red" style="font-size:20pt">L{{account.level+1}}</font> </span> <span> {{ \'ui.account.vpointsTips\' | translate }}: <font color="red" style="font-size:20pt">{{account.vpoints}}</font> </span> <span> {{ \'ui.account.pointsTips\' | translate }}: <font color="red" style="font-size:20pt">{{account.points}}</font> </span> <br> <div ng-if="account.promotion_balance > 0"> <span translate="ui.account.promotionRights" translate-values="{money: account.promotion_balance}"></span> </div> </div> <div class="alert alert-success" style="margin-top:10px;margin-bottom:10px"> {{invitationURL}} </div> <div> <p><b>{{\'ui.account.promotionTips\' | translate }}</b></p> </div> <div style="margin-top:15px;margin-bottom:15px"> <button ng-click="transPoints()" class="btn btn-default outline"><i class="glyphicon glyphicon-transfer"></i>&nbsp;{{\'ui.account.transPoints\'|translate}}</button> </div> <div class="panel panel-default"> <div class="panel-heading"> {{\'ui.account.affiliate.rules\'|translate}} </div> <div class="panel-body"> <table class="table"> <tr> <th>{{\'ui.account.affiliate.level\'|translate}}</th> <th>{{\'ui.account.affiliate.needPoints\'|translate}}</th> <th>{{\'ui.account.affiliate.init_balance\'|translate}}</th> <th>{{\'ui.account.affiliate.returnPoints\'|translate}}</th> </tr> <tr ng-repeat="item in affiliate" ng-if="item[0]>=0"> <td>{{item[0]+1}}</td> <td>{{item[0]*1000}}</td> <td>{{item[1]}}</td> <td>100%</td> </tr> </table> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> {{\'ui.account.affiliate.image\'|translate}} </div> <div class="panel-body"> <table class="table no"> <tr ng-repeat="b in banners"> <td valign="baseline"><b>{{b.size}}</b></td> <td> <a target="_blank" href="/images/affiliate/{{b.size}}.png"> <img ng-src="/images/affiliate/{{b.size}}.png"> </a> </td> </tr> </table> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabSettings"> <div class="alert alert-success" translate="ui.account.alertThresholdDesc"></div> <form novalidate class="form-horizontal col-md-2" role="form" ng-submit="changeAlertThreshold()"> <div class="form-group"> <label for="inputAlertThreshold" translate="ui.account.alertThreshold"></label> <input type="number" ng-model="alertThreshold" class="form-control" required> </div> <div class="form-group"> <button class="btn btn-default" type="submit" ng-disabled="pending" translate="ui.account.changeThreshold"></button> </div> </form> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabPushSettings"> <div class="panel panel-default"> <div class="panel-heading"> {{\'ui.sns.settings\'|translate}} </div> <div class="panel-body"> <div ng-repeat="item in pushSettings" ng-show="!item.hide" class="row" style="margin-bottom:10px"> <div class="col-md-2" style="text-align:right"><b>{{ item.name | trans}}</b></div> <div class="col-md-6"> <div ng-if="item.placeholder" class="col-md-10"> <input type="text" ng-model="item.value" class="form-control" placeholder="{{ item.placeholder | trans}}"> </div> <div class="col-md-2"> <switch ng-model="item.checked"></switch> </div> </div> <div class="col-md-4" style="color:red;line-height: 210%;"> <span style="margin-right:5px" ng-show="item.key && !account.sns[item.key]" class="label label-danger outline noradius">{{\'ui.account.sns.notBound\'|translate}}</span> {{ item.desc | trans }} </div> </div> <div class="row"> <div class="col-md-2" style="text-align:right"> <button class="btn btn-success outline" ng-click="changePushSettings()" translate="ui.g.apply"></button> </div> </div> </div> </div> <div class="row"> <div class="col-md-6" ng-show="isSupportWechat"> <div class="panel panel-default"> <div class="panel-heading"> <i class="fa fa-weixin" aria-hidden="true"></i>&nbsp;{{\'ui.const.weixin\'|translate}} </div> <div class="panel-body"> <div class="row" ng-show="!account.sns.wechat"> <div class="col-md-6"> <p>1. {{\'ui.account.sns.wechatSearch\'|translate}}</p> <p>2. {{\'ui.account.sns.send\'|translate}} <b style="color:red">{{ snsKey}}</b></p> </div> <div class="col-md-6"> <img src="images/weixin_fmz.png" width="160"> </div> </div> <div ng-show="account.sns.wechat"> <div class="alert alert-success">{{\'ui.account.sns.bound\'|translate}}</div> <button ng-disabled="pending" class="btn btn-warning outline" ng-click="unbindSNS(\'wechat\')" translate="ui.account.btnUnbind"></button> </div> </div> </div> </div> <div class="col-md-6" ng-show="isSupportTelegram"> <div class="panel panel-default"> <div class="panel-heading"> <i class="fa fa-telegram" aria-hidden="true"></i>&nbsp;Telegram </div> <div class="panel-body"> <div class="row" ng-show="!account.sns.telegram"> <div class="col-md-6"> <p>1. {{\'ui.account.sns.telegramSearch\'|translate}} <a target="_blank" href="https://t.me/fmzquant_bot"><b>@fmzquant_bot</b></a></p> <p>2. {{\'ui.account.sns.send\'|translate}} <b style="color:red">{{ snsKey}}</b></p> </div> <div class="col-md-6"> <a target="_blank" class="btn btn-success outline" href="https://t.me/fmzquant_bot">@fmzquant_bot</a> </div> </div> <div ng-show="account.sns.telegram"> <div class="alert alert-success">{{\'ui.account.sns.bound\'|translate}}</div> <button ng-disabled="pending" class="btn btn-warning outline" ng-click="unbindSNS(\'telegram\')" translate="ui.account.btnUnbind"></button> </div> </div> </div> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tabLicense"> <div class="panel panel-default"> <div class="panel-body"> <div class="alert alert-success"> Expired Date: {{ g.expired}} </div> </div> </div> </div> </div> </div> </div> ')}]),angular.module("views/m/add-node.html",[]).run(["$templateCache",function(a){a.put("views/m/add-node.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/nodes" translate="ui.dashboard.tabs.dockerNav"></a></li> <li class="active" translate="ui.dashboard.tabs.docker.new"></li> </ol> <p class="alert alert-success"> {{ \'ui.addNode.head\' | translate }} </p> <div role="tabpanel"> <ul class="nav nav-pills" ng-if="!isOEM"> <li role="presentation" class="active outline"> <a ng-href="#method_1" role="tab" data-toggle="tab"><i class="glyphicon glyphicon-wrench"></i>&nbsp;{{\'ui.dashboard.tabs.docker.newManually\' | translate}}</a> </li> <li role="presentation" class="inactive outline"> <a ng-href="#method_0" role="tab" data-toggle="tab"><i class="glyphicon glyphicon-cloud"></i>&nbsp;{{\'ui.dashboard.tabs.ecs.new\' | translate}}</a> </li> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in inactive" id="method_0" ng-if="!isOEM"> <div role="tabpanel"> <ul class="nav nav-tabs"> <li role="presentation" ng-class="$index==0 ? \'active\' : \'inactive\'" ng-repeat="group in products"> <a ng-href="#group_{{$index}}" role="tab" data-toggle="tab">{{group.region|trans}}</a> </li> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" ng-class="$index==0 ? \'tab-pane fade in active\' : \'tab-pane fade in inactive\'" id="group_{{$index}}" ng-repeat="group in products"> <div class="row"> <div class="col-md-3" ng-repeat="item in group.items"> <div ng-class="getCls(item)" style="text-align:center" ng-mouseenter="focus(item)"> \x3c!-- Default panel contents --\x3e <div class="panel-heading"><b>{{ item.name | trans }}</b></div> <div class="panel-body"> <h3> <b style="color:#555">{{item.unit_price/1e8}}</b>&nbsp;<span style="color:#616a72">{{\'ui.const.rmb\'|translate}}&nbsp;/&nbsp;{{\'ui.const.hour\'|translate}}</span> </h3> <p ng-bind-html="item.description | trans"></p> <button style="margin-top:10px" class="btn btn-primary btn-large outline" ng-click="buyProduct(item)">{{\'ui.ecs.btnRentNow\'|translate}}</button> </div> </div> </div> </div> </div> </div> </div> <div class="alert alert-danger outline" translate="ui.ecs.headTips"></div> </div> <div role="tabpanel" class="tab-pane fade in active" id="method_1"> <div role="tabpanel"> <ul class="nav nav-tabs"> <li role="presentation" class="active"> <a ng-href="#os_windows" role="tab" data-toggle="tab">Windows</a> </li> <li role="presentation" class="inactive"> <a ng-href="#os_linux" role="tab" data-toggle="tab">Linux & Mac</a> </li> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in active" id="os_windows"> <div class="panel panel-default" style="margin-top:15px"> <div class="panel-heading">{{ \'ui.addNode.step1\' | translate }}&nbsp;{{\'ui.g.download\'|translate}}</div> <div class="panel-body down-list"> <a target="_blank" ng-href="{{docker.base}}/robot_windows_amd64.zip" class="label label-success outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;64{{\'ui.addNode.bit\'|translate}}&nbsp;{{\'ui.addNode.versionCLI\'|translate}} </a> <a target="_blank" ng-href="{{docker.base}}/robot_windows_amd64_gui.zip" class="label label-primary outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;64{{\'ui.addNode.bit\'|translate}}&nbsp;{{\'ui.addNode.versionGUI\'|translate}} </a> <a target="_blank" ng-href="{{docker.base}}/robot_windows_386.zip" class="label label-success outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;32{{\'ui.addNode.bit\'|translate}}&nbsp;{{\'ui.addNode.versionCLI\'|translate}} </a> <a target="_blank" ng-href="{{docker.base}}/robot_windows_386_gui.zip" class="label label-primary outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;32{{\'ui.addNode.bit\'|translate}}&nbsp;{{\'ui.addNode.versionGUI\'|translate}} </a> </div> </div> <div class="panel panel-default" style="margin-top:15px"> <div class="panel-heading">{{ \'ui.addNode.step2\' | translate }}&nbsp;{{\'ui.g.run\'|translate}}</div> <div class="panel-body"> <table> <tr> <td width="80px"> {{\'ui.addNode.versionCLI\'|translate}} </td> <td><code>robot.exe -s {{ rpcs }} -p {{\'ui.addNode.dockerPassword\'|translate}}</code><span class="text-muted" style="margin-left:20px">({{\'ui.addNode.dockerCmdTips\'|translate}})</span></td> </tr> <tr> <td>{{\'ui.addNode.versionGUI\'|translate}}</td> <td> <span class="text-muted">{{\'ui.addNode.dockerAddr\'|translate}}:</span>&nbsp;<code>{{ rpcs }}</code> &nbsp; <span class="text-muted">{{\'ui.const.password\'|translate}}:</span>&nbsp;<code>{{\'ui.addNode.dockerPassword\'|translate}}</code></td> </tr> </table> </div> </div> <p class="alert alert-danger outline" translate="ui.addNode.speedTips" ng-if="!isOEM"></p> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="os_linux"> <div class="panel panel-default" style="margin-top:15px"> <div class="panel-heading">{{ \'ui.addNode.step1\' | translate }}&nbsp;{{\'ui.g.download\'|translate}}</div> <div class="panel-body down-list"> <a target="_blank" ng-href="{{docker.base}}/robot_linux_amd64.tar.gz" class="label label-success outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;64{{\'ui.addNode.bit\'|translate}}&nbsp;Linux </a> <a target="_blank" ng-href="{{docker.base}}/robot_linux_386.tar.gz" class="label label-primary outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;32{{\'ui.addNode.bit\'|translate}}&nbsp;Linux </a> <a target="_blank" ng-href="{{docker.base}}/robot_linux_arm_static.tar.gz" class="label label-success outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;ARM Linux </a> <a target="_blank" ng-href="{{docker.base}}/robot_darwin_amd64.tar.gz" class="label label-primary outline"> <i class="glyphicon glyphicon-download-alt"></i>&nbsp;Mac </a> </div> </div> <div class="panel panel-default" style="margin-top:15px"> <div class="panel-heading">{{ \'ui.addNode.step2\' | translate }}&nbsp;{{\'ui.g.run\'|translate}}</div> <div class="panel-body"> <code>chmod +x robot <br> ./robot -s {{ rpcs }} -p {{\'ui.addNode.dockerPassword\'|translate}}</code> <span class="text-muted" style="margin-left:20px">({{\'ui.addNode.dockerCmdTips\'|translate}})</span> </div> </div> <p class="alert alert-danger outline" translate="ui.addNode.speedTips" ng-if="!isOEM"></p> </div> </div> </div> </div> </div> </div> </div> ')}]),angular.module("views/m/add-platform.html",[]).run(["$templateCache",function(a){
a.put("views/m/add-platform.html",'<div class="row" ng-loading> <div ng-show="isEdit || exchanges.length>0"> <ol class="breadcrumb"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/platforms" translate="ui.dashboard.tabs.platformNav"></a></li> <li class="active">{{ isEdit ? \'ui.platformNew.editTitle\' : \'ui.platformNew.addTitle\' | translate}}</li> </ol> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.platformNew.selector"></h3> </div> <div class="panel-body"> <div class="row" style="margin-bottom:10px"> <div class="col-md-3"> <select ng-disabled="isEdit" ng-model="tradeType" ng-change="labelChange()" class="form-control" convert-to-number> <option ng-if="lang==\'zh_CN\'&&canShowTradeType(0)" value="0" selected translate="ui.platformNew.type.futures"></option> <option ng-if="lang==\'zh_CN\'&&canShowTradeType(1)" value="1" translate="ui.platformNew.type.foreignfutures"></option> \x3c!--<option value="2" translate="ui.platformNew.type.stocks"></option>--\x3e <option value="3" ng-if="canShowTradeType(3)" translate="ui.platformNew.type.cryptocurrency"></option> <option value="4" ng-if="canShowTradeType(4)" translate="ui.platformNew.type.protocol"></option> </select> </div> <div class="form-group" ng-show="tradeType==3"> <div class="col-md-3 col-xs-7"> <ui-select ng-show="!isEdit" on-select="labelChange()" ng-model="exchangeOption.exchange"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.name | trans}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in exchanges | filter: $select.search track by m.eid"> <div ng-bind-html="m.name | highlight: $select.search | trans"></div> </ui-select-choices> </ui-select> <input spellcheck="false" ng-if="isEdit" ng-model="name" readonly type="text" class="form-control" required> </div> <div class="col-md-1 col-xs-2" ng-if="exchange"> <a ng-if="exchange.logo" target="_blank" href="{{exchange.website}}"><img style="margin-top:8px" height="16" border="0" ng-src="{{ exchange.logo }}"></a> </div> </div> <div ng-show="tradeType==4"> <div class="col-md-3"> <select class="form-control" ng-model="protocol" ng-options="p.name for p in protocols"></select> </div> <div class="col-md-3"> <span class="btn btn-default" tooltip-append-to-body="true" uib-tooltip="View Api Document" ng-click="showLink(\'bbs-topic/1052\')"><i class="glyphicon glyphicon-question-sign"></i></span> </div> </div> \x3c!-- Exchange End --\x3e <div ng-show="tradeType<3"> <div class="col-md-5"> <ui-select ng-model="option.ctp_ro_broker" on-select="platformChange()"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.name}}</ui-select-match> <ui-select-choices repeat="m in brokers | filter:{type: tradeType} | filter: canShowBroker | filter: $select.search track by m.key"> <div ng-bind-html="m.name | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2" ng-show="ctp_ro_broker_group.nets"> <select class="form-control" ng-change="groupChange()" ng-model="ctp_ro_broker_group" ng-options="m.name for m in option.ctp_ro_broker[\'groups\']"> <option value="" style="display:none">- 选择分组 -</option> </select> </div> <div class="col-md-2" ng-show="ctp_ro_broker_group.nets"> <select class="form-control" ng-model="ctp_ro_group_net" ng-change="ctpChange()" ng-options="m.name for m in ctp_ro_broker_group[\'nets\']"> <option value="" style="display:none">- 选择网络 -</option> </select> </div> </div> </div> <a style="margin-bottom:5px" href="bbs-topic/506" target="blank" class="btn btn-danger outline" ng-if="tradeType<3 && !g.oem"><i class="glyphicon glyphicon-flash"></i>&nbsp;合作单位低佣金开户</a> <table class="table" ng-show="tradeType<3 && ctp_ro_group_net[\'quote\'].length>0"> <tr><td><span class="label label-success">行情服务器<span><span class="badge pull-right">{{ ctp_ro_group_net[\'quote\'].length }}</span></span></span></tr> <tr ng-repeat="m in ctp_ro_group_net[\'quote\']"> <td><input type="radio" name="ctp_ro_quote" ng-click="quoteChange(m)" ng-checked="$first" value="{{ m }}" id="{{\'id_quote_\'+$index}}"><label for="{{\'id_quote_\'+$index}}">&nbsp;&nbsp;{{ m }}</label></td> </tr> <tr><td><span class="label label-danger">交易服务器</span><span class="badge pull-right">{{ ctp_ro_group_net[\'trade\'].length }}</span></tr> <tr ng-repeat="m in ctp_ro_group_net[\'trade\']"> <td><input type="radio" name="ctp_ro_trade" ng-click="tradeChange(m)" ng-checked="$first" value="{{ m }}" id="{{\'id_trade_\'+$index}}"><label for="{{\'id_trade_\'+$index}}">&nbsp;&nbsp;{{ m }}</label></td> </tr> </table> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.platformNew.configer"></h3> </div> <div class="panel-body"> <form class="form-horizontal" role="form" novalidate name="frm" ng-submit="submit()"> <div class="form-group" ng-repeat="ele in exchange.meta | filter: {hide:false} track by ele.name "> <div ng-repeat="idx in ele.group"> <div ng-style="{\'margin-top\': $index>0?\'14px\':\'\'}" ng-show="exchange.meta[idx].type != \'checkbox\' && (ele.required || !exchange.meta[idx].checkbox)" class="row"> <label class="col-md-2 control-label">{{ exchange.meta[idx].label | trans}}</label> <div class="col-md-4" ng-if="exchange.meta[idx].type!=\'text\'"> <div class="input-group" ng-if="exchange.meta[idx].encrypt"> <input type="{{exchange.meta[idx].type}}" ng-model="exchange.meta[idx].value" class="form-control" placeholder="{{exchange.meta[idx].desc|trans}}" ng-required="ele.required"> <span class="input-group-addon" uib-tooltip="{{ui.platformNew.type.encryptTips|translate}}" tooltip-append-to-body="true"><i class="glyphicon glyphicon-lock"></i></span> </div> <input ng-if="!exchange.meta[idx].encrypt" type="{{exchange.meta[idx].type}}" ng-model="exchange.meta[idx].value" class="form-control" placeholder="{{exchange.meta[idx].desc}}" ng-required="ele.required"> </div> <div class="col-md-6" ng-if="exchange.meta[idx].type==\'text\'"> <textarea rows="5" ng-model="exchange.meta[idx].value" class="form-control" tooltip-append-to-body="true" uib-tooltip="{{exchange.meta[idx].desc}}" ng-required="ele.required"></textarea> </div> </div> <div class="row" ng-if="ele.type == \'checkbox\'"> <div class="col-md-2 col-md-offset-2"> <input type="checkbox" ng-model="ele.value"> {{ele.label | trans}} </div> </div> </div> <div class="row" ng-if="ele.checkbox && ele.type != \'checkbox\' && !ele.hide && !ele.force_hide"> <div class="col-md-2 col-md-offset-2"> <input type="checkbox" ng-change="ele.onChange()" ng-model="ele.required"> {{ele.checkbox | trans}} </div> </div> </div> <div class="form-group"> <div class="row"> <label class="col-md-2 control-label" translate="ui.platformNew.label"></label> <div class="col-md-3"> <input spellcheck="false" type="text" tooltip-append-to-body="true" uib-tooltip="{{\'ui.platformNew.labelTips\'|translate}}" ng-model="label" class="form-control" placeholder="Label" required> </div> </div> </div> </form> </div> </div> <div class="form-group"> <button class="btn btn-success outline" ng-click="submit()" type="submit" ng-disabled="pending">{{isEdit ? "ui.platformNew.save" : "ui.platformNew.add" | translate}}</button> &nbsp;<a href="m/platforms" class="label label-danger" translate="ui.g.cancel"></a> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> ')}]),angular.module("views/m/add-robot.html",[]).run(["$templateCache",function(a){a.put("views/m/add-robot.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/robots" translate="ui.dashboard.tabs.robotNav"></a></li> <li class="active">{{ \'ui.dashboard.addRobot\' | translate }}</li> </ol> <div class="panel panel-default" ng-show="complete && strategies.length && platforms.length && nodes.length > 0"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.dashboard.addRobot"></h3> </div> <div class="panel-body"> <form class="form-horizontal" role="form" novalidate name="frm" ng-submit="submit()"> <div class="form-group"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.name"></label> <div class="col-md-6 col-xs-8"> <input type="text" autocomplete="on" ng-model="name" class="form-control" id="inputName" placeholder="Robot Name" required> </div> </div> <div class="form-group"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.docker"></label> <div class="col-md-4 col-xs-8"> <select ng-model="node_selected_id" class="form-control" required> <optgroup label="{{\'ui.const.privateDocker\'|translate}}" ng-if="hasPrivate()"> <option value="-1" translate="ui.robot.autoDistribution"></option> <option ng-repeat="node in nodes | filter:{ is_owner: true } | orderBy:\'id\'" value="{{node.id}}">{{ node.desc }}</option> </optgroup> <optgroup label="{{\'ui.const.publicDocker\'|translate}}" ng-show="hasPublic()"> <option value="-2" style="display:none">--- {{ \'ui.const.selectDocker\' | translate }} ---</option> <option ng-repeat="node in nodes | filter:{ is_owner: false } | orderBy:\'id\'" value="{{node.id}}">{{ node.desc }}</option> </optgroup> </select> </div> <div class="col-md-1" ng-if="!hasPrivate()"> <a href="m/add-node" class="btn btn-default pull-right" uib-tooltip="{{\'ui.dashboard.tabs.docker.newPrivate\' | translate}}"><i class="glyphicon glyphicon-plus"></i></a> </div> </div> <div class="form-group"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.strategy"></label> <div class="col-md-6 col-xs-8"> <ui-select ng-model="option.strategy"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.name | trans}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in strategies | filter: $select.search track by m.name"> <div ng-bind-html="m.name | highlight: $select.search | trans"></div> </ui-select-choices> </ui-select> </div> </div> <div class="form-group" style="margin-top:25px" ng-if="option.strategy.hasArg"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.arg"></label> <div class="col-md-10 col-xs-9"> <div ng-class="argList.cls" ng-repeat="argList in option.strategy.templatesArgList"> <div class="panel-heading"> {{argList.name | trans}} </div> <div class="panel-body"> <div ng-if="argList.list.length==0" translate="ui.edit.strategy.noArg"></div> <div class="panel panel-default" ng-repeat="group in argList.group"> <div class="panel-heading" ng-if="group.name"> {{group.name | trans}} </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in group.data" ng-show="showArg(argList.list, pair)"> <div class="col-md-4 col-xs-5"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans }}</span></div> <div ng-class="(pair[3].inputType == \'text\' || pair[3].inputType == \'password\') ? \'col-md-8 col-xs-8\' : \'col-md-4 col-xs-6\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans }}" popover-title="{{ pair[3].name | translate}}" popover-append-to-body="true"> <input autocomplete="on" ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'number\'" type="{{ pair[3].inputType }}" ng-model="pair.value" class="form-control" placeholder="{{\'ui.placeholder.arg.canEmpty\'|translate}}"> <input ng-if="pair[3].inputType == \'number\'" type="{{ pair[3].inputType }}" ng-model="pair.value" class="form-control" required> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.tips.checkbox\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="form-group"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.period"></label> <div class="col-md-2 col-xs-8"> <select ng-model="ktick_selected" ng-options="(m.name | translate) for m in kticks" class="form-control" required> </select> </div> </div> <div class="form-group"> <label class="col-md-2 col-xs-3 control-label" translate="ui.robotNew.platform"></label> <div class="col-md-2 col-xs-4"> <ui-select ng-model="option.platform" on-select="option.stock=option.platform.stocks[0]"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.label}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.label"> <div ng-bind-html="m.label | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2 col-xs-3" ng-if="!option.platform.custom"> <select ng-model="option.stock" ng-options="m for m in option.platform.stocks" class="form-control" required> </select> </div> <div class="col-md-2 col-xs-3" ng-if="option.platform.custom"> <input type="text" class="form-control" ng-model="option.stock" required> </div> <div class="col-md-1 col-xs-1" ng-if="option.platform.eid!=\'Futures_CTP\' && option.platform.eid!=\'Futures_LTS\'"> <switch ng-model="option.platform.custom" off="{{\'ui.tips.customSymbolSwitch\'|translate}}" uib-tooltip="{{\'ui.tips.customSymbol\'|translate}}" tooltip-append-to-body="true"></switch> </div> <div class="col-md-1 col-xs-1"> <span class="pull-right"> <a ng-class="pairs_select.length > 0 ? \'btn btn-success outline\' : \'btn btn-danger outline\'" ng-click="addPair()"><i class="glyphicon glyphicon-plus"></i></a> </span> </div> </div> <div class="form-group"> <div class="col-md-10 col-md-offset-2"> <div ng-if="pairs_select.length == 0"> <span class="label label-danger outline" translate="ui.robotNew.tipsAddPlatform"></span> </div> <div class="bootstrap-tags" ng-if="pairs_select.length > 0"> <span tooltip-append-to-body="true" uib-tooltip="{{pair.eid | eid2str | translate}}" ng-class="$first ? \'tag label label-danger outline\' : \'tag label label-info outline\'" ng-repeat="pair in pairs_select">{{pair.label}} / {{ pair.stock }}<span data-role="remove" ng-click="removePair(pair)"></span></span> </div> </div> </div> <div class="form-group"> <div class="col-md-offset-2 col-xs-offset-2 col-md-10"> <button tooltip-placement="bottom" uib-tooltip="{{(option.strategy.language == 1?\'ui.robotNew.needPython\':\'\')|translate}}" class="btn btn-default" ng-disabled="name.length == 0 || pairs_select.length == 0 || io_pending" type="submit"><i ng-class="\'glyphicon glyphicon-plus-sign \' + (io_pending ? \'icon-spin\' : \'\')"></i>&nbsp;{{(io_pending ? "ui.robotNew.adding" : "ui.robotNew.add")|translate}}</button> <a href="m/robots" class="label label-success" translate="ui.g.cancel"></a> <a ng-if="platforms.length==1" href="m/add-platform" class="label label-warning" translate="ui.robotNew.addPlatform"></a> </div> </div> </form> </div> </div> <div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> <div ng-if="complete"> <div class="alert alert-danger outline" ng-show="nodes.length==0 || platforms.length==0 || strategies.length==0"> <span ng-show="strategies.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noStrategy\' | translate}}</b> &nbsp;<a href="m/add-strategy" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.new\'|translate}}</a> &nbsp;<a ng-if="!isOEM" href="square" class="label label-danger outline"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.gosquare\'|translate}}</a> </span> <span ng-show="platforms.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noPlatform\' | translate}}</b> &nbsp;<a href="m/add-platform" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.platform.new\'|translate}}</a> </span> <span ng-show="nodes.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noDocker\' | translate}}</b> &nbsp;<a href="m/nodes" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.tabs.docker.new\' | translate}}</a> </span> </div> </div> </div> </div> ')}]),angular.module("views/m/add-strategy.html",[]).run(["$templateCache",function(a){
a.put("views/m/add-strategy.html",'<div class="row" ng-loading> <div class="alert alert-danger col-md-4 col-md-offset-4" ng-if="error"> {{ error | translate }} </div> <ul class="nav nav-tabs"> <li role="presentation" ng-class="{true:\'inactive\', false:\'active\'}[isPremiumBacktest||isAutoStart]" ng-if="!isPremiumBacktest"> <a ng-href="#tab_0" role="tab" data-toggle="tab"><i class="fa fa-cubes"></i>&nbsp;{{\'ui.edit.strategy.tabEdit\'|translate}}</a> </li> <li role="presentation" ng-class="{true:\'active\', false:\'inactive\'}[isPremiumBacktest||isAutoStart]"> <a ng-href="#tab_1" role="tab" data-toggle="tab"><i class="fa fa-rocket"></i>&nbsp;{{(isPremiumBacktest ? ((\'ui.edit.strategy.cloud\' | translate) + \' - \' + name) : (\'ui.edit.strategy.tabBacktest\'|translate))}}</a> </li> <li role="presentation" class="inactive" ng-if="isPremiumBacktest"> <a ng-href="#tab_2" role="tab" data-toggle="tab"><i class="fa fa-info-circle"></i>&nbsp;{{\'ui.g.description\'|translate}}</a> </li> <li role="presentation" class="inactive" ng-if="isPremiumBacktest"> <a ng-href="#tab_3" role="tab" data-toggle="tab"><i class="fa fa-book"></i>&nbsp;{{\'ui.g.manual\'|translate}}</a> </li> <span class="pull-right" ng-if="codeType.id==3"> <span class="label label-success" translate="ui.strategy.blocklyTips"></span> </span> </ul> <div class="tab-content" style="margin-top:15px"> <div ng-show="!isPremiumBacktest" role="tabpanel" ng-class="{true:\'tab-pane fade in\', false:\'tab-pane fade in active\'}[isPremiumBacktest||isAutoStart]" id="tab_0"> <form class="form-horizontal" role="form" novalidate name="frm"> <div class="form-group"> <div ng-class="isEdit ? \'col-md-10\' : \'col-md-12\'"> <div class="input-group"> <div class="input-group-btn"> <button style="border-right:0px" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <i ng-class="codeType.logo"></i>&nbsp;{{codeType.name|trans}}<span class="caret" style="margin-left:5px;margin-right:8px"></span> </button> <ul class="dropdown-menu" role="menu"> <li ng-repeat="m in codeTypes" ng-show="showCodeType(m)"> <a href="javascript:void(0)" ng-click="changeCodeType(m)"><i ng-class="m.logo"></i>&nbsp;{{ m.name | trans }}<span class="glyphicon glyphicon-ok" style="margin-left:8px" ng-if="m.id==codeType.id"></span></a> </li> </ul> </div> \x3c!-- /btn-group --\x3e <input spellcheck="false" type="text" ng-model="name" class="form-control" id="inputName" placeholder="{{\'ui.placeholder.strategy\'|translate}}" required> <div class="input-group-btn"> <span class="dropdown" style="margin-left:-2px"> <button type="button" class="btn btn-default btn-noradius dropdown-toggle" data-toggle="dropdown" aria-expanded="false">{{category.name|translate}} <span class="caret"></span></button> <ul class="dropdown-menu dropdown-left-manual" role="menu"> <li ng-repeat="m in categories" ng-hide="(codeType.id==3||codeType.id==4)&&m.id==20"> <a ng-show="!m.hide" href="javascript:void(0)" ng-click="changeCategory(m)">{{ m.name | translate }}<span class="glyphicon glyphicon-ok" style="margin-left:8px" ng-if="m.id==category.id"></span></a> </li> </ul> </span> <span class="dropdown" ng-show="groups.length>1" style="margin-left:3px"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">{{group.name|translate}} <span class="caret"></span></button> <ul class="dropdown-menu dropdown-left-manual" role="menu" ng-show="groups.length>1"> <li ng-repeat="m in groups"> <a ng-show="!m.hide" href="javascript:void(0)" ng-click="changeGroup(m)">{{ m.name | translate }}<span class="glyphicon glyphicon-ok" style="margin-left:8px" ng-if="m.id==group.id"></span></a> </li> </ul> </span> </div> \x3c!-- /btn-group --\x3e </div> </div> <div ng-show="isEdit" class="col-md-2"> <div class="pull-right"> <a ng-class="{true: \'btn btn-info btn-sm outline\', false: \'btn btn-default btn-sm outline\'}[rsyncToken.length>0]" ng-click="showRsync=!showRsync"><i class="glyphicon glyphicon-retweet"></i>&nbsp;{{ \'ui.edit.strategy.remote\' | translate }}</a> </div> </div> </div> <div class="form-group" ng-show="showRsync"> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-body"> <blockquote style="margin-top:10px"> <p> <a target="_blank" href="https://github.com/fmzquant/SublimeFMZ" class="label label-primary outline">Sublime Text 3 Plugin&nbsp;<i class="glyphicon glyphicon-download-alt"></i></a> <a target="_blank" href="https://github.com/fmzquant/AtomFMZ" class="label label-danger outline">Atom Plugin&nbsp;<i class="glyphicon glyphicon-download-alt"></i></a> <a target="_blank" href="https://github.com/fmzquant/VimFMZ" class="label label-info outline">Vim Plugin&nbsp;<i class="glyphicon glyphicon-download-alt"></i></a> <a target="_blank" href="https://marketplace.visualstudio.com/items?itemName=fmzquant.fmz-vscode-plugin" class="label label-success outline">VSCode Plugin&nbsp;<i class="glyphicon glyphicon-download-alt"></i></a> </p> <small translate="ui.edit.strategy.tips.cloud"></small> <small> <code style="color:#333;font-weight:bold" ng-if="rsyncToken">{{["//","#","//", "//", "//"][codeType.id]}} fmz@{{rsyncToken}}</code> <span style="color:red" ng-if="!rsyncToken" translate="ui.edit.strategy.tips.cloudUpdate"></span> <div class="pull-right" ng-if="isEdit"> <a class="btn btn-default btn-xs outline" ng-if="rsyncToken" ng-click="opToken(2)" ng-disabled="pending_token"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{ \'ui.edit.strategy.delKey\' | translate }}</a> <a class="btn btn-default btn-xs outline" ng-click="opToken(1)" ng-disabled="pending_token"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ \'ui.edit.strategy.updateKey\' | translate }}</a> </div> </small> </blockquote> </div> </div> </div> </div> <div class="form-group"> <div class="col-md-12"> <ul class="nav nav-tabs"> <li role="presentation" class="active"> <a ng-href="#code_tab_0" role="tab" data-toggle="tab"><i class="fa fa-align-left"></i>&nbsp;{{\'ui.g.code\'|translate}}</a> </li> <li role="presentation"> <a ng-href="#code_tab_1" role="tab" data-toggle="tab"><i class="fa fa-edit"></i>&nbsp;{{\'ui.g.note\'|translate}}</a> </li> <li role="presentation"> <a ng-href="#code_tab_2" role="tab" data-toggle="tab"><i class="fa fa-info-circle"></i>&nbsp;{{\'ui.g.description\'|translate}}</a> </li> <li role="presentation"> <a ng-href="#code_tab_3" role="tab" data-toggle="tab"><i class="fa fa-book"></i>&nbsp;{{\'ui.g.manual\'|translate}}</a> </li> <div class="pull-right" ng-show="api_doc"> <a target="_blank" ng-href="{{api_doc | trans }}" class="btn btn-primary btn-xs outline">{{ codeType.name | trans }}&nbsp;{{\'ui.nav.api\'|translate}}&nbsp;&nbsp;<i class="glyphicon glyphicon-info-sign"></i></a> </div> </ul> </div> </div> <div class="tab-content"> <div role="tabpanel" class="form-group tab-pane fade in active" id="code_tab_0"> <div class="col-md-12"> <div style="position: relative;height:500px" id="editor-area"> <div style="width:100%;height:100%" id="code-area-edit" ng-show="codeType.id!=3"></div> <div style="width:100%;height:100%" id="blockly-area-edit" ng-show="codeType.id==3"></div> <div style="position:absolute;right:35px;top:0px;z-index:10;"> <div ng-show="codeType.id!=3"> <div class="btn-group" role="group" ng-if="snippets.length>0" style="margin-right:100px"> <div class="dropdown"> \x3c!-- save button will handle enter button --\x3e <span role="button" style="border-radius:0" aria-expanded="false" data-toggle="dropdown" class="btn btn-default btn-xs" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.edit.strategy.tootips.addCode\' | translate}}"> <i class="glyphicon glyphicon-flash"></i>&nbsp;<b style="color:red">{{ \'ui.edit.strategy.addCode\' | translate}}</b>&nbsp; </span> <ul class="dropdown-menu multi-level" role="menu"> <li class="dropdown-submenu" ng-repeat="snippet in snippets"> <a tabindex="-1" href>{{snippet.name | trans}}</a> <ul class="dropdown-menu scrollable-menu"> <li ng-repeat="item in snippet.items"> <a href ng-click="insertSnippet(item, snippet.type)">{{item.name | trans}}</a> </li> </ul> </li> </ul> </div> </div> <div class="btn-group" role="group"> <button class="btn btn-default btn-xs btn-noradius" ng-disabled="pending" ng-click="confirmSubmit()"><i class="glyphicon glyphicon-ok"></i>&nbsp;{{\'ui.g.save\'|translate}}</button> <button class="btn btn-default btn-xs" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.edit.strategy.tootips.meta\' | translate}}" ng-click="addMeta()"><i class="glyphicon glyphicon-cog"></i>&nbsp;{{ \'ui.edit.strategy.addMeta\' | translate}}</button> <button class="btn btn-default btn-xs btn-noradius" ng-disabled="pending" ng-click="saveFile()"><i class="glyphicon glyphicon-download-alt"></i>&nbsp;{{\'ui.edit.strategy.downloadSource\'|translate}}</button> <button class="btn btn-default btn-xs btn-noradius" ng-disabled="pending" ng-click="exportFile()"><i class="glyphicon glyphicon-export"></i>&nbsp;{{\'ui.edit.strategy.downloadStrategy\'|translate}}</button> <button class="btn btn-default btn-xs btn-noradius" ng-disabled="pending" ngf-multiple="false" ngf-select="importFile($file)" ngf-pattern="\'.xml,.txt,.xtrd,.XTRD\'" ngf-accept="\'.xml,.txt,.xtrd,.XTRD\'"><i class="glyphicon glyphicon-import"></i>&nbsp;{{\'ui.edit.strategy.importStrategy\'|translate}}</button> </div> <div class="btn-group" role="group" ng-show="showThemePicker"> <span class="btn btn-default btn-xs" ng-click="changeFontSize(1)"><i class="glyphicon glyphicon-plus"></i></span> <span class="btn btn-default btn-xs">{{\'ui.g.font\' | translate}} {{defFontSize}}pt</span> <span class="btn btn-default btn-xs" ng-click="changeFontSize(-1)"><i class="glyphicon glyphicon-minus"></i></span> </div> <div class="btn-group" role="group" ng-show="showThemePicker"> <select ng-model="defTheme" ng-change="selectTheme(0, defTheme)" ng-options="theme for theme in editorThemes"></select> </div> <div class="btn-group" role="group" ng-show="showThemePicker"> <span class="btn btn-default btn-xs btn-noradius" ng-click="selectTheme(1, defTheme)" translate="ui.g.apply"></span> <span class="btn btn-default btn-xs btn-noradius" ng-click="selectTheme(2, defTheme)" translate="ui.g.cancel"></span> </div> <div class="btn-group" role="group" ng-hide="showThemePicker"> <span class="btn btn-default btn-xs btn-noradius" ng-click="showThemePicker=true">{{\'ui.g.theme\' | translate}} - {{defTheme}}</span> </div> <div class="btn-group" role="group"> <span class="btn btn-default btn-xs btn-noradius" ng-show="codeType.id==0||codeType.id==2" ng-click="formatCode()" translate="ui.edit.strategy.beauty"></span> <span class="btn btn-default btn-xs" ng-click="switchVim()">{{ isVimMode ? \'ui.edit.strategy.vimOff\' : \'ui.edit.strategy.vimOn\' | translate}}</span> <span class="btn btn-default btn-xs btn-noradius" ng-click="switchFullScreen()"><i ng-class="{true: \'glyphicon glyphicon-resize-small\', false:\'glyphicon glyphicon-resize-full\'}[isFullScreen]"></i></span> </div> </div> <div ng-if="codeType.id==3"> <div class="btn-group" role="group"> <button class="btn btn-default btn-xs btn-noradius" ng-disabled="pending" ng-click="confirmSubmit()"><i class="glyphicon glyphicon-ok"></i>&nbsp;{{\'ui.g.save\'|translate}}</button> <span class="btn btn-default btn-xs btn-noradius" ng-click="switchFullScreen()"><i ng-class="{true: \'glyphicon glyphicon-resize-small\', false:\'glyphicon glyphicon-resize-full\'}[isFullScreen]"></i></span> </div> </div> </div> </div> </div> </div> <div role="tabpanel" class="form-group tab-pane fade in inactive" id="code_tab_1"> <div class="col-md-12"> <textarea class="form-control" ng-model="note" translate-attr="{placeholder: \'ui.placeholder.note\'}" style="width:100%;height:500px"></textarea> </div> </div> <div role="tabpanel" class="form-group tab-pane fade in inactive" id="code_tab_2"> <div class="col-md-12"> <textarea type="text" ng-model="description" class="form-control" translate-attr="{placeholder: \'ui.placeholder.description\'}" style="width:100%;height:500px"></textarea> </div> </div> <div role="tabpanel" class="form-group tab-pane fade in inactive" id="code_tab_3"> <div class="col-md-12"> <textarea type="text" ng-model="manual" class="form-control" translate-attr="{placeholder: \'ui.placeholder.manual\'}" style="width:100%;height:500px"></textarea> </div> </div> </div> <div class="panel panel-default" ng-show="templatesDisplay.length>0&&category.id!=20&&codeType.id!=4"> <div class="panel-heading"> <h3 class="panel-title"> <i ng-class="codeType.logo"></i>&nbsp; <a href ng-click="isTemplateCollapsed=!isTemplateCollapsed"> {{\'ui.edit.strategy.templateRef\'|translate}} <i ng-class="{true: \'glyphicon glyphicon-chevron-right\', false: \'glyphicon glyphicon-chevron-down\'}[isTemplateCollapsed]"></i> </a> </h3> </div> <div class="panel-body" ng-show="!isTemplateCollapsed"> <div ng-style="{\'float\':\'left\', \'border-width\':\'1px\',\'border-radius\':\'.25rem\', \'border-color\':(template.public==4?\'red\':\'#dddddd\'),\'border-style\':\'dashed\',\'padding\':\'2px\',\'margin-bottom\':\'5px\', \'margin-right\':\'5px\',\'color\': (template.checked ? \'red\' : \'#333333\')}" uib-tooltip="{{(template.public==4?\'ui.dashboard.tips.systemTemplate\':\'\')|translate}}" ng-repeat="template in templatesDisplay"> <label><input type="checkbox" ng-model="template.checked" ng-disabled="template.pending" ng-change="onCheckedTemplate(template)">&nbsp;{{template.name | trans}}</label> <a target="_blank" ng-if="template.public==4" ng-href="strategy/{{template.id}}" style="color:black"><span class="glyphicon glyphicon-info-sign"></span></a> </div> </div> </div> <div class="panel panel-default" ng-show="codeType.id!=3"> <div class="panel-heading"> <h3 class="panel-title">{{category.id!=20 ? \'ui.edit.strategy.varGlobal\' : \'ui.edit.strategy.varTemplate\'|translate}}<span ng-if="scriptArgList.length>0"> - {{ scriptArgList.length }} {{\'ui.edit.strategy.argTips\'|translate}}</span></h3> </div> <div class="panel-body"> <div class="form-group"> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.name"></button> </span> <input spellcheck="false" type="text" ng-model="inputArgName" class="form-control" translate-attr="{placeholder: \'ui.placeholder.arg.name\'}"> </div> </div> <div class="col-md-3"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.description"></button> </span> <input spellcheck="false" type="text" ng-model="inputArgShowName" class="form-control" translate-attr="{placeholder: \'ui.placeholder.arg.description\'}"> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.tips"></button> </span> <input spellcheck="false" type="text" ng-model="inputArgDesc" class="form-control" translate-attr="{placeholder: \'ui.placeholder.arg.tips\'}"> </div> </div> <div class="col-md-2"> <select class="form-control" ng-model="inputArgType" ng-options="(m.name | translate) for m in scriptArgsSelectList | filter: {\'id\': \'!5\'}"></select> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.default"></button> </span> <input spellcheck="false" type="text" ng-model="inputArgDef" class="form-control" translate-attr="{placeholder: \'ui.placeholder.arg.default\'}"> </div> </div> <div class="col-md-1"> <a class="btn btn-success btn-sm outline" ng-click="addArg()"><i class="glyphicon glyphicon-plus"></i></a> </div> </div> <span class="label label-warning" ng-if="scriptArgList.length == 0" translate="ui.edit.strategy.tips.addArg"></span> <table class="table table-condensed" ng-if="scriptArgList.length > 0"> <thead> <th class="col-md-2" translate="ui.edit.strategy.arg.name"></th> <th class="col-md-4" translate="ui.edit.strategy.arg.description"></th> <th class="col-md-2" translate="ui.edit.strategy.arg.type"></th> <th class="col-md-3" translate="ui.edit.strategy.arg.default"></th> <th class="col-md-1" translate="ui.edit.strategy.arg.edit"></th> </thead> <tbody ng-sortable="{handle: \'.glyphicon-move\', scroll:true, animation: 200}"> <tr ng-repeat="pair in scriptArgList"> <td>{{ pair[0] }}</td> <td><span class="glyphicon glyphicon-move pull-right" style="cursor:move" aria-hidden="true"></span> <span uib-tooltip="{{ pair[2] }}">{{ pair[1] }}</span> </td> <td>{{ pair[3].name | translate }}</td> <td> <div ng-if="pair[4]!==\'\'" style="word-wrap:break-word;word-break:break-all;">{{ pair[4] }}</div> <div ng-if="pair[4]===\'\'"><font color="#cccccc">--</font></div> </td> <td> <a class="btn btn-default btn-xs outline" ng-click="copyArg($index)" uib-tooltip="{{\'ui.edit.strategy.tips.copy\'|translate}}"><i class="glyphicon glyphicon-pencil"></i></a> <a class="btn btn-danger btn-xs outline" ng-click="removeArg($index)" uib-tooltip="{{\'ui.edit.strategy.tips.remove\'|translate}}"><i class="glyphicon glyphicon-remove"></i></a> </td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default" ng-show="codeType.id != 3 && category.id!==20"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.edit.strategy.buttons"></h3> </div> <div class="panel-body"> <div class="form-group"> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.button"></button> </span> <input spellcheck="false" type="text" ng-model="inputCMDName" class="form-control"> </div> </div> <div class="col-md-3"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.description"></button> </span> <input spellcheck="false" type="text" ng-model="inputCMDShowName" class="form-control"> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.tips"></button> </span> <input spellcheck="false" type="text" ng-model="inputCMDDesc" class="form-control"> </div> </div> <div class="col-md-2"> <select class="form-control" ng-model="inputCMDType" ng-options="(m.name | translate) for m in scriptCMDSelectList | filter: {\'id\': \'!4\'}"></select> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.edit.strategy.arg.default"></button> </span> <input spellcheck="false" type="text" ng-model="inputCMDDef" class="form-control"> </div> </div> <div class="col-md-1"> <a class="btn btn-success btn-sm outline" ng-click="addCMD()"><i class="glyphicon glyphicon-plus"></i></a> </div> </div> <span class="label label-warning" ng-if="scriptCMDList.length == 0" translate="ui.edit.strategy.tips.addButton"></span> <table class="table table-condensed" ng-if="scriptCMDList.length > 0"> <thead> <th class="col-md-2" translate="ui.edit.strategy.arg.button"></th> <th class="col-md-4" translate="ui.edit.strategy.arg.description"></th> <th class="col-md-2" translate="ui.edit.strategy.arg.type"></th> <th class="col-md-3" translate="ui.edit.strategy.arg.default"></th> <th class="col-md-1" translate="ui.edit.strategy.arg.edit"></th> </thead> <tbody ng-sortable="{handle: \'.glyphicon-move\', scroll:true, animation: 200}"> <tr ng-repeat="pair in scriptCMDList"> <td>{{ pair[0] }}</td> <td><span class="glyphicon glyphicon-move pull-right" style="cursor:move" aria-hidden="true"></span> <span uib-tooltip="{{ pair[2] }}">{{ pair[1] }}</span> </td> <td>{{ pair[3].name | translate }}</td> <td>{{ pair[4] }}</td> <td> <a class="btn btn-default btn-xs outline" ng-click="copyCMD($index)" popover-append-to-body="true" uib-tooltip="{{\'ui.edit.strategy.tips.copy\'|translate}}"><i class="glyphicon glyphicon-pencil"></i></a> <a class="btn btn-danger btn-xs outline" ng-click="removeCMD($index)" popover-append-to-body="true" uib-tooltip="{{\'ui.edit.strategy.tips.remove\'|translate}}"><i class="glyphicon glyphicon-remove"></i></a> </td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default" ng-if="codeType.id != 3 && scriptCMDList.length > 0 && category.id!==20"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.edit.strategy.cmdPreview"></h3> </div> <div class="panel-body"> <div class="panel panel-default" ng-repeat="group in scriptCMDGroup"> <div class="panel-heading" ng-if="group.name"> <h3 class="panel-title">{{group.name | trans}}</h3> </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in group.data"> <div class="col-md-3" ng-if="pair[1][0]!=\'@\'"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans}}</span></div> <div class="col-md-3" ng-if="pair[3].inputType != \'button\'" ng-class="pair[3].inputType == \'text\' ? \'col-md-6\' : \'col-md-4\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans}}" popover-title="{{ pair[3].name | translate }}" popover-append-to-body="true"> <input ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'button\'" type="{{ pair[3].inputType }}" ng-model="pair.value" class="form-control"> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.tips.checkbox\'|translate}} true) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans }}</option> </select> </div> </div> <div class="col-md-6"><label class="btn btn-success btn-sm outline" ng-click="testCmdRobot(pair)">{{ pair[0] | trans }}</label></div> </div> </div> </div> </div> </div> <div class="form-group"> <div class="col-md-12"> <button class="btn btn-primary outline" ng-click="confirmSubmit()" ng-disabled="pending || testing"><span class="glyphicon glyphicon-ok"></span>&nbsp;{{isEdit ? "ui.edit.strategy.save" : "ui.edit.strategy.create" | translate}}</button> <a href="m" class="label label-danger" ng-disabled="pending || testing" translate="ui.g.cancel"></a> </div> </div> </form> </div> <div role="tabpanel" ng-class="{true:\'tab-pane fade in active\', false:\'tab-pane fade in inactive\'}[isPremiumBacktest||isAutoStart]" id="tab_1"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.edit.strategy.config"></h3> </div> <div class="panel-body"> <form class="form-horizontal" role="form" novalidate name="frmtest"> <div class="form-group"> <label for="inputName" class="col-md-1 control-label" translate="ui.edit.strategy.range"></label> <div class="col-md-4"> <div class="row"> <div class="col-md-6"> <input class="form-control" style="text-align:left;" spellcheck="false" type="text" id="timeRangePickerA" required> </div> <div class="col-md-6 rangeInput"> <input class="form-control" style="text-align:left" spellcheck="false" type="text" id="timeRangePickerB" required> </div> </div> </div> <div class="col-md-2"> <select ng-model="ktick_selected" ng-change="changePeriodOption()" uib-tooltip="{{ui.tips.getrecords | translate}}" ng-options="(m.name | translate) for m in kticks" class="form-control" required></select> </div> <div class="col-md-2"> <select ng-model="btMode" ng-change="changeTickOption()" tooltip-append-to-body="true" uib-tooltip="{{\'ui.tips.tickOption\' | translate}}" class="form-control"> <option value="0" translate="ui.edit.strategy.tickSimulate"></option> <option value="1" translate="ui.edit.strategy.tickReal"></option> </select> </div> <div class="col-md-2"> <button class="btn btn-info btn-sm outline" uib-tooltip="{{ \'ui.tips.showAdv\' | translate }}" ng-click="switchAdvancedOption()"><i class="glyphicon glyphicon-wrench"></i></button> </div> </div> <div ng-show="showAdvancedOption"> <div class="form-group"> <label class="col-md-1 control-label" translate="ui.g.options"></label> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.log"></button> </span> <input type="number" style="text-align:center" uib-tooltip="{{ \'ui.tips.maxLogItem\' | translate }}" ng-model="btMaxRuntimeLogs" class="form-control" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.profit"></button> </span> <input type="number" style="text-align:center" uib-tooltip="{{ \'ui.tips.maxProfitItem\' | translate }}" ng-model="btMaxProfitLogs" class="form-control" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.chart"></button> </span> <input type="number" style="text-align:center" uib-tooltip="{{ \'ui.tips.maxChartItem\' | translate }}" ng-model="btMaxChartLogs" class="form-control" required> </div> </div> <div class="col-md-2" ng-show="btMode==0"> <select ng-model="btBaseTick" ng-change="changeTickOption()" uib-tooltip="{{ \'ui.tips.basePeriod\' | translate }}" ng-options="(m.name | translate) disable when m.minutes==3 for m in kticks" class="form-control" required></select> </div> </div> <div class="form-group"> <div class="col-md-2 col-md-offset-1"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.slipPoint"></button> </span> <input type="number" style="text-align:center" ng-model="btSlipPoint" aria-valuemin="0" class="form-control" tooltip-placement="right" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.tips.slipPoint\' | translate }}" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.faultTolerant"></button> </span> <input type="number" style="text-align:center" ng-model="btFaultTolerant" aria-valuemin="0" aria-valuemax="1" class="form-control" tooltip-placement="right" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.tips.faultTolerant\' | translate }}" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.netDelay"></button> </span> <input type="number" style="text-align:center" ng-model="btNetDelay" aria-valuemin="1" aria-valuemax="10000" class="form-control" tooltip-placement="right" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.tips.netDelay\' | translate }}" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.maxBarLen"></button> </span> <input type="number" style="text-align:center" ng-model="btMaxBarLen" aria-valuemin="1" aria-valuemax="1500" class="form-control" tooltip-placement="right" tooltip-append-to-body="true" uib-tooltip="{{ \'ui.tips.maxBarLen\' | translate }}" required> </div> </div> </div> <div class="form-group"> <div class="col-md-2 col-md-offset-1"> <select ng-model="btHistoryMode" tooltip-append-to-body="true" uib-tooltip="{{\'ui.tips.hideChart\' | translate}}" class="form-control"> <option value="0" translate="ui.edit.strategy.showChart"></option> <option value="1" translate="ui.edit.strategy.hideChart"></option> </select> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.tips.opt.maker"></button> </span> <input type="number" style="text-align:center" ng-model="accountFee[0]" aria-valuemin="0" aria-valuemax="1" class="form-control" tooltip-append-to-body="true" uib-tooltip="{{\'ui.strategy.tips.makerFee\'|translate}}" required> </div> </div> <div class="col-md-2"> <div class="input-group"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.tips.opt.taker"></button> </span> <input type="number" style="text-align:center" ng-model="accountFee[1]" aria-valuemin="0" aria-valuemax="1" class="form-control" tooltip-append-to-body="true" uib-tooltip="{{\'ui.strategy.tips.takerFee\'|translate}}" required> </div> </div> <div class="col-md-2"> <div class="input-group" ng-show="option.platform.eid==\'Futures_CTP\' || option.platform.eid==\'Futures_LTS\'"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.feeMin"></button> </span> <input type="number" style="text-align:center" ng-model="accountMinFee" class="form-control" tooltip-append-to-body="true" uib-tooltip="最低手续费, 只对与商品期货与股票有用, 默认为5元" required> <span class="input-group-addon" translate="ui.g.rmb"></span> </div> <div ng-show="option.platform.eid==\'Futures_BitMEX\'"> <switch style="width:65px" ng-model="logEvent" off="{{\'ui.strategy.btnLogEvent\'|translate}}" uib-tooltip="{{\'ui.strategy.tips.logEvent\'|translate}}" tooltip-append-to-body="true"></switch> </div> </div> </div> </div> <div class="form-group"> <label class="col-md-1 control-label" translate="ui.g.platform"></label> <div class="col-md-2"> <ui-select ng-model="option.platform" on-select="onPlatformSelect()"> <ui-select-match placeholder="{{\'ui.placeholder.search\' | translate }}">{{$select.selected.name | translate}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.name"> <div ng-bind-html="m.name | translate| highlight: $select.search"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2"> <select ng-model="option.stock" ng-options="m for m in option.platform.stocks" class="form-control" required> </select> </div> <div class="col-md-2"> <div class="input-group" ng-show="option.platform.eid!=\'Futures_OKCoin\'&&option.platform.eid!=\'Futures_BitMEX\'"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.account.balance"></button> </span> <input type="number" tooltip-append-to-body="true" uib-tooltip="{{\'ui.tips.account.balance\' | translate}}" ng-model="accountBalance" class="form-control" required> </div> </div> <div class="col-md-2"> <div class="input-group" ng-show="option.platform.eid!=\'Futures_CTP\'&&option.platform.eid!=\'Futures_LTS\'"> <span class="input-group-btn"> <button class="btn btn-default" type="button" translate="ui.g.account.stocks"></button> </span> <input type="number" tooltip-append-to-body="true" uib-tooltip="{{\'ui.tips.account.stocks\' | translate}}" ng-model="accountStocks" class="form-control" required> </div> </div> <div class="col-md-2"> <button ng-class="pairs_select.length > 0 ? \'btn btn-success btn-sm outline\' : \'btn btn-danger btn-sm outline\'" ng-click="addPair()"><i class="glyphicon glyphicon-plus"></i></button> </div> </div> <div class="form-group"> <div class="col-md-12 col-md-offset-1"> <div ng-if="pairs_select.length == 0"> <span class="label label-danger outline" translate="ui.tips.addPlatform"></span> </div> <div class="bootstrap-tags" ng-if="pairs_select.length > 0"> <span ng-class="$first ? \'tag label label-danger outline\' : \'tag label label-info outline\'" popover-trigger="mouseenter" uib-popover-html="pair.desc" ng-repeat="pair in pairs_select">{{pair.name | translate}} / {{ pair.stock }}<span data-role="remove" ng-click="removePair(pair)"></span></span> </div> </div> </div> <div class="form-group" ng-show="codeType.id==1&&!isPremiumBacktest"> <label class="col-md-1 control-label" translate="ui.g.dispatch"></label> <div class="col-md-4" tooltip-placement="right" uib-tooltip="{{\'ui.tips.dispatch\' | translate}}"> <select id="node_selected" class="form-control" required> <option ng-repeat="node in nodes  | filter: {\'valid\':true} | orderBy:\'id\'" value="{{node.id}}">{{node.desc}}</option> </select> </div> </div> <div class="form-group" ng-show="hasArg()"> <label class="col-md-1 control-label" translate="ui.g.arguments"></label> <div class="col-md-8"> <div class="panel panel-default" ng-if="scriptArgList.length > 0"> <div class="panel-heading" ng-init="isMainArgCollapsed=false"> <a href ng-click="isMainArgCollapsed=!isMainArgCollapsed"> <i ng-class="{true: \'glyphicon glyphicon-chevron-right\', false: \'glyphicon glyphicon-chevron-down\'}[isMainArgCollapsed]"></i> {{category.id!=20 ? \'ui.edit.strategy.varGlobal\' : \'ui.edit.strategy.varTemplate\' | translate}} </a> </div> <div class="panel-body" ng-hide="isMainArgCollapsed"> <div class="panel panel-default" ng-repeat="ele in scriptArgGroup"> <div class="panel-heading" ng-if="ele.name"> <h3 class="panel-title">{{ ele.name | trans }}</h3> </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in ele.data" ng-show="showArg(scriptArgList, pair)"> <div class="col-md-3"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans }}</span></div> <div ng-class="(pair[3].inputType == \'text\' || pair[3].inputType == \'password\') ? \'col-md-8\' : \'col-md-4\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans}}" popover-title="{{ pair[3].name | translate }}" popover-append-to-body="true"> <div ng-if="pair[3].inputType == \'number\'"> <div class="input-group"> <input type="number" ng-disabled="pair.optimize" ng-model="pair.value" class="form-control" required> <span class="input-group-addon"> <input type="checkbox" ng-model="pair.optimize"><span ng-if="!pair.optimize">&nbsp;{{ \'ui.g.optimize\' | translate }}</span> </span> </div> </div> <input ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'number\' && pair[3].inputType != \'selected\'" type="{{ pair[3].inputType }}" ng-model="pair.value" class="form-control" placeholder="{{\'ui.placeholder.arg.canEmpty\'|translate}}"> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.tips.checkbox\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> <div class="col-md-5" ng-if="pair[3].inputType == \'number\'"> <div ng-show="pair.optimize" class="row"> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.minvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.begin"> </div> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.maxvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.end"> </div> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.stepvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.step"> </div> </div> </div> </div> </div> </div> </div> </div> <div class="panel panel-danger" ng-show="showFilter(scriptArgList)"> <div class="panel-heading" translate="ui.edit.strategy.optimizeFilter"></div> <div class="panel-body"> <div class="row"> <div class="col-md-3"> <select class="form-control" ng-model="filterLeft" ng-options="pair[1] for pair in scriptArgList | filter:showFilter()"> </select> </div> <div class="col-md-2"> <select class="form-control" ng-model="filterCmpAction" ng-options="op.desc for op in filterCmpList"></select> </div> <div class="col-md-3"> <select class="form-control" ng-model="filterRight" ng-options="pair[1] for pair in scriptArgList | filter:showFilter()"> </select> </div> <div class="col-md-2"> <input class="form-control" type="number" uib-tooltip="{{filterCmpAction.desc}} {{ \'ui.edit.strategy.cmpLeast\' | translate }}" ng-show="filterCmpAction.op!=\'==\'" ng-model="filterCmpResult"> </div> <div class="col-md-2"> <button class="btn btn-default" ng-disabled="!filterLeft||!filterRight||filterLeft==filterRight" ng-click="addFilter(\'main\')"><i class="glyphicon glyphicon-filter"></i>&nbsp;{{ \'ui.g.add\' | translate }}</button> </div> </div> <div class="row" ng-if="filterList.length>0" style="margin-top:8px"> <div class="bootstrap-tags col-md-12"> <span ng-class="filter.op.cls" ng-repeat="filter in filterList">{{filter.desc}}<span data-role="remove" ng-click="removeFilter($index)"></span></span> </div> </div> </div> </div> <div class="panel panel-info" ng-repeat="template in templates" ng-if="template.checked && category.id!==20 && canDepend(template)"> <div class="panel-heading" ng-init="template.isCollapsed=true"> <a href ng-click="template.isCollapsed=!template.isCollapsed"> <i ng-class="{true: \'glyphicon glyphicon-chevron-right\', false: \'glyphicon glyphicon-chevron-down\'}[template.isCollapsed]"></i> {{template.name | trans}} </a> </div> <div class="panel-body" ng-hide="template.isCollapsed"> <div ng-if="template.scriptArgList.length==0" translate="ui.edit.strategy.noArg"></div> <div class="panel panel-default" ng-repeat="group in template.scriptArgGroup"> <div class="panel-heading" ng-if="group.name"> {{group.name | trans}} </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in group.data" ng-show="showArg(template.scriptArgList, pair)"> <div class="col-md-4"><span class="label label-primary outline pull-right" style="margin-top:7px">{{ pair.name | trans}}</span></div> <div ng-class="(pair[3].inputType == \'text\' || pair[3].inputType == \'password\') ? \'col-md-8\' : \'col-md-4\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans }}" popover-title="{{ pair[3].name | translate}}" popover-append-to-body="true"> <div ng-if="pair[3].inputType == \'number\'"> <div class="input-group"> <input type="number" ng-disabled="pair.optimize" ng-model="pair.value" class="form-control" required> <span class="input-group-addon"> <input type="checkbox" ng-model="pair.optimize"><span ng-if="!pair.optimize">&nbsp;{{ \'ui.g.optimize\' | translate }}</span> </span> </div> </div> <input ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'number\' && pair[3].inputType != \'selected\'" type="{{ pair[3].inputType }}" ng-model="pair.value" class="form-control" placeholder="{{\'ui.placeholder.arg.canEmpty\'|translate}}"> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.tips.checkbox\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> <div class="col-md-4" ng-if="pair[3].inputType == \'number\'"> <div ng-show="pair.optimize" class="row"> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.minvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.begin"> </div> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.maxvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.end"> </div> <div class="col-md-4"> <input class="form-control" uib-tooltip="{{\'ui.tips.stepvalue\'|translate}}" type="number" ng-model="pair.optimizeSettting.step"> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="form-group"> <div class="col-md-offset-1 col-md-5"> <div class="btn-group"> <button class="btn btn-primary" ng-disabled="pending || testing" ng-click="runBacktest(false)"><span ng-class="(isPremiumBacktest ? \'fa fa-adjust \' : \'\') + (testing ? \'fa fa-spinner fa-spin\' : \'fa fa-history\')"></span>&nbsp;{{ testing ? testingStr : \'ui.edit.strategy.startBacktest\' | translate}}</button> <button type="button" ng-disabled="pending || testing" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" role="menu"> <li><a tooltip-placement="bottom" uib-tooltip="{{\'ui.edit.strategy.backtestTolerant\' | translate }}" href ng-click="runBacktest(true)"><i class="glyphicon glyphicon-search"></i>&nbsp;{{\'ui.edit.strategy.startBacktestTolerant\' | translate}}</a></li> </ul> </div> <button class="btn btn-danger" ng-if="canStop && testing" ng-click="stopBacktest()"><span class="glyphicon glyphicon-stop"></span>&nbsp;{{\'ui.g.stop\'|translate}}</button> </div> </div> </form> </div> </div> <div ng-if="showWASMWarning()" class="alert alert-warning" translate="ui.strategy.wasmWarning"> </div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"> {{\'ui.edit.startegy.logs\' | translate}} <span ng-if="elapsed>0"> - {{\'ui.backtest.progress\'|translate}}: {{ progress.toFixed(1) }} % - {{\'ui.backtest.elapsed\' | translate}}: {{ (elapsed / 1000).toFixed(3) }} {{ \'ui.g.seconds\' | translate }} <span ng-if="progress<100&&progress>0&&elapsed>3000"> - {{\'ui.backtest.remain\' | translate}}: {{ ((((elapsed * 100) / progress) - elapsed)/1000).toFixed(3) }} {{ \'ui.g.seconds\' | translate }}</span> - {{\'ui.backtest.logCount\' | translate }}: {{ logsCount }} - {{\'ui.backtest.tradeCount\' | translate }}: {{ tradeCount }} <span ng-if="logsCount>=btMaxRuntimeLogs" style="color:red"> - {{\'ui.backtest.logExceed\' | translate}} {{ btMaxRuntimeLogs }}</span> - {{ [\'ui.backtest.running\', \'ui.backtest.completed\', \'ui.backtest.stopped\'][taskStatus] | translate }} </span> <span ng-if="workerPending"> - <font color="red" translate="ui.backtest.collect"></font> </span> <span ng-if="!workerPending && workerLoadBytes>0"> <font color="#666666"> (Tick {{ workerLoadBytes | bytes }})</font> </span> <span class="pull-right badge" style="background-color:#cccccc;color:#d9534f" uib-tooltip="LogProfit计算的收益值">{{profit.toFixed(4)}}</span></h3> </div> <div class="panel-body"> <div ng-if="accountStatus.length > 0 && optimizeList.length==0"> <table class="table table-bordered"> <caption>{{ \'ui.backtest.account.status\' | translate }}<span class="pull-right" ng-show="updateTimeLine">{{ \'ui.backtest.updated\' | translate }}: {{ updateTimeLine }}</span></caption> <tr> <th>{{ \'ui.backtest.account.name\' | translate }} <th>{{ \'ui.backtest.account.quoteCurrency\' | translate }} <th>{{ \'ui.backtest.account.currency\' | translate }} <th ng-if="btHasFutures">{{ \'ui.backtest.account.closeProfit\' | translate }} <th ng-if="btHasFutures">{{ \'ui.backtest.account.positionProfit\' | translate }} <th ng-if="btHasFutures">{{ \'ui.backtest.account.currMargin\' | translate }}<i class="glyphicon glyphicon-question-sign" style="margin-left:8px" uib-tooltip="{{\'ui.tips.currMargin\' | translate }}"></i> <th>{{ \'ui.backtest.account.commission\' | translate }} <th>{{ \'ui.backtest.account.returns\' | translate }}<i class="glyphicon glyphicon-question-sign" style="margin-left:8px" uib-tooltip="{{\'ui.tips.returns\' | translate }}"></i></tr> <tr ng-repeat="acc in accountStatus"> <td>{{ acc.Name }}</td> <td>{{ acc.QuoteCurrency }}</td> <td>{{ acc.BaseCurrency }}</td> <td ng-if="btHasFutures">{{ acc.IsFutures ? (acc.CloseProfit | precision: 8) : \'--\' }}</td> <td ng-if="btHasFutures">{{ acc.IsFutures ? (acc.PositionProfit | precision: 8) : \'--\' }}</td> <td ng-if="btHasFutures">{{ acc.IsFutures ? (acc.CurrMargin | precision: 8) : \'--\' }}</td> <td><span ng-if="btHasFutures">{{ acc.Commission | precision: 5 }}</span><span ng-if="!btHasFutures">{{ acc.QuoteCurrency}}: {{ acc.Commission | precision: 8 }}<span ng-if="acc.CommissionX">, {{ acc.BaseCurrency }}: {{ acc.CommissionX | precision: 8}}</span></span></td> <td>{{ acc.Returns | precision: 5 }}</td> </tr> </table> </div> <div class="progress" ng-show="(progress>0&&progress<100) || testing"> <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width: progress + \'%\'}"> </div> </div> <div ng-show="summary.length>0"> <blockquote> {{ \'ui.backtest.summary\' | translate }} </blockquote> <div class="panel panel-default"> <div class="panel-body"> <div summary="summary"></div> </div> </div> </div> <blockquote ng-show="optimizeList.length>0"> {{ \'ui.backtest.tasks\' | translate }} - {{ optimizePos + 1 }} / {{ optimizeList.length }} - {{ ((optimizePos+1)*100/optimizeList.length) | precision: 2 }} % <div class="pull-right"><a ng-click="saveOptimizeDownload()" ng-if="!testing" class="btn btn-default btn-xs"><i class="glyphicon glyphicon-download-alt"></i>&nbsp;{{\'ui.backtest.download\' | translate}}</a></div> </blockquote> <div ng-show="optimizeList.length>0"> <table class="table table-condensed table-hover"> <thead> <tr> <th><font color="#666666">#</font>&nbsp;<a href="" ng-click="setSortBy(\'id\')"><i ng-class="getSortStyle(\'id\')"></i></a></th> <th ng-repeat="col in optimizeList[0].settings"><i uib-tooltip="{{col.argName}}">{{col.argDesc}}</i></th> <th>{{ \'ui.backtest.elapsed\' | translate }}&nbsp;<a href="" ng-click="setSortBy(\'elapsed\')"><i ng-class="getSortStyle(\'elapsed\')"></i></a></th> <th>{{ \'ui.backtest.tradeCount\' | translate }}&nbsp;<a href="" ng-click="setSortBy(\'tradeCount\')"><i ng-class="getSortStyle(\'tradeCount\')"></i></a></th> <th ng-if="btHasFutures">{{ \'ui.backtest.closeProfit\' | translate }}&nbsp;<a href="" ng-click="setSortBy(\'closeProfit\')"><i ng-class="getSortStyle(\'closeProfit\')"></i></a></th> <th>{{ \'ui.backtest.winningRate\' | translate }}&nbsp;<a href="" ng-click="setSortBy(\'winningRate\')"><i ng-class="getSortStyle(\'winningRate\')"></i></a></th> <th>{{ \'ui.backtest.maxDrawdown\' | translate }}&nbsp;<a href="" ng-click="setSortBy(\'maxDrawdown\')"><i ng-class="getSortStyle(\'maxDrawdown\')"></i></a></th> <th><span uib-tooltip="{{ \'ui.backtest.tips.sharp\' | translate }}" translate="ui.backtest.sharp"></span>&nbsp;<a href="" ng-click="setSortBy(\'sharpeRatio\')"><i ng-class="getSortStyle(\'sharpeRatio\')"></i></a></th> <th><span uib-tooltip="{{ \'ui.backtest.tips.returns\' | translate }}" translate="ui.backtest.returns"></span>&nbsp;<a href="" ng-click="setSortBy(\'returns\')"><i ng-class="getSortStyle(\'returns\')"></i></a></th> <th><span uib-tooltip="{{ \'ui.backtest.tips.profit\' | translate }}" translate="ui.backtest.profit"></span>&nbsp;<a href="" ng-click="setSortBy(\'profit\')"><i ng-class="getSortStyle(\'profit\')"></i></a></th> </tr> </thead> <tr ng-repeat="item in optimizeList | orderBy:btSortBy" ng-class="{true: \'success\', false: \'inactive\'}[item.running]"> <td width="30">{{item.id}}</td> <td ng-repeat="field in item.settings">{{field.value}}</td> <td>{{ (item.finished || item.running) ? ((item.elapsed/1000) | precision: 5) : (item.running ? \'--\' : \'\')}}</td> <td>{{(item.finished || item.running) ? item.tradeCount : (item.running ? \'--\' : \'\')}}</td> <td ng-if="btHasFutures">{{item.closeProfit | precision: 5}}</td> <td>{{item.finished ? ((item.winningRate*100 | precision: 2) + \' %\') : (item.running ? \'--\' : \'\')}}</td> <td>{{item.finished ? ((item.maxDrawdown*100 | precision: 2) + \' %\') : (item.running ? \'--\' : \'\')}}</td> <td>{{item.finished ? (item.sharpeRatio | precision: 3) : (item.running ? \'--\' : \'\')}}</td> <td>{{item.returns | precision: 3}}</td> <td>{{(item.finished || item.running) ? (item.profit | precision: 5) : (item.running ? \'--\' : \'\')}}</td> </tr> </table> </div> <div ng-show="show_chart_market" style="width:100%"> <blockquote> <span uib-tooltip="{{ \'ui.backtest.tips.chart\' | translate }}">{{ \'ui.backtest.chart\' | translate }}</span> </blockquote> </div> <div id="chart_history"></div> <div ng-show="show_chart_pnl"> <blockquote> {{ \'ui.backtest.pnlChart\' | translate }} </blockquote> <div id="chart_pnl"></div> </div> <div ng-show="show_chart_closeprofit"> <blockquote> {{ \'ui.backtest.coverProfitChart\' | translate }} </blockquote> <div id="sandbox_chart_coverprofit" style="height: 400px; max-width:100%"> <p class="label label-warning">Loading...</p> </div> </div> <div ng-show="show_chart_profit"> <blockquote> <span uib-tooltip="{{ \'ui.backtest.tips.profitChart\' | translate }}">{{ \'ui.backtest.profitChart\' | translate }}</span> </blockquote> <div id="sandbox_chart_profit" style="height: 400px; max-width:100%"> <p class="label label-warning">Loading</p> </div> </div> <div ng-show="show_chart_strategy"> <blockquote> {{ \'ui.backtest.strategyChart\' | translate }} </blockquote> <div id="chart_strategy"></div> </div> <blockquote ng-show="optimizeList.length==0"> {{ \'ui.backtest.logs\' | translate }} <div class="pull-right"><a ng-click="saveDownload()" ng-if="logs.length>0 && !pending && !testing" class="btn btn-default btn-xs outline"><i class="glyphicon glyphicon-download-alt"></i>&nbsp;{{\'ui.backtest.downloadLogs\' | translate}}</a></div> </blockquote> <div ng-if="logs.length == 0 && optimizeList.length==0"> <p ng-if="!testing" class="alert alert-success" translate="ui.backtest.noLogs"></p> <p ng-if="testing" class="alert alert-success" translate="ui.backtest.running"></p> </div> <div class="table-responsive nowrap"> <table ng-if="logs.length>0" class="table table-condensed"> <thead> <tr> <th width="150" translate="ui.order.time"></th> <th width="110" translate="ui.g.platform"></th> <th width="90" translate="ui.order.type"></th> <th width="90" translate="ui.order.price"></th> <th width="90" translate="ui.order.amount"></th> <th translate="ui.g.message"></th> </tr> </thead> <tr ng-repeat="item in logs | orderBy:\'-id\' | limitTo: logLimit" ng-style="item.style"> <td>{{ ::item.date }}</td> <td>{{ ::item.platformStr }}</td> <td> <label popover-trigger="mouseenter" uib-popover="{{item.order_id > 0 ? (\'Order ID: \' + item.order_id + \' (\'+item.contractType+\')\') : \'\'}}" ng-class="item.labelStyle">{{ ::item.logTypeStr | translate }}</label><label ng-class="item.directionStyle" style="margin-left:5px" ng-if="item.directionStr">{{ item.directionStr | translate }}</label> </td> <td ng-if="item.show_price">{{ ::item.priceStr }}</td> <td ng-if="item.show_price">{{ ::item.amountStr }}</td> <td ng-if="item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | cut | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> <td colspan="3" ng-if="!item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | cut | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> </tr> </table> </div> <button ng-if="logs.length > logLimit" class="btn btn-success pull-right" ng-click="loadMore(200)">{{\'ui.g.loadMore\' | translate }}....{{(logLimit*100/logs.length).toFixed(2)}}%</button> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" ng-if="isPremiumBacktest" id="tab_2"> <div class="panel panel-default"> <div class="panel-body"> <p style="font-size:16px" ng-if="description.length>0" ng-bind-html="description | markdown"></p> <div ng-if="description.length==0" translate="ui.strategy.noDescription"></div> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" ng-if="isPremiumBacktest" id="tab_3"> <div class="panel panel-default"> <div class="panel-body"> <p ng-if="manual.length>0" style="font-size:16px" ng-bind-html="manual | markdown"></p> <div ng-if="manual.length==0" translate="ui.strategy.noManual"></div> </div> </div> </div> </div> </div> ')
}]),angular.module("views/m/add-ticket.html",[]).run(["$templateCache",function(a){a.put("views/m/add-ticket.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/tickets" translate="ui.nav.ticket"></a></li> <li class="active" translate="ui.nav.addTicket"></li> </ol> <table class="table tbl-fixed"> <tr><td width="80" translate="ui.ticket.new.title"><td><input ng-model="title" type="text" autofocus translate-attr="{ placeholder: \'ui.placeholder.topicTitle\'}" class="form-control"></tr> <tr> <td translate="ui.ticket.new.content"><td> <editor ng-model="content"></editor> </tr> <tr> <td translate="ui.ticket.new.category"></td> <td> <select class="form-control" style="width:150px" ng-model="node_selected" convert-to-number> <option value="-1" style="display:none">--- {{ \'ui.ticket.new.selectNode\' | translate }} ---</option> <option ng-repeat="node in nodes" ng-selected="node_selected==node.id" value="{{node.id}}">{{ node.name | trans }}</option> </select> </td> </tr> <tr> <td colspan="2"> <button class="btn btn-default" ng-click="submit()" ng-disabled="isPending"><span class="glyphicon glyphicon-ok"></span>&nbsp;{{(isPending ? \'ui.bbs.new.pending\' : \'ui.nav.addTicket\')|translate}}</button>&nbsp;<a href="javascript:history.back(-1)"><span class="btn btn-warning btn-xs" translate="ui.bbs.new.cancel"></span></a> </td> </tr> </table> </div> ')}]),angular.module("views/m/dashboard.html",[]).run(["$templateCache",function(a){a.put("views/m/dashboard.html",'<div class="row" ng-loading> <div ng-if="broadcasts.length>0"> <div class="alert alert-warning alert-dismissible"> <table width="100%"> <tr ng-repeat="item in broadcasts"> <td width="18"><i class="glyphicon glyphicon-volume-up"></i></td> <td><a target="_blank" ng-href="{{(item.url ? item.url : (\'bbs-topic/\'+item.bbs_topic_id))|trans}}" ng-if="item.bbs_topic_id||item.url">{{item.content|trans}}</a><span ng-if="!item.bbs_topic_id&&!item.url">{{item.content|trans}}</span><span class="pull-right text-muted">{{item.date | ago}}</span><td width="8" rowspan="{{broadcasts.length}}" ng-if="$index==0"><button type="button" class="close" ng-click="clearBroadcast()"><span aria-hidden="true">&times;</span></button></td> </tr> </table> </div> </div> <div class="row" ng-style="{\'margin-top\': (isOEM ? \'15px\' : \'10px\')}"> <div ng-if="!isOEM" class="col-md-12" style="margin-bottom:10px"> <b>{{ account.username }}</b> {{ \'ui.const.welcome\' | translate }} </div> <div ng-class="isOEM ? \'col-md-8 col-md-offset-2\' : \'col-md-7\'"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.const.summary\'|translate}} <a href id="guid_info" ng-click="showGuide()" class="pull-right"><i class="glyphicon glyphicon-info-sign text-muted"></i></a> </h3> </div> <div class="panel-body"> <div class="col-md-3 col-xs-6" ng-repeat="item in summary_use" id="step{{$index+1}}"> <a ng-href="{{item.path}}" style="text-decoration:none;"> <div class="num-box"> <div class="num-box-val"> <i class="{{item.icon}}"></i> </div> <div class="num-box-label"> {{ item.name | translate }} </div> <div ng-if="item.val>0" style="font-weight:bold;background-color:#ababab;color:white;width:30px;float:right"> {{ item.val }} </div> </div> </a> </div> </div> </div> </div> <div class="col-md-5" ng-if="!isOEM"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.const.bills\'|translate}}</h3> </div> <div class="panel-body"> <div class="col-md-6" ng-repeat="item in summary_bill"> <a ng-href="{{item.path}}" style="text-decoration:none;"> <div class="num-box"> <div class="num-box-val"> {{item.val}} </div> <div class="num-box-label"> {{ item.name | translate }} </div> <div ng-if="$index==0" style="background-color:#ababab;color:white;width:65px;float:right"> {{ \'ui.dashboard.charge\' | translate }} </div> <div ng-if="$index==1" style="background-color:#ababab;color:white;width:65px;float:right"> {{ \'ui.nav.invoice\' | translate }} </div> </div> </a> </div> </div> </div> </div> <div ng-class="isOEM ? \'col-md-8 col-md-offset-2\' : \'col-md-7\'"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.dashboard.tabs.fastLink\'|translate}}</h3> </div> <div class="panel-body"> <div class="col-md-3 col-xs-6" ng-repeat="item in summary_link"> <a ng-href="{{item.path}}" target="{{item.path[0] == \'/\' ? \'\' : \'_blank\'}}" style="text-decoration:none;"> <div class="num-box"> <div class="num-box-val"> <i class="{{item.icon}}"></i> </div> <div class="num-box-label"> {{ item.name | translate }} </div> </div> </a> </div> </div> </div> </div> <div class="col-md-5" ng-if="!isOEM"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.account.tabs.message\'|translate}}</h3> </div> <div class="panel-body"> <div class="col-md-6" ng-repeat="idx_a in [0,2]"> <a ng-href="{{summary_msg[idx_a+idx_b].path}}" style="text-decoration:none;" ng-repeat="idx_b in [0,1]"> <div class="num-box-half"> <span class="num-box-label">{{ summary_msg[idx_a+idx_b].name | translate }}</span> <span class="pull-right num-box-half-val">{{summary_msg[idx_a+idx_b].val}}</span> </div> </a> </div> </div> </div> </div> </div> <div class="row" style="margin-top:20px" ng-if="!isOEM"> <div class="col-md-12"> <div style="text-align:right"> <div ng-if="logs.length>0"> <div> Last Login: {{ logs[0].ip }}<span ng-if="logs.length>1"> / {{ logs[1].ip }}</span><br> </div> <div> <span class="text-muted">{{ logs[0].region | trans }} {{ logs[0].city | trans}}<span ng-if="logs.length>1"> / {{ logs[1].region | trans }} {{ logs[1].city | trans}}</span></span> </div> </div> <div ng-if="g.tunnel" class="text-muted"><i>Via CDN</i></div> <div style="margin-top:10px"><a href="about" class="text-muted">Powered By FMZ Team - All Rights Reserved</a></div> </div> </div> </div> </div> ')}]),angular.module("views/m/debug.html",[]).run(["$templateCache",function(a){a.put("views/m/debug.html",'<div ng-loading> <ol class="breadcrumb"> <li><a href="m/dashboard">{{\'ui.nav.dashboard\'|translate}}</a></li> <li class="active">{{\'ui.nav.debug\'|translate}}</li> </ol> <div class="alert alert-success" ng-show="nodes.length>0 && platforms.length>0"> {{ \'ui.debug.tips\' | translate }} </div> <div class="alert alert-danger outline" ng-show="platforms.length==0"> <span ng-show="platforms.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noPlatform\' | translate}}</b> &nbsp;<a href="m/add-platform" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.platform.new\'|translate}}</a> </span> </div> <div class="row"> <div class="col-md-4"> <select ng-model="option.node_selected_id" class="form-control"> <option value="-1" style="display:none">--- {{\'ui.alert.noDocker\' | translate}} ---</option> <option ng-repeat="node in nodes | filter:{ is_owner: true } | orderBy:\'id\'" value="{{node.id}}">{{ node.desc }}</option> </select> </div> <div class="col-md-2"> <ui-select ng-model="option.platform" on-select="option.stock=option.platform.stocks[0]"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.label}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.label"> <div ng-bind-html="m.label | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2" ng-if="!option.platform.custom"> <select ng-model="option.stock" ng-options="m for m in option.platform.stocks" class="form-control"> </select> </div> <div class="col-md-2" ng-if="option.platform.custom"> <input type="text" class="form-control" ng-model="option.stock"> </div> <div class="col-md-2" ng-if="option.platform.eid!=\'Futures_CTP\' && option.platform.eid!=\'Futures_LTS\'"> <switch ng-model="option.platform.custom" off="{{\'ui.tips.customSymbolSwitch\'|translate}}" uib-tooltip="{{\'ui.tips.customSymbol\'|translate}}" tooltip-append-to-body="true"></switch> </div> <div class="col-md-2"> <div class="btn-group pull-right"> <button class="btn btn-default outline" ng-disabled="pending" ng-click="runPlugin()"><i class="glyphicon glyphicon-flash"></i>&nbsp;{{(pending ? \'ui.debug.running\' : \'ui.debug.execute\') | translate}}</button> <button type="button" ng-disabled="pending" class="btn btn-default outline dropdown-toggle" data-toggle="dropdown"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" role="menu"> <li><a href ng-click="resetDebug()"><i class="glyphicon glyphicon-remove-sign"></i>&nbsp;{{\'ui.debug.restartDebug\'|translate}}</a></li> </ul> </div> </div> </div> <div class="row" style="margin-top:10px"> <div class="col-md-12"> <div id="plugin-area"></div> </div> </div> </div> <div class="row" style="margin-top:20px" ng-show="!pending && runCount > 0 && result.result"> <div class="col-md-12"> <blockquote> <small>{{\'ui.debug.result\'|translate}}</small> </blockquote> <textarea class="form-control" rows="6">{{ result.result }}</textarea> </div> </div> <div class="row" style="margin-top:20px" ng-show="!pending && result.logs.length>0"> <div class="col-md-12 table-responsive nowrap"> <blockquote> <small>{{ \'ui.robot.tab.logs\' | translate }}</small> </blockquote> <table class="table table-condensed"> <thead> <tr> <th width="150" translate="ui.robot.log.date"></th> <th width="110" translate="ui.robot.log.platform"></th> <th width="50" translate="ui.robot.log.type"></th> <th width="90" translate="ui.robot.log.price"></th> <th width="90" translate="ui.robot.log.amount"></th> <th translate="ui.robot.log.message"></th> </tr> </thead> <tr ng-repeat="item in result.logs" ng-class="\'slide-left\'" ng-style="item.style"> <td>{{ item.date }}</td> <td><span ng-if="item.log_type < 4">{{ item.eid | eid2str }}</span></td> <td><label popover-trigger="mouseenter" uib-popover="{{(item.order_id !=\'\'&&item.order_id!=\'-1\') ? \'Order Id: \' + item.order_id : \'\'}}" ng-class="item.labelStyle">{{ item.logTypeStr | translate }}</label><label ng-class="item.directionStyle" style="margin-left:5px" ng-if="item.directionStr">{{ item.directionStr | translate }} - {{ item.contractType}}</label></td> <td ng-if="item.show_price">{{ item.priceStr }}</td> <td ng-if="item.show_price">{{ item.amountStr }}</td> <td ng-if="item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> <td colspan="3" ng-if="!item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> </tr> </table> </div> </div> ')}]),angular.module("views/m/invoice.html",[]).run(["$templateCache",function(a){a.put("views/m/invoice.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a ng-href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li class="active">{{ \'ui.nav.invoice\' | translate}}</li> </ol> <div class="row" style="margin-bottom:10px"> <div class="col-md-6"> <div class="row"> <div class="col-md-3"> <select class="form-control" ng-model="product"> <option value="-1">{{\'ui.invoice.type.all\'|translate}}</option> <option value="0">{{\'ui.invoice.type.deposit\'|translate}}</option> <option value="1">{{\'ui.invoice.type.robot\'|translate}}</option> <option value="2">{{\'ui.invoice.type.strategy\'|translate}}</option> <option value="3">{{\'ui.invoice.type.market\'|translate}}</option> <option value="4">{{\'ui.invoice.type.ecs\'|translate}}</option> <option value="5">{{\'ui.invoice.type.system\'|translate}}</option> </select> </div> <div class="col-md-5"> <input class="form-control" type="text" id="invoiceRangePicker" required> </div> <div class="col-md-4"> <button ng-disabled="pending" ng-click="go(1)" class="btn btn-success" translate="ui.invoice.btn.search"></button> </div> </div> </div> <div class="col-md-6"> <div align="right" translate="ui.invoice.summary" translate-values="{all_items: invoice.all_items, income: invoice.income, expenses: invoice.expenses}"> </div> </div> </div> <div ng-show="invoice.items.length>0"> <div class="panel panel-default"> <div class="panel-body"> <table class="table"> <thead> <tr> <th class="col-md-3" translate="ui.invoice.col.created"></th> <th class="col-md-2" translate="ui.invoice.col.type"></th> <th class="col-md-2" translate="ui.invoice.col.income"></th> <th class="col-md-2" translate="ui.invoice.col.expenses"></th> <th class="col-md-3" translate="ui.invoice.col.balance"></th> </tr> </thead> <tbody ng-repeat="item in invoice.items" style="border:0"> <tr> <td>{{item.created}}</td> <td ng-style="{color: [\'blue\', \'red\', \'green\', \'#c0392b\', \'#1e4767\', \'#ec7b04\'][item.product]}">{{[\'ui.invoice.type.deposit\', \'ui.invoice.type.robot\', \'ui.invoice.type.strategy\', \'ui.invoice.type.market\', \'ui.invoice.type.ecs\', \'ui.invoice.type.system\'][item.product] | translate }}</td> <td>{{item.income?item.income/1e8:\'--\'}}</td> <td>{{item.expenses?item.expenses/1e8:\'\'}}</td> <td> {{item.balance/1e8}} <span class="pull-right" ng-if="item.remark"> <a href ng-click="item.show=!item.show" translate="ui.invoice.col.remark"></a> </span> </td> </tr> <tr ng-if="item.show"> <td colspan="5" class="text-muted"> <div ng-if="item.product==5"> <span translate="ui.invoice.transDesc" translate-values="{item:item}"></span> </div> <div ng-if="item.product!=5"> {{[\'\', \'ui.invoice.type.robot\', \'ui.invoice.type.strategy\', \'\', \'VPS\', \'System\'][item.product] | translate}} ID: <span ng-repeat="id in item.remark.products" style="margin-right:5px"> <a ng-if="item.product!=4" ng-href="{{[\'\', \'m/robot\', \'strategy\', \'market-item\'][item.product]}}/{{id}}" target="_blank">{{ id }}</a> <span ng-if="item.product==4">{{ id }}</span> </span> </div> </td> </tr> </tbody> </table> </div> </div> </div> <div class="alert alert-success" ng-show="invoice.items.length==0"> {{\'ui.invoice.empty\'|translate}} </div> <div> <nav> <ul class="pagination" ng-if="pages.length>1"> <li ng-repeat="page in pages" ng-class="page.cls + (pending ? \' disabled\' : \'\')"><a href ng-click="go(page.id)">{{page.name | translate}}</a></li> </ul> </nav> </div> <div style="margin-bottom:50px"></div> </div> ')}]),angular.module("views/m/nodes.html",[]).run(["$templateCache",function(a){a.put("views/m/nodes.html",'<div class="row" ng-loading> <div class="panel panel-default"> <div class="panel-heading"> <div class="pull-right"> <a href ng-click="switchStyle()"><i style="color:#666666" ng-class="{true: \'fa fa-list\', false: \'fa fa-th-large\'}[showList]"></i></a> </div> <h3 class="panel-title" translate="ui.dashboard.tabs.dockerNav"></h3> </div> <div class="panel-body"> <div> <a href="m/add-node" style="margin-right:10px" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.tabs.docker.new\' | translate}}</a> <span class="pull-right badge" ng-if="nodes.length > 0"> {{ nodes.length }} </span> </div> <div class="well well-sm" style="margin-top:10px;" ng-if="nodes.length == 0" translate="ui.dashboard.tips.docker"></div> <div class="row" style="margin-top:20px" ng-if="!showList"> <div class="col-md-4" ng-repeat="item in nodes"> <div class="panel panel-default"> <div class="panel-body"> <table class="tbl-nodes tbl-fixed" width="100%"> <tr> <th width="80">ID</th> <td> #{{ item.id }} <span class="pull-right text-muted" ng-if="item.unit_price"> <i style="color:#777" class="glyphicon glyphicon-time"></i>&nbsp; {{ item.unit_price/1e8}} {{ \'ui.const.rmb\' | translate }} / {{\'ui.const.hour\'|translate}} </span> </td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.ip"></th> <td>{{ item.ip }}</td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.os"></th> <td>{{ item.os }} <div class="pull-right"><i ng-class="item.icon"></i></div></td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.label"></th> <td nowrap style="overflow:hidden"><span uib-tooltip="{{item.name}}">{{item.name || \' -- \'}}</span></td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.loaded"></th> <td>{{ item.loaded }}</td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.tunnel"></th> <td>{{ (item.peer ? (item.tunnel ? \'ui.const.node.line.cdn\' : \'ui.const.node.line.direct\') : \'ui.const.node.line.unknown\') | translate}}<span class="pull-right label label-danger" ng-if="item.isOld"><i class="glyphicon glyphicon-exclamation-sign"></i>&nbsp;{{\'ui.dashboard.tabs.docker.tips.versionOld\'|translate}}</span></td> </tr> <tr> <th translate="ui.dashboard.tabs.docker.status"></th> <td> <div ng-if="item.build"> <span uib-tooltip="{{\'ui.dashboard.tabs.docker.pingTime\' | translate}}: {{item.date}}">{{ item.isOld ? item.date : ((item.online ? "ui.dashboard.tabs.docker.online" : "ui.dashboard.tabs.docker.offline") | translate)}}</span> </div> <div ng-if="!item.build"> {{ [\'ui.const.ecs.status.wait\', \'ui.const.ecs.status.installing\', \'ui.const.ecs.status.starting\', \'ui.const.ecs.status.pending\', \'ui.const.ecs.status.stopped\', \'ui.const.ecs.status.expired\', \'ui.const.ecs.status.failed\'][item.ecs_status] | translate }} <div class="pull-right" ng-if="item.ecs_status<3"> <i class="fa fa-spinner fa-spin"></i> </div> </div> </td> </tr> <tr> <th>{{ (item.regionValid ? \'ui.dashboard.tabs.docker.location\' : \'\') | translate }}&nbsp;</th> <td><span ng-if="item.regionValid">{{item.region|trans}} {{ item.city | trans}}</span></td> </tr> <tr> <td colspan="2" align="right"> <div class="colAction"> <button ng-if="item.is_owner" ng-click="setNodeWD(item)" uib-tooltip="{{(item.wd>0 ? \'ui.tips.dockerMoniterOn\' : \'ui.tips.dockerMoniterOff\') | translate}}" ng-class="{true:\'btn btn-success btn-xs outline\', false: \'btn btn-default btn-xs outline\'}[item.wd>0]"><i ng-class="{true:\'glyphicon glyphicon-eye-close\', false: \'glyphicon glyphicon-eye-open\'}[item.wd>0]"></i>&nbsp;{{ (item.wd==0 ? \'ui.dashboard.tabs.docker.btn.openMoniter\' : \'ui.dashboard.tabs.docker.btn.offMoniter\')|translate}}</button> <button ng-disabled="item.pending" ng-if="item.is_owner" ng-click="deleteNode(item)" class="btn btn-danger btn-xs outline"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.tabs.docker.btn.delete\'|translate}}</button> <button ng-disabled="item.pending" ng-if="item.unit_price && item.ecs_status==3" ng-click="installDocker(item)" class="btn btn-primary btn-xs outline"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{(item.pending ? \'ui.dashboard.tabs.ecs.installDockerIng\': \'ui.dashboard.tabs.ecs.installDocker\')|translate}}</button> <span class="label label-success" ng-if="!item.is_owner">{{\'ui.const.publicUse\'|translate}}</span> </div> </td> </tr> </table> </div> </div> </div> </div> <table class="table table-condensed table-hover" style="margin-top:15px" ng-if="nodes.length > 0 && showList"> <thead> <tr> <th class="col-lg-1 col-xs-1">ID</th> <th class="col-lg-2 col-xs-5" translate="ui.dashboard.tabs.docker.ip"></th> <th class="col-lg-3 visible-lg" translate="ui.dashboard.tabs.docker.os"></th> <th class="col-lg-1 visible-lg" align="center" translate="ui.dashboard.tabs.docker.loaded"></th> <th class="col-lg-1 visible-lg" translate="ui.dashboard.tabs.docker.tunnel"></th> <th class="col-lg-1 col-xs-2" translate="ui.dashboard.tabs.docker.status"></th> <th class="col-lg-3 col-xs-4" translate="ui.dashboard.tabs.docker.action"></th> </tr> </thead> <tr ng-repeat="item in nodes"> <td>{{ item.id }}</td> <td>{{ item.ip }}</td> <td class="visible-lg"> {{ item.os }} <span class="text-muted pull-right"> <span ng-if="!item.unit_price">{{item.region|trans}} {{ item.city | trans}}&nbsp;&nbsp;{{item.name}}</span> <span ng-if="item.unit_price" style="margin-left:5px"> <i style="color:#777" class="glyphicon glyphicon-time"></i>&nbsp; {{ item.unit_price/1e8}} {{ \'ui.const.rmb\' | translate }} / {{\'ui.const.hours\'|translate}} </span> </span> </td> <td class="visible-lg" align="center">{{ item.loaded }}</td> <td class="visible-lg">{{ (item.peer ? (item.tunnel ? \'ui.const.node.line.cdn\' : \'ui.const.node.line.direct\') : \'ui.const.node.line.unknown\') | translate}}<span class="pull-right label label-danger" ng-if="item.isOld"><i class="glyphicon glyphicon-exclamation-sign"></i>&nbsp;{{\'ui.dashboard.tabs.docker.tips.versionOld\'|translate}}</span></td> <td> <div ng-if="item.build"> <span uib-tooltip="{{\'ui.dashboard.tabs.docker.pingTime\' | translate}}: {{item.date}}">{{ item.isOld ? item.date : ((item.online ? "ui.dashboard.tabs.docker.online" : "ui.dashboard.tabs.docker.offline") | translate)}}</span> </div> <div ng-if="!item.build"> {{ [\'ui.const.ecs.status.wait\', \'ui.const.ecs.status.installing\', \'ui.const.ecs.status.starting\', \'ui.const.ecs.status.pending\', \'ui.const.ecs.status.stopped\', \'ui.const.ecs.status.expired\', \'ui.const.ecs.status.failed\'][item.ecs_status] | translate }} <div class="pull-right" ng-if="item.ecs_status<3"> <i class="fa fa-spinner fa-spin"></i> </div> </div> </td> <td> <div class="colAction"> <button ng-if="item.is_owner" ng-click="setNodeWD(item)" uib-tooltip="{{(item.wd>0 ? \'ui.tips.dockerMoniterOn\' : \'ui.tips.dockerMoniterOff\') | translate}}" ng-class="{true:\'btn btn-success btn-xs outline\', false: \'btn btn-default btn-xs outline\'}[item.wd>0]"><i ng-class="{true:\'glyphicon glyphicon-eye-close\', false: \'glyphicon glyphicon-eye-open\'}[item.wd>0]"></i>&nbsp;{{ (item.wd==0 ? \'ui.dashboard.tabs.docker.btn.openMoniter\' : \'ui.dashboard.tabs.docker.btn.offMoniter\')|translate}}</button> <button ng-disabled="item.pending" ng-if="item.is_owner" ng-click="deleteNode(item)" class="btn btn-danger btn-xs outline"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.tabs.docker.btn.delete\'|translate}}</button> <button ng-disabled="item.pending" ng-if="item.unit_price && item.ecs_status==3" ng-click="installDocker(item)" class="btn btn-primary btn-xs outline"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{(item.pending ? \'ui.dashboard.tabs.ecs.installDockerIng\': \'ui.dashboard.tabs.ecs.installDocker\')|translate}}</button> <span class="label label-success" ng-if="!item.is_owner">{{\'ui.const.publicUse\'|translate}}</span> </div> </td> </tr> </table> </div> </div> </div> ')}]),angular.module("views/m/platforms.html",[]).run(["$templateCache",function(a){a.put("views/m/platforms.html",'<div class="row" ng-loading> <div id="section-platforms" class="panel panel-default" ng-init="searchPlatformKeyword=\'\'"> <div class="panel-heading"> <div class="pull-right" ng-if="platforms.length>3"> <a href ng-click="switchStyle()"><i style="color:#666666" ng-class="{true: \'fa fa-list\', false: \'fa fa-th-large\'}[showList]"></i></a> </div> <h3 class="panel-title"> {{ \'ui.dashboard.tabs.platformNav\' | translate}} <span ng-if="searchPlatformKeyword" translate="ui.g.searchResult" translate-values="{keyword: searchPlatformKeyword}"></span> </h3> </div> <div class="panel-body"> <div> <a href="m/add-platform" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.platform.new\'|translate}}</a> <a href="m/trade" class="label label-danger outline"><i class="fa fa-cubes"></i>&nbsp;{{\'ui.nav.trade\'|translate}}</a> <span class="pull-right"> <input ng-show="platforms.length > 5" ng-model="searchPlatformKeyword" placeholder="{{\'ui.placeholder.search\' | translate}}" class="searchbox"> <span class="badge" ng-if="platforms.length > 0">{{ platforms.length }}</span> </span> </div> <div class="well well-sm" style="margin-top:10px;" ng-if="platforms.length == 0" translate="ui.dashboard.tips.platform"></div> <div class="row" style="margin-top:20px" ng-if="!showList"> <div class="col-md-2 col-xs-6" ng-repeat="item in platforms | filter:{label:searchPlatformKeyword} | orderBy:\'eid\'"> <a ng-href="m/edit-platform/{{item.id}}" style="text-decoration:none"> <div class="thumbnail" ng-mouseenter="item.focus=true" ng-mouseleave="item.focus=false" style="position:relative;min-height:80px"> <div style="padding:26px;text-align:center;color:#666666;font-size:16pt;">{{ item.label }}</div> <div style="background-color:#676767;width:58px;text-align:center;position:absolute;bottom:5px;left:5px" ng-show="item.focus"> <a href style="color:white" ng-click="deletePlatform(item)">{{\'ui.dashboard.platform.delete\'|translate}}</a> </div> <div style="position:absolute;top:5px;right:5px;opacity:0.8" ng-show="item.focus"> <a style="border-radius:0" class="btn btn-primary btn-xs outline" href="m/trade/{{item.id}}"><i class="glyphicon glyphicon-transfer"></i>&nbsp;{{\'ui.platforms.trade\'|translate}}</a> </div> <div style="background-color:#676767;width:58px;text-align:center;position:absolute;bottom:5px;right:5px" ng-show="item.focus"> <a ng-href="m/edit-platform/{{item.id}}" style="color:white">{{\'ui.dashboard.platform.edit\'|translate}}</a> </div> <div style="position:absolute;top:5px;left:5px;opacity:0.8" ng-if="item.logo"> <a target="_blank" href="{{item.website}}"><img border="0" class="pull-right" width="24" height="24" ng-src="{{item.logo}}"></a> </div> </div> </a></div> </div> </div> <table class="table table-condensed table-hover" ng-if="platforms.length > 0 && showList"> <thead> <tr> <th class="col-lg-9 col-xs-8">{{"ui.dashboard.platform.name"|translate}}<span class="pull-right text-muted">API Name</span></th> <th class="col-lg-3 col-xs-4" style="text-align:right" translate="ui.dashboard.platform.action"></th> </tr> </thead> <tr ng-repeat="item in platforms | filter:{label:searchPlatformKeyword} | orderBy:\'eid\'"> <td> <div class="pull-left"> <a ng-if="item.logo" target="_blank" href="{{item.website}}"><img width="16" height="16" border="0" ng-src="{{item.logo}}"></a> <i ng-if="!item.logo" style="font-size:16px" class="glyphicon glyphicon-ok-circle text-muted"></i> &nbsp;{{ item.label | translate }} </div> <div class="pull-right text-muted"> {{ item.eid }} </div> </td> <td align="right"> <div ng-if="item.id>0"> <a ng-click="deletePlatform(item)" class="btn btn-danger btn-xs outline"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.platform.delete\'|translate}}</a> <a class="btn btn-success btn-xs outline" href="m/edit-platform/{{item.id}}"><i class="glyphicon glyphicon-cog"></i>&nbsp;{{\'ui.dashboard.platform.edit\'|translate}}</a> <a class="btn btn-primary btn-xs outline" href="m/trade/{{item.id}}"><i class="glyphicon glyphicon-transfer"></i>&nbsp;{{\'ui.platforms.trade\'|translate}}</a> </div> </td> </tr> </table> </div> </div> ')}]),angular.module("views/m/pricing.html",[]).run(["$templateCache",function(a){a.put("views/m/pricing.html",'<div class="row" ng-loading> <div ng-show="isJumping" align="center"> <div class="alert alert-success"> {{ \'ui.tips.payLoading\' | translate }} </div> </div> <div ng-show="!isJumping"> <div class="panel panel-default"> <div class="panel-heading"> <span class="glyphicon glyphicon-flash"></span>&nbsp;&nbsp;{{\'ui.pricing.charge\'|translate}} <div class="pull-right" ng-show="payMethod==2"> USDCNY: {{g.rate.USDCNY}} </div> </div> <div class="panel-body"> <div class="row" style="margin-top:30px;margin-bottom:20px"> <div class="col-md-4 col-md-offset-2"> <div class="input-group"> <span class="input-group-addon">{{\'ui.pricing.chargeAmount\' | translate }}</span> <input type="number" ng-model="pricingAmount" style="text-align:center" min="1" max="100000" class="form-control"> <span class="input-group-addon">{{\'ui.const.rmb\' | translate }}</span> </div> </div> <div class="col-md-6"> <div class="btn-group" style="display:block"> <label class="btn btn-default" ng-click="notChanged=false" ng-model="payMethod" uib-btn-radio="0"><i class="iconfont icon-alipay"></i>&nbsp;{{\'ui.const.alipay\'|translate}}</label> <label class="btn btn-default" ng-model="payMethod" uib-btn-radio="1"><i class="fa fa-wechat"></i>&nbsp;{{\'ui.const.weixin\'|translate}}</label> <label class="btn btn-default" ng-click="notChanged=false" ng-model="payMethod" uib-btn-radio="2" uib-tooltip="{{\'ui.const.paypalTips\'|translate}}"><i class="fa fa-paypal"></i>&nbsp;PayPal</label> </div> <div class="input-group"> <button style="margin-left:8px" class="btn btn-success" ng-click="pay()" ng-disabled="isPending || (!(pricingAmount > 0 && pricingAmount < 100000))">{{\'ui.const.pay\'|translate}}&nbsp;&nbsp;<b>{{ (pricingAmount*(pricingAmount >= promotion.min ? (100-promotion.discount) : 100))/100 | precision: 0}}</b>&nbsp;&nbsp;{{"ui.const.rmb"|translate}}</button> </div> </div> </div> <div class="row" style="margin-bottom:20px"> <div class="col-md-4 col-md-offset-2"> <div ng-show="discount_item==0" class="pull-right"> <i>{{\'ui.pricing.noPromotionProject\' | translate}}</i> </div> <div ng-show="discount_item>0"> <div class="d-inline-block" style="width:75%"> <div class="input-group"> <span class="input-group-addon">{{\'ui.pricing.promotionCode\'|translate}}</span> <input type="text" maxlength="10" ng-model="promotionCode" style="text-align:center" class="form-control"> </div> </div> <div class="d-inline-block pull-right" style="width:25%"> <div class="pull-right"> <button style="margin-left:8px" class="btn btn-default" ng-click="applyPromotionCode(promotionCode)" ng-disabled="isPending || (!(pricingAmount > 0 && pricingAmount < 100000))">{{\'ui.pricing.applyPromotionCode\'|translate}}</button> </div> </div> </div> </div> </div> <div class="row" ng-if="promotion && promotion.discount > 0"> <div class="col-md-6 col-md-offset-3"> <div align="center" class="alert alert-success"> <span translate="ui.pricing.promotionTips" translate-values="{promotion:promotion}"></span> </div> </div> </div> <div class="row" ng-if="payMethod==1 && notChanged"> <div class="col-md-4 col-md-offset-4"> <div class="panel panel-primary"> <div class="panel-heading"><i class="fa fa-weixin"></i>&nbsp;&nbsp;{{\'ui.const.weixinQRTips\'|translate}}</div> <div class="panel-body"> <div align="center" id="wxcodeurl"> <i class="fa fa-spinner fa-spin"></i> <br><b>{{ (isPending ? "ui.const.weixinQRMakingTips" : "ui.const.weixinQRClickTips") | translate}}</b> </div> </div> </div> </div> </div> <div class="alert alert-warning" style="text-align:center"> <i class="glyphicon glyphicon-hourglass"></i>&nbsp;{{\'ui.const.balance\'|translate}}: <b style="color:red">{{ (g.balance/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}}, {{\'ui.const.consumed\'|translate}}: <b>{{(g.consumed/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}}, <span translate="ui.pricing.chargeTips" translate-values="{fee: g.fee}"></span> </div> <div class="pull-right"> <a class="label label-primary outline" href="m/invoice">{{ \'ui.nav.invoice\' | translate}}</a> </div> </div> </div> </div> </div> ')}]),angular.module("views/m/rent.html",[]).run(["$templateCache",function(a){
a.put("views/m/rent.html",'<div class="row" ng-loading> <div ng-show="isJumping" align="center"> <div class="alert alert-success"> {{ \'ui.tips.payLoading\' | translate }} </div> </div> <div ng-show="!isJumping"> <div class="panel panel-default" ng-show="!isPrivate"> <div class="panel-heading"><span class="glyphicon glyphicon-shopping-cart"></span>&nbsp;&nbsp;{{\'ui.const.rent\'|translate}} - {{strategy.name}}</div> <div class="panel-body"> <div align="center"> <span ng-class="$first ? \'label label-danger\' : \'label label-info\'" style="margin-right:3px" ng-repeat="m in pricing"> {{ m.rent }}&nbsp;{{\'ui.const.rmb\'|translate}}/{{ m.period }}&nbsp;{{\'ui.const.day\'|translate}} </span> </div> <div class="row" style="margin-top:30px;margin-bottom:20px"> <div class="col-md-4 col-md-offset-2"> <div class="input-group"> <div class="input-group-addon">{{ (strategy.expire_date ? "ui.const.renew" : "ui.const.buynew") | translate }}</div> <input type="number" ng-model="buyPeriod" ng-change="updateDate()" style="text-align:center" min="{{periodMin}}" max="1000" class="form-control"> <div class="input-group-addon">{{ \'ui.const.day\' | translate }} (<span translate="ui.rent.dayTips" translate-values="{periodMin: periodMin}"></span>)</div> </div> </div> <div class="col-md-6"> <div class="btn-group" style="display:block"> <label class="btn btn-default" ng-click="notChanged=false" ng-model="payMethod" uib-btn-radio="0"><i class="iconfont icon-alipay"></i>&nbsp;{{\'ui.const.alipay\'|translate}}</label> <label class="btn btn-default" ng-model="payMethod" uib-btn-radio="1"><i class="fa fa-wechat" aria-hidden="true"></i>&nbsp;{{\'ui.const.weixin\'|translate}}</label> <label class="btn btn-default" ng-click="notChanged=false" ng-model="payMethod" uib-btn-radio="2" uib-tooltip="{{\'ui.const.paypalTips\'|translate}}"><i class="fa fa-paypal" aria-hidden="true"></i>&nbsp;PayPal</label> <label class="btn btn-default" ng-click="notChanged=false" ng-model="payMethod" uib-tooltip="{{\'ui.const.available\'|translate}} : {{g.balance/1e8}}" uib-btn-radio="3" style="color:green"><i class="iconfont icon-balance"></i>&nbsp;{{\'ui.const.balance\'|translate}}</label> </div> <div class="input-group"> <button style="margin-left:8px" class="btn btn-success" ng-click="pay()" ng-disabled="isPending || (!(buyPeriod > 0))">{{\'ui.const.pay\'|translate}}&nbsp;&nbsp;<b>{{ payRent | precision: 2}} </b>&nbsp;&nbsp;{{"ui.const.rmb"|translate}}</button> </div> </div> </div> <div class="row" ng-if="payMethod==1 && notChanged"> <div class="col-md-4 col-md-offset-4"> <div class="panel panel-primary"> <div class="panel-heading"><i class="fa fa-weixin"></i>&nbsp;&nbsp;{{\'ui.const.weixinQRTips\'|translate}}</div> <div class="panel-body"> <div align="center" id="wxcodeurl"> <i class="fa fa-spinner fa-spin"></i> <br><b>{{ (isPending ? "ui.const.weixinQRMakingTips" : "ui.const.weixinQRClickTips") | translate}}</b> </div> </div> </div> </div> </div> <div class="alert alert-info"> <span class="glyphicon glyphicon-calendar"></span>&nbsp;<span ng-if="strategy.expire_date">{{\'ui.rent.expireTips\'|translate}}: {{ strategy.expire_date }}, </span>{{\'ui.rent.newExpireTips\'|translate}}: <b>{{ newExpireDate }}</b> </div> </div> <div class="panel-footer"> {{\'ui.strategy.author\' | translate}}: <b>{{strategy.username}}</b> Email: <i>{{strategy.email}}</i> </div> </div> <div class="panel panel-default" ng-show="isPrivate"> <div class="panel-heading"><span class="glyphicon glyphicon-shopping-cart"></span>&nbsp;&nbsp;{{\'ui.rent.internalRent\'|translate}}</div> <div class="panel-body"> <div class="row" style="margin-top:30px;margin-bottom:20px"> <div class="col-md-6 col-md-offset-2"> <div class="input-group"> <div class="input-group-addon">{{\'ui.dialog.buy.key\'|translate}}</div> <input type="text" ng-model="regCode" placeholder="{{\'ui.dialog.buy.key\'|translate}}" class="form-control"> </div> </div> <div class="col-md-2"> <button class="btn btn-success" ng-click="buyStrategy()" ng-disabled="isPending || regCode.length == 0">{{\'ui.const.rent\'|translate}}</button> </div> </div> <div class="alert alert-info"> {{\'ui.rent.internalRentTips\'|translate}} </div> </div> </div> </div> </div> ')}]),angular.module("views/m/robot.html",[]).run(["$templateCache",function(a){a.put("views/m/robot.html",'<div class="row" ng-loading> <div class="col-md-12"> <div robot="robotId" private="true"></div> </div> </div> ')}]),angular.module("views/m/robots.html",[]).run(["$templateCache",function(a){a.put("views/m/robots.html",'<div class="row" ng-loading> <div class="alert alert-warning" ng-if="!isOEM"> <i class="glyphicon glyphicon-hourglass"></i>&nbsp;{{\'ui.const.balance\'|translate}}: <b style="color:red">{{ (g.balance/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}}, {{\'ui.const.consumed\'|translate}}: <b>{{(g.consumed/1e8).toFixed(3) }}</b> {{\'ui.const.rmb\' | translate}} <span ng-if="g.balance>=g.fee" class="pull-right"><b>{{ getConcurrentAbout() }}</b> {{\'ui.dashboard.consumedAbout\'|translate}}: <b>{{(g.balance/1e8/ getConcurrentAbout() / (g.fee/1e8)).toFixed(2)}}</b> {{\'ui.const.hours\'|translate}}, {{\'ui.const.consumedAbout\'|translate}}:&nbsp;<b>{{consumedAbout()}}</b></span> <span ng-if="g.balance<g.fee" style="color:red">{{\'ui.alert.insufficientBalance\'|translate}}</span> </div> <div class="alert alert-danger" ng-if="has_arrears"> <b>{{\'ui.robot.in_arrears\' | translate }}</b> </div> <div id="section-robots" class="panel panel-default" ng-init="searchRobotKeyword=\'\'"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.dashboard.robot.title\'|translate}} <span ng-if="searchRobotKeyword" translate="ui.g.searchResult" translate-values="{keyword: searchRobotKeyword}"></span> </h3> </div> <div class="panel-body"> <div ng-show="!isShadow"> <a href="m/add-robot" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.addRobot\'|translate}}</a>&nbsp; <span style="margin-left:8px" ng-if="robots.length > 1" uib-tooltip="{{\'ui.dashboard.totalProfit\' | translate}}" class="badge">{{ totalProfit | precision: 5}}</span> <span class="pull-right"> <input ng-show="robots.length > 5" ng-model="searchRobotKeyword" placeholder="{{\'ui.placeholder.search\' | translate}}" class="searchbox"> <span class="badge" ng-if="robots.length > 0">{{ robots.length }}</span> </span> </div> <span class="text-danger" ng-if="isShadow" style="margin-right:30px"><i class="glyphicon glyphicon-exclamation-sign"></i>&nbsp;{{ \'ui.alert.shadowMember\' | translate }}</span> <div class="well well-sm" style="margin-top:10px;" ng-if="robots.length == 0" translate="ui.dashboard.tips.robot"></div> </div> <table class="table table-condensed table-hover" ng-if="robots.length > 0" ng-init="showCheckbox=false"> <thead> <tr> <th ng-class="isShadow ? \'col-lg-7 col-xs-11\' : \'col-lg-5 col-xs-9\'"> {{\'ui.dashboard.tabs.robot.name\'|translate}}&nbsp; <a ng-show="robots.length > 1" href="" ng-click="setSortBy(\'name\')"><i ng-class="getSortStyle(\'name\')"></i></a> <a href ng-show="robots.length > 1" ng-click="showCheckbox=!showCheckbox" style="color:#666666;margin-left:5px;margin-right:10px"><i ng-class="showCheckbox ? \'fa fa-check-square\' : \'fa fa-check-square-o\'"></i></a> <a ng-show="robots.length > 1" href="" ng-click="setSortBy(\'-docker_id\')" style="color:#888;text-decoration:none;">{{\'ui.dashboard.tabs.robot.docker\'|translate}}&nbsp;<i ng-class="getSortStyle(\'docker_id\')"></i></a> <span class="pull-right text-muted visible-lg">{{ \'ui.dashboard.tabs.robot.strategy\' | translate }}&nbsp;<a ng-show="robots.length > 1" href="" ng-click="setSortBy(\'strategy_name\')"><i ng-class="getSortStyle(\'strategy_name\')"></i></a></span> </th> <th class="col-lg-1" style="text-align:center"><span class="visible-lg">{{\'ui.dashboard.tabs.robot.status\'|translate}}&nbsp;<a ng-show="robots.length > 1" href="" ng-click="setSortBy(\'status\')"><i ng-class="getSortStyle(\'status\')"></i></a></span></th> <th class="col-lg-1 col-xs-2">{{\'ui.dashboard.tabs.robot.profit\'|translate}}&nbsp;<a ng-show="robots.length > 1" href="" ng-click="setSortBy(\'profit\')"><i ng-class="getSortStyle(\'profit\')"></i></a></th> <th class="col-lg-1 visible-lg" translate="ui.dashboard.tabs.robot.public" ng-if="!isShadow"></th> <th class="col-lg-2 visible-lg">{{(robotDate==\'date\' ? \'ui.dashboard.tabs.robot.created\' : \'ui.dashboard.tabs.robot.refresh\')|translate}}&nbsp;<a ng-show="robots.length > 1" href="" ng-click="setSortBy(robotDate)"><i ng-class="getSortStyle(robotDate)"></i></a><a uib-tooltip="{{\'ui.dashboard.tabs.robot.tipsRefresh\' | translate }}" style="margin-left:10px" href="" ng-click="switchRobotDate()"><i class="glyphicon glyphicon-refresh"></i></a></th> <th ng-class="isShadow ? \'col-lg-1 col-xs-1\' : \'col-lg-2 col-xs-1\'"> {{\'ui.dashboard.tabs.robot.action\'|translate}} </th> </tr> </thead> <tbody ng-if="showCheckbox"> <tr> <td colspan="6"> <div class="btn-group btn-group-xs" role="group"> <button class="btn btn-default" ng-click="checkAll(true)" translate="ui.dashboard.robot.checkAll"></button> <button class="btn btn-default" ng-click="checkAll(false)" translate="ui.dashboard.robot.uncheckAll"></button> <button class="btn btn-default" ng-click="checkAll(-1)" translate="ui.dashboard.robot.reverseCheck"></button> </div> <div class="btn-group btn-group-xs" role="group"> <button class="btn btn-default" ng-click="batchStop()"><i class="glyphicon glyphicon-stop"></i>&nbsp;{{\'ui.dashboard.robot.doBatchStop\'|translate}}</button> <button class="btn btn-default" ng-click="batchRestart()"><i class="glyphicon glyphicon-repeat"></i>&nbsp;{{\'ui.dashboard.robot.doBatchRestart\'|translate}}</button> </div> <div class="btn-group btn-group-xs" role="group" ng-show="!isShadow"> <button class="btn btn-default" ng-click="batchDelete()"><i class="glyphicon glyphicon-repeat"></i>&nbsp;{{\'ui.dashboard.robot.doBatchDelete\'|translate}}</button> </div> </td> </tr> </tbody> <tbody ng-repeat="item in (zrobots = (robots | orderBy:robotsortBy)) | filter:{name:searchRobotKeyword}" style="border:0"> <tr ng-if="(robotsortBy==\'-docker_id\'||robotsortBy==\'docker_id\') && ($index==0 || zrobots[$index].docker_id!=zrobots[$index-1].docker_id)"> <td colspan="6"> <div ng-if="item.docker_id>0"> <i class="glyphicon glyphicon-menu-down"></i>&nbsp;<b>#{{item.docker_id}}</b> {{item.node.ip}} {{item.node.region|trans}} {{ item.node.city | trans}}&nbsp;&nbsp;<i>{{item.node.name}}</i>&nbsp;<span class="pull-right label label-default">{{ item.node.os }}</span> </div> <div ng-if="item.docker_id<=0"> <i class="glyphicon glyphicon-menu-down"></i> </div> </td> </tr> <tr> <td ng-style="{\'border-left\': (robotsortBy == \'docker_id\' || robotsortBy == \'-docker_id\') ? item.borderStyle : (item.status==1 ? (isOEM ? \'3px solid #2E3E4F\' : \'3px solid #72c02c\'): \'\')}"> <input ng-show="showCheckbox" ng-model="item.checked" type="checkbox" style="margin-right:3px"> <a href="m/robot/{{item.id}}">{{ item.name | trans}}</a> <span ng-if="item.in_arrears" style="margin-left:10px" class="label label-danger" uib-tooltip="{{\'ui.robot.in_arrears\'|translate}}">{{\'ui.const.in_arrears\'|translate}}</span> <span style="margin-left:10px" class="text-muted" uib-tooltip="AppId">{{ item.appid }}</span> <span class="pull-right visible-lg"> <i ng-if="item.desc" class="text-danger fa fa-feed" uib-tooltip="{{item.desc}}" tooltip-append-to-body="true"></i> <a ng-if="!isShadow" ng-href="{{item.strategy_isowner ? \'m/edit-strategy\' : \'m/backtest-strategy\'}}/{{item.strategy_id}}" class="text-muted">{{ item.strategy_name | trans }}</a> <div ng-if="isShadow" class="text-muted">{{ item.strategy_name | translate }}</div> </span> </td> <td align="center"> \x3c!-- ng-class remove old class delay sometimes --\x3e <i ng-if="item.status==0" class="text-info fa fa-circle-o-notch" uib-tooltip="{{ \'ui.robot.status.queue\' | translate }}"></i> <i ng-if="item.status==1" class="text-success fa fa-play-circle" uib-tooltip="{{ \'ui.robot.status.running\' | translate }}"></i> <i ng-if="item.status==2" class="fa fa-spinner" uib-tooltip="{{ \'ui.robot.status.stopping\' | translate }}"></i> <i ng-if="item.status==3" class="text-primary fa fa-check-circle-o" uib-tooltip="{{ \'ui.robot.status.complete\' | translate }}"></i> <i ng-if="item.status==4" class="text-warning fa fa-pause" uib-tooltip="{{ \'ui.robot.status.stopped\' | translate }}"></i> <i ng-if="item.status==5" class="text-danger fa fa-warning" uib-tooltip="{{ \'ui.robot.status.error\' | translate }}"></i> </td> <td><div animate-on-change="item.profit" ng-style="{color:item.profitColor}">{{ item.profit | precision: 5 }}</div></td> <td class="visible-lg" ng-if="!isShadow"> <a class="btn btn-danger btn-xs outline" uib-tooltip="{{ \'ui.dashboard.robot.cancelPublic\' | translate }}" ng-if="item.public == 1" ng-click="publicRobot(item, 0)" translate="ui.dashboard.robot.btn.cancelPublic"></a> <a class="btn btn-warning btn-xs outline" uib-tooltip="{{ \'ui.dashboard.robot.doPublic\' | translate }}" ng-if="item.public == 0" ng-click="publicRobot(item, 1)" translate="ui.dashboard.robot.btn.public"></a> </td> <td class="visible-lg">{{ item[robotDate] }}</td> <td> <div class="btn-group hidden-lg"> <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> {{[\'ui.robot.status.queue\', \'ui.robot.status.running\', \'ui.robot.status.stopping\', \'ui.robot.status.complete\', \'ui.robot.status.stoppped\', \'ui.robot.status.error\'][item.status] | translate}}&nbsp;<span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li ng-if="item.status>2 && !isShadow"><a href="" ng-disabled="item.io_loading" ng-click="deleteRobot(item)"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.robot.btn.delete\'|translate}}</a></li> <li ng-if="item.status<=2"><a href="" ng-disabled="item.io_loading" ng-click="stopRobot(item)"><i class="glyphicon glyphicon-stop"></i>&nbsp;{{item.status==2?\'ui.dashboard.robot.btn.kill\' : (item.io_loading ? \'ui.dashboard.robot.stopping\' : \'ui.dashboard.robot.doStop\')|translate}}</a></li> <li ng-if="item.status>2"><a href="" ng-disabled="item.io_loading" ng-click="restartRobot(item)"><i ng-class="\'glyphicon glyphicon-repeat \' + (item.io_loading ? \'icon-spin\' : \'\')"></i>&nbsp;{{(item.io_loading ? \'ui.dashboard.robot.restarting\' : \'ui.dashboard.robot.doRestart\')|translate}}</a></li> <li class="divider" ng-if="!isShadow"></li> <li ng-if="item.public == 1 && !isShadow"><a href="" ng-click="publicRobot(item, 0)"><i class="glyphicon glyphicon-eye-close"></i>&nbsp;{{\'ui.dashboard.robot.btn.cancelPublic\'|translate}}</a></li> <li ng-if="item.public == 0 && !isShadow"><a href="" ng-click="publicRobot(item, 1)"><i class="glyphicon glyphicon-eye-open"></i>&nbsp;{{\'ui.dashboard.robot.btn.public\'|translate}}</a></li> <li ng-if="item.status<=2&&!isShadow"><a href ng-click="setRobotWD(item)" uib-tooltip="{{(item.wd>0 ? \'ui.dashboard.robot.tipsCancelAlert\' : \'ui.dashboard.robot.tipsOpenAlert\') | translate}}"><i ng-class="{true:\'glyphicon glyphicon-eye-close\', false: \'glyphicon glyphicon-eye-open\'}[item.wd>0]"></i>&nbsp;{{ (item.wd==0 ? \'ui.dashboard.robot.btn.openAlert\' : \'ui.dashboard.robot.btn.cancelAlert\')|translate}}</a></li> </ul> </div> <div class="visible-lg colAction"> <div ng-if="item.status<=2"> <button ng-if="!isShadow" ng-click="setRobotWD(item)" uib-tooltip="{{(item.wd>0 ? \'ui.dashboard.robot.tipsCancelAlert\' : \'ui.dashboard.robot.tipsOpenAlert\') | translate}}" ng-class="{true:\'btn btn-success btn-xs outline\', false: \'btn btn-default btn-xs outline\'}[item.wd>0]"><i ng-class="{true:\'glyphicon glyphicon-eye-close\', false: \'glyphicon glyphicon-eye-open\'}[item.wd>0]"></i>&nbsp;{{ (item.wd==0 ? \'ui.dashboard.robot.btn.openAlert\' : \'ui.dashboard.robot.btn.cancelAlert\')|translate}}</button> <button ng-disabled="item.io_loading" ng-click="stopRobot(item)" class="btn btn-warning btn-xs outline"><i class="glyphicon glyphicon-stop"></i>&nbsp;{{item.status==2?\'ui.dashboard.robot.btn.kill\' : (item.io_loading ? \'ui.dashboard.robot.stopping\' : \'ui.dashboard.robot.doStop\')|translate}}</button> </div> <div ng-if="item.status>2"> <button ng-if="!isShadow" ng-disabled="item.io_loading" ng-click="deleteRobot(item)" class="btn btn-danger btn-xs outline"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.robot.btn.delete\'|translate}}</button> <button ng-disabled="item.io_loading" ng-click="restartRobot(item)" class="btn btn-success btn-xs outline"><i ng-class="\'glyphicon glyphicon-repeat \' + (item.io_loading ? \'icon-spin\' : \'\')"></i>&nbsp;{{(item.io_loading ? \'ui.dashboard.robot.restarting\' : \'ui.dashboard.robot.doRestart\')|translate}}</button> </div> </div> </td> </tr> </tbody> </table> </div> </div> ')}]),angular.module("views/m/route.html",[]).run(["$templateCache",function(a){a.put("views/m/route.html",'<div ng-loading> <div class="alert alert-success"> 调试的代码, 直接在指定的托管者上与绑定的交易所运行, 立即返回执行结果. 超时时间为3分钟, 可以调用API里的任何函数 </div> <div class="row"> <div class="col-md-4"> <select ng-model="option.node_selected_id" class="form-control"> <option ng-repeat="node in nodes | filter:{ is_owner: true } | orderBy:\'id\'" value="{{node.id}}">{{ node.desc }}</option> </select> </div> <div class="col-md-2"> <ui-select ng-model="option.platform" on-select="option.stock=option.platform.stocks[0]"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.name}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.label"> <div ng-bind-html="m.label | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> </div> <div class="col-md-2" ng-if="!option.platform.custom"> <select ng-model="option.stock" ng-options="m for m in option.platform.stocks" class="form-control"> </select> </div> <div class="col-md-2" ng-if="option.platform.custom"> <input type="text" class="form-control" ng-model="option.stock"> </div> <div class="col-md-2" ng-if="option.platform.eid!=\'Futures_CTP\' && option.platform.eid!=\'Futures_LTS\'"> <switch ng-model="option.platform.custom" off="{{\'ui.tips.customSymbolSwitch\'|translate}}" uib-tooltip="{{\'ui.tips.customSymbol\'|translate}}" tooltip-append-to-body="true"></switch> </div> </div> <div class="row" style="margin-top:30px"> <div class="col-md-10"> <div id="plugin-area"></div> </div> <div class="col-md-2"> <button class="btn btn-success" ng-disabled="pending||nodes.length==0||platforms.length==0" ng-click="runPlugin()"><i class="glyphicon glyphicon-flash"></i>&nbsp;{{pending ? \'执行中...\' : \'执行\'}}</button> </div> </div> </div> <div class="row" style="margin-top:20px" ng-show="!pending && runCount > 0"> <div class="col-md-10"> <blockquote> <small>函数结果</small> </blockquote> <textarea class="form-control" rows="6">{{ result.result }}</textarea> </div> </div> <div class="row" style="margin-top:20px" ng-show="!pending && result.logs.length>0"> <div class="col-md-10 table-responsive nowrap"> <blockquote> <small>{{ \'ui.robot.tab.logs\' | translate }}</small> </blockquote> <table class="table table-condensed"> <thead> <tr> <th width="150" translate="ui.robot.log.date"></th> <th width="110" translate="ui.robot.log.platform"></th> <th width="50" translate="ui.robot.log.type"></th> <th width="90" translate="ui.robot.log.price"></th> <th width="90" translate="ui.robot.log.amount"></th> <th translate="ui.robot.log.message"></th> </tr> </thead> <tr ng-repeat="item in result.logs" ng-class="\'slide-left\'" ng-style="item.style"> <td>{{ item.date }}</td> <td><span ng-if="item.log_type < 4">{{ item.eid | eid2str }}</span></td> <td><label popover-trigger="mouseenter" uib-popover="{{(item.order_id !=\'\'&&item.order_id!=\'-1\') ? \'Order Id: \' + item.order_id : \'\'}}" ng-class="item.labelStyle">{{ item.logTypeStr | translate }}</label><label ng-class="item.directionStyle" style="margin-left:5px" ng-if="item.directionStr">{{ item.directionStr | translate }} - {{ item.contractType}}</label></td> <td ng-if="item.show_price">{{ item.priceStr }}</td> <td ng-if="item.show_price">{{ item.amountStr }}</td> <td ng-if="item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> <td colspan="3" ng-if="!item.show_price" popover-trigger="mouseenter" nowrap><span uib-tooltip="{{item.realextra}}" ng-bind-html="item.extra | text"></span><span ng-if="item.icon" style="margin-left:8px" ng-class="item.icon"></span></td> </tr> </table> </div> </div> ')}]),angular.module("views/m/sales.html",[]).run(["$templateCache",function(a){a.put("views/m/sales.html",'<div ng-loading> <div class="panel panel-default"> <div class="panel-heading"><a ng-href="m/dashboard" class="label label-default" translate="ui.nav.dashboard"></a>&nbsp;››&nbsp;<b translate="ui.nav.sales"></b><span class="badge pull-right" style="background-color:#aab0c6">{{ trades.length }}</span></div> <div class="panel-body"> <div class="alert alert-danger" ng-show="trades.length == 0"> {{ \'ui.sales.empty\' | translate}} &nbsp;<a href="m/dashboard" class="label label-danger" translate="ui.nav.dashboard"></a> </div> <table class="table" ng-show="trades.length > 0"> <thead> <tr> <th class="text-muted" width="20">#</th> <th>{{\'ui.sales.cols.username\' | translate }}&nbsp;<a href ng-click="setSortBy(\'username\')"><i ng-class="getSortStyle(\'username\')"></i></a></th> <th>{{\'ui.sales.cols.strategy\' | translate }}&nbsp;<a href ng-click="setSortBy(\'strategy_name\')"><i ng-class="getSortStyle(\'strategy_name\')"></i></a></th> <th width="58">{{\'ui.sales.cols.concurrency\' | translate }}</th> <th width="160">{{\'ui.sales.cols.expireTime\' | translate }}&nbsp;<a href ng-click="setSortBy(\'expire_date\')"><i ng-class="getSortStyle(\'expire_date\')"></i></a></th> <th width="160">{{\'ui.sales.cols.buyTime\' | translate }}&nbsp;<a href ng-click="setSortBy(\'date\')"><i ng-class="getSortStyle(\'date\')"></i></a></th> </tr> </thead> <tbody> <tr ng-repeat="trade in trades | orderBy:sortBy"> <td class="text-muted">{{trade.idx}}</td> <td>{{trade.username}}</td> <td><a ng-href="m/edit-strategy/{{trade.strategy_id}}">{{trade.strategy_name}}</a><span ng-if="trade.is_expire" class="pull-right label label-danger" translate="ui.sales.alreadyExpired"></span></td> <td>{{trade.concurrent>0 ? trade.concurrent : \'--\'}}</td> <td><a style="text-decoration: none; border-bottom: dashed 1px #0088cc;" href popover-is-open="trade.isOpen" popover-trigger="outsideClick" uib-popover-template="\'tradeEditPopoverTemplate.html\'" popover-title="{{\'ui.sales.dialogTitle\' | translate}}" popover-placement="bottom" popover-append-to-body="true">{{trade.expire_date}}</a></td> <td>{{trade.date}}</td> </tr> </tbody> </table> </div> </div> </div> <script type="text/ng-template" id="tradeEditPopoverTemplate.html"> <form role="form">\n        <div class="form-group">\n            <label for="tradeInputExpireDate">{{\'ui.sales.cols.expireTime\' | translate }}</label>\n            <input type="text" class="form-control" id="tradeInputExpireDate" ng-model="trade.expire_date_new">\n        </div>\n        <div class="form-group">\n            <label for="tradeInputConcurrent">{{\'ui.sales.cols.concurrency\' | translate }}</label>\n            <input type="number" uib-tooltip="{{\'ui.sales.concurrencyTips\' | translate}}" tooltip-append-to-body="true" tooltip-placement="right" class="form-control" id="tradeInputConcurrent" ng-model="trade.concurrent_new">\n        </div>\n        <div class="form-group" align="right">\n            <button class="btn btn-primary btn-sm" ng-disabled="trade.pending" ng-click="saveTrade(trade)"><i class="glyphicon glyphicon-ok"></i></button>\n            <button class="btn btn-default btn-sm" ng-click="trade.isOpen=false"><i class="glyphicon glyphicon-remove"></i></button>\n        </div>\n    </form> <\/script> ')}]),angular.module("views/m/share.html",[]).run(["$templateCache",function(a){a.put("views/m/share.html",'<div class="row" ng-loading> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-shopping-cart"></span>&nbsp;&nbsp;{{\'ui.share.internalShare\'|translate}}</div> <div class="panel-body"> <div class="row" style="margin-top:30px;margin-bottom:20px"> <div class="col-md-6 col-md-offset-2"> <div class="input-group"> <div class="input-group-addon">{{\'ui.dialog.genShare.key\'|translate}}</div> <input type="text" ng-model="regCode" placeholder="{{\'ui.dialog.genShare.key\'|translate}}" class="form-control"> </div> </div> <div class="col-md-2"> <button class="btn btn-success" ng-click="buyStrategy()" ng-disabled="isPending || regCode.length == 0">{{\'ui.const.share\'|translate}}</button> </div> </div> <div class="alert alert-info"> {{\'ui.share.internalShareTips\'|translate}} </div> </div> </div> </div> ')}]),angular.module("views/m/stats.html",[]).run(["$templateCache",function(a){
a.put("views/m/stats.html",'<div ng-loading> <ul class="nav nav-tabs"> <li role="presentation" class="active"> <a ng-href="#Info" role="tab" data-toggle="tab">Stats</a> </li> <li role="presentation" class="inactive"> <a ng-href="#Analytics" role="tab" data-toggle="tab">Analytics</a> </li> <li role="presentation" class="inactive"> <a ng-href="#Docker" role="tab" data-toggle="tab">Docker&nbsp;<span class="badge pull-right">{{Docker.length}}</span></a> </li> <li role="presentation" class="inactive"> <a ng-href="#Cluster" role="tab" data-toggle="tab">Cluster&nbsp;<span class="badge pull-right">{{Cluster.length}}</span></a> </li> <li role="presentation" class="inactive"> <a ng-href="#Websocket" role="tab" data-toggle="tab">Websocket&nbsp;<span class="badge pull-right">{{Websocket.length}}</span></a> </li> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in active" id="Info"> <div class="row"> <div class="col-md-6"> <table class="table table-bordered"> <caption>Server Info</caption> <tbody> <tr><th style="width:25%">Started<td ng-bind="s.StartedStr"></tr> <tr><th>Uptime<td ng-bind="uptime"></tr> <tr><th>Now<td ng-bind="s.NowStr"></tr> <tr><th>Goroutines<td ng-bind="s.NumGoroutine"></tr> <tr><th>GC Elapsed<td>{{(s.Mem.PauseTotalNs*100/(s.Now-s.Started)).toFixed(5)}} %</tr> <tr><th>Stop Chan<td>{{s.StopTask}}</tr> <tr><td colspan="2"><div id="gcChart" style="width:100%;height:225px"></div></tr> </tbody> </table> </div> <div class="col-md-6"> <table class="table table-bordered"> <caption>Connections</caption> <tbody> <tr><th style="width:25%">Websocket</th> <td ng-bind="s.WebSocket"></tr> <tr><th>Docker<td ng-bind="s.Docker"></tr> <tr><th>Pending<td ng-bind="s.Pending"></tr> <tr><th>ErrWeb<td ng-bind="s.ErrWeb"></tr> <tr><th>ErrRpc<td ng-bind="s.ErrRpc"></tr> </tbody> </table> <table class="table table-bordered"> <caption>GC</caption> <tbody> <tr><th style="width:25%">GCSys<td ng-bind="s.Mem.GCSys | bytes"></tr> <tr><th>NextGC<td ng-bind="s.Mem.NextGC | bytes"></tr> <tr><th>LastGC<td>{{((s.Now - s.Mem.LastGC)/1000000000).toFixed(4)}} s</tr> <tr><th>PauseTotalNs<td>{{s.Mem.PauseTotalNs/1000000000 | precision: 3}} s</tr> <tr><th>PauseNs<td>{{(s.Mem.PauseNs[(s.Mem.NumGC+255)%256]/1000000000).toFixed(4)}} s</tr> <tr><th>NumGC<td ng-bind="s.Mem.NumGC"></tr> </tbody> </table> </div> </div> <div class="row"> <div class="col-md-6"> <table class="table table-bordered"> <caption>Alloc</caption> <tbody> <tr><th style="width:25%">Alloc<td ng-bind="s.Mem.Alloc | bytes"></tr> <tr><th>TotalAlloc<td ng-bind="s.Mem.TotalAlloc | bytes"></td> </tr> <tr><th>Sys<td ng-bind="s.Mem.Sys | bytes"></tr> <tr><th>OtherSys<td ng-bind="s.Mem.OtherSys | bytes"></tr> <tr><th>Mallocs<td ng-bind="s.Mem.Mallocs"></tr> <tr><th>Frees<td ng-bind="s.Mem.Frees"></tr> </tbody> </table> <table class="table table-bordered"> <caption>Heap</caption> <tbody> <tr><th style="width:25%">HeapAlloc<td ng-bind="s.Mem.HeapAlloc | bytes"></tr> <tr><th>HeapSys<td ng-bind="s.Mem.HeapSys | bytes"></tr> <tr><th>HeapIdle<td ng-bind="s.Mem.HeapIdle | bytes"></tr> <tr><th>HeapInuse<td ng-bind="s.Mem.HeapInuse | bytes"></tr> <tr><th>HeapReleased<td ng-bind="s.Mem.HeapReleased | bytes"></tr> <tr><th>HeapObjects<td ng-bind="s.Mem.HeapObjects"></tr> </tbody> </table> </div> <div class="col-md-6"> <table class="table table-bordered"> <caption>Stack, Cache</caption> <tbody> <tr><th style="width:25%">StackInuse<td ng-bind="s.Mem.StackInuse | bytes"></tr> <tr><th>StackSys<td ng-bind="s.Mem.StackSys | bytes"></tr> <tr><th>MSpanInuse<td ng-bind="s.Mem.MSpanInuse | bytes"></tr> <tr><th>MSpanSys<td ng-bind="s.Mem.MSpanSys | bytes"></tr> <tr><th>MCacheInuse<td ng-bind="s.Mem.MCacheInuse | bytes"></tr> <tr><th>MCacheSys<td ng-bind="s.Mem.MCacheSys | bytes"></tr> <tr><th>BuckHashSys<td ng-bind="s.Mem.BuckHashSys | bytes"></tr> </tbody> </table> </div> </div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="Analytics"> <div class="pull-right"> <select ng-model="gaDays" ng-change="changeGADays()" ng-options="x.name for x in ranges"> </select> <button class="btn btn-success btn-xs" ng-click="reload(16)" ng-disabled="pending" style="margin-bottom:5px"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ pending ? \'刷新中...|Loading\' : \'刷新|Refresh\' | trans}}</button> </div> <div id="gaChart" style="width:100%;height:500px"></div> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="Docker"> <div class="pull-right"> <button class="btn btn-success btn-xs" ng-click="reload(2)" ng-disabled="pending" style="margin-bottom:5px"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ pending ? \'刷新中...|Loading\' : \'刷新|Refresh\' | trans}}</button> </div> <p ng-if="repeatNid" class="alert alert-danger" style="clear:both">Docker {{ repeatNid }} 有多余的连接 !</p> <table class="table table-bordered col-sm-12"> <tr><th>Time<th>Peer<th>Uid<th>Nid<th>Ver<th>Loaded<th>isLogin<th>isLogout<th>isRemoved<th>lastPing<th>Tick</tr> <tr ng-repeat="item in Docker | orderBy: \'-3\'"> <td>{{ item[0] }}</td> <td uib-tooltip="{{item[2]}}">{{ item[1] }}<span ng-if="item[item.length-2]!=item[1]" class="pull-right glyphicon glyphicon-flash"></span></td> <td>{{ item[3] }}</td> <td>{{ item[4] }}</td> \x3c!--<td>{{ item[5] }}</td>--\x3e <td>{{ item[6] }}</td> <td>{{ item[7] }}</td> <td>{{ item[8] }}</td> <td>{{ item[9] }}</td> <td>{{ item[11]}}</td> <td>{{ item[12]}}</td> <td>{{ item[17]}}</td> </tr> </table> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="Cluster"> <div class="pull-right"> <button class="btn btn-success btn-xs" ng-click="reload(8)" ng-disabled="pending" style="margin-bottom:5px"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ pending ? \'刷新中...|Loading\' : \'刷新|Refresh\' | trans}}</button> </div> <table class="table table-bordered col-sm-12"> <tr><th>Time<th>Peer<th>Loaded<th>lastPing<th>GUID<th>NumCPU<th>Priority</tr> <tr ng-repeat="item in Cluster | orderBy: \'1\'"> <td>{{ item[0] }}</td> <td uib-tooltip="{{item[2]}}">{{ item[1] }}<span ng-if="item[2].indexOf(\'10.\')==0" class="pull-right glyphicon glyphicon-flash"></span></td> <td>{{ item[7] }}</td> <td>{{ item[12]}}</td> <td>{{ item[13]}}</td> <td>{{ item[14]}}</td> <td><a style="text-decoration: none; border-bottom: dashed 1px #0088cc;" href popover-is-open="item.isOpen" popover-trigger="outsideClick" uib-popover-template="\'clusterEditPopoverTemplate.html\'" popover-title="更改" popover-placement="bottom" popover-append-to-body="true">{{ item[15]}}</a></td> </tr> </table> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="Websocket"> <div class="pull-right"> <button class="btn btn-success btn-xs" ng-click="reload(4)" ng-disabled="pending" style="margin-bottom:5px"><i class="glyphicon glyphicon-refresh"></i>&nbsp;{{ pending ? \'刷新中...|Loading\' : \'刷新|Refresh\' | trans}}</button> </div> <table class="table table-bordered col-sm-12"> <tr><th>Time<th>Peer<th>Uid<th>IStatus<th>OStatus<th>Pending<th>subscribeId<th>btUUID<th>clusterGUID<th>UserAgent</tr> <tr ng-repeat="item in Websocket | orderBy: \'2\'"> <td>{{ item[0] }}</td> <td>{{ item[1] }}</td> <td>{{ item[2] }}</td> <td>{{ item[3] }}</td> <td>{{ item[4] }}</td> <td>{{ item[5] }}</td> <td>{{ item[6] }}</td> <td uib-tooltip="{{item[7]}}">{{ item[7] | cut : 15}}</td> <td uib-tooltip="{{item[8]}}">{{ item[8] | cut : 15}}</td> <td><div uib-tooltip="{{item[9]}}">{{ item[9] | cut : 10}}</div></td> </tr> </table> </div> </div> </div> <script type="text/ng-template" id="clusterEditPopoverTemplate.html"> <form role="form">\n        <div class="form-group">\n            <label>优先级</label>\n            <input type="number" uib-tooltip="只使用优先级最高的节点" tooltip-append-to-body="true" tooltip-placement="right" class="form-control" id="clusterInputConcurrent" ng-model="item.priority">\n        </div>\n        <div class="form-group" align="right">\n            <button class="btn btn-primary btn-sm" ng-disabled="item.pending" ng-click="savePriority(item)"><i class="glyphicon glyphicon-ok"></i></button>\n            <button class="btn btn-default btn-sm" ng-click="item.isOpen=false"><i class="glyphicon glyphicon-remove"></i></button>\n        </div>\n    </form> <\/script> ')}]),angular.module("views/m/strategies.html",[]).run(["$templateCache",function(a){a.put("views/m/strategies.html",'<div class="row" ng-loading> <div id="section-strategies" class="panel panel-default" ng-init="searchKeyword=\'\'"> <div class="panel-body"> <div> <a href="m/add-strategy" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.new\'|translate}}</a> <a ng-if="canPublic" style="margin-left:8px" href="square" class="label label-danger outline"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.gosquare\'|translate}}</a> <a style="margin-left:8px" ng-if="buyCount > 0" href="m/sales" class="label label-warning outline"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.nav.sales\'|translate}}&nbsp;( {{buyCount}} )</a> <a style="margin-left:8px" ng-if="!isOEM" href="m/tokens" class="label label-success outline"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.nav.tokens\'|translate}}</a> <span class="pull-right" ng-show="strategyCount > 0"> <span style="margin-right:10px" ng-if="searchKeyword" translate="ui.g.searchResult" translate-values="{keyword: searchKeyword}"></span> <div class="btn-group" dropdown> <button type="button" class="btn btn-xs btn-default dropdown-toggle" id="dropdownFilter" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{(filterCategory ? filterCategory.name : \'ui.strategy.type.all\')|translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> <li> <a href ng-click="switchCategory(null)">{{\'ui.strategy.type.all\' | translate }} <span class="glyphicon glyphicon-ok" style="margin-left:8px" ng-show="showCategory(null)"></span></a> </li> <li ng-repeat="m in categories" ng-show="!m.hide"> <a href ng-click="switchCategory(m)">{{m.name | translate }} <span class="glyphicon glyphicon-ok" style="margin-left:8px" ng-show="showCategory(m)"></span></a> </li> </ul> </div> <input ng-show="strategyCount > 5" ng-model="searchKeyword" placeholder="{{\'ui.placeholder.search\' | translate}}" class="searchbox"> <span class="badge"> {{ strategyCount }} </span> </span> </div> </div> </div> <div class="well well-sm" style="margin-top:10px;" ng-if="strategyCount == 0" translate="ui.dashboard.tips.strategy"></div> <div ng-show="strategyCount > 0"> <ul class="nav nav-tabs"> <li role="presentation" ng-dragdrop="{drop : onDropComplete, group: group}" ng-class="group.id == activeGroupId ? \'active\' : \'\'" ng-repeat="group in groups"> <a href ng-click="switchGroup(group)" role="tab" data-toggle="tab">{{ group.name | translate | trans}}<span style="margin-left:5px" class="badge">{{group.items.length}}</span></a> </li> <li role="presentation" class="pull-right"> <a href class="text-muted" ng-click="switchGroup(-3)" role="tab" data-toggle="tab"><i class="fa fa-clone"></i>&nbsp;{{\'ui.strategy.group.settings\'|translate}}</a> </li> </ul> <div class="tab-content" ng-repeat="group in groups"> <div role="tabpanel" ng-show="group.id == activeGroupId" class="tab-pane fade in active"> <div class="alert alert-warning" ng-if="group.items==0" style="margin-top:15px"> {{ \'ui.strategy.group.emptyTips\' | translate }} </div> <table class="table table-condensed table-hover" ng-show="group.items.length>0"> <thead> <tr> <th class="col-lg-7">{{\'ui.dashboard.tabs.strategy.name\'|translate}}&nbsp;<a ng-show="strategyCount>1" href="" ng-click="setSSortBy(\'name\')"><i ng-class="getSSortStyle(\'name\')"></i></a></th> <th class="col-lg-2 visible-lg"> <a href="" ng-click="setSSortBy(\'last_modified\')" style="color:#888;text-decoration:none;float:right">{{\'ui.dashboard.tabs.strategy.lastModified\'|translate}}&nbsp;<i ng-class="getSSortStyle(\'last_modified\')"></i></a> </th> <th class="col-lg-2 visible-lg">{{\'ui.dashboard.tabs.strategy.created\'|translate}}&nbsp;<a ng-show="strategyCount>1" href="" ng-click="setSSortBy(\'date\')"><i ng-class="getSSortStyle(\'date\')"></i></a></th> <th class="col-lg-1 col-xs-1" translate="ui.dashboard.tabs.strategy.action"></th> </tr> </thead> <tbody> <tr ng-repeat="item in group.items | filter:{name:searchKeyword, category: (filterCategory?filterCategory.id:undefined)} | orderBy:strategysortBy"> <td ng-dragdrop="{drag: item.is_owner, data: item.id}" ng-style="{\'border-left\': item.category==20 ? \'3px solid #ac7101\': \'3px solid #ffffff\'}"> <i class="icon-language iconfont icon-lang-{{[\'javascript\', \'python\', \'cpp\', \'blockly\', \'my\'][item.language]}}"></i> <a ng-if="item.is_owner" ng-href="m/edit-strategy/{{item.id}}">{{ item.name | trans }}</a> <a ng-if="!item.is_owner && (item.public == 2 || item.public == 3)" ng-href="strategy/{{item.id}}"><font style="font-weight:bold;color:#337ab7;">{{ item.name}}</font></a> <span ng-if="!item.is_owner && (item.public == 0 || item.public == 1)"><a ng-href="m/backtest-strategy/{{item.id}}"><font color="red">{{ item.name }}</font></a></span> <span ng-if="item.category==20" style="margin-left:8px" class="fa fa-share-alt text-danger" uib-tooltip="{{\'ui.dashboard.tabs.strategy.isTemplate\' | translate}}"></span> <span ng-if="item.public==4" style="margin-left:8px" class="fa fa-flag text-success" uib-tooltip="{{\'ui.dashboard.tabs.strategy.isSystem\' | translate}}"></span> <span ng-if="item.hasToken" style="margin-left:8px" class="fa fa-link text-success" uib-tooltip="{{\'ui.dashboard.tabs.strategy.enableSync\' | translate}}"></span> </td> <td class="visible-lg"> <span style="margin-left:5px" ng-if="item.is_owner && item.public == 1" class="label label-success outline noradius" translate="ui.dashboard.tabs.strategy.isPublic"></span> <span ng-if="item.is_owner && (item.public == 3 || item.buy_count)" class="label label-danger outline noradius">{{ \'ui.dashboard.tabs.strategy.isSold\' | translate }}{{ !item.buy_count ? \'\' : (\'&nbsp;\' + item.buy_count)}}</span> <span ng-if="item.is_owner && item.public == 2" class="label label-warning outline noradius" translate="ui.dashboard.tabs.strategy.statusReview"></span> <span ng-if="!item.is_owner && item.is_deleted" class="label label-danger outline noradius">{{ \'ui.dashboard.tabs.strategy.isDeleted\' | translate }}</span> <div class="pull-right" style="margin-left:5px;font-style:italic;font-size:11px;color:#cccccc;"> {{ ((item.is_owner || item.is_expire) ? \'\' : \'ui.sales.cols.expireTime\') | translate }} {{ (item.is_owner ? item.last_modified_ago : (item.is_expire ? \'ui.dashboard.alreadyExpired\' : item.expire_date)) | translate }} </div> </td> <td class="visible-lg">{{ item.date }}</td> <td> <div class="btn-group"> <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> {{ item.is_owner ? [\'ui.dashboard.tabs.strategy.status.action\', \'ui.dashboard.tabs.strategy.status.public\', \'ui.dashboard.tabs.strategy.status.review\', \'ui.dashboard.tabs.strategy.status.sold\', \'ui.dashboard.tabs.strategy.status.system\'][item.public] : (item.is_expire ? \'ui.dashboard.tabs.strategy.status.expired\' : \'ui.dashboard.tabs.strategy.status.buy\') | translate }}&nbsp;<span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a ng-if="item.is_owner" href="m/edit-strategy/{{item.id}}"><i class="glyphicon glyphicon-pencil"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.edit\'|translate}}</a></li> <li><a ng-if="!item.is_owner" href="m/backtest-strategy/{{item.id}}"><i class="glyphicon glyphicon-adjust"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.backtest\'|translate}}</a></li> <li><a ng-if="item.is_owner" href="m/copy-strategy/{{item.id}}"><i class="glyphicon glyphicon-share-alt"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.copy\'|translate}}</a></li> <li><a href ng-click="deleteStrategy(group, item)"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.delete\'|translate}}</a></li> <li class="divider" ng-if="(item.need_rebuy || item.public == 0 || (item.is_owner && (item.public != 0 || item.public == 3)))"></li> <li ng-if="item.need_rebuy"><a href="" ng-click="rebuyStrategy(item)"><i class="glyphicon glyphicon-yen"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.rebuy\'|translate}}</a></li> <li><a href ng-if="item.is_owner && item.public == 0" ng-click="shareStrategy(item, 1)"><i class="glyphicon glyphicon-share-alt"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.public\'|translate}}</a></li> <li><a href ng-if="item.is_owner && item.public == 0" ng-click="shareStrategy(item, 2)"><i class="glyphicon glyphicon-yen"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.sale\'|translate}}</a></li> <li><a href ng-if="item.is_owner && item.public != 0" ng-click="shareStrategy(item, 0)"><i class="glyphicon glyphicon-eye-close"></i>&nbsp;{{\'ui.dashboard.tabs.strategy.btn.cancel\'|translate}}</a></li> <li><a href ng-if="item.is_owner && item.public == 3" popover-trigger="mouseenter" uib-tooltip="{{\'ui.dashboard.tabs.strategy.tipsMakeKey\' | translate }}" ng-click="createKey(item, 1)"><i class="glyphicon glyphicon-dashboard"></i>&nbsp;{{"ui.dashboard.tabs.strategy.btn.makeKey"|translate}}</a></li> <li class="divider"></li> <li><a ng-href="m/add-robot/{{item.id}}"><i class="glyphicon glyphicon-flash"></i>&nbsp;{{"ui.dashboard.tabs.strategy.btn.run"|translate}}</a></li> </ul> </div> </td> </tr> </tbody> </table> </div> </div> <div role="tabpanel" ng-show="activeGroupId==-3" class="tab-pane fade in active"> <div class="row"> <div style="margin-top:30px" ng-sortable="{onUpdate: onSortUpdate, pull: false, handle: \'.num-box\', scroll:true, animation: 200}"> <div ng-repeat="group in groups" ng-show="group.id>0" ng-mouseenter="group.focus=true" ng-mouseleave="group.focus=false" class="col-md-2"> <div class="num-box" style="cursor:move"> <div class="num-box-val"> <span class="glyphicon glyphicon-move" aria-hidden="true"> </span></div> <div class="num-box-label"> {{ group.name | translate }} </div> <div ng-show="group.focus"> <a href class="num-box-action-left" ng-click="saveGroup(group)">{{\'ui.strategy.group.change\'|translate}}</a> <a href class="num-box-action-right" ng-click="delGroup(group)">{{\'ui.strategy.group.del\'|translate}}</a> </div> </div> </div> </div> <div class="col-md-2"> <a href style="color:white" ng-click="saveGroup()"> <div class="num-box" style="border:2px dashed #666666"> <div class="num-box-val"> <span class="glyphicon glyphicon-plus"> </span></div> <div class="num-box-label"> {{\'ui.strategy.group.add\'|translate}} </div> </div> </a> </div> </div> <div class="row" ng-show="sortChanged"> <div class="col-md-12"> <button ng-disabled="isPending" ng-click="applyGroupSort()" class="btn btn-success"><i class="glyphicon glyphicon-ok"></i>&nbsp;{{\'ui.strategy.group.applySortOrder\'|translate}}</button> </div> </div> </div> </div> </div> ')}]),angular.module("views/m/ticket-topic.html",[]).run(["$templateCache",function(a){a.put("views/m/ticket-topic.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li><a href="m/tickets" translate="ui.nav.ticket"></a></li> <li class="active">{{ topic.title}}</li> </ol> <div class="row console-step" style="margin-bottom:15px"> <div ng-repeat="step in steps" class="col-md-3 step" ng-class="{\'step-first\': $first, \'step-end\': $last, \'step-active\': topic.status==$index, \'step-pass\': $index>topic.status}"> {{ (($index!=3&&$index==topic.status||($index==3&&topic.status!=3)) ? step[0] : step[1]) | translate }} <span ng-if="$index==topic.status&&topic.status!=3" class="glyphicon glyphicon-time" style="margin-left:5px"></span> </div> </div> <div class="panel panel-default"> <div class="panel-body"> <editor ng-model="reply_content" height="220px"></editor> <div> <button class="btn btn-primary" ng-click="reply()">{{\'ui.ticket.reply\' | translate}}</button> <div class="pull-right"> <button ng-if="topic.status!=3" class="btn btn-danger" ng-click="close()">{{\'ui.ticket.closeTicket\' | translate}}</button> <button ng-if="!topic.is_deleted" class="btn btn-warning" ng-click="close(true)">{{\'ui.ticket.deleteTicket\' | translate}}</button> </div> </div> </div> </div> <div class="alert alert-warning" ng-if="topic.status==3"> {{ \'ui.ticket.alertClosed\' | translate }} </div> <div class="panel panel-default" ng-repeat="item in replys" ng-style="{\'border\':(item.is_admin ? \'1px dashed #888888\' : \'1px soild #dddddd\')}"> <div class="panel-body"> <table width="100%"> <tr> <td width="60px"><i ng-class="item.is_admin ? \'fa fa-user-secret\' : \'fa fa-user-circle-o\'" ng-style="{\'color\':(item.is_admin ? \'#676767\' : \'#bec9ce\'), \'font-size\':\'3em\'}"></i></td> <td> <p ng-style="{\'font-size\':\'15px\', \'color\':item.system?\'red\':(item.is_admin ? \'black\' : \'#888888\')}" ng-bind-html="item.content | markdown"></p> <br> <div> <span class="label label-success">{{ item.category_name | trans}}</span> <div class="pull-right"> <em class="pull-right">{{ item.created }} </em></div> </div> </td> </tr> </table> </div> </div> </div> ')}]),angular.module("views/m/tickets.html",[]).run(["$templateCache",function(a){a.put("views/m/tickets.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a ng-href="m/dashboard" translate="ui.nav.dashboard"></a></li> <li class="active">{{ \'ui.nav.ticket\' | translate}}</li> </ol> <div> <a href="m/add-ticket" class="label label-primary outline"> <span class="fa fa-plus"></span>&nbsp;{{ \'ui.nav.addTicket\' | translate }} </a> <div class="pull-right"> <form ng-show="isAdmin()"> <select style="margin-right:5px" ng-change="go(1)" ng-options="(item.name | translate) for item in stOptions" ng-model="st"> </select> <input type="search" ng-model="skw" translate-attr="{ placeholder: \'ui.placeholder.search\'}" class="searchbox"> <button ng-disabled="skw==keyword" ng-disabled="pending" class="btn btn-info btn-xs outline" ng-click="go(1, skw)"><i class="glyphicon glyphicon-search"></i></button> <button class="btn btn-warning btn-xs outline" ng-disabled="pending" ng-click="go(1)"><i class="glyphicon glyphicon-refresh"></i></button> </form> </div> </div> <div style="clear:both;margin-bottom:5px"></div> <div ng-show="items.length>0"> <div class="panel panel-default"> <div class="panel-heading"> <a ng-href="m/tickets" class="label label-default outline" translate="ui.nav.ticket"></a> <span ng-if="keyword" translate="ui.g.searchResult" translate-values="{keyword: keyword}"></span><span class="badge pull-right" style="background-color:#aab0c6">{{ items_count }}</span> </div> <div class="panel-body"> <table class="table"> <tr ng-repeat="topic in items" style="margin-bottom:10px"> <td width="20" valign="top" align="center"> <div ng-style="{\'color\':(topic.is_new ? \'#576057\' : \'#677067\'),\'font-size\':\'33px\',\'line-height\':\'38px\',\'font-weight\':\'bold\',\'border\':\'1px solid #\'+(topic.is_new > 0 ? \'d9534f\' : \'778077\'),\'padding\':\'2px\',\'width\':\'45px\',\'height\':\'45px\'}">{{topic.title | letter}}</div> </td> <td> <div><a href="m/ticket-topic/{{ topic.id }}" ng-style="{\'font-size\':\'16px\',\'color\':\'#576057\',\'font-weight\': (topic.top>0?\'bold\':\'normal\')}">{{ topic.title | trans }}</a></div> <div style="margin-top:5px;font-size:11px;color:#cccccc;"> <em>{{ topic.category_name | trans}}</em><span ng-if="!topic.is_owner">&nbsp;•&nbsp;<em>{{ topic.author }}</em></span>&nbsp;•&nbsp;{{topic.created | ago}} </div> </td> <td width="150"> <div> &nbsp; </div> <div class="pull-right"> <a ng-if="topic.status!=3" href="m/ticket-topic/{{ topic.id }}" style="margin-right:5px"><i class="fa fa-commenting-o"></i></a> <span ng-class="\'label label-\' + [\'danger\', \'warning\', \'primary\', \'success\'][topic.status] + \' outline\'">{{ [\'ui.ticket.status.open\', \'ui.ticket.status.processing\', \'ui.ticket.status.feedback\', \'ui.ticket.status.closed\'][topic.status] | translate}}</span> </div> </td> </tr> </table> </div> </div> </div> <div class="alert alert-success" ng-show="items.length==0" style="margin-top:8px"> <span ng-if="!keyword"> {{\'ui.ticket.topicEmpty\'|translate}} </span> <span ng-if="keyword" translate="ui.g.searchEmpty" translate-values="{keyword: keyword}"></span> </div> <div> <nav> <ul class="pagination" ng-if="pages.length>1"> <li ng-repeat="page in pages" ng-class="page.cls + (loading ? \' disabled\' : \'\')"><a href ng-click="go(page.id)">{{page.name | translate}}</a></li> </ul> </nav> </div> <div style="margin-bottom:50px"></div> </div> ')}]),angular.module("views/m/tokens.html",[]).run(["$templateCache",function(a){a.put("views/m/tokens.html",'<div ng-loading> <div class="panel panel-default"> <div class="panel-heading"><a ng-href="m/dashboard" class="label label-default" translate="ui.nav.dashboard"></a>&nbsp;››&nbsp;<b translate="ui.nav.tokens"></b><span class="badge pull-right" style="background-color:#aab0c6">{{ tokens.length }}</span></div> <div class="panel-body"> <div class="alert alert-danger" ng-show="tokens.length == 0"> {{ \'ui.tokens.empty\' | translate}} &nbsp;<a href="m/dashboard" class="label label-danger" translate="ui.nav.dashboard"></a> </div> <table class="table" ng-show="tokens.length > 0"> <thead> <tr> <th class="text-muted" width="20">#&nbsp;<a href ng-click="setSortBy(\'idx\')"><i ng-class="getSortStyle(\'idx\')"></i></a></th> <th>{{\'ui.sales.cols.tokenType\' | translate }}&nbsp;<a href ng-click="setSortBy(\'key_type\')"><i ng-class="getSortStyle(\'key_type\')"></i></a></th> <th>{{\'ui.sales.cols.key\' | translate }}&nbsp;<a href ng-click="setSortBy(\'key_sn\')"><i ng-class="getSortStyle(\'key_sn\')"></i></a></th> <th>{{\'ui.sales.cols.strategy\' | translate }}&nbsp;<a href ng-click="setSortBy(\'strategy_name\')"><i ng-class="getSortStyle(\'strategy_name\')"></i></a></th> <th width="58">{{\'ui.sales.cols.concurrency\' | translate }}</th> <th width="100">{{\'ui.sales.cols.used\' | translate }}</th> <th width="160">{{\'ui.sales.cols.expireTime\' | translate }}&nbsp;<a href ng-click="setSortBy(\'expire_date\')"><i ng-class="getSortStyle(\'expire_date\')"></i></a></th> <th width="160">{{\'ui.sales.cols.createdTime\' | translate }}&nbsp;<a href ng-click="setSortBy(\'date\')"><i ng-class="getSortStyle(\'date\')"></i></a></th> </tr> </thead> <tbody> <tr ng-repeat="ele in tokens | orderBy:sortBy"> <td class="text-muted">{{ele.idx}}</td> <td><span ng-class="[\'label label-default\', \'label label-success\', \'label label-warning\'][ele.key_type]">{{[\'ui.const.token.typeCopy\', \'ui.const.token.typeRent\', \'ui.const.token.typeApp\'][ele.key_type] | translate}}</span></td> <td style="font-family: Monaco,fixedsys;"> {{ele.key_sn}} </td> <td> <a target="_blank" ng-if="ele.key_type!=2" ng-href="{{[\'m/t/\', \'m/s/\'][ele.key_type]}}{{ele.strategy_id}}">{{ele.strategy_name}}</a> <a href ng-if="ele.key_type==2" popover-trigger="click" uib-popover-template="\'appPopoverTemplate.html\'">{{ele.strategy_name}}</a> <span ng-if="ele.is_expire" class="pull-right label label-danger" translate="ui.sales.alreadyExpired"> </span></td> <td>{{ele.concurrent>0 ? ele.concurrent : \'--\'}}</td> <td><div ng-if="ele.key_type==2"> <a href popover-trigger="click" uib-popover-template="\'appPopoverTemplate.html\'">{{\'ui.dialog.genKey.downDesc\'|translate}}</a> </div><div ng-if="ele.key_type!=2">{{ele.used>0 ? ele.used : \'--\'}}</div></td> <td>{{ele.expire_date}}</td> <td>{{ele.date}}</td> </tr> </tbody> </table> </div> </div> </div> <script type="text/ng-template" id="appPopoverTemplate.html"> <div>\n    <table>\n    <tr><td width=70><b>Windows</b></td><td><a target="_blank" ng-href="{{docker.base}}/fmz.7z">fmz.7z</a></td></tr>\n    <tr><td width=70><b>Mac</b></td><td><a target="_blank" ng-href="{{docker.base}}/fmz.dmg">fmz.dmg</a></td></tr>\n    </table>\n    </div> <\/script> ')}]),angular.module("views/m/trade.html",[]).run(["$templateCache",function(a){
a.put("views/m/trade.html",'<div class="row" ng-loading> <div style="position:relative;width:100%"> <div style="position:absolute;left:0;top:200px;z-index:100;right:0"> <div style="text-align:center"> <img src="images/loading.gif" ng-if="pending"> </div> </div> </div> <div class="alert alert-danger outline" ng-show="nodes.length==0 && platforms.length==0"> <span ng-show="platforms.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noPlatform\' | translate}}</b> &nbsp;<a href="m/add-platform" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.platform.new\'|translate}}</a> </span> <span ng-show="nodes.length==0" style="margin-right:30px"> <b>{{\'ui.alert.noDocker\' | translate}}</b> &nbsp;<a href="m/nodes" class="label label-primary outline"><i class="glyphicon glyphicon-plus"></i>&nbsp;{{\'ui.dashboard.tabs.docker.new\' | translate}}</a> </span> </div> <div> <div class="pure-g" ng-show="ready"> <div class="pure-u-8-24 trade-widget"> <select ng-model="option.node_selected_id" class="form-control" ng-change="changeNode()"> <option value="-1" style="display:none">--- {{\'ui.alert.noDocker\' | translate}} ---</option> <option ng-repeat="node in nodes | filter:{ is_owner: true } | orderBy:\'id\'" value="{{node.id}}">{{ node.desc }}</option> </select> </div> <div class="pure-u-4-24 trade-widget"> <ui-select ng-model="option.platform" on-select="switchPlatform($item, $model)"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected.label}}</ui-select-match> <ui-select-choices group-by="\'group\'" repeat="m in platforms | filter: $select.search track by m.label"> <div ng-bind-html="m.label | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> </div> <div class="pure-u-3-24 trade-widget"> <ui-select ng-show="!option.platform.custom" ng-model="option.stock" on-select="switchSymbol($item, $model)"> <ui-select-match placeholder="{{\'ui.placeholder.search\'|translate}} ...">{{$select.selected}}</ui-select-match> <ui-select-choices repeat="m in option.platform.stocks | filter: $select.search track by m"> <div ng-bind-html="m | highlight: $select.search | translate"></div> </ui-select-choices> </ui-select> <input ng-show="option.platform.custom" type="text" class="form-control" ng-model="option.stock"> </div> <div class="pure-u-2-24 trade-widget"> <div ng-show="option.platform.eid!=\'Futures_LTS\'" style="padding:2px"> <switch ng-model="option.platform.custom" off="{{\'ui.tips.customSymbolSwitch\'|translate}}" uib-tooltip="{{\'ui.tips.customSymbol\'|translate}}" tooltip-append-to-body="true"></switch> </div> </div> <div class="pure-u-7-24 trade-widget"> <div class="row"> <div class="col-md-12"> <span style="line-height:34px"> <span class="text-muted" ng-show="isFastSync"> {{\'ui.trade.fastSync\'|translate}} </span> <span ng-show="!isFastSync"> <span class="text-muted">{{\'ui.trade.autoRefresh\'|translate}} ({{autoSync ? 5-timerCount%5 : 5}}s)&nbsp;<input ng-disabled="nodes.length==0||!ready" type="checkbox" ng-model="autoSync" style="margin-right:10px"></span> </span> </span> <div class="pull-right"> <button class="btn btn-default outline invisiable"> <i class="glyphicon glyphicon-star-empty"></i> </button> <div class="btn-group"> <button class="btn btn-default outline" ng-disabled="pending" ng-click="refresh()"><i ng-class="pending ? \'fa fa-spinner fa-spin\' : \'glyphicon glyphicon-refresh\'"></i>&nbsp;{{\'ui.trade.refresh\' | translate }}</button> <button type="button" ng-disabled="pending" class="btn btn-default outline dropdown-toggle" data-toggle="dropdown"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" role="menu"> <li><a href ng-click="resetDebug()"><i class="glyphicon glyphicon-remove-sign"></i>&nbsp;{{\'ui.trade.restartDebug\'|translate}}</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class="pure-g"> <div id="trade_chart" class="pure-u-17-24 trade-widget split"> <div> <div class="trade_chart" id="ohlc_chart"> <div align="center" style="padding-top:130px"> <i style="font-size:80pt;color:#cccccc" class="fa fa-bar-chart"></i> </div> </div> </div> </div> <div id="trade_depth" class="pure-u-7-24 trade-widget split"> <div class="panel panel-default"> <div class="panel-heading" style="padding:8px"> <span ng-if="ticker"> <span>Last:&nbsp;<font color="#df553a"><b>{{ticker.Last | precision: 8}}</b></font></span> <span class="pull-right text-muted"> {{ ticker.Time | tfmt:\'HH:mm:ss\'}} </span> </span> </div> <div style="min-height:63px;max-height:350px;overflow-x:hidden;overflow-y:auto"> <table class="table table-mini"> <thead> <tr> <th style="width:4%;text-align:right"><span class="text-muted">#</span></th> <th style="width:25%;color:#666;text-align:right">Amount</th> <th style="width:21%;color:#70a800;text-align:right">Bid</th> <th style="width:4%">&nbsp;</th> <th style="width:21%;color:#ea0070;text-align:left">Ask</th> <th style="width:25%;color:#666;text-align:left">Amount</th> </tr> </thead> <tbody> <tr ng-repeat="idx in loopCounter(depthMax)"> <td align="right"><span style="color:#afafaf">{{$index+1}}</span></td> <td ng-style="getStyle(\'Bids\', \'Amount\', $index)" align="right" ng-click="setInput(\'Bids\', \'Amount\', $index)">{{ depth.Bids.length > $index ? (depth.Bids[$index].Amount | precision: 6) : \'\' }}</td> <td ng-style="getStyle(\'Bids\', \'Price\', $index)" align="right" ng-click="setInput(\'Bids\', \'Price\', $index)">{{ depth.Bids.length > $index ? (depth.Bids[$index].Price | precision: 8): \'\' }}</td> <td></td> <td ng-style="getStyle(\'Asks\', \'Price\', $index)" align="left" ng-click="setInput(\'Asks\', \'Price\', $index)">{{ depth.Asks.length > $index ? (depth.Asks[$index].Price | precision: 8) : \'\' }}</td> <td ng-style="getStyle(\'Asks\', \'Amount\', $index)" align="left" ng-click="setInput(\'Asks\', \'Amount\', $index)">{{ depth.Asks.length > $index ? (depth.Asks[$index].Amount | precision: 6): \'\' }}</td> </tr> </tbody> </table> </div> <div id="depth_chart" style="height:70px;width:100%"> </div> </div> <div style="margin-bottom:10px;margin-top:5px" ng-if="isCTP && ticker&&ticker.Info&&(ticker.Info.OpenInterest||ticker.Info.Contract)"> <button ng-disabled="pending" class="btn btn-success outline" ng-click="showInfo(ticker.Info)"> {{ticker.Info.Contract ? (ct.Name || (ct.CommodityName + " " + ticker.Info.Contract.ContractNo1)) : (ct.InstrumentID || ticker.Info.InstrumentID)}} </button> <div class="row" style="margin-top:12px"> <div class="col-md-6"> <div class="num-box-ctp"> <div class="num-box-val">{{ticker.Info.OpenInterest || ticker.Info.QPositionQty}}</div> <div class="num-box-label">{{\'ui.trade.openInterest\'|translate}}</div> </div> </div> <div class="col-md-6"> <div class="num-box-ctp"> <div class="num-box-val">{{(ticker.Last - (ticker.Info.PreSettlementPrice || ticker.Info.QPreSettlePrice)) | precision:2}}</div> <div class="num-box-label">涨跌</div> </div> </div> <div class="col-md-6"> <div class="num-box-ctp"> <div class="num-box-val">{{ticker.Volume | precision:0}}</div> <div class="num-box-label">总手</div> </div> </div> <div class="col-md-6"> <div class="num-box-ctp"> <div class="num-box-val">{{(preTicker ? (ticker.Volume-preTicker.Volume) : 0) | precision:0}}</div> <div class="num-box-label">现手</div> </div> </div> </div> </div> </div> </div> <div class="pure-g"> <div id="trade_private" class="pure-u-11-24 trade-widget split"> <ul class="nav nav-tabs" id="privateTabs"> <li role="presentation" class="inactive"> <a ng-href="#tab_0" role="tab" data-toggle="tab">{{\'ui.trade.orders\'|translate}}&nbsp;<span class="badge pull-right">{{ pending_orders.length }}</span></a> </li> <li role="presentation" class="inactive"> <a ng-href="#tab_1" role="tab" data-toggle="tab" ng-show="isFutures">{{\'ui.trade.positions\'|translate}}&nbsp;<span class="badge pull-right">{{ positions.length }}</span></a> </li> <li role="presentation" class="active"> <a ng-href="#tab_2" role="tab" data-toggle="tab">{{\'ui.trade.assets\'|translate}}</a> </li> <div class="pull-right"> <button ng-show="ct && isCTP" ng-disabled="pending" class="btn btn-xs btn-default outline" ng-click="showInfo(ct)">{{\'ui.trade.symbolInfo\'|translate}}</button> <button ng-disabled="pending || !assets.Info" class="btn btn-xs btn-default outline" ng-click="showInfo(assets.Info)">{{\'ui.trade.accountInfo\'|translate}}</button> <button uib-tooltip="{{\'ui.trade.refreshPrivate\'|translate}}" ng-disabled="pending" class="btn btn-xs btn-default outline" ng-click="refresh(\'\', false)"><i ng-class="pending ? \'fa fa-spinner fa-spin\' : \'glyphicon glyphicon-refresh\'"></i></button> </div> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in inactive" id="tab_0"> <div ng-if="pending_orders.length==0"> <div ng-show="pending"> <div align="center">Loading...</div> </div> <div ng-show="!pending"> <div class="alert alert-success" ng-if="!error_orders">Empty</div> <div class="alert alert-danger" ng-if="error_orders"> {{ error_orders | translate }} <button style="margin-left: 10px" ng-disabled="pending" ng-click="update(\'orders\')" class="btn btn-default btn-xs outline">{{\'ui.trade.refresh\'|translate}}</button> </div> </div> </div> <table class="table table-condensed table-hover" ng-if="!pending&&pending_orders.length>0"> <thead> <tr> <th class="col-md-3 text-muted">#</th> <th class="col-md-1">{{\'ui.order.type\'|translate}}</th> <th class="col-md-3" style="text-align:right;">{{\'ui.order.price\'|translate}}</th> <th class="col-md-3" style="text-align:right;">{{\'ui.order.amount\'|translate}}</th> <th class="col-md-2"> <button class="pull-right btn btn-default btn-xs" ng-disabled="pending" ng-click="cancelAll()">Cancel All</button> </th> </tr> </thead> <tr ng-repeat="order in pending_orders"> <td> <span uib-tooltip="{{order.Id}}">{{ $index + 1 }}&nbsp;</span> <span class="pull-right" style="margin-right:10%" ng-if="order.ContractType"> <i class="label label-default outline">{{ order.ContractType }}</i> </span> </td> <td ng-style="{color:order.Type==0 ? \'#70a800\' : \'#ea0070\'}">{{ [\'ui.order.side.bid\', \'ui.order.side.ask\'][order.Type] | translate}}</td> <td align="right"><span ng-if="order.AvgPrice>0" style="margin-right:3px;font-style:italic;font-size:11px;color:#cccccc">({{ order.AvgPrice}})</span>{{ order.Price }}</td> <td align="right">{{ order.Amount}}</td> <td align="right"> <button ng-if="order.Status==0" class="btn btn-default btn-xs" ng-disabled="pending" ng-click="cancel(order)"><i class="glyphicon glyphicon-remove"></i></button> </td> </tr> </table> </div> <div role="tabpanel" class="tab-pane fade in inactive" id="tab_1"> <div ng-show="pending"> <div align="center">Loading...</div> </div> <div ng-show="!pending"> <div class="alert alert-danger" ng-if="error_positions"> {{ error_positions | translate}} <button style="margin-left: 10px" ng-disabled="pending" ng-click="update(\'positions\')" class="btn btn-default btn-xs outline">{{\'ui.trade.refresh\'|translate}}</button> </div> <div ng-if="positions.length==0"> <div class="alert alert-success" ng-if="!error_positions">Empty</div> </div> </div> <table class="table table-condensed table-hover" ng-if="positions.length>0"> <thead> <tr> <th class="col-md-3">{{\'ui.order.contractType\'|translate}}</th> <th class="col-md-1">{{\'ui.order.type\'|translate}}</th> <th class="col-md-2" style="text-align:right;">{{\'ui.trade.marginLevel\'|translate}}</th> <th class="col-md-2" style="text-align:right;">{{\'ui.position.price\'|translate}}</th> <th class="col-md-1" style="text-align:right;">{{\'ui.order.amount\'|translate}}</th> <th class="col-md-2" style="text-align:right;">{{\'ui.position.profit\'|translate}}</th> </tr> </thead> <tr ng-repeat="position in positions | limitTo: history_page_size"> <td>{{ position.ContractType }}</td> <td ng-style="{\'font-weight\':(position.Type==0||position.Type==1 ? \'normal\' : \'bold\'), color:[\'#5677fc\', \'#c51162\', \'#673ab7\', \'#b0120a\'][position.Type]}">{{ ([\'ui.position.long\', \'ui.position.short\',\'ui.position.longyd\', \'ui.position.shortyd\'][position.Type]) | translate }}</td> <td align="right">{{ position.MarginLevel }}</td> <td align="right" ng-click="setInput(\'\', \'Price\', position.Price)">{{ position.Price }}</td> <td align="right" ng-click="setInput(\'\', \'Amount\', position.Amount)">{{ position.Amount}}</td> <td align="right">{{ position.Profit}}</td> </tr> </table> </div> <div role="tabpanel" class="tab-pane fade in active" id="tab_2"> <div ng-show="pending"> <div align="center">Loading...</div> </div> <div ng-show="!pending"> <div class="alert alert-danger" ng-show="error_assets"> {{ error_assets | translate }} <button style="margin-left: 10px" ng-disabled="pending" ng-click="update(\'asset\')" class="btn btn-default btn-xs outline">{{\'ui.trade.refresh\'|translate}}</button> </div> <table class="table table-condensed table-hover" ng-if="!error_assets"> <thead> <tr> <th class="col-md-3">{{\'ui.asset.symbol\'|translate}}</th> <th class="col-md-2" style="text-align:right;">{{\'ui.asset.free\'|translate}}</th> <th class="col-md-2" style="text-align:right;">{{\'ui.asset.frozen\'|translate}}</th> </tr> </thead> <tr ng-repeat="item in assets.items"> <td>{{ item.currency }}</td> <td align="right" style="color:blue">{{ item.free.toFixed(currencyFixed) }}</td> <td align="right" style="color:red">{{ item.frozen.toFixed(currencyFixed) }}</td> </tr> </table> </div> </div> </div> </div> <div id="trade_terminal" class="pure-u-6-24 trade-widget split"> <ul class="nav nav-tabs" id="tradeTabs"> <li role="presentation" class="active"> <a ng-href="#tab_open" role="tab" data-toggle="tab">{{(isFutures ? \'ui.trade.op.open\' : \'ui.trade.op.trade\') | translate }} <span ng-if="isCryptoFutures">&nbsp;({{marginLevel}}x)&nbsp;</span> </a> </li> <li role="presentation" class="inactive" ng-if="isFutures"> <a ng-href="#tab_close" role="tab" data-toggle="tab">{{\'ui.trade.op.close\'|translate}}</a> </li> <li role="presentation" class="inactive" ng-if="isCryptoFutures || isCTP"> <a ng-href="#tab_settings" role="tab" data-toggle="tab">{{\'ui.trade.settings\'|translate}}</a> </li> <div class="pull-right"> <switch uib-tooltip="{{\'ui.trade.tip.market\'|translate}}" ng-model="op.isMarket" off="{{\'ui.trade.tip.marketShort\'|translate}}"></switch> </div> </ul> <div class="tab-content" style="margin-top:5px"> <div class="row" style="margin-top:8px"> </div> <div role="tabpanel" class="tab-pane active row" id="tab_open"> <div class="col-md-6 col-xs-6"> <input type="text" tabindex="1" ng-disabled="op.isMarket && isFutures" ng-model="op.bidPrice" placeholder="{{(op.isMarket && !isFutures ? \'ui.order.net\': \'ui.order.price\') | translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6"> <input type="text" ng-disabled="op.isMarket" tabindex="3" ng-model="op.askPrice" placeholder="{{\'ui.order.price\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6" style="margin-top:5px;margin-bottom:5px"> <input type="text" ng-disabled="op.isMarket && !isFutures" tabindex="2" ng-model="op.bidAmount" placeholder="{{\'ui.order.amount\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6" style="margin-top:5px;margin-bottom:5px"> <input type="text" tabindex="4" ng-model="op.askAmount" placeholder="{{\'ui.order.amount\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6"> <button ng-disabled="pending || !ready" class="col-md-12 btn btn-primary outline" ng-click="buy(false)"> {{ (isFutures ? \'ui.trade.op.openlong\' : \'ui.trade.op.buy\') | translate }} </button> </div> <div class="col-md-6 col-xs-6"> <button ng-disabled="pending || !ready" class="col-md-12 btn btn-danger outline" ng-click="sell(false)">{{ (isFutures ? \'ui.trade.op.openshort\' : \'ui.trade.op.sell\') | translate}}</button> </div> </div> <div role="tabpanel" class="tab-pane inactive row" ng-show="isFutures" id="tab_close"> <div class="col-md-6 col-xs-6"> <input type="text" tabindex="1" ng-disabled="op.isMarket && isFutures" ng-model="op.bidPrice" placeholder="{{\'ui.order.price\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6"> <input type="text" ng-disabled="op.isMarket" tabindex="3" ng-model="op.askPrice" placeholder="{{\'ui.order.price\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6" style="margin-top:5px;margin-bottom:5px"> <input type="text" ng-disabled="op.isMarket && !isFutures" tabindex="2" ng-model="op.bidAmount" placeholder="{{\'ui.order.amount\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6" style="margin-top:5px;margin-bottom:5px"> <input type="text" tabindex="4" ng-model="op.askAmount" placeholder="{{\'ui.order.amount\'|translate}}" class="form-control"> </div> <div class="col-md-6 col-xs-6"> <button ng-disabled="pending || !ready" class="col-md-12 btn btn-primary outline" ng-click="buy(true)">{{\'ui.trade.op.closeshort\'|translate}}</button> </div> <div class="col-md-6 col-xs-6"> <button ng-disabled="pending || !ready" class="col-md-12 btn btn-danger outline" ng-click="sell(true)">{{\'ui.trade.op.closelong\'|translate}}</button> </div> <div class="col-md-6 col-xs-6" ng-show="isSHFE"> <div style="margin-top:10px"> <label for="idCoverToday">{{\'ui.trade.coverToday\'|translate}}</label>&nbsp;&nbsp;<input type="checkbox" ng-model="isCoverToday" id="idCoverToday"> </div> </div> </div> <div role="tabpanel" class="tab-pane inactive row" ng-show="isCryptoFutures || isCTP" id="tab_settings"> <div class="col-md-12"> <div class="input-group" ng-show="isCryptoFutures"> <div class="input-group-addon">{{\'ui.trade.marginLevel\'|translate}}</div> <input type="number" min="1" max="100" step="1" ng-model="marginLevel" ng-change="saveSettings()" style="text-align:center" class="form-control"> <div class="input-group-addon"><b>X</b></div> </div> <div ng-show="isCTP"> <div class="input-group"> <div class="input-group-addon">{{\'ui.trade.flowRate\'|translate}}</div> <input type="number" min="0" max="20000" step="1" ng-model="flowRate" ng-change="saveSettings()" style="text-align:center" class="form-control"> <div class="input-group-addon">{{\'ui.const.ms\'|translate}}</div> </div> <div class="pull-right" style="margin-top:5px"> <em style="font-size:12px">{{\'ui.trade.flowRateDesc\'|translate}}</em> </div> </div> </div> </div> </div> </div> <div id="trade_history" class="pure-u-7-24 trade-widget split" ng-show="trades.length > 0"> <div class="panel panel-default"> <div class="panel-heading" style="padding:8px"> {{ \'ui.trade.history\' | translate }} <span class="pull-right">Vol:&nbsp;<b class="text-muted">{{ticker.Volume | precision: 4}}</b><span> </span></span></div> <div style="max-height:230px;overflow-x:hidden;overflow-y:auto;padding:8px"> <table class="table table-mini"> <tbody> <tr ng-repeat="trade in trades | orderBy: \'-\'"> <td> <span ng-style="{color: trade.c}">{{trade.p | precision: 8}}</span> <div class="pull-right"> <i ng-style="{\'font-size\':\'8pt\', \'opacity\': \'0.5\', \'color\': (trade.trend > 0 ? \'green\' : \'red\')}" ng-if="trade.trend!=0" ng-class="trade.trend > 0 ?\'glyphicon glyphicon-arrow-up\': \'glyphicon glyphicon-arrow-down\'"></i> <span ng-style="{\'margin-left\': \'3px\', \'opacity\': \'0.7\', \'color\': trade.c}" ng-if="trade.a">{{trade.a|trans}}</span> </div> </td> <td align="right" style="color:#666666">{{trade.v | precision: 6}}</td> <td align="right" class="text-muted">{{trade.t|tfmt:\'HH:mm:ss\'}}</td> </tr> </tbody> </table> </div> </div> </div> </div> </div> </div> ')}]),angular.module("views/main.html",[]).run(["$templateCache",function(a){a.put("views/main.html",'<div ng-show="!isOEM"> <div id="carousel-main" class="carousel slide row main-wall" data-ride="carousel"> <ol class="carousel-indicators"> <li ng-repeat="item in carousels" data-target="#carousel-main" data-slide-to="{{$index}}" ng-class="$index==0?\'active\':\'\'"></li> </ol> <div class="carousel-inner" role="listbox"> <div ng-class="$index==0?\'item active\':\'item\'" ng-repeat="item in carousels"> <div class="row"> <div class="col-md-6"> <div class="pull-right"> <div style="padding-top:10%;font-size:25pt"> {{ item.title | translate }} </div> <div style="margin-top:15px;margin-left:3px;font-size:12pt" ng-bind-html="item.subtitle | translate"> </div> <div style="margin-top:20px;font-size:20pt"> <a ng-href="{{ isLogin ? \'m/dashboard\' : \'login\'}}" style="font-size:18px;padding:10px 16px" class="btn btn-primary btn-lg btn-noradius outline">{{\'ui.main.btnBegin\'|translate}}</a> </div> </div> </div> <div class="col-md-6"> <div style="margin-left:15%"> <img ng-src="{{item.pic}}" style="height:280px;"> </div> </div> </div> </div> </div> </div> <div style="margin-top:30px;text-align:center"> <div ng-if="lang() == \'zh_CN\'"> <a class="btn btn-default btn-noradius outline" target="_blank" uib-tooltip="{{\'ui.main.quantinfo\'|translate}}" href="https://www.quantinfo.com"><i class="fa fa-rss"></i>&nbsp;<span translate="ui.main.followWechat"></span></a> <button class="btn btn-default btn-noradius outline" popover-trigger="click" uib-popover-template="\'snsPopoverTemplate.html\'"><i class="fa fa-group"></i>&nbsp;<span translate="ui.main.joinQQGroup"></span></button> <button class="btn btn-default btn-noradius outline" popover-trigger="click" uib-popover-template="\'weixinPopoverTemplate.html\'"><i class="fa fa-wechat"></i>&nbsp;<span translate="ui.main.joinWxGroup"></span></button> </div> <div ng-if="lang() != \'zh_CN\'"> <a href="https://twitter.com/FMZQuant" target="_blank" class="btn btn-default btn-noradius outline"><i class="fa fa-twitter"></i>&nbsp;Follow on Twitter</a> <a href="https://t.me/fmzquant" target="_blank" class="btn btn-default btn-noradius outline"><i class="fa fa-telegram"></i>&nbsp;Join Telegram Group</a> <a href="https://github.com/fmzquant" target="_blank" class="btn btn-default btn-noradius outline"><i class="fa fa-github"></i>&nbsp;Follow on Github</a> </div> </div> <div style="margin-top:30px" class="row"> <div class="col-md-8 col-md-offset-2" style="text-align:center"> <div class="col-md-3" ng-repeat="item in counters"> <div class="counter-box"> <div style="font-size:36px;color:#424242;letter-spacing:2px;">{{ item.val | number }}</div> <p style="color:#828282;font-size:14px;">{{ item.name | trans }}</p> </div> </div> </div> </div> <div class="row" style="background-color:#fdfdfd;color:#666666;margin-top:30px;"> <div class="col-md-8 col-md-offset-2" align="center"> <h3>{{\'ui.main.products.title\'|translate}}</h3> <p>{{\'ui.main.products.description\'|translate}}</p> <div style="margin:20px"> <a target="_blank" href="products" class="btn btn-primary btn-noradius outline">{{\'ui.main.products.view\'|translate}}</a> </div> </div> <div class="col-md-10 col-md-offset-1"> <div class="col-md-4" ng-repeat="item in products"> <div class="product-box-sharp" style="margin-bottom:10px"> <div class="ribbon ribbon-left"><span>{{\'ui.main.products.ribbon\'|translate}}</span></div> <h5>{{item.name|trans}}</h5> <p>{{item.desc|trans}}</p> </div> </div> </div> </div> <div class="hidden-xs row" align="center" style="color:#666666;margin-bottom:45px;margin-top:20px" ng-if="exchanges.length>0"> <div class="col-md-8 col-md-offset-2"> <div class="insurer-line" style="width:800px"><span><b>{{ \'ui.main.partners\' | translate }}</b></span></div> <div class="pure-g"> <div style="margin-bottom:15px" class="pure-u-1-24" ng-repeat="e in exchanges" ng-if="e.logo&&e.priority!=-99"> <a target="_blank" style="margin-left:10px;margin-right:10px" ng-href="{{e.website}}" tooltip-append-to-body="true" uib-tooltip="{{e.name | trans}}"><img border="0" width="24" height="24" ng-src="{{e.logo}}"></a> </div> </div> </div> </div> <div class="hidden-xs" style="margin-top:50px"> <div class="row" style="background-color:#ffffff;height:400px;color:#666666;padding:30px;"> <div class="col-md-4 col-md-offset-2" style="padding-top:100px"> <h3 translate="ui.main.title1"></h3> <div class="main-subdescription"> <div translate="ui.main.content1"></div> </div> </div> <div class="col-md-6 hidden-xs"> <img src="images/pic01.svg" height="350"> </div> </div> <div class="row" style="background-color:#fdfdfd;height:400px;color:#666666;padding:30px;"> <div class="col-md-6 hidden-xs"> <div align="right"> <img src="images/pic02.svg" height="350"> </div> </div> <div class="col-md-5 col-md-offset-1" style="padding-top:100px"> <h3 translate="ui.main.title2"></h3> <div class="main-subdescription"> <div translate="ui.main.content2"></div> </div> </div> </div> <div class="row" style="background-color:#ffffff;height:400px;color:#666666;padding:30px;"> <div class="col-md-4 col-md-offset-2" style="padding-top:100px"> <h3 translate="ui.main.title3"></h3> <div class="main-subdescription"> <div translate="ui.main.content3"></div> </div> </div> <div class="col-md-6 hidden-xs"> <img src="images/pic03.svg" height="350"> </div> </div> <div style="margin-top:20px"> <div class="row" style="margin-bottom:-20px;background-color:#878b9a;padding:20px 0 20px 0;color:#cccccc" ng-show="links"> <div class="col-md-12 col-lg-11 col-lg-offset-1"> <div style="font-weight:bold;color:white" translate="ui.nav.partner"></div> <ul class="list-inline" style="margin-top:10px"> <li ng-repeat="ele in links" ng-if="ele.img"> <a class="logo-box" ng-href="{{ele.url}}" target="_blank" tooltip-append-to-body="true" uib-tooltip="{{ele.name}}"> <img ng-if="ele.img" ng-src="{{ele.img}}"> </a> </li> </ul> <ul class="list-inline"> <li ng-repeat="ele in links" ng-if="!ele.img"><a ng-href="{{ele.url}}" style="color:#cccccc;font-weight:bold" target="_blank" title="{{ele.name}}">{{ele.name}}</a></li> </ul> </div> </div> </div> </div> <div class=".preload-img" style="display:none"> <img src="images/weixin.jpg"> </div> <script type="text/ng-template" id="weixinPopoverTemplate.html"> <div>\n        <img src="images/weixin.jpg">\n    </div> <\/script> <script type="text/ng-template" id="snsPopoverTemplate.html"> <div translate="ui.main.tipsSNS"></div> <\/script> <chat ng-if="!isLogin"> </chat> </div> ')}]),angular.module("views/market-item-new.html",[]).run(["$templateCache",function(a){a.put("views/market-item-new.html",'<div class="row" ng-loading> <ol class="breadcrumb"> <li><a ng-href="market" translate="ui.nav.market.index"></a></li> <li class="active" ng-if="isDemand">{{(isEdit ? "ui.nav.market.demand.edit" : "ui.nav.market.demand.new") | translate}}</li> <li class="active" ng-if="!isDemand">{{(isEdit ? "ui.nav.market.offer.edit" : "ui.nav.market.offer.new") | translate}}</li> </ol> <table class="table tbl-fixed"> <tr><td width="80">{{(isDemand ? \'ui.market.demand.title\' : \'ui.market.offer.title\') | translate}}<td><input type="text" ng-model="item.title" class="form-control"></tr> <tr> <td>{{(isDemand ? \'ui.market.demand.content\' : \'ui.market.offer.content\') | translate}}<td> <editor ng-model="item.content"></editor> </tr> <tr> <td width="80">{{ \'ui.market.snsMethod\' | translate }}</td> <td> <div style="display:inline-block" style="width:120px" ng-repeat="method in sns_methods"> <div class="input-group" style="margin-right:10px"> <div class="input-group-addon">{{method.name | translate}}</div> <input type="text" class="form-control" ng-model="method.value" placeholder="{{method.name|translate}}"> </div> </div> </td> </tr> <tr> <td width="80">{{ \'ui.market.budget\' | translate }}<br></td> <td> <div class="row"> <div class="col-md-2"> <div class="input-group"> <input type="number" min="{{min_unit_price}}" style="text-align:center" type="number" class="form-control" ng-model="item.budget"> <div class="input-group-addon">{{\'ui.const.rmb\'|translate}}</div> </div> </div> <div class="col-md-8"> <span class="label label-default" style="margin-right:5px" translate="ui.market.limitPrice" translate-values="{price: min_unit_price}"></span> <span ng-if="isEdit" class="label label-warning" style="margin-right:5px" translate="ui.market.consumedStatus" translate-values="{consumed: item.consumed, sns_hits: item.sns_hits}"></span><b translate="ui.market.budgetTips"></b> </div> </div> </td> </tr> <tr> <td width="80">{{\'ui.market.clickPrice\'|translate}}</td> <td> <div class="row"> <div class="col-md-2"> <div class="input-group"> <input type="number" min="{{min_unit_price}}" style="text-align:center" type="number" class="form-control" ng-model="item.unit_price"> <div class="input-group-addon">{{\'ui.const.rmb\'|translate}}</div> </div> </div> <div class="col-md-8"> <span class="label label-default" style="margin-right:5px" translate="ui.market.limitUnitPrice" translate-values="{min_unit_price:min_unit_price, max_unit_price:max_unit_price}"></span> <b translate="ui.market.limitUnitPriceTips"></b> </div> </div> </td> </tr> <tr> <td colspan="2"> <button class="btn btn-default" ng-click="submit()" ng-disabled="isPending"><span class="glyphicon glyphicon-ok"></span>&nbsp;{{(isPending ? \'ui.bbs.new.pending\' : (isEdit ? \'ui.market.new.resubmit\' : \'ui.market.new.submit\'))|translate}}</button>&nbsp;<a href="javascript:history.back(-1)"><span class="btn btn-warning btn-xs" translate="ui.bbs.new.cancel"></span></a> </td> </tr> </table> </div> ')}]),angular.module("views/market-item.html",[]).run(["$templateCache",function(a){
a.put("views/market-item.html",'<div class="row" ng-loading> <adminbar ref="item" type="\'market\'"></adminbar> <ol class="breadcrumb"> <li><a ng-href="markets" translate="ui.nav.market.index"></a></li> <li>{{(item.side == 0 ? \'ui.market.demandsZone\' : \'ui.market.offersZone\') | translate}}</li> <li class="active">{{ item.title | trans}}</li> </ol> <div class="panel panel-default"> <div class="panel-body"> <p style="font-size:16px" ng-bind-html="item.content | markdown"></p> <br> <div> <div ng-if="item.trate_avg>0" style="display:inline-block" uib-tooltip="{{item.rateTips}}"> <ng-rate-it ng-model="item.trate_avg" read-only="true"></ng-rate-it> </div> <div class="pull-right"> <em class="pull-right">{{ item.hits }} {{ \'ui.bbs.hits\' | translate }}&nbsp;•&nbsp;{{ item.author }}&nbsp;•&nbsp;{{\'ui.bbs.created\' | translate}}: {{ item.created }} <span ng-if="item.updated">&nbsp;•&nbsp;{{\'ui.bbs.updated\'|translate}}: {{ item.updated }}</span></em> </div> </div> </div> </div> <div ng-if="!item.is_owner && item.sns" class="alert alert-success"> <div ng-repeat="method in sns" ng-if="method.value" style="margin-right:10px;display:inline-block"> <span class="label label-primary" style="font-size:12pt;margin-right:2px">{{method.name|translate}}</span><span class="label label-success" style="font-size:12pt">{{method.value}}</span> </div> <span class="pull-right" translate="ui.market.sessionSuccessTips"></span> </div> <div ng-if="!item.is_owner && item.status==0 && !item.sns"> <div class="pull-right"> <button ng-click="request_session()" class="btn btn-danger" translate="ui.market.sessionNow"></button> </div> </div> <div ng-if="item.is_owner && item.status!=2" style="margin-bottom:20px"> <div class="row" style="margin-bottom:20px"> <div class="col-md-12"> <div class="pull-right"> <a ng-href="{{isDemand ? \'market-demand-new\' : \'market-offer-new\'}}/{{item.id}}" class="btn btn-success"><span class="glyphicon glyphicon-pencil"></span>&nbsp;{{\'ui.market.editItem\'|translate}}</a> <button ng-if="item.status==0" class="btn btn-danger" ng-click="MarketSetStatus(1)"><span class="glyphicon glyphicon-trash"></span>&nbsp;{{\'ui.market.closeItem\'|translate}} <button ng-if="item.status==1" class="btn btn-danger" ng-click="MarketSetStatus(0)"><span class="glyphicon glyphicon-trash"></span>&nbsp;{{\'ui.market.openItem\'|translate}} </button></button></div> </div> </div> <div ng-if="item.sessions.length == 0" class="alert alert-warning" style="margin-bottom:20px"> {{ \'ui.market.tipsNoSessions\' | translate }} </div> <div ng-if="(item.consumed+item.unit_price)>item.budget" class="alert alert-danger" style="margin-bottom:20px"> {{ \'ui.market.tipsOverBudget\' | translate }} </div> <div ng-if="item.unit_price>item.balance" class="alert alert-danger" style="margin-bottom:20px"> {{ \'ui.market.tipsInsufficientBalance\' | translate }} </div> <div ng-if="item.sessions.length > 0" class="row"> <div class="col-md-12"> <div class="alert alert-warning" translate="ui.market.sessionSummary" translate-values="{consumed: item.consumed, session_count: item.sessions.length}"> </div> <table style="border-collapse: separate; border-spacing: 10px;"> <tr><td><td>{{\'ui.market.userAvgRate\'|translate}}<td>{{\'ui.market.userSessionRate\'|translate}}</tr> <tr ng-repeat="obj in item.sessions" style="margin-bottom:10px"> <td> <span class="label label-primary" style="font-size:12pt"><i style="color:#f6ae54">{{ obj.username }}</i> &nbsp;<i>{{ obj.created}}</i> {{\'ui.market.sessionBrief\'|translate}}</span> </td> <td> <ng-rate-it ng-model="obj.trate_avg" read-only="true"></ng-rate-it> </td> <td> <ng-rate-it ng-model="obj.rate" reset="updateRate(rating, obj)" rated="updateRate(rating, obj)"></ng-rate-it> </td> </tr> </table> </div> </div> </div> <div ng-if="item.status!=0" class="alert alert-danger"> {{(item.status==1?\'ui.market.marketIsClosed\' :\'ui.market.marketIsDelete\') | translate}} </div> <div style="clear:both;margin-bottom:10px"></div> <div class="alert alert-warning"> {{ \'ui.market.riskTips\' | translate }} </div> <div comment="\'M_\' + item.id" ng-if="item && item.id > 0"></div> </div> ')}]),angular.module("views/market.html",[]).run(["$templateCache",function(a){a.put("views/market.html",'<div class="row" ng-loading> <div class="row" style="margin-bottom:5px"> <div class="col-md-12"> <div class="pull-right"> \x3c!-- Single button --\x3e <div class="btn-group" ng-if="isLogin"> <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> {{ {\'0\': \'ui.market.side.allItems\', \'-2\': \'ui.market.side.myPublished\', \'-3\': \'ui.market.side.mySessions\'}[viewStatus] | translate }} <span class="caret"></span> </button> <ul class="dropdown-menu"> <li><a href ng-disabled="isPending" ng-click="refresh(0)">{{\'ui.market.side.allItems\'|translate}}</a></li> <li role="separator" class="divider"></li> <li><a href ng-disabled="isPending" ng-click="refresh(-2)">{{\'ui.market.side.myPublished\'|translate}}&nbsp;<span class="badge">{{publish_number}}</span></a></li> <li><a href ng-disabled="isPending" ng-click="refresh(-3)">{{\'ui.market.side.mySessions\'|translate}}&nbsp;<span class="badge">{{session_number}}</span></a></li> </ul> </div> <div class="btn-group" role="group"> <a ng-href="{{ isLogin ? \'market-demand-new\' : \'login\' }}" class="btn btn-success btn-xs"> <span class="glyphicon glyphicon-volume-up"></span>&nbsp;{{ \'ui.nav.market.demand.new\' | translate }} </a> <a ng-href="{{ isLogin ? \'market-offer-new\' : \'login\' }}" class="btn btn-warning btn-xs"> <span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;{{ \'ui.nav.market.offer.new\' | translate }} </a> </div> </div> </div> </div> <div class="row"> <div class="col-md-6" ng-repeat="t in sides"> <ul class="nav nav-tabs"> <li role="presentation" class="active"> <a role="tab" data-toggle="tab"><i ng-class="[\'glyphicon glyphicon-volume-up\', \'glyphicon glyphicon-thumbs-up\'][t.side]"></i>&nbsp;{{(t.side == 0 ? \'ui.market.demandsZone\' : \'ui.market.offersZone\') | translate }}</a> </li> </ul> <div class="tab-content" style="margin-top:15px"> <div role="tabpanel" class="tab-pane fade in active"> <div ng-show="t.number>0" style="margin-top:10px"> <table class="table table-noborder"> <tr ng-repeat="item in items | filter:{\'side\':t.side}" style="margin-bottom:10px"> <td width="20" valign="top" align="center"> <div ng-style="{\'color\':(item.top > 0 ? \'#576057\' : \'#677067\'),\'font-size\':\'33px\',\'line-height\':\'38px\',\'font-weight\':\'bold\',\'border\':\'1px solid #\'+(item.top > 0 ? \'d9534f\' : \'778077\'),\'padding\':\'2px\',\'width\':\'45px\',\'height\':\'45px\'}">{{item.letter}}</div> </td> <td> <div><a href="market-{{t.side==0?\'demand\':\'offer\'}}/{{ item.id }}" ng-style="{\'font-size\':\'16px\',\'color\':\'#576057\',\'font-weight\': (item.top>0?\'bold\':\'normal\')}">{{ item.title | trans }}</a></div> <div style="margin-top:5px;font-size:11px;color:#cccccc;"> <div style="display:inline-block;"> <em>By {{ item.author }}</em>&nbsp;•&nbsp;{{item.timeAgo}}<span ng-if="item.top>0" style="color:#337ab7;margin-left:5px" class="glyphicon glyphicon-pushpin"></span> </div> <span class="pull-right"> <span class="badge" style="background-color:#30b0f6" ng-if="item.session_created">{{\'ui.market.side.mySessions\'|translate}}</span> <span class="badge" style="background-color:#00b0c6" ng-if="item.is_owner">{{\'ui.market.side.myPublished\'|translate}}</span> <span class="badge" style="background-color:#ffb0c6" ng-if="item.status!=0" translate="ui.market.side.closed"></span> <span class="badge" ng-if="item.sns_hits>0" style="background-color:#aab0c6" translate="ui.market.snsHits" translate-values="{sns_hits:item.sns_hits}"></span> </span> </div> </td> </tr> </table> </div> <div class="alert alert-success" ng-show="t.number==0" style="margin-top:10px"> <span ng-if="!keyword"> {{\'ui.market.empty\'|translate}} </span> </div> </div> </div> </div> </div> <div class="row" style="margin-top:20px" ng-if="total_number>0"> <div class="col-md-12"> <div class="pull-right"> <span class="label label-default" translate="ui.market.totalHitsStatus" translate-values="{total_hits:total_hits}"></span> </div> </div> </div> </div> ')}]),angular.module("views/notfound.html",[]).run(["$templateCache",function(a){a.put("views/notfound.html",'<div class="row"> <div class="alert alert-danger">not found&nbsp;&nbsp;<a href="/" class="label label-success">Home</a></div> </div> ')}]),angular.module("views/oem-login.html",[]).run(["$templateCache",function(a){a.put("views/oem-login.html",'<div class="row oem-bg" ng-hide="isLogin()"> <div class="col-md-12 col-lg-10 col-lg-offset-1"> <div class="col-md-4 col-md-offset-4"> <div style="text-align:center;margin-bottom:20px"> <img src="/images/logo.svg" style="max-height:50px"> </div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.login.title"></h3> </div> <div class="panel-body"> <form name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <label for="inputUsername">{{\'ui.login.username\' | translate }}</label> <input tabindex="1" spellcheck="false" type="text" ng-focus="!detectdUser" ng-model="username" class="form-control" id="inputUsername" placeholder="{{\'ui.login.username\' | translate }}"> </div> <div class="form-group"> <div> <label for="inputPassword">{{\'ui.placeholder.password\' | translate }}</label> <span class="pull-right"> <a href="reset-password">{{\'ui.login.forgotPassword\'|translate}} ? </a> </span> </div> <input tabindex="2" spellcheck="false" type="password" ng-focus="detectdUser" ng-model="password" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\' | translate }}"> </div> <div class="form-group"> <button tabindex="3" class="btn btn-success outline col-md-12" type="submit" ng-disabled="pending">{{ pending ? \'ui.login.pending\' : \'ui.g.login\' | translate}}</button> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> <div class="col-md-12" style="margin-top:2%"> <div class="col-md-2 col-md-offset-1"> <div> <b>{{\'安全保障|Security\'|trans}}</b> </div> <div style="color:#929292"> {{\'策略本地运行,确保数据安全与运行独立, 直连交易所, 确保交易速度与行情及时|The strategy runs on your local computer or server, ensuring data security and operation independence, and directly connecting to the exchange to ensure timely transaction speed and market quote.\'|trans}} </div> </div> <div class="col-md-2"> <div> <b>{{\'接口全面|Comprehensive\' | trans}}</b> </div> <p style="color:#929292"> {{\'支持主流交易接口, 实盘稳定跨平台, 支持Windows/Linux/Mac操作系统|Support all major trading interfaces, stable and cross-platform. Support Windows/Linux/Mac operating system\'|trans}} </p> </div> <div class="col-md-2"> <div> <b>{{\'多种语言|Programming Languages\'|trans}}</b> </div> <p style="color:#929292"> {{\'支持Python, C++, My语言, Javascript, Blockly可视化五种编程语言, 回测与实盘无缝通用|Support Python, C++, MyLanguage, Javascript and Blockly visualization programming. Backtesting environment seamlessing correspond to the real market environment\' | trans }} </p> </div> <div class="col-md-2"> <div> <b>{{\'灵活部署|Easy Deployment\'|trans}}</b> </div> <p style="color:#929292"> {{\'分布式架构, 策略可以部署到任何交易速度最快的机房并远程进行实时控制|Distributed architecture, strategy can be deployed to any shortest and fastest server location with remotely control in real time\'|trans}} </p> </div> <div class="col-md-2"> <div> <b>{{\'高效回测|High Efficient Backtesting\'|trans}}</b> </div> <p style="color:#929292"> {{\'自主研发的高仿实盘模式的回测模型,提供Tick级别支持,与任意低层Tick的粒度模拟|FMZ self-developed backtesting model with high imitation of the real market, providing Tick level support, and granular-degree simulation of any low-level Tick\' | trans}} </p> </div> </div> </div> </div> <div class="alert alert-danger" ng-show="isLogin()">{{ "ui.login.success" | translate }}&nbsp;<a href="m/dashboard" translate="ui.returnHome"></a></div> ')}]),angular.module("views/oem-sign-up.html",[]).run(["$templateCache",function(a){a.put("views/oem-sign-up.html",'<div class="row" ng-show="!isLogin()"> <div class="col-md-4 col-md-offset-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.signup.title"></h3> </div> <div class="panel-body"> <form novalidate name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <label for="inputUsername">{{\'ui.placeholder.username\' | translate }}</label> <input type="text" spellcheck="false" ng-model="username" class="form-control" id="inputUsername" placeholder="{{\'ui.placeholder.username\' | translate }}"> </div> <div class="form-group"> <label for="inputEmail">{{\'ui.placeholder.email\' | translate }}</label> <input type="email" spellcheck="false" ng-model="email" class="form-control" id="inputEmail" placeholder="{{\'ui.placeholder.email\' | translate }}"> </div> <div class="form-group"> <label for="inputPassword">{{\'ui.placeholder.password\' | translate }}</label> <input type="password" ng-model="password" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\' | translate }}"> </div> <div class="form-group" ng-show="isOEM"> <label for="inputPassword">{{\'ui.placeholder.authCode\' | translate }}</label> <input type="password" ng-model="authCode" class="form-control" id="authCode" placeholder="{{\'ui.placeholder.authCode\' | translate }}"> </div> <div class="form-group" id="shake" ng-show="!isOEM"> <div class="input-group"> <input ng-model="isAgree" type="checkbox" checked>&nbsp;<b>{{\'ui.signup.agreementCheck\' | translate}} <a target="_blank" href="agreement">{{\'ui.signup.agreementTitle\' | translate}}</a></b> </div> </div> <div class="form-group"> <button class="btn btn-success outline col-md-12" type="submit" ng-disabled="pending" translate="ui.signup.btnSignup"></button> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-danger" ng-show="isLogin()">{{ "ui.login.success" | translate }}&nbsp;<a href="m/dashboard" translate="ui.returnHome"></a></div> ')}]),angular.module("views/products.html",[]).run(["$templateCache",function(a){a.put("views/products.html",'<div style="margin-top:-20px"> <div class="row" style="padding-bottom:50px;background-image:url(images/products/bg01.png);color:#666666"> <div class="col-md-10 col-md-offset-2" style="background:url(images/products/pic01.png) no-repeat right top;padding-top:50px"> <div style="margin-top:50px"> <h3>{{"FMZ Quant Enterprise Edition|发明者量化企业版"|trans}}</h3> <p> {{"完全本地化的高性能量化交易平台支持量化交易的全部功能, 包括策略研发、回测、仿真、实盘、盘后分析优化|Supporting strategy development, analysis optimization, backtesting, and market-simulation."|trans}} <br> {{"支持多种主流开发语言。支持国内外商品期货量化交易，以及全球区块链交易市场|Providing most of mainstream programming languages for global blockchain trading assets" | trans}} </p> </div> <div class="row" style="margin-top:120px;margin-bottom:100px"> <div class="col-md-5"> <div class="col-md-3" style="text-align:center"> <img src="images/products/a01.svg" width="66"> <p class="product-a-title"> {{"私有部署|Private Deployment"|trans}} </p> </div> <div class="col-md-3" style="text-align:center"> <img src="images/products/a02.svg" width="66"> <p class="product-a-title"> {{"海量数据|Massive Data"|trans}} </p> </div> <div class="col-md-3" style="text-align:center"> <img src="images/products/a03.svg" width="66"> <p class="product-a-title"> {{"极速体验|Extreme Speed"|trans}} </p> </div> <div class="col-md-3" style="text-align:center"> <img src="images/products/a04.svg" width="66"> <p class="product-a-title"> {{"多路终端|Multiple Terminal"|trans}} </p> </div> </div> </div> </div> <div class="col-md-8 col-md-offset-2"> <div class="product-box"> <div class="ribbon ribbon-left"><span>{{"预览|Preview"|trans}}</span></div> <div class="row"> <a target="_blank" href="https://demo-oem.fmz.com"> <img border="0" src="images/product_oem.png"> </a> </div> </div> <div style="margin:20px" align="center"> <div> <a target="_blank" href="https://demo-oem.fmz.com/sign-up" class="btn btn-primary btn-noradius outline">{{"查看演示|View Demo"|trans}}</a> </div> </div> </div> </div> <div class="row" style="background-color:#fdfdfd;color:#666666;margin-top:50px;"> <div class="col-md-8 col-md-offset-2" align="center"> <h3>{{"交易系统|Trading System"|trans}}</h3> <p>{{"发明者科技 ( FMZ ) 是区块链资产交易领先的前瞻式技术供应商|FMZ Quant is a leading forward-looking technology provider for blockchain asset trading"|trans}} <br> {{"服务数百万用户，专业分布式架构和防DDOS攻击系统, 钱包系统隔离运行|Serving millions of users, professional distributed architecture and anti-DDOS attack system, wallet system isolated operation"|trans}} </p> <div style="margin:50px"> <a target="_blank" href="https://wex.app" class="btn btn-primary btn-noradius outline">{{"查看演示|View Demo"|trans}}</a> </div> </div> <div class="col-md-8 col-md-offset-2"> <div class="row" style="margin-bottom:50px"> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c01.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"现货交易系统|Spot Trading System"|trans}}</h4> <p class="product-description"> {{"发明者科技交易系统采用内存撮合技术，订单处理速度高达 200 万笔 / 秒，能够保证订单处理不会出现任何延迟和卡顿。可支持同时在线用户数量超 2000 万的交易所流畅稳定运行。多层、多集群的系统架构保证了系统的安全性、稳定性、易扩展性。功能部署、版本更新无需停机进行，最大限度保障终端用户的操作体验。|FMZ Quant trading system uses a memory-combining technology with an order processing speeding up to 2 million transactions per second, which guarantees that there will be no delays and jams in order processing. It can support the smooth and stable operation of exchanges with more than 20 million online users at the same time. The multi-layer, multi-cluster system architecture ensures the security, stability and scalability of the system. Feature deployment and version update do not require downtime to maximize the user\'s operating experience."|trans}} <p> </div> </div> </div> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c02.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"高并发API接口|High Concurrent API Interface"|trans}}</h4> <p class="product-description"> {{"提供完整的用户API接口，订单查询，账户资产查询，充值提现地址查询, 行情接口, Websocket行情接口, 并与交易核心系统完全分离, 安全可靠. 交易模块于交易所UI界面完全分离, 在最大程度上保证系统的安全性与用户资产的安全|Providing complete user API interface, order inquiry, account asset inquiry, recharge, cash withdrawal address query, market interface, Websocket market interface, and completely separate from the trading system core, safe and reliable. The trading module is completely separated on the exchange UI interface, to the maximum extent Ensure system security and user asset security"|trans}} <p> </div> </div> </div> </div> <div class="row" style="margin-bottom:50px"> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c03.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"智能市商系统|Intelligent Market Making System"|trans}}</h4> <p class="product-description"> {{"发明者量化市商策略通过做市制度，跟踪价格变化，不断地 主持买、卖两方面的市场。凭借专业知识对市场公允价格作 出判断，以最佳价格提供买卖双向报价，增强市场吸引力|The FMZ Quant market making system is operated by tracking the price changes and constantly presided over the market for both buying and selling. With professional knowledge to judge the market fair price, provide two-way quotation at the best price to enhance the market attractiveness."|trans}} <p> </div> </div> </div> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c04.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"场外OTC交易|OTC Trading"|trans}}</h4> <p class="product-description"> {{"支持场外 OTC 交易，运用 KYC 认证程序、公平的排名系统、安全的第三方资产锁定等技术，对接合规国家法币，让充值提现不再是瓶颈。只需要输入要购买的金额，即可开始体验方便的场外交易。⽀持多国语⾔，可快速完成本地化部署。为区块链爱好者打造安全易用的场外交易平台。|Support OTC transactions, use KYC certification procedures, fair ranking system, secure third-party asset lock-in and other technologies to make the recharge of the fiat currency, which is no longer a bottleneck. Just enter the amount you want to purchase and start experiencing convenient over-the-counter transactions. Multi-language support for fast localization deployment. Create a secure and easy-to-use OTC trading platform for blockchain enthusiasts."|trans}} <p> </div> </div> </div> </div> <div class="row" style="margin-bottom:50px"> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c05.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"智能扩展系统|Intelligent Expansion System"|trans}}</h4> <p class="product-description"> {{"弹性的智能扩展系统，轻松胜任多达几十种的业务场景 投资者对于被动指数基金需求日益高涨，通过智能扩展系统集成的 ETF 指数基金模块 API 接口，一键发布区块链资产ETF 指数基金产品。 并且支持自定义 ETF 指数基金封闭期，方便基金后台为日常申购、赎回做好充分准备。同时为基金产品提供一个相对平稳的建仓过程。通过智能扩展系统集成的交易所模块 API 接口，快速搭建一套完整的区块链资产新兴交易挖矿平台。|Flexible expansion system, easily competent for dozens of business scenarios. Investors are increasingly demanding passive index funds. Through the ETF index fund module API interface integrated with it, just one-click away to the blockchain asset ETF index fund products. also supports the closed period of the custom ETF index fund, which is convenient for the fund back office to fully prepare for daily purchase and redemption. Meanwhile, it provides a relatively stable opening position process for fund products. Quickly build a complete blockchain asset emerging trading mining platform through the system integrated exchange\'s module API interface."|trans}} <p> </div> </div> </div> <div class="col-md-6"> <div class="media"> <div class="media-left"> <div style="width:180px"> <img class="media-object" src="images/products/c06.png"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{"发明者云业务|Cloud Computing Business"|trans}}</h4> <p class="product-description"> {{"助力合作伙伴快速搭建自己的交易所 发明者云依托发明者科技在区块链资产交易所领的技术积累，为合作伙伴提供在“零IT能力要求”下的搭建 OTC 交易所及币币交易所的服务。 合作伙伴可以共享发明者区块链交易平台全球站的订单撮合系统、钱包系统、资产管理与清算系统，对接发明者区块链交易平台全球站的深度、流动性及行情数据。 合作伙伴只需要提供自己的域名、LOGO 以及运营主体，就可以拥有全球顶级交易体验的区块链资产交易所。|Helping partners quickly build their own exchange. The cloud relies on the technology accumulation of FMZ in the blockchain asset exchange, providing partners with OTC and \'cryptocurrency to cryptocurrency\' exchanges under the “zero IT capability requirements”. Partners can share the FMZ Quant blockchain trading platform global website\'s order matching system, wallet system, asset management and clearing system, and dock the depth, liquidity and market data of the FMZ Quant. Partners only need to provide their own domain name, LOGO and operating entities to have a blockchain asset exchange with the world\'s top trading experience."|trans}} <p> </div> </div> </div> </div> </div> <div class="col-md-8 col-md-offset-2"> <div class="product-box"> <div class="ribbon ribbon-left"><span>{{"特色|Features"|trans}}</span></div> <div style="background:url(images/products/bg02.svg) no-repeat center top;"> <div class="row"> <div class="col-md-4" style="text-align:right"> <p class="product-head">{{"高性能|High Performance"|trans}}</p> <p class="product-body"> {{"内存级异步撮合引擎, 无锁环形队列|Memory-level asynchronous join engine, lock-free circular queue"|trans}} </p> </div> <div class="col-md-4 col-md-offset-4" style="text-align:left"> <p class="product-head">{{"低延迟|Low latency"|trans}}</p> <p class="product-body"> {{"利用专用软件开发和QOS 方法保证关键应用的处理速度。|Dedicated software development and QOS methods are used to ensure the processing speed of critical applications."|trans}} </p> </div> </div> <div class="row" style="margin-top:15px;margin-bottom:15px"> <div class="col-md-4" style="text-align:right"> <p class="product-head">{{"高容量|High Capacity"|trans}}</p> <p class="product-body"> {{"采用全分布式设计，计算和存储能力可无限扩展|Fully distributed design, unlimited computing and storage capabilities"|trans}} </p> </div> <div class="col-md-4 col-md-offset-4" style="text-align:left"> <p class="product-head">{{"易扩展|Easy To Expand"|trans}}</p> <p class="product-body"> {{"语法简单定义灵活，支持新产品，新业务|Simple and flexible syntax, support for new products, new business"|trans}} </p> </div> </div> <div class="row"> <div class="col-md-4" style="text-align:right"> <p class="product-head">{{"高速行情|High Speed Market"|trans}}</p> <p class="product-body"> {{"集群化和撮合引擎和通讯系统，让交易速度成倍提升|Clustering and matching engine and communication systems to double transaction speed"|trans}} </p> </div> <div class="col-md-4 col-md-offset-4" style="text-align:left"> <p class="product-head">{{"更精准|More Precise"|trans}}</p> <p class="product-body"> {{"全天候实时在线，集行情、 交易为一身，下单更精准|24/7 online, getting the market quote and executing orders more accurate"|trans}} </p> </div> </div> </div> </div> </div> </div> <div class="row" style="padding:50px;background-image:linear-gradient(to bottom, #f4f6f7, #ffffff);color:#666666;margin-top:50px;margin-bottom:-20px;"> <div class="row"> <div class="col-md-8 col-md-offset-2" align="center"> <h3>{{"市商系统|Market Making System"|trans}}</h3> <p>{{"为交易所提供市场流动性与资金管理的专业系统|Market Making strategy"|trans}}</p> <p> {{"致力于打造区块链交易所市商策略新标杆，为区块链交易所核心业务提供最高水平的交易服务。|Committed to building a new benchmark for blockchain exchange market making business strategies, providing the highest level of trading services for the core business of blockchain exchanges."|trans}} <br> {{"凭借业界领先的系统架构，结合丰富的功能定制方案，在性能、效率和可靠性方面都达到业界领先水平。|With industry-leading system architecture and a rich feature customization solution, it is the industry leader in performance, efficiency and reliability."|trans}} <br> {{"能够满足各类区块链交易所需求，是区块链交易所核心应用的最佳选择。|Being able to meet the needs of various blockchain exchanges is the best choice for the core applications of blockchain exchanges."|trans}} </p> <div style="margin:50px"> <a target="_blank" href="strategy/33208" class="btn btn-primary btn-noradius outline">{{"查看演示|View Demo"|trans}}</a> </div> </div> </div> <div class="row"> <div class="col-md-8 col-md-offset-2"> <div class="col-md-4"> <div class="media"> <div class="media-left"> <div class="product-q"><i>Q</i></div> </div> <div class="media-body" style="color:#307ef1"> <p class="media-heading">{{"什么是市商系统 ?|What is a market making system ?"|trans}}</p> </div> </div> <div class="media"> <div class="media-left"> <div class="product-a"><i>A</i></div> </div> <div class="media-body" style="color:#4e4e4e"> <p class="product-description"> {{"发明者市商策略通过做市制度，跟踪价格变化，不断地主持买、卖两方面的市场。凭借专业知识对市场公允价格作出判断，以最佳价格提供买卖双向报价，增强市场 吸引力，提高流动性，满足普通投资者的买卖需求。 通过高频交易，逐渐积累每笔交易价格和理论价格的差价，并根据持仓头寸特征，动态调整价差，并实现一定的利润。|The FMZ\'s market-making system keeps tracking the price changes. Based on professional mechanism, it can judge the fair price of the market, provide two-way quotation for buying and selling at the best price, enhance market attractiveness, improve liquidity, and satisfy the trading needs of ordinary investors. Through high-frequency trading, the price difference between each transaction price and the theoretical price is gradually accumulated, and the price difference is dynamically adjusted according to the characteristics of the position, and a certain profit will be realized."|trans}} </p> </div> </div> </div> <div class="col-md-4"> <div class="media"> <div class="media-left"> <div class="product-q"><i>Q</i></div> </div> <div class="media-body" style="color:#307ef1"> <p class="media-heading">{{"为什么选择发明者市商策略？|Why choose the FMZ MM system?"|trans}}</p> </div> </div> <div class="media"> <div class="media-left"> <div class="product-a"><i>A</i></div> </div> <div class="media-body" style="color:#4e4e4e"> <p class="product-description"> {{"发明者量化市商策略能够很好的应对 TPS 和 TPMC 类业务。在业内知名交易所线上环境，大规模性能测试中，稳定完成了 1 亿笔交易，每秒交易数接近 3 万笔， 执行了 102803740 笔交易，平均每秒执行 27890 笔币交易。 极速的性能、灵活可定制化设计、优化算法、智能模拟算法、独立做市、币种做市。发明者量化市商策略还内置了大量可控的随机因子。| The FMZ Quant market making system can deal with TPS and TPMC business very well. In the online environment of the well-known exchanges in the industry, in the large-scale performance test, 100 million transactions were successfully completed, the number of transactions per second was close to 30,000, and 102,803,740 transactions were executed, with an average of 27,890 transactions per second. Extremely fast performance, flexible and customizable design, optimization algorithms, intelligent simulation algorithms, independent market making, currency market making. It also includes a large number of controllable random factors. "|trans}} </p> </div> </div> </div> <div class="col-md-4"> <div class="media"> <div class="media-left"> <div class="product-q"><i>Q</i></div> </div> <div class="media-body" style="color:#307ef1"> <p class="media-heading">{{"什么是交互指令 ?|What is an interactive instruction?"|trans}}</p> </div> </div> <div class="media"> <div class="media-left"> <div class="product-a"><i>A</i></div> </div> <div class="media-body" style="color:#4e4e4e"> <p class="product-description"> {{"为了更方便用户调配市商策略，我们新增了一键交互功能，通过该功能用户可以一键给市商策略发送新的指令。发明者量化市商策略内置多个一键交互指令，包括但不限于：更改市商价差、 修改买卖单阻力距离、锁定盘口指定范围、取消盘口锁定、定义挂单量、定义挂单量范围、平仓价差、加仓价差等。|In order to make it easier for users to deploy the market strategy, we have added a one-click interactive function, through which users can send new commands to the market making system with one click. The market making strategy has build-in multiple one-click interactive instructions, including but not limited to: changing the market price difference, modifying the resistance distance of the order, locking the specified range of the market price, canceling the lock, defining the amount of pending orders, defining the range of pending orders, Closing position price difference, adding position price difference, etc."|trans}} </p> </div> </div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <img src="images/products/bg03.png"> </div> </div> </div> </div> <chat></chat> ')}]),angular.module("views/reset-password.html",[]).run(["$templateCache",function(a){a.put("views/reset-password.html",'<div class="row"> <div class="col-md-6 col-md-offset-3" ng-show="uncompleted"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.resetpassword.title"></h3> </div> <div class="panel-body"> <form novalidate name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span> <input type="email" spellcheck="false" ng-model="email" class="form-control" id="inputEmail" placeholder="{{\'ui.placeholder.email\' | translate}}" required> </div> </div> <div class="form-group"> <button class="btn btn-default outline" type="submit" ng-disabled="pending" translate="ui.resetpassword.btnSendEmail"></button>&nbsp;<a href="login" class="label label-success outline" translate="ui.g.cancel"></a> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-success" ng-show="!uncompleted"> {{\'ui.resetpassword.mailSent\'|translate}}. <a href="login" class="label label-success" translate="ui.resetpassword.returnLogin"></a> </div> ')}]),angular.module("views/reset-twofactor.html",[]).run(["$templateCache",function(a){
a.put("views/reset-twofactor.html",'<div class="row"> <div class="col-md-6 col-md-offset-3" ng-show="uncompleted"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.resettwofactor.title"></h3> </div> <div class="panel-body"> <form novalidate name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span> <input type="text" ng-model="username" class="form-control" id="inputUsername" placeholder="{{\'ui.placeholder.username\'|translate}}" required> </div> </div> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span> <input type="password" ng-model="password" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\'|translate}}" required> </div> </div> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span> <input type="email" ng-model="email" class="form-control" id="inputEmail" placeholder="{{\'ui.placeholder.regEmail\'|translate}}" required> </div> </div> <div class="form-group"> <button class="btn btn-default" type="submit" ng-disabled="pending" translate="ui.resettwofactor.btnSendEmail"></button> &nbsp;<a href="login" class="label label-success outline" translate="ui.g.cancel"></a> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-success" ng-show="!uncompleted"> {{\'ui.resettwofactor.mailSent\' | translate }}. <a href="login" class="label label-success" translate="ui.resettwofactor.returnLogin"></a> </div> ')}]),angular.module("views/robot.html",[]).run(["$templateCache",function(a){a.put("views/robot.html",'<div class="row" ng-loading> <div robot="robotId" private="false"></div> </div> ')}]),angular.module("views/set-password.html",[]).run(["$templateCache",function(a){a.put("views/set-password.html",'<div class="row"> <div class="col-md-6 col-md-offset-3" ng-show="uncompleted"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.setpassword.title"></h3> </div> <div class="panel-body"> <form novalidate name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span> <input type="password" ng-model="password" equals="{{repassword}}" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\'|translate}}" required> </div> </div> <div class="form-group"> <div class="input-group"> <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span> <input type="password" ng-model="repassword" equals="{{password}}" class="form-control" id="inputPasswordAgain" placeholder="{{\'ui.placeholder.repassword\'|translate}}" required> </div> </div> <div class="form-group"> <button class="btn btn-default outline" type="submit" ng-disabled="pending" translate="ui.setpassword.btnSet"></button> &nbsp;<a href="login" class="label label-success outline" translate="ui.g.cancel"></a> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-success" ng-show="!uncompleted"> {{\'ui.setpassword.success\'|translate}} <a class="label label-success" href="login" translate="ui.setpassword.returnLogin"></a> </div> ')}]),angular.module("views/sign-up.html",[]).run(["$templateCache",function(a){a.put("views/sign-up.html",'<div class="row" ng-show="!isLogin()"> <div class="col-md-4 col-md-offset-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title" translate="ui.signup.title"></h3> </div> <div class="panel-body"> <form novalidate name="frm" class="form-horizontal col-md-10 col-md-offset-1" role="form" ng-submit="submit()" form-autofill-fix> <div class="form-group"> <label for="inputUsername">{{\'ui.placeholder.username\' | translate }}</label> <input type="text" spellcheck="false" ng-model="username" class="form-control" id="inputUsername" placeholder="{{\'ui.placeholder.username\' | translate }}"> </div> <div class="form-group"> <label for="inputEmail">{{\'ui.placeholder.email\' | translate }}</label> <input type="email" spellcheck="false" ng-model="email" class="form-control" id="inputEmail" placeholder="{{\'ui.placeholder.email\' | translate }}"> </div> <div class="form-group"> <label for="inputPassword">{{\'ui.placeholder.password\' | translate }}</label> <input type="password" ng-model="password" class="form-control" id="inputPassword" placeholder="{{\'ui.placeholder.password\' | translate }}"> </div> <div class="form-group" ng-show="isOEM"> <label for="inputPassword">{{\'ui.placeholder.authCode\' | translate }}</label> <input type="password" ng-model="authCode" class="form-control" id="authCode" placeholder="{{\'ui.placeholder.authCode\' | translate }}"> </div> <div class="form-group" id="shake" ng-show="!isOEM"> <div class="input-group"> <input ng-model="isAgree" type="checkbox" checked>&nbsp;<b>{{\'ui.signup.agreementCheck\' | translate}} <a target="_blank" href="agreement">{{\'ui.signup.agreementTitle\' | translate}}</a></b> </div> </div> <div class="form-group"> <button class="btn btn-success outline col-md-12" type="submit" ng-disabled="pending" translate="ui.signup.btnSignup"></button> </div> </form> </div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> </div> </div> <div class="alert alert-danger" ng-show="isLogin()">{{ "ui.login.success" | translate }}&nbsp;<a href="m/dashboard" translate="ui.returnHome"></a></div> ')}]),angular.module("views/square.html",[]).run(["$templateCache",function(a){a.put("views/square.html",'<div class="row" ng-loading> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"> {{ \'ui.nav.square\' | translate}} <span ng-if="keyword" translate="ui.g.searchResult" translate-values="{keyword: keyword}"></span> <span class="pull-right"> <span style="margin-left:8px;background-color:#777777" class="badge">{{ strategies_all }}</span> </span> </h3> </div> <div class="panel-body"> <span class="pull-right" ng-show="keyword || public_strategies.length > 0"> <form> <input type="search" ng-model="skw" translate-attr="{ placeholder: \'ui.placeholder.search\'}" class="searchbox"> <button ng-disabled="skw==keyword" class="btn btn-info btn-xs outline" ng-click="search()"><i class="glyphicon glyphicon-search"></i></button> </form> </span> <div> <a ng-href="square/-1/1" ng-class="\'label label-\' + (category_id == -1 ? \'default outline\' : \'primary outline\')" translate="ui.strategy.type.all"></a> <span ng-repeat="m in categories" ng-if="!m.hide"> <a ng-href="square/{{m.id}}/1" ng-class="\'label label-\' + (category_id == m.id ? \'default outline\' : \'primary outline\')" translate="{{m.name}}"></a> </span> <span ng-if="!g.oem"> <a href="https://github.com/fmzquant/strategies" class="label label-info outline" target="_blank"><i class="fa fa-github"></i>&nbsp;Github</a> </span> </div> <div ng-if="tags.length>0" style="margin-top:10px"> <div style="margin-right:8px;white-space: nowrap;" class="d-inline-block" ng-repeat="tag in tags"> <a href="square/s:tag:{{ tag.name | trans}}/1" style="font-weight:bold;font-style:italic;color:#777">{{ tag.name | trans}} ({{tag.count}})</a> </div> </div> <div class="alert alert-success" style="margin-top:20px" ng-show="keyword && public_strategies.length == 0"> <span ng-if="keyword" translate="ui.g.searchEmpty" translate-values="{keyword: keyword}"></span> &nbsp;<a ng-href="square" class="btn btn-success btn-xs outline" translate="ui.square.returnSquare"></a> </div> </div> <table class="table table-condensed table-hover" ng-if="public_strategies.length > 0"> <thead> <tr> <th class="col-lg-8 col-xs-11">{{ \'ui.square.cols.name\' | translate }}<span class="pull-right text-muted visible-lg" translate="ui.square.cols.member"></span></th> <th class="col-lg-1 visible-lg" style="text-align:center" translate="ui.square.cols.type"></th> <th class="col-lg-2 visible-lg" translate="ui.square.cols.modified"></th> <th class="col-lg-1" translate="ui.square.cols.action"></th> </tr> </thead> <tbody> <tr ng-repeat="item in public_strategies"> <td> <i class="icon-language iconfont icon-lang-{{[\'javascript\', \'python\', \'cpp\', \'blockly\', \'my\'][item.language]}}"></i> <a href="strategy/{{item.id}}">{{ item.name | trans | cut: 45 }}</a> <span class="pull-right text-muted visible-lg"> <span style="margin-right:10px"> <span style="margin-right:3px" ng-repeat="tag in item.tagsArr"> <a href="square/s:tag:{{ tag | trans}}/1" style="font-weight:bold;font-style:italic;color:#777">{{ tag | trans}}</a> </span> </span> <span ng-if="item.public == 1 && item.forked > 0" uib-tooltip="{{ \'ui.square.copyNum\' | translate }} {{item.forked}}" class="counter" style="margin-right:8px;">{{ item.forked }}</span>{{ item.username | cut: 15}} </span> </td> <td class="visible-lg" align="center"><span ng-class="\'noradius label label-\' + (item.category !== 20 ? \'default\' : \'info\') + \' outline\'">{{ item.category_name | translate }}</span></td> <td class="visible-lg">{{ item.last_modified }}</td> <td> <a href="m/copy-strategy/{{item.id}}" ng-if="item.public == 1" class="btn btn-success btn-xs outline"><i class="glyphicon glyphicon-share-alt"></i>&nbsp;{{\'ui.square.action.copy\'|translate}}</a> <span ng-click="buyStrategy(item)" ng-if="!item.is_buy && !item.is_owner && item.public == 3" class="btn btn-danger btn-xs outline"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.square.action.buy\'|translate}}</span> <span ng-if="!item.is_buy && item.public == 2" class="label label-default outline">{{\'ui.square.review\'|translate}}</span> <span ng-click="buyStrategy(item)" ng-if="item.is_buy && (item.public == 2 || item.public == 3)" class="btn btn-warning btn-xs outline"><i class="glyphicon glyphicon-yen"></i>&nbsp;{{\'ui.square.action.rebuy\'|translate}}</span> </td> </tr> </tbody> </table> </div> <div ng-if="keyword"> <div class="pull-right"> <a class="btn btn-info btn-xs outline" ng-href="square"><i class="glyphicon glyphicon-share-alt"></i>{{ \'ui.square.cancelSearch\' | translate }}</a> </div> <div style="clear:both;margin-bottom:5px"></div> </div> <nav> <ul class="pagination" ng-if="pages.length>1"> <li ng-repeat="page in pages" ng-class="page.cls + (loading ? \' disabled\' : \'\')"><a ng-href="square/{{keyword == \'\' ? category_id : (\'s:\'+keyword)}}/{{page.id}}" href>{{page.name | translate}}</a></li> </ul> </nav> <div style="margin-bottom:50px"></div> \x3c!--<div comment="\'square\'"></div>--\x3e </div> ')}]),angular.module("views/strategy.html",[]).run(["$templateCache",function(a){a.put("views/strategy.html",'<div ng-loading ng-show="!error"> <adminbar type="\'strategy\'" ref="strategy"></adminbar> <ol class="breadcrumb"> <li><a ng-href="square" translate="ui.nav.square"></a></li> <li class="active">{{ strategy.name | trans}}</li> </ol> <blockquote ng-if="strategy.tags"> <span class="label label-default" style="margin-right:10px" ng-repeat="tag in strategy.tags.split(\',\')"> <a href="square/s:tag:{{ tag | trans}}/1" style="color:white">{{ tag | trans}}</a> </span> </blockquote> <div> <ul class="nav nav-tabs" ng-if="strategy.manual"> <li role="presentation" class="active"> <a ng-href="#strategy_tab_0" role="tab" data-toggle="tab"><i class="fa fa-info-circle"></i>&nbsp;{{\'ui.g.description\'|translate}}</a> </li> <li role="presentation"> <a ng-href="#strategy_tab_1" role="tab" data-toggle="tab"><i class="fa fa-book"></i>&nbsp;{{\'ui.g.manual\'|translate}}</a> </li> </ul> <div class="tab-content"> <div role="tabpanel" class="form-group tab-pane fade in active" id="strategy_tab_0"> <div class="panel panel-default" style="margin-top:7px"> <div class="panel-body"> <div ng-bind-html="strategy.description | trans: true | markdown" ng-if="strategy.description"></div> <div ng-if="strategy.description.length==0" translate="ui.strategy.noDescription"></div> </div> </div> </div> <div role="tabpanel" class="form-group tab-pane fade in inactive" id="strategy_tab_1" ng-if="strategy.manual"> <div class="panel panel-default" style="margin-top:7px"> <div class="panel-body"> <div ng-bind-html="strategy.manual | trans: true | markdown"></div> <div ng-if="strategy.manual.length==0" translate="ui.strategy.noManual"></div> </div> </div> </div> </div> </div> <div class="alert alert-success"> {{ \'ui.g.category\' | translate }}: <b>{{ strategy.category_name | translate }}</b> {{ \'ui.g.created\' | translate }}: <b>{{ strategy.date }}</b> &nbsp;{{ \'ui.g.modified\' | translate }}: <b>{{ strategy.last_modified | ago}}</b> <span ng-if="strategy.public==1&&strategy.forked">&nbsp;{{ \'ui.strategy.forked\' | translate }}: <span class="badge">{{strategy.forked}}</span></span> <span class="pull-right" ng-if="strategy.username">{{\'ui.strategy.author\' | translate}}: <b><i>{{ strategy.username }}</i></b></span> </div> <div class="panel panel-default" ng-if="scriptArgList.length > 0"> <div class="panel-heading"> <h3 class="panel-title">{{strateby.category!=20 ? \'ui.edit.strategy.varGlobal\' : \'ui.edit.strategy.varTemplate\' | translate}} </h3> </div> <div class="panel-body"> <div ng-repeat="ele in scriptArgGroup"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">{{ele.name | trans}}</h3> </div> <div class="panel-body"> <div ng-if="argList.list.length==0" translate="ui.strategy.noArgs"></div> <div class="row" ng-repeat="pair in ele.data" style="margin-top:2px;margin-bottom:8px" ng-show="showArg(scriptArgList, pair)"> <div class="col-md-3 col-xs-5"><span class="label label-success pull-right" style="margin-top:7px">{{ pair.name | trans }}</span></div> <div ng-class="pair[3].inputType == \'text\' ? \'col-lg-5 col-xs-7\' : \'col-lg-2 col-xs-3\'" uib-popover="{{ pair[2] | trans}}" popover-trigger="mouseenter" popover-title="{{ pair[3].name | translate}}"> <input readonly ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'number\'" type="{{ pair[3].inputType }}" title="{{ pair[3].name | translate}}" ng-model="pair.value" class="form-control" placeholder="{{\'ui.placeholder.arg.canEmpty\'|translate}}"> <input readonly ng-if="pair[3].inputType == \'number\'" type="{{ pair[3].inputType }}" title="{{ pair[3].name | translate}}" ng-model="pair.value" class="form-control" required> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.g.checkTips\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-selected="pair.indexValue==$index" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> </div> </div> </div> </div> </div> </div> <div class="panel panel-default" ng-if="scriptCMDGroup.length > 0"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.strategy.cmd\'|translate}}</h3> </div> <div class="panel-body"> <div class="panel panel-default" ng-repeat="ele in scriptCMDGroup" style="margin-top:10px"> <div class="panel-heading"> <h3 class="panel-title">{{ele.name|trans}}</h3> </div> <div class="panel-body"> <div class="row" style="margin-top:2px;margin-bottom:8px" ng-repeat="pair in ele.data"> <div class="col-md-2 col-xs-5" ng-if="pair[1][0]!=\'@\'"><span class="label label-success pull-right" style="margin-top:7px">{{ pair.name | trans}}</span></div> <div ng-if="pair[3].inputType != \'button\'" ng-class="pair[3].inputType == \'text\' ? \'col-md-8 col-xs-3\' : \'col-md-3 col-xs-3\'" popover-trigger="mouseenter" uib-popover="{{ pair[2] | trans }}" popover-title="{{ pair[3].name | translate }}" popover-append-to-body="true"> <input readonly ng-if="pair[3].inputType != \'checkbox\' && pair[3].inputType != \'selected\' && pair[3].inputType != \'button\'" type="{{ pair[3].inputType }}" ng-pattern="{{ pair[3].inputPattern }}" ng-model="pair.value" class="form-control" required> <div class="checkbox" ng-if="pair[3].inputType == \'checkbox\'"> <label> <input type="checkbox" ng-model="pair.value"> ({{\'ui.g.checkTips\'|translate}}) </label> </div> <div ng-if="pair[3].inputType == \'selected\'"> <select ng-model="pair.indexValue" class="form-control" convert-to-number> <option value="{{ $index }}" ng-repeat="item in pair.options">{{ item | trans}}</option> </select> </div> </div> <div class="col-md-2 col-xs-4"><label class="btn btn-success btn-sm" ng-disabled="io_loading">{{ pair[0] }}</label></div> </div> </div> </div> </div> </div> <div class="panel panel-default" ng-show="strategy.public==1 || strategy.public==4" style="margin-top:10px"> <div class="panel-heading"> <h3 class="panel-title">{{\'ui.strategy.source\'|translate}}<span class="pull-right" style="color:black;font-size:5pt;color:green"> <i class="icon-language iconfont icon-lang-{{[\'javascript\', \'python\', \'cpp\', \'blockly\', \'my\'][strategy.language]}}"></i> &nbsp;{{[\'JavaScript\', \'Python\', \'Cpp\', \'Blockly\', \'My语言|MyLang\'][strategy.language]|trans}}</span> </h3> </div> <div class="panel-body" style="position:relative"> <div style="position: relative;height:400px" id="editor-area"> <div style="width:100%;height:100%" id="code-area" ng-show="strategy.language!=3"></div> <div style="width:100%;height:100%" id="blockly-area" ng-show="strategy.language==3"></div> </div> <div style="position: absolute;bottom:17px;width:100%;z-index:999"> <div align="center"> <a ng-if="(strategy.public==1 || strategy.public==4) && isLogin" href="m/copy-strategy/{{strategy.id}}" class="btn btn-success"><i class="fa fa-code-fork"></i>&nbsp;{{"ui.strategy.actionCopy"|translate}}</a> <a ng-if="(strategy.public==1 || strategy.public==4) && !isLogin" href="login" class="btn btn-warning" translate="ui.strategy.loginCopy"></a> <a href="javascript:history.go(-1)" class="btn btn-default" translate="ui.strategy.goBack"></a> <button class="btn btn-warning btn-large" ng-click="buyStrategy(strategy)" ng-if="!strategy.is_buy && !strategy.is_owner && strategy.public == 3"><i class="glyphicon glyphicon-shopping-cart"></i>&nbsp;{{\'ui.square.action.buy\'|translate}}</button> </div> </div> </div> </div> <div class="alert alert-danger" ng-if="strategy.is_deleted" translate="ui.strategy.tips.snapshot"></div> <div class="alert alert-danger" ng-if="strategy.public==2" translate="ui.strategy.tips.review"></div> <div ng-if="strategy.public==3"> <div class="alert alert-info" ng-if="strategy.is_buy" translate="ui.strategy.tips.alreadyBuy" translate-values="{buy_date: strategy.buy_date, expire_date: strategy.expire_date}"></div> </div> <blockquote ng-if="relevants.length>0"> {{\'ui.strategy.relevants\'|translate}} <div ng-repeat="ele in relevants" style="margin-left:15px;margin-top:5px;font-size: 80%;"> <i class="icon-language iconfont icon-lang-{{[\'javascript\', \'python\', \'cpp\', \'blockly\', \'my\'][ele.language]}}"></i>&nbsp;<a ng-href="strategy/{{ele.id}}">{{ ele.name | trans }}</a> </div> </blockquote> <div style="margin-top:5px;margin-bottom:15px" ng-if="strategy.name && !isOEM"> <div class="pull-right"> <share topic="strategy.name"></share> </div> <div style="clear:both"></div> </div> <div comment="\'S_\' + strategy.id" ng-if="!isOEM && strategy && strategy.id > 0"></div> </div> <div class="alert alert-danger" ng-if="error" translate="{{error}}"></div> ')}]),angular.module("views/timeline.html",[]).run(["$templateCache",function(a){a.put("views/timeline.html",'<div class="row" ng-loading> <div class="col-md-10 col-md-offset-1"> <div align="center" style="margin-bottom:10px"> <img src="images/logo.svg" width="256"> <div ng-if="version"> <span class="label label-success" style="background-color:#ffffff;border:1px solid #428bca;color:#428bca">{{\'ui.timeline.latest\'|translate}}&nbsp;{{version}}</span> </div> </div> <ul class="timeline"> <li ng-repeat="item in items" ng-class="$index%2==1 ? \'timeline-inverted\':\'\'"> <div ng-if="!item.version" class="timeline-badge"><i class="glyphicon glyphicon-ok"></i></div> <div ng-if="item.version" class="timeline-badge primary"><b>{{item.version}}</b></div> <div class="timeline-panel"> <div class="timeline-heading"> <p class="timeline-title text-muted">{{item.date}}</p> </div> <div class="timeline-body"> <p class="pre" ng-bind="item.content"></p> </div> </div> </li> </ul> </div> </div> ')}]),angular.module("botvsApp").controller("MainCtrl",["$scope","$translate","$location","session",function(a,b,c,d){if(a.exchanges=[],a.links=[],a.isLogin=d.isLogin(),a.isOEM=d.g.oem,a.lang=function(){return b.use()},a.isOEM)return void c.path(d.isLogin()?"/m/dashboard":"login");a.carousels=[{title:"ui.main.carousel.title1",subtitle:"ui.main.carousel.subtitle1",pic:"images/banner_1_"+b.use()+".png"},{title:"ui.main.carousel.title2",subtitle:"ui.main.carousel.subtitle2",pic:"images/carousel_1.png"},{title:"ui.main.carousel.title3",subtitle:"ui.main.carousel.subtitle3",pic:"images/carousel_2.png"},{title:"ui.main.carousel.title4",subtitle:"ui.main.carousel.subtitle4",pic:"images/carousel_3.png"}];var e=Math.max(0,parseInt(((new Date).getTime()-new Date("2019/03/01 00:00:00").getTime())/864e5));a.counters=[{name:"宽客数量|Quants",val:62202+100*e+e%10},{name:"在线用户|Online",val:6261+32*e+e%10},{name:"运行实盘|Running",val:5237+52*e+e%10},{name:"策略总数|Strategies",val:180650+122*e+e%10}],a.products=[{name:"发明者量化企业版|FMZ Quant Enterprise Edition",desc:"完全本地化部署同时具备有线上完整的功能|Fully localized deployment with full online functionality"},{name:"高性能交易系统|High performance trading system",desc:"Golang与C++打造的高并发高容灾交易系统|Highly concurrent and high disaster recovery trading system built by Golang and C++"},{name:"专业市商系统|Market Making Product",desc:"对冲+风控+提供流动性与一体的多功能策略|Hedging + risk control + MM strategy to provide liquidity"}],d.rest(["GetSettings","GetExchangeList"],[["index"],[]]).then(function(b){try{var c=angular.fromJson(b[0].result);c.showLogo=c.showLogo.toLowerCase(),a.links=c.links,"all"==c.showLogo?a.exchanges=b[1].result.exchanges:a.exchanges=_.filter(b[1].result.exchanges,function(a){return-1!==c.showLogo.indexOf(a.eid.toLowerCase())})}catch(a){}})}]),angular.module("botvsApp").controller("LoginCtrl",["$scope","$location","session","encrypt","dialog",function(a,b,c,d,e){a.isLogin=c.isLogin,a.username=c.getRememberUser(),a.password="",a.customTitle="ui.login.title",window.__oem_custom&&window.__oem_custom.Title&&(a.customTitle=window.__oem_custom.Title),a.submit=function(){if(""!=a.username&&""!=a.password){a.error="";var f=[a.username,d.encryptPassword(a.password),""];a.pending=!0,c.rest("Login",f).then(function(d){if(c.rememberUser(a.username),0===d)b.path(c.isShadow()?"/m/robots":"/m/dashboard");else if(-1===d)a.error="ui.alert.login.incorrect",e.alert(a.error);else if(-2===d){var g={title:"ui.dialog.title.twofactor",inputname:"ui.dialog.input.google",inputtype:"input",description:"ui.dialog.input.googleTips",confirmname:"ui.dialog.btnLogin",onConfirm:function(d,e){a.pending=!1,f[2]=d,c.rest("Login",f).then(function(d){-3===d?e(!1,"ui.alert.login.twofactorError",3e3):0===d?(e(!0),c.rememberUser(a.username),b.path(c.isShadow()?"/m/robots":"/m/dashboard")):e(!1,"ui.alert.login.unknownError",3e3)},function(a){e(!1,a,3e3)})}};e.prompt(g)}else-4==d&&(a.error="ui.alert.login.locked",e.alert(a.error));a.pending=!1},function(b){a.pending=!1,e.alert(b)})}}}]),angular.module("botvsApp").run(["$rootScope","$window","$route","$interval","localStorageService","$translate","$location","session","dialog","util",function($rootScope,$window,$route,$interval,localStorageService,$translate,$location,session,dialog,util){$rootScope.$on("onTicket",function(a,b){var c="["+util.strHash(angular.toJson(b))+"]",d=session.KV_Get("notify_hash","").toString();if(-1==d.indexOf(c)){d.length>2048&&(d=d.slice(1e3,d.length)),session.KV_Set("notify_hash",d+c);var e="string"==typeof b.username?" @ "+b.username:"",f="["+$translate.instant("ui.nav.ticket")+" - "+b.event+"]"+e;if(window.Notification){var g=function(){new Notification(f,{body:b.content,icon:"/images/badge.png"})};"default"===Notification.permission?Notification.requestPermission(function(a){"denied"!==a&&g()}):g()}else dialog.notify(f+(b.content?"\n"+b.content:""),6e4)}}),$rootScope.g=session.g,$rootScope.isLogin=session.isLogin,$rootScope.getUser=session.getUser,$rootScope.isShadow=session.isShadow,$rootScope.getLang=function(){var a=localStorageService.get("lang");return"zh_CN"!=a&&"en_US"!=a&&"ja_JP"!=a&&(a="zh"===(navigator.language||navigator.userLanguage).split("-")[0]?"zh_CN":"en_US",_.each(["baidu","sogou","prerender"],function(b){-1!=navigator.userAgent.indexOf(b)&&(a="zh_CN")})),a},$rootScope.switchLang=function(a){void 0===a&&(a="zh_CN"==$rootScope.getLang()?"en_US":"zh_CN"),moment.locale(a.split("_")[0]),localStorageService.set("lang",a),$translate.use(a)},$rootScope.getLangName=function(){return"ui.lang."+$rootScope.getLang().replace("_","")},$rootScope.switchLang($rootScope.getLang());var ga_tasks=[],ga=function(a,b,c,d){$window.__OEM__||ga_tasks.push([a,b,c,d])};$window.__OEM__||session.rest("GetSettings","scripts",!0).then(function(result){if("string"==typeof result&&result.length>0)try{eval(result)}catch(a){console.log(a)}});var currentPath="/";$rootScope.loading=!1,$rootScope.isCollapsed=!0;var navs=[["ui.nav.index","/",0,0,"glyphicon glyphicon-home"],["ui.nav.dashboard","/m/dashboard",1,0,"glyphicon glyphicon-dashboard",1],["ui.nav.status","/m/stats",3,0,"glyphicon glyphicon-cloud",1],["ui.nav.square","/square",2,0,"glyphicon glyphicon-shopping-cart"],["ui.nav.live","/live",2,0,"glyphicon glyphicon-play-circle"],["ui.nav.digest","/digest",2,0,"glyphicon glyphicon-education"],["ui.nav.bbs","/bbs",2,0,"glyphicon glyphicon-star"],["ui.nav.market.index","/markets",2,0,"glyphicon glyphicon-sunglasses"],["ui.nav.products","/products",2,0,"glyphicon glyphicon-fire"],["ui.nav.api","/api",2,0,"glyphicon glyphicon-info-sign"]];$window.__OEM__&&(navs=[["ui.nav.dashboard","/m/dashboard",1,0,"fa fa-dashboard",1],["ui.dashboard.tabs.robotNav","/m/robots",1,0,"fa fa-tasks",1],["ui.dashboard.tabs.strategyNav","/m/strategies",1,0,"fa fa-cube",1],["ui.dashboard.tabs.dockerNav","/m/nodes",1,0,"fa fa-cloud",1],["ui.dashboard.tabs.platformNav","/m/platforms",1,0,"fa fa-university",1],["ui.nav.trade","/m/trade",1,0,"fa fa-calculator",1]],void 0!==util.tradeFilters.modules&&(_.contains(util.tradeFilters.modules,"square")&&navs.push(["ui.nav.square_oem","/square",1,0,"glyphicon glyphicon-fire"]),_.contains(util.tradeFilters.modules,"live")&&navs.push(["ui.nav.live_oem","/live",1,0,"glyphicon glyphicon-play-circle",1]))),$rootScope.navs=navs,$rootScope.rightNavs=[["ui.nav.signup","/sign-up",0,1,"glyphicon glyphicon-user"],["ui.nav.login","/login",0,1,"glyphicon glyphicon-log-in"]];var isDashboardRoute=function(a){return!$window.__OEM__&&0==a.indexOf("/m/")};$rootScope.clsNav=function(a){var b=$location.path();return isDashboardRoute(b)&&"/m/stats"!=b&&(b="/m/dashboard"),"/"!==a[1]?0==b.indexOf(a[1])?"active":"":b===a[1]?"active":""},$rootScope.clsAdmin=function(){return"/m/account"==$location.path()?"active":""},$rootScope.getNotify=function(){return void 0===window.notify?0:window.notify},$rootScope.isDashboard=function(){return isDashboardRoute($location.path())},$rootScope.isFluid=function(){var a=$location.path();if($window.__OEM__)return"/login"==a;if("/"==a)return!0;for(var b=["/m/","/agreement","/about","/api","/doc","/products"],c=0;c<b.length;c++)if(0==a.indexOf(b[c]))return!0;return!1},$rootScope.visable=function(a,b){if(void 0===a[5]&&session.isShadow())return!1;if(void 0!==b&&b!==a[3])return!1;if(2==a[2])return!0;var c=session.isLogin();return 3===a[2]?c&&session.isAdmin()&&"zero"===session.getUser().toLowerCase():0==a[2]?!c:c},$rootScope.getUser=session.getUser,$rootScope.logout=function(){session.logout()};var seoUpdate=function(a){if(!$window.__OEM__){var b=document.getElementsByTagName("meta");_.each(["description","keywords"],function(c){if(b&&"object"==typeof b[c]&&"function"==typeof b[c].setAttribute){var d=a&&void 0!==a.seo?a.seo[c]:null;d="keywords"==c?$translate.instant(d||"ui.seo.main."+c):$translate.instant(d||$window.document.title||"ui.seo.main."+c),b[c].setAttribute("content",d)}})}};$rootScope.$on("titleChange",function(a,b){$window.document.title=$translate.instant(b),seoUpdate()}),$rootScope.$on("$routeChangeStart",function(a,b,c){$rootScope.isCollapsed=!0,$rootScope.previousPage=location.pathname+location.search});var oemTitle="";void 0!==window.__oem_custom&&"string"==typeof window.__oem_custom.Title&&(oemTitle=window.__oem_custom.Title),$rootScope.$on("$routeChangeSuccess",function(a,b,c,d){ga("send","pageview",$location.path(),$rootScope.previousPage);var e=$window.__OEM__?oemTitle:"ui.title.index";void 0!==b&&void 0!==b.title&&(e=$route.current.title),$window.scrollTo(0,0),$window.document.title=$translate.instant(e),seoUpdate(b),$(".goTopFix").hide()})}]),angular.module("botvsApp").controller("ApiCtrl",["$scope","$location","$interval","$routeParams","$filter","$translate","session","util","dialog",function(a,b,c,d,e,f,g,h,i){a.content="",a.title=f.instant("ui.nav.api"),a.lang=f.use,a.showJump=!1;a.counter=5;var j="",k=null;if(a.$on("$destroy",function(){null!=k&&c.cancel(k)}),-1!=b.path().indexOf("redirect")){var l=h.Base58.decode(d.url);return a.showJump=l,void("number"==typeof window.__jumpStatus?location.href=l:k=c(function(){--a.counter<=0&&(location.href=l)},1e3,5))}var m=function(a){window.__jumpStatus=1,b.path("/api/redirect/"+h.Base58.encode(a))},n=function(c){if(j!=c){if(j=c,void 0!==d.id&&-1!=b.path().indexOf("doc")){if(a.content.length>0)return;return void g.rest("GetBBSTopic",parseInt(d.id),!1,!0).then(function(b){a.content=b.content,a.title=b.title,a.$emit("titleChange",e("trans")(b.title))})}g.rest("GetSettings","api_"+c).then(function(b){if(-1!=b.indexOf("http")){var c=b.split("bbs-topic/");2==c.length?g.rest("GetBBSTopic",parseInt(c[1]),!1,!0).then(function(b){a.content=b.content,a.$emit("titleChange",e("trans")(b.title))}):m(b)}else a.content=b},function(a){i.alert(a)})}};a.$watch("lang()",function(a,b){n(a)}),n(f.use())}]),angular.module("botvsApp").controller("NotFoundCtl",["$scope",function(a){}]),angular.module("botvsApp").controller("SignUpCtrl",["$scope","$location","localStorageService","$routeParams","session","dialog","encrypt",function(a,b,c,d,e,f,g){a.email=a.password=a.username="",a.authCode="",a.isOEM=e.g.oem,a.isLogin=e.isLogin,a.isDemo=e.g.oem&&-1!=document.domain.indexOf(".fmz.com"),a.isDemo&&(a.authCode="7a2f8bb7e2142459d9aa8a88e1e5bd62"),a.isAgree=!0;var h=e.g.ref_user;void 0!==d.ref&&d.ref.length>0&&(h=d.ref,e.KV_Set("ref_user",h)),e.KV_Get("ref_used",0)>0&&(h=""),a.submit=function(){return a.isAgree?0==a.username.length||0==a.email.length||0==a.password.length?void f.alert("ui.alert.signup.unCompleted"):a.password.length<10?void f.alert("ui.alert.signup.passwordShort"):(a.pending=!0,void e.rest("Signup",[a.username,a.email,g.encryptPassword(a.password),a.authCode,h,e.g.ref_url]).then(function(c){a.pending=!1,0===c?(e.KV_Set("ref_used",1),e.rememberUser(a.username),b.path("/m/dashboard")):(-1===c?a.error="ui.alert.signup.limit":-2===c?a.error="ui.alert.signup.emailWrong":-3===c?a.error="ui.alert.signup.repeat":-4===c?a.error="ui.alert.signup.refWrong":-6===c?a.error="ui.alert.signup.authCodeWrong":(console.log(c),a.error="ui.alert.signup.inputWrong"),f.alert(a.error))},function(b){a.pending=!1,f.alert(b)})):void $("#shake").shake({speed:80})}}]),
angular.module("botvsApp").controller("ResetPasswordCtrl",["$scope","$filter","session","dialog",function(a,b,c,d){a.uncompleted=!0,a.pending=!1,a.email="",a.submit=function(){a.frm.$invalid||(a.pending=!0,c.rest("ResetPassword",a.email).then(function(c){a.pending=!1,c?a.uncompleted=!1:(a.error=b("trans")("邮箱不存在!!|Invalid email address !!"),d.alert(a.error))},function(b){a.pending=!1,d.alert(b)}))}}]),angular.module("botvsApp").controller("ResetTwofactorCtrl",["$scope","dialog","session","encrypt",function(a,b,c,d){a.uncompleted=!0,a.username="",a.password="",a.email="",a.submit=function(){a.frm.$invalid||(a.pending=!0,a.error="",c.rest("ResetTwofactor",[a.username,d.encryptPassword(a.password),a.email]).then(function(b){a.pending=!1,b?a.uncompleted=!1:a.error="ui.resettwofactor.alertError"},function(c){a.pending=!1,b.alert(c)}))}}]),angular.module("botvsApp").controller("DisableTwofactorCtrl",["$scope","$routeParams","dialog","session",function(a,b,c,d){a.uncompleted=!0,a.submit=function(){a.error="",d.rest("DisableTwofactor",b.token).then(function(b){b?a.uncompleted=!1:a.error="链接已经失效，请重新发送解除邮件 !|The link has expired, please re send the mail !"},function(a){c.alert(a)})}}]),angular.module("botvsApp").controller("SetPasswordCtrl",["$scope","$routeParams","dialog","session","encrypt",function(a,b,c,d,e){a.uncompleted=!0,a.password=a.repassword="",a.submit=function(){a.frm.$invalid||(a.error="",d.rest("SetPassword",[b.token,e.encryptPassword(a.password)]).then(function(b){b?a.uncompleted=!1:a.error="重置密码链接已经失效，请重新找回密码!|Reset password link has expired, please re find the password!"},function(a){c.alert(a)}))}}]),angular.module("botvsApp").controller("SquareCtrl",["$scope","$location","$translate","$routeParams","session","dialog","util","component",function(a,b,c,d,e,f,g,h){if(a.isLogin=e.isLogin(),a.g=e.g,e.g.oem&&!e.isLogin())return void b.path("/login");a.keyword="";var i=-1,j=1,k=Math.max(30,Math.ceil(window.screen.height/50));void 0!==d.category&&(isNaN(d.category)?0!=d.category.indexOf("s:")&&0!=d.category.indexOf("s-")||(a.keyword=d.category.substring(2),a.$emit("titleChange","策略广场 - "+a.keyword+" 的搜索结果")):i=parseInt(d.category)),void 0!==d.page&&(j=parseInt(d.page)),a.category_id=i,a.public_strategies=[],a.strategies_all=0,a.categories=g.categories;a.pages=[],a.tags=[],a.skw=a.keyword,a.search=function(){""!=a.skw?b.path("/square/s:"+a.skw.replace(/[\/'"%]/g,"")+"/1"):b.path("/square")},e.rest(["GetStrategyTags","GetStrategyListByName"],[[],[(j-1)*k,k,-2,i,0,a.keyword]],!1,!0).then(function(b){if(b){a.tags=b[0].result;var c=b[1].result,d=c.strategies;a.strategies_all=c.all,a.pages=g.getPages(a.strategies_all,k,j);for(var e=0;e<d.length;e++)d[e].category_name=g.getCategoryName(d[e].category),d[e].tags.length>0?d[e].tagsArr=d[e].tags.split(","):d[e].tagsArr=[],a.public_strategies.push(d[e])}else f.alert("Error")},function(a){f.alert(a)}),a.buyStrategy=h.dialogBuyStrategy}]),angular.module("botvsApp").controller("MDashboardCtrl",["$scope","$window","$location","$translate","$timeout","$interval","dialog","session","util",function(a,b,c,d,e,f,g,h,i){if(a.account={},a.summary={},a.logs=[],a.g=h.g,a.isOEM=b.__OEM__,!h.isLogin())return void c.path("/login");if(h.isShadow())return void c.path("/m/robots");var j=0;a.serverTime=a.localTime=moment().format("YYYY-MM-DD HH:mm:ss");var k=f(function(){var b=(new Date).getTime();a.serverTime=moment(b).format("YYYY-MM-DD HH:mm:ss"),a.localTime=moment(b+j).format("YYYY-MM-DD HH:mm:ss")},1e3);a.$on("$destroy",function(){null!=k&&(f.cancel(k),k=null)}),a.clearBroadcast=function(b){var c=a.broadcasts[a.broadcasts.length-1].id;h.rest("SetBroadcast",c).then(function(b){a.broadcasts=[]},function(a){g.alert(a)})};var l=introJs();a.$on("$destroy",function(){l.exit()}),a.showGuide=function(){l.setOptions({steps:[{element:"#step1",intro:d.instant("ui.dashboard.step1")},{element:"#step2",intro:d.instant("ui.dashboard.step2"),position:"right"},{element:"#step3",intro:d.instant("ui.dashboard.step3"),position:"left"},{element:"#step4",intro:d.instant("ui.dashboard.step4")},{element:"#guid_info",intro:d.instant("ui.dashboard.step5")}]}),l.start()};var m=["GetBroadcast","GetAccount","GetAccountSummary","GetServerTime","GetAccountSecurity"],n=[[100],[],[],[],[5]];h.rest(m,n).then(function(c){if(!c)return void g.alert("Error");void 0!==c[0].error&&c[0].error||(a.broadcasts=c[0].result.items);var d=c[1].result;a.account=d;var f=function(){return[{path:"/m/pricing",name:"ui.const.balance",val:(h.g.balance/1e8).toFixed(3)},{path:"/m/invoice",name:"ui.const.consumed",val:(h.g.consumed/1e8).toFixed(3)}]};b.__OEM__?a.summary_bill=[]:(a.summary_bill=f(),a.$on("onCharge",function(b,c){a.summary_bill=f()}));var i=c[2].result;a.summary_use=[{path:"/m/strategies",name:"ui.dashboard.tabs.strategyNav",icon:"fa fa-cube",val:i.premium_strategy+i.strategy},{path:"/m/platforms",name:"ui.dashboard.tabs.platformNav",icon:"fa fa-university",val:i.platform},{path:"/m/nodes",name:"ui.dashboard.tabs.dockerNav",icon:"fa fa-cloud",val:i.node},{path:"/m/robots",name:"ui.dashboard.tabs.robotNav",icon:"fa fa-tasks",val:i.robot}],a.summary_msg=[{path:"/m/account",name:"ui.account.tabs.push",val:i.pushQueue},{path:"/m/account",name:"ui.account.tabs.alert",val:i.apmQueue},{path:"/m/account",name:"ui.account.tabs.notify",val:i.bbsNotify},{path:"/m/tickets",name:"ui.account.tabs.ticket",val:i.ticketNotify}],a.summary_link=[{path:"/m/add-strategy",name:"ui.dashboard.tabs.strategy.new",icon:"fa fa-plus"},{path:"https://wex.app",name:"ui.nav.sandbox",icon:"fa fa-magic"},{path:"/m/debug",name:"ui.nav.debug",icon:"fa fa-flask"},{path:"/m/trade",name:"ui.nav.trade",icon:"fa fa-calculator"}],a.isOEM&&(a.summary_link[1]={path:"/m/platforms",name:"ui.dashboard.link.bindApi",icon:"fa fa-magic"}),j=c[3].result/1e6-(new Date).getTime(),a.logs=c[4].result.logs,a.logs.length<2&&!h.KV_Get("guide",!1)&&(h.KV_Set("guide",!0),e(a.showGuide,100))},function(a){g.alert(a)})}]),angular.module("botvsApp").controller("MRobotCtrl",["$scope","$routeParams",function(a,b){a.robotId=parseInt(b.id)}]),angular.module("botvsApp").controller("MAccountCtrl",["$scope","$routeParams","$window","$location","$translate","util","dialog","encrypt","session",function(a,b,c,d,e,f,g,h,i){function j(a){if(a.key.length>0&&!o){o=!0;try{$("#qrcode").qrcode({width:150,height:150,text:"otpauth://totp/"+a.username+"@BotVS?secret="+a.key})}catch(b){$("#qrcode").qrcode({width:150,height:150,text:"otpauth://totp/BotVS?secret="+a.key})}}}function k(b,c,d,g){window.notify=0;for(var h=0;h<b.items.length;h++)b.items[h].data=f.getStrStyle(b.items[h].text);for(var h=0;h<c.items.length;h++){var i=[],j=c.items[h].status;j&m&&i.push("微信"),j&n&&i.push("邮箱");var k="6分钟后重试";i.length>0&&(k=i.join(",")+" 通知成功"),c.items[h].statusStr=k}a.messages=b.items,a.apms=c.items,a.notifications=d.items,a.ticket_notifications=g.items,_.each(a.ticket_notifications,function(a){":closed_by_user"==a.text?a.text=e.instant("ui.ticket.closedByUser"):":closed_by_admin"==a.text&&(a.text=e.instant("ui.ticket.closedByAdmin"))});for(var h=0;h<a.notifications.length;h++){a.notifications[h].timeAgo=moment(a.notifications[h].date).fromNow();var l=/^([SRBM])_(\d+)$/g,o=l.exec(a.notifications[h].md5);o&&("S"==o[1]?a.notifications[h].link="strategy/"+o[2]:"R"==o[1]?a.notifications[h].link="robot/"+o[2]:"M"==o[1]?a.notifications[h].link="market-item/"+o[2]:a.notifications[h].link="bbs-topic/"+o[2])}}function l(a,b){for(var c=0;c<a.length;c++)if(b==a[c].id){a.splice(c,1);break}}a.isOEM=c.__OEM__,a.messages=[],a.apms=[],a.notifications=[],a.ticket_notifications=[],a.nickName="",a.alertThreshold=1,a.googleKey="",a.googleCode="",a.isSupportWechat=!1,a.isSupportTelegram=!1,a.isOEM?(void 0!==f.tradeFilters.modules&&_.contains(f.tradeFilters.modules,"wechat")&&(a.isSupportWechat=!0),a.isSupportTelegram=!1):(a.isSupportWechat=!0,a.isSupportTelegram=!0),a.snsKey="",a.useGoogleAuth=!1,a.account={sns:{wechat:!1,telegram:!1,phone:!1,email:!1},level:0},a.defTab=b.tab||"tabMessage",a.getCls=function(b,c){return"string"!=typeof c&&(c=""),c+" "+(b==a.defTab?"active":"inactive")},a.$on("onSNS",function(b,c){for(var d in a.account.sns)a.account.sns[d]=c[d]||!1;i.rest("GetSNSKey").then(function(b){a.snsKey=b.snskey}),a.$digest()}),a.invitationURL="",a.getUser=i.getUser,a.g=i.g,a.newMember={id:-1,username:"",password:"",permission:[]},a.shadowMember=[],a.robots=[],a.permissions=[{id:0,name:"- ALL -"}],a.oldPassword=a.password=a.repassword="",a.affiliate=[],a.banners=[{size:"160x600"},{size:"300x250"},{size:"468x60"},{size:"628x628"},{size:"728x90"},{size:"800x418"},{size:"800x800"},{size:"1200x600"},{size:"1200x628"},{size:"1200x800"}],a.apiKeyList=[];var m=1,n=2;a.pushSettings=[{key:"wechat",type:m,name:"微信|Wechat",checked:!0,hide:!a.isSupportWechat},{type:n,name:"邮箱|Email",value:"",placeholder:"abc@abc.com",checked:!1},{type:8,name:"WebHook",value:"http://abc.com/push.php?data={body}",placeholder:"http://abc.com/push.php?data={body}",checked:!1},{key:"telegram",type:16,name:"Telegram",checked:!0,hide:!a.isSupportTelegram}];var o=!1;a.$on("onCharge",function(b,c){a.$digest()}),a.remove_ticket_notify=function(b){g.confirm(-1==b?"ui.dialog.account.emptyNotify":"ui.dialog.account.deleteNotify").then(function(){a.pending=!0,i.rest("DeleteTicketNotify",b).then(function(c){a.pending=!1,-1==b?a.ticket_notifications=[]:f.deleteById(a.ticket_notifications,b)},function(b){a.pending=!1,g.alert(b)})})},a.remove_notify=function(b){g.confirm(-1==b?"ui.dialog.account.emptyNotify":"ui.dialog.account.deleteNotify").then(function(){a.pending=!0,i.rest("DeleteNotify",b).then(function(c){a.pending=!1,-1==b?a.notifications=[]:f.deleteById(a.notifications,b)},function(b){a.pending=!1,g.alert(b)})})},a.remove_message=function(b){g.confirm(-1==b?"ui.dialog.account.emptyQueue":"ui.dialog.account.deleteQueue").then(function(){a.pending=!0,i.rest("DeleteMessage",b).then(function(c){if(a.pending=!1,-1==b)a.messages=[];else for(var d=0;d<a.messages.length;d++)if(a.messages[d].id==b){a.messages.splice(d,1);break}},function(b){a.pending=!1,g.alert(b)})})},a.remove_apm=function(b){g.confirm(-1==b?"ui.dialog.account.emptyApm":"ui.dialog.account.deleteApm").then(function(){a.pending=!0,i.rest("DeleteAPMMessage",b).then(function(c){if(a.pending=!1,-1==b)a.apms=[];else for(var d=0;d<a.apms.length;d++)if(a.apms[d].id==b){a.apms.splice(d,1);break}},function(b){a.pending=!1,g.alert(b)})})},a.refreshMessage=function(){a.pending=!0,i.rest(["GetPushQueue","GetAPMQueue","GetBBSNotify","GetTicketNotify"],[[-1,-1],[-1,-1],[-1,-1],[-1,-1]]).then(function(b){a.pending=!1,k(b[0].result,b[1].result,b[2].result,b[3].result)},function(b){a.pending=!1,g.alert(b)})},a.pending=!0,i.rest(["GetGoogleAuthKey","GetShadowMember","GetPushQueue","GetAPMQueue","GetBBSNotify","GetTicketNotify","GetAccount","GetSettings","GetApiKeyList","GetSNSKey"],[[],[],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[],["affiliate"],[],[]]).then(function(b){a.pending=!1,k(b[2].result,b[3].result,b[4].result,b[5].result);var c=b[0].result;a.nickName=c.nickname,a.googleKey=c.key,a.useGoogleAuth=""===c.key,j(c);for(var d=b[1].result.robots,e=0;e<d.length;e++)a.permissions.push({id:d[e].id,name:d[e].name});a.shadowMember=b[1].result.items;for(var e=0;e<a.shadowMember.length;e++)if(a.shadowMember[e].last_input>0?a.shadowMember[e].alive=moment(a.shadowMember[e].last_input/1e6).format("YYYY-MM-DD HH:mm:ss"):a.shadowMember[e].alive="--","0"==a.shadowMember[e].permission)a.shadowMember[e].permission=[a.permissions[0]];else{var f=a.shadowMember[e].permission.split(",");a.shadowMember[e].permission=[];for(var g=0;g<f.length;g++)for(var h=0;h<a.permissions.length;h++)parseInt(f[g])==a.permissions[h].id&&a.shadowMember[e].permission.push(a.permissions[h])}var i=b[6].result;for(var l in a.account.sns)void 0===i.sns[l]&&(i.sns[l]=!1);a.account=i,a.alertThreshold=parseFloat(a.account.settings.alertThreshold||0);var m=a.account.settings.push;if("string"==typeof m&&m.length>0)try{var n=angular.fromJson(m);_.each(a.pushSettings,function(a){void 0!==n[a.type]&&("string"==typeof n[a.type].value&&(a.value=n[a.type].value),a.checked=n[a.type].checked)})}catch(a){console.log(a)}if("string"==typeof a.account.invitation_code&&a.account.invitation_code.length>0&&(a.invitationURL=location.protocol+"//"+location.host+"/sign-up/"+a.account.invitation_code),a.apiKeyList=b[8].result,a.snsKey=b[9].result.snskey,a.account.promotion_balance=0,"string"==typeof b[7].result&&b[7].result.length>0)try{var n=JSON.parse(b[7].result),o=0,p=[];for(var q in n){n[q];i.level>=q&&o<n[q]&&(o=n[q]),p.push([Number(q),Number(n[q])])}p.sort(function(a,b){return a[0]-b[0]}),a.affiliate=p,a.account.promotion_balance=o}catch(a){console.log(a)}},function(b){a.pending=!1,g.alert(b)}),a.unbindSNS=function(b){g.confirm("ui.dialog.account.unbindWeixinConfirm").then(function(){i.rest("UnbindSNS",b).then(function(c){c?(a.account.sns[b]=!1,g.alert("ui.dialog.alertSuccess")):g.alert("ui.dialog.alertFailure")},function(a){g.alert(a)})})},a.bindGoogle=function(){""!==a.googleCode&&g.confirm(a.useGoogleAuth?"ui.dialog.account.unbindGoogleConfirm":"ui.dialog.account.bindGoogleConfirm").then(function(){i.rest("BindGoogleAuth",[a.googleCode,a.googleKey]).then(function(b){b?(a.useGoogleAuth=""===b.key,a.googleKey=b.key,j(b),a.googleCode="",g.alert("ui.dialog.alertSuccess")):g.alert("ui.dialog.account.GoogleCodeError")},function(a){g.alert(a)})})},a.changePushSettings=function(){g.confirm("ui.dialog.account.changePushSettings").then(function(){var b={};_.each(a.pushSettings,function(a){b[a.type]={checked:a.checked},"string"==typeof a.value&&(b[a.type].value=a.value)}),i.rest("ChangeSettings",["push",angular.toJson(b)]).then(function(a){a?g.alert("ui.dialog.alertSuccess"):g.alert("ui.dialog.account.changePushSettingsError")},function(a){g.alert(a)})})},a.changeAlertThreshold=function(){g.confirm("ui.dialog.account.changeAlertThresholdConfirm").then(function(){i.rest("ChangeSettings",["alertThreshold",a.alertThreshold]).then(function(a){a?g.alert("ui.dialog.alertSuccess"):g.alert("ui.dialog.account.changeAlertThresholdError")},function(a){g.alert(a)})})},a.changeNickName=function(){g.confirm("ui.dialog.account.changeNickNameConfirm").then(function(){i.rest("ChangeNickName",[a.nickName]).then(function(a){a?g.alert("ui.dialog.alertSuccess"):g.alert("ui.dialog.account.changeNickNameError")},function(a){g.alert(a)})})},a.changePassword=function(){a.frm.$invalid||a.oldPassword===a.password||g.confirm("ui.dialog.account.changePasswordConfirm").then(function(){i.rest("ChangePassword",[h.encryptPassword(a.oldPassword),h.encryptPassword(a.password)]).then(function(b){b?(g.alert("ui.dialog.account.changePasswordSuccess"),window.__passwordCache="",i.logout()):(a.error="ui.dialog.account.changePasswordError",g.alert(a.error))},function(a){g.alert(a)})})},a.saveShadowMember=function(b){if(0!=a.newMember.username.length)return 0==a.newMember.permission.length?void g.alert("ui.dialog.account.emptyACL"):b<=0&&a.newMember.password<10?void g.alert("ui.dialog.account.shortPassword"):void g.confirm(b>0?"ui.dialog.account.changeMemberConfirm":"ui.dialog.account.createMemberConfirm").then(function(){for(var c=[],d=0;d<a.newMember.permission.length;d++){if(0==a.newMember.permission[d].id){c=[0];break}c.push(a.newMember.permission[d].id)}var e=a.newMember.password;e.length>0&&(e=h.encryptPassword(e)),i.rest("SaveShadowMember",[b,a.newMember.username,e,c]).then(function(c){if(c){if(-1===b)a.shadowMember.push({id:c,username:a.newMember.username,status:0,permission:a.newMember.permission,last_login_ip:"--",last_login:"--"});else for(var d=0;d<a.shadowMember.length;d++)if(a.shadowMember[d].id==b){a.shadowMember[d].permission=a.newMember.permission;break}g.alert("ui.dialog.alertSuccess")}else a.error="ui.dialog.account.memberRepeat",g.alert(a.error)},function(a){g.alert(a)})})},a.deleteShadowMember=function(b){g.confirm("ui.dialog.account.deleteMemberConfirm").then(function(){i.rest("DeleteShadowMember",b.id).then(function(c){c&&l(a.shadowMember,b.id)},function(a){g.alert(a)})})},a.changeShadowMember=function(b){a.newMember={id:b.id,username:b.username,password:"",permission:b.permission}},a.lockShadowMember=function(a){var b=0==a.status?1:0;g.confirm(0==a.status?"ui.dialog.account.lockMemberConfirm":"ui.dialog.account.unlockMemberConfirm").then(function(){i.rest("LockShadowMember",[a.id,b]).then(function(c){c&&(a.status=b,g.alert("ui.dialog.alertSuccess"))},function(a){g.alert(a)})})},a.createApiKey=function(){g.confirm("ui.dialog.account.createApiKeyConfirm").then(function(){i.rest("CreateApiKey",["",""]).then(function(b){b?(a.apiKeyList.push({id:b.id,access_key:b.access_key,secret_key:b.secret_key,status:0,date:b.date}),g.alert("ui.dialog.alertSuccess")):g.alert(a.error)},function(a){g.alert(a)})})},a.lockApiKey=function(a){var b=0==a.status?1:0;g.confirm(0==a.status?"ui.dialog.account.lockApiKeyConfirm":"ui.dialog.account.unlockApiKeyConfirm").then(function(){i.rest("LockApiKey",[a.id,b]).then(function(c){c&&(a.status=b,g.alert("ui.dialog.alertSuccess"))},function(a){g.alert(a)})})},a.deleteApiKey=function(b){g.confirm("ui.dialog.account.deleteApiKeyConfirm").then(function(){i.rest("DeleteApiKey",b.id).then(function(c){c&&l(a.apiKeyList,b.id)},function(a){g.alert(a)})})},a.showLink=function(a){d.path(a)},a.transPoints=function(){var b={title:"ui.account.transPoints",inputname:"ui.account.points",inputtype:"number",defaultValue:a.account.points,confirmname:"ui.account.transPointsBtn",onConfirm:function(b,c){if((b=parseInt(b))<=0||b>a.account.points)return void c(!1,"ui.account.transPointsFail",3e3);i.rest("TransPoints",[parseInt(b)]).then(function(b){b?i.rest("GetAccount").then(function(b){_.extend(a.account,b),c(!0)}):c(!1,"ui.account.transPointsFail",3e3)},function(a){c(!1,a,1e3)})},onExit:function(){g.alert("ui.account.transPointsSuccess")}};g.prompt(b)}}]),angular.module("botvsApp").controller("MAddRobotCtrl",["$scope","$routeParams","$location","$filter","$translate","$timeout","util","session","dialog","encrypt",function(a,b,c,d,e,f,g,h,i,j){a.complete=!1,a.name="",a.strategies=[],a.platforms=[],a.nodes=[],a.io_pending=!1,a.isAgree=!0,a.node_selected_id="-1",a.isOEM=h.g.oem,a.kticks=g.kticks.slice(0),a.ktick_selected=a.kticks[4],a.pairs_select=[],a.option={},a.$on("onNodeUpdate",function(b,c){var d=_.findIndex(a.nodes,{id:c.id});if(0===c.event)c.online=!0,-1==d?a.nodes.push(c):a.nodes[d]=c;else{if(-1===d)return;var e=a.nodes[d],f="";switch(c.event){case 0:case 2:e.online=!0,f="状态为正常";break;case 3:e.online=!1,f="状态为离线";break;case 1:f="状态为退出",a.nodes.splice(d,1)}e.desc=e.id+" : "+e.ip+" - "+e.os+(e.name?" ("+e.name+")":""),""!==f&&i.notify("托管者 IP: "+e.ip+" "+f)}a.$digest()}),a.hasPublic=function(){for(var b=0;b<a.nodes.length;b++)if(1==a.nodes[b].public&&!a.nodes[b].is_owner&&-2!=a.nodes[b].id)return!0;return!1},a.hasPrivate=function(){for(var b=0;b<a.nodes.length;b++)if((0==a.nodes[b].public||a.nodes[b].is_owner)&&-1!=a.nodes[b].id)return!0;return!1},h.rest(["GetPlatformList","GetStrategyList","GetNodeList"],[[],[-1,-1,-1,-1,2],[]]).then(function(c){if(a.complete=!0,c){var f=[],h=c[0].result.platforms,j=!1;_.each(c[2].result.nodes,function(b){if(!(b.id>0&&"string"!=typeof b.peer)){if(1!=b.public||b.is_owner)b.desc=b.id+" : "+b.ip+" - "+b.os+(b.name?" ("+b.name+")":""),j=!0;else{var c=d("trans")(b.region);0==c.length&&(c=b.name),-1==c.indexOf("N/A")&&0!=c.length||(c=b.name),b.desc=c+" : "+b.ip+" - "+b.os+" ("+e.instant("ui.const.publicUse")+")"}a.nodes.push(b)}}),a.node_selected_id=j?"-1":"-2";for(var k=e.instant("ui.strategy.type.cryptocurrency"),l=0;l<h.length;l++){var m=h[l],n="";n="Futures_CTP"==m.eid||"Futures_Esunny"==m.eid?e.instant("ui.strategy.type.futures"):"Futures_LTS"==m.eid?e.instant("ui.strategy.type.stocks"):k,f.push({id:m.id,eid:m.eid,label:m.label,name:m.label,stocks:m.stocks.sort(),group:n})}f.length>0&&(a.platforms=f,a.option.platform=a.platforms[0],a.option.stock=a.platforms[0].stocks[0]);var o=c[1].result.strategies;if(_.each(o,function(a){30===a.category&&(a.name=a.name.substring(a.name.indexOf("-")+1)),a.templatesArgList=[],a.scriptArgList=[],g.parseArgs(a.args,a.scriptArgList),a.scriptArgGroup=g.parseArgGroup(a.scriptArgList),a.scriptArgList.length>0&&a.templatesArgList.push({id:-1,name:e.instant("ui.g.arguments"),group:a.scriptArgGroup,list:a.scriptArgList,cls:"panel panel-default"})}),_.each(o,function(b){b.hasArg=!1,b.category<20&&void 0!==b.templates&&_.each(b.templates,function(a){_.each(o,function(c){c.id===a&&(b.templatesArgList.push({id:c.id,name:c.name,group:c.scriptArgGroup,list:c.scriptArgList,cls:"panel panel-info"}),c.scriptArgList.length>0&&(b.hasArg=!0))})}),(b.is_owner&&30!==b.category||b.category<20)&&(b.scriptArgList.length>0&&(b.hasArg=!0),b.group=e.instant(g.getCategoryName(b.category)),a.strategies.push(b))}),a.strategies.length>0){a.strategies=_.sortBy(a.strategies,"category");var m=null;void 0!==b.sid&&(m=_.findWhere(a.strategies,{id:Number(b.sid)})),m||(m=a.strategies[0]),a.option.strategy=m}}else i.alert("Error")},function(b){a.complete=!0,i.alert(b)}),a.removePair=function(b){for(var c=0;c<a.pairs_select.length;c++)if(a.pairs_select[c].label==b.label&&a.pairs_select[c].stock==b.stock)return void a.pairs_select.splice(c,1)},a.addPair=function(){a.option.stock=a.option.stock.toUpperCase();for(var b=0;b<a.pairs_select.length;b++)if(a.pairs_select[b].label==a.option.platform.label&&a.pairs_select[b].stock==a.option.stock)return;a.pairs_select.push({id:a.option.platform.id,eid:a.option.platform.eid,label:a.option.platform.label,stock:a.option.stock})},a.showArg=g.argIsShow,a.submit=function(){var b=parseInt(a.node_selected_id);if(-2==b)return void i.alert("ui.alert.selectPublicDocker");var d=!1,e=_.findWhere(a.nodes,{id:b});e&&1==e.public&&!e.is_owner&&(d=!0);var f=a.pairs_select;if(!a.frm.$invalid&&0!=f.length){for(var k=[],l=[],m=0;m<f.length;m++){var n=f[m];k.push(n.id),l.push(n.stock)}var o=function(d){var e=g.argListArrayToArgs(a.option.strategy.templatesArgList,function(a){return j.encryptText("$$$__"+a,d)});a.io_pending=!0,h.rest("SaveRobot",[a.name,e.length>0?angular.toJson(e):"",a.option.strategy.id,a.ktick_selected.id,k,l,b]).then(function(b){var d="/m/robots";a.io_pending=!1,b>=0?(i.alert("ui.alert.robot.create.success"),c.path(d)):-1==b?i.alert("ui.alert.robot.create.strategyExpired"):-2==b?i.alert("ui.alert.robot.create.noDocker"):-3==b?(i.alert("ui.alert.robot.create.syntaxError"),c.path(d)):-5===b?i.alert("ui.dashboard.alert.insufficientBalance"):-6==b?i.alert("ui.alert.robot.create.strategyExceed"):-7==b?i.alert("ui.alert.robot.create.planExceed"):-8==b?i.alert("ui.alert.robot.create.planExpired"):"string"==typeof b&&(c.path(d),i.alert(b))},function(b){a.io_pending=!1,i.alert(b)})};i.confirm("ui.alert.agreementDocker",!d,"ui.btn.continueUseFreeDocker").then(function(){g.argNeedEncrypt(a.option.strategy.templatesArgList)?j.submit(o):o()})}}}]),angular.module("botvsApp").controller("MAddPlatformCtrl",["$scope","$translate","$filter","util","dialog","encrypt","session","$location","$routeParams",function(a,b,c,d,e,f,g,h,i){function j(b,c){_.each(a.exchange.meta,function(a){a.name==b&&(a.value=c)})}function k(a){_.each(a.meta,function(a){void 0!==a.def?a.value=a.def:a.value=""})}var l=c("trans");a.lang=b.use(),a.isEdit=!1,a.exchanges=[],a.g=g.g,a.brokers=[];var m=d.tradeFilters;a.canShowTradeType=function(a){return void 0===m.category||0==m.category.length||-1!=_.indexOf(m.category,a)},a.canShowBroker=function(a){return(void 0===m.brokers_hide||-1==_.indexOf(m.brokers_hide,a.brokerId))&&(void 0===m.brokers_show||0==m.brokers_show.length||-1!=_.indexOf(m.brokers_show,a.brokerId))},a.tradeType=g.KV_Get("tradeType",0),"zh_CN"!=a.lang&&a.tradeType<3&&(a.tradeType=3),a.option={ctp_ro_broker:{}},a.ctp_ro_broker_group={},a.ctp_ro_group_net={trade:[],quote:[]};var n=null,o=null,p=null,q=null;a.protocols=[{name:"REST"},{name:"FIX"}],a.protocol=a.protocols[0],a.exchangeOption={exchange:null},a.showLink=function(a){h.path(a)},a.labelChange=function(){0==a.tradeType?(a.isEdit||(a.label=a.option.ctp_ro_broker.name),a.exchange=n):1==a.tradeType?(a.isEdit||(a.label=b.instant("ui.platformNew.labelEsunny")),a.exchange=p):2==a.tradeType?(a.isEdit||(a.label=b.instant("ui.platformNew.labelLTS")),a.exchange=o):3==a.tradeType?(a.exchange=a.exchangeOption.exchange,a.label=l(a.exchangeOption.exchange.label)):4==a.tradeType&&(a.isEdit||(a.label=b.instant("ui.platformNew.platformLabel")),a.exchange=q),3==a.tradeType||a.isEdit||k(a.exchange),4!=a.tradeType&&g.KV_Set("tradeType",a.tradeType),a.option={ctp_ro_broker:{}},a.ctp_ro_broker_group={},a.ctp_ro_group_net={trade:[],quote:[]}},a.platformChange=function(){a.ctp_ro_broker_group=a.option.ctp_ro_broker.groups[0],a.ctp_ro_group_net=a.ctp_ro_broker_group.nets[0],a.label=a.option.ctp_ro_broker.name,a.ctpChange()},a.groupChange=function(){a.ctp_ro_broker_group&&(a.ctp_ro_group_net=a.ctp_ro_broker_group.nets[0],a.ctpChange())},a.quoteChange=function(a){j("MDFront",a)},a.tradeChange=function(a){j("TDFront",a)},a.ctpChange=function(){a.ctp_ro_group_net&&(a.ctp_ro_group_net.quote.length>0&&j("MDFront",a.ctp_ro_group_net.quote[0]),a.ctp_ro_group_net.trade.length>0&&j("TDFront",a.ctp_ro_group_net.trade[0]));var b=a.option.ctp_ro_broker.brokerId.split(",");j("BrokerId",b[b.length-1]),a.label=a.option.ctp_ro_broker.name};var r=function(a){var b=[];_.each(a,function(c,d){c.checkbox?(void 0===b[c.checkbox]&&(b[c.checkbox]=0),b[c.checkbox]++):c.group=[d],c.value=void 0===c.def?"":c.def,c.hide=void 0!==c.hide&&c.hide,c.force_hide="string"==typeof c.checkbox&&c.checkbox.length>1&&"!"==c.checkbox[0],void 0!==c.encrypt&&c.encrypt&&(c.type="password"),c.onChange=function(){if("string"==typeof c.checkbox){var b="!"+c.checkbox;_.each(a,function(a,d){a.checkbox==b&&(a.required=!c.required,a.hide=!a.required)})}},c.onChange()});for(var c in b){var d=0,e=[];_.each(a,function(a,f){a.checkbox&&a.checkbox==c&&(d++,e.push(f),d<b[c]?a.hide=!0:a.group=e)})}},s=-1;void 0!==i.id?(a.isEdit=!0,g.rest(["GetPlatformDetail","GetSettings"],[[parseInt(i.id)],["brokers"]]).then(function(b){var c=b[0].result;if(a.brokers=angular.fromJson(b[1].result),c){s=c.platform.id,a.name=c.platform.name,c.platform.meta=angular.fromJson(c.platform.meta);var d={};0==c.platform.access_key.indexOf('{"')&&(d=angular.fromJson(c.platform.access_key)),r(c.platform.meta),_.each(c.platform.meta,function(a){void 0!==d[a.name]&&(a.value=d[a.name],a.rawValue=d[a.name],a.required="string"==typeof a.value&&a.value.length>0)}),a.exchangeOption.exchange=c.platform,a.label=c.platform.label,a.tradeType=0,"Futures_CTP"==c.platform.eid?(a.tradeType=0,n=a.exchangeOption.exchange):"Futures_Esunny"==c.platform.eid?(a.tradeType=1,p=a.exchangeOption.exchange):"Futures_LTS"==c.platform.eid?(a.tradeType=2,o=a.exchangeOption.exchange):"Exchange"==c.platform.eid?(q=a.exchangeOption.exchange,a.tradeType=4):a.tradeType=3,a.labelChange()}else e.alert("Error")},function(a){e.alert(a)})):g.rest(["GetPlatformList","GetExchangeList","GetSettings"],[[],[],["brokers"]]).then(function(b){if(b){var c=b[0].result.platforms,d=b[1].result.exchanges;a.brokers=angular.fromJson(b[2].result);var f=[];for(var g in d)d[g].filled=0;for(var g in d){try{d[g].meta=angular.fromJson(d[g].meta)}catch(a){console.log(d[g].id,d[g].name,a);continue}if(r(d[g].meta),"Futures_CTP"!=d[g].eid)if("Futures_LTS"!=d[g].eid)if("Futures_Esunny"!=d[g].eid)if("Exchange"!=d[g].eid){for(var h in c)c[h].name==d[g].name&&d[g].filled++;d[g].filled>0?d[g].label=d[g].name+" - "+(d[g].filled>9?"":"0")+(d[g].filled+1):d[g].label=d[g].name,f.push(d[g])}else q=d[g];else p=d[g];else o=d[g];else n=d[g]}f.length>0&&(a.exchanges=f,a.exchangeOption.exchange=f[0],a.labelChange())}else e.alert("Error")},function(a){e.alert(a)}),a.submit=function(){if(a.frm.$invalid)return void e.alert("ui.alert.invalidForm");var b=a.label,c=a.exchange.id;a.isEdit&&(c=-1);for(var d=0;d<a.exchange.meta.length;d++){var i=a.exchange.meta[d];if(!i.hide)for(var j=a.exchange.meta[d].group,k=0;k<j.length;k++){var l=a.exchange.meta[j[k]];if(l.required=i.required,void 0===l.rawValue&&l.rawValue,l.required||"checkbox"!==l.type&&(l.value="string"==typeof l.def?l.def:""),"number"==typeof l.length&&"text"==l.type&&(l.value=l.value.replace(/\s+/g,"")),l.required&&"number"==typeof l.length&&l.value.length!=l.length&&(void 0===l.encrypt||l.encrypt&&l.rawValue!=l.value))return void e.alert(l.label+" 长度必须为 "+l.length+" 位 !")}}e.confirm("ui.alert.changePlatform",!a.isEdit).then(function(){f.submit(function(d){var i={};_.each(a.exchange.meta,function(a){i[a.name]=a.value,void 0!==a.encrypt&&a.encrypt&&a.rawValue!=a.value&&a.value.length>0&&(i[a.name]="$$$__"+f.encryptText("$$$__"+a.value,d))}),g.rest("SavePlatform",[s,c,angular.toJson(i),"",b]).then(function(a){a?(e.alert("ui.dialog.alertSuccess"),h.path("/m/platforms")):e.alert("ui.dialog.platform.platformRepeat")},function(a){e.alert(a)})})})}}]),angular.module("botvsApp").controller("MAddNodeCtrl",["$scope","$window","$location","session","dialog","encrypt",function(a,b,c,d,e,f){a.products=[],a.isOEM=d.g.oem;var g=[];d.rest(["GetNodeHash","GetSettings","GetECSProductList"],[[],["docker"],[]]).then(function(b){try{a.docker=angular.fromJson(b[1].result),a.rpcs=a.docker.rpcBase+"/"+b[0].result,a.isOEM&&(a.rpcs=a.rpcs.replace("node.fmz.com",location.hostname)),g=b[2].result.items,_.each(g,function(b){var c=_.findWhere(a.products,{region:b.region});c||(c={region:b.region,items:[]},a.products.push(c)),b.focus=!1,c.items.push(b)})}catch(a){e.alert("获取最新版本信息失败, 请刷新重试 !"+a)}},function(a){e.alert("Hash error: "+a)}),a.getCls=function(a){return a.focus?"panel panel-primary":"panel panel-default"},a.focus=function(a){_.each(g,function(b){b.focus=!!a&&b.id==a.id})},a.buyProduct=function(a){e.confirm("ui.ecs.buyTips").then(function(){f.submit(function(b){d.rest("ECSCreate",a.id).then(function(a){a>0?(e.alert("ui.ecs.buySuccess"),c.path("m/nodes")):e.alert("ui.ecs.buyFailed")},function(a){e.alert(a)})},!0)})}}]),angular.module("botvsApp").controller("MAddStrategyCtrl",["$scope","FileSaver","Blob","$window","$location","$translate","$interval","$timeout","$routeParams","$filter","dialog","util","session",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b){a.api_doc="",a.snippets=[];var c=T[b];if(void 0!==X[c])return void 0!==X[c].snippets&&(a.snippets=X[c].snippets),void(void 0!==X[c].doc&&(a.api_doc=X[c].doc));X[c]={tooltips:[],snippets:[],doc:""},m.rest("GetSettings","helper_"+c).then(function(d){try{d.length>0&&(X[c]=angular.fromJson(d)),"mylanguage"===c&&void 0!==X[c].tooltips&&(W=_.keys(X[c].tooltips)),a.codeType.id==b&&(void 0!==X[c].snippets&&(a.snippets=X[c].snippets),void 0!==X[c].doc&&(a.api_doc=X[c].doc))}catch(a){console.log(a)}},function(a){k.alert("ui.dialog.alertFailure")})}function o(a){for(var b="",c=0;c<a.length;c++){var d=a[c].toString().replace(/"/g,'""');d.search(/("|,|\n)/g)>=0&&(d='"'+d+'"'),c>0&&(b+=","),b+=d}return b+"\n"}function p(a,b){var c=[];_.each(a,function(a){a.checked&&"string"==typeof a.source&&c.push(a.source)}),updateToolBox(f.use(),c,b,function(){k.alert("ui.strategy.alertBlocklyTemplate")},"TEMPLATE_BLOCK")}function q(b){var c=f.use(),d="blockly-area-edit";Blockly.i18n_switch(c),$("#"+d).empty(),void 0!==Blockly.blocklyResizeTimer&&g.cancel(Blockly.blocklyResizeTimer),m.rest("GetSettings","blockly_toolbox").then(function(e){var h=angular.fromJson(e);h.toolbox=h.toolbox.replace(/(name)="([^\|"]+)[\|]+([^\|"]+)"/g,function(a,b,d,e){return b+'="'+("zh_CN"==c?d:e)+'"'}),V=Blockly.inject(d,{media:"../res/media/",toolbox:h.toolbox,readOnly:!1,scrollbars:!0,zoom:{controls:!0,wheel:!0}}),p(a.templates,V);for(var i in h.blocks)updateToolBox(f.use(),[h.blocks[i]],V,function(){k.alert("ui.strategy.alertBlocklyTemplate")},i);window.blocklyWorkspace=V,V.addChangeListener(function(b){a.codeType.id==I&&U.setValue(js_beautify(L(V)))}),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(b),V),O=js_beautify(L(V));var j=$("#editor-area")
;Blockly.blocklyResizeTimer=g(function(){if(a.codeType.id==I){var b=V.getWidth(),c=j.width();0==b&&c>0&&(Blockly.svgResize(V),V.render(),console.log("svgResize blocklyWorkspace",b,c))}},300)})}function r(a,b){loadBlockly(function(){q(a),"function"==typeof b&&b()})}function s(a,b){if(b){var c=X[a.options.mode];if(void 0!==c&&void 0!==c.tooltips&&!$.isEmptyObject(c.tooltips)){var d=b.innerText;if(/^[#]?[a-zA-Z_]+[a-zA-Z\d_]*$/.test(d)){if(d.length>0&&"#"!=d[0])for(var e=b.parentNode.childNodes,f=0;f<e.length&&e[f]!=b;f++){var g=e[f].innerText;if("string"==typeof g&&0==g.indexOf("#"))return}return j("trans")(c.tooltips[d])}}}}function t(b){var c={};_.each(aa,function(a){c[a]=!0}),U=CodeMirror(document.getElementById("code-area-edit"),{foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],textHover:!0,getTextHover:s,autoRefresh:!0,lineNumbers:!0,value:b,insertSoftTab:!0,indentUnit:4,theme:a.defTheme,styleActiveLine:!0,matchBrackets:!0,mode:T[a.codeType.id],extraKeys:{Esc:function(b){if("default"!=b.getOption("keyMap"))return CodeMirror.Pass;a.switchFullScreen()},Tab:function(a){var b=Array(a.getOption("indentUnit")+1).join(" ");a.replaceSelection(b)},"Ctrl-S":function(a){U.save()}}}),loadJSHint(function(){U.setOption("lint",{"-W041":!1,latedef:!0,lastsemic:!0,loopfunc:!0,asi:!0,globals:c}),U.setOption("showHint",!0)});var d=!0;CodeMirror.on(U,"vim-mode-change",function(a){d="insert"==a.mode});var e=/[\w$]+/;CodeMirror.registerHelper("hint","global",function(a,b){for(var c=b&&b.word||e,d=b&&b.range||500,f=a.getCursor(),g=a.getLine(f.line),h=f.ch,i=h;i&&c.test(g.charAt(i-1));)--i;for(var j=i!=h&&g.slice(i,h),k=[],l={},m=!0,n=new RegExp(c.source,"g"),o=-1;o<=1;o+=2)for(var p=f.line,q=Math.min(Math.max(p+o*d,a.firstLine()),a.lastLine())+o;p!=q;p+=o){var r,s=a.getLine(p);for(m&&(s+=" "+(b&&b.list||[]).join(" "),m=!1);r=n.exec(s);)p==f.line&&r[0]===j||j&&0!=r[0].lastIndexOf(j,0)||Object.prototype.hasOwnProperty.call(l,r[0])||(l[r[0]]=!0,k.push(r[0]))}return{list:k,from:CodeMirror.Pos(f.line,i),to:CodeMirror.Pos(f.line,h)}}),CodeMirror.registerHelper("hint","botvs",function(a,b){for(var c=b&&b.list||[],d=a.getCursor(),e=a.getLine(d.line),f=d.ch,g=f;g&&/[\w$]+/.test(e.charAt(g-1));)--g;for(var h=e.slice(0,d.ch),i="",j=h.length-1;j>=0;j--)if("."==h.charAt(j)){i=h.slice(j+1);break}return{list:_.filter(c,function(a){return 0==a.indexOf(i)}),from:CodeMirror.Pos(d.line,g),to:CodeMirror.Pos(d.line,f)}}),U.on("keyup",function(b,c){if(27!=c.keyCode&&("vim"!=b.getOption("keyMap")||d)){var e=b.getCursor(),f=b.getLine(e.line);if(a.codeType.id!=J&&"."===f.charAt(e.ch-1)){var g=f.slice(0,e.ch),h=[];return/exchange\.$/.test(g)||/exchanges\[[^\]]+\]\.$/.test(g)?h=["GetName","GetLabel","GetUSDCNY","GetKRWCNY","GetEURCNY","GetRate","GetPeriod","SetRate","SetTimeout","GetCurrency","GetQuoteCurrency","GetTicker","GetDepth","GetTrades","GetRecords","GetAccount","Buy","Sell","Log","GetOrders","GetOrder","CancelOrder","GetMinStock","GetMinPrice","GetFee","GetRawJSON","Go","IO","GetPosition","SetMarginLevel","SetDirection","SetContractType","SetPrecision","SetProxy"]:/TA\.$/.test(g)?h=["MACD","KDJ","RSI","ATR","OBV","MA","EMA","BOLL","Alligator","CMF","Highest","Lowest"]:/talib\.$/.test(g)&&(h=["ACOS","AD","ADOSC","ADX","ADXR","APO","AROON","AROONOSC","ASIN","ATAN","ATR","AVGPRICE","BBANDS","BOP","CCI","CDL2CROWS","CDL3BLACKCROWS","CDL3INSIDE","CDL3LINESTRIKE","CDL3OUTSIDE","CDL3STARSINSOUTH","CDL3WHITESOLDIERS","CDLABANDONEDBABY","CDLADVANCEBLOCK","CDLBELTHOLD","CDLBREAKAWAY","CDLCLOSINGMARUBOZU","CDLCONCEALBABYSWALL","CDLCOUNTERATTACK","CDLDARKCLOUDCOVER","CDLDOJI","CDLDOJISTAR","CDLDRAGONFLYDOJI","CDLENGULFING","CDLEVENINGDOJISTAR","CDLEVENINGSTAR","CDLGAPSIDESIDEWHITE","CDLGRAVESTONEDOJI","CDLHAMMER","CDLHANGINGMAN","CDLHARAMI","CDLHARAMICROSS","CDLHIGHWAVE","CDLHIKKAKE","CDLHIKKAKEMOD","CDLHOMINGPIGEON","CDLIDENTICAL3CROWS","CDLINNECK","CDLINVERTEDHAMMER","CDLKICKING","CDLKICKINGBYLENGTH","CDLLADDERBOTTOM","CDLLONGLEGGEDDOJI","CDLLONGLINE","CDLMARUBOZU","CDLMATCHINGLOW","CDLMATHOLD","CDLMORNINGDOJISTAR","CDLMORNINGSTAR","CDLONNECK","CDLPIERCING","CDLRICKSHAWMAN","CDLRISEFALL3METHODS","CDLSEPARATINGLINES","CDLSHOOTINGSTAR","CDLSHORTLINE","CDLSPINNINGTOP","CDLSTALLEDPATTERN","CDLSTICKSANDWICH","CDLTAKURI","CDLTASUKIGAP","CDLTHRUSTING","CDLTRISTAR","CDLUNIQUE3RIVER","CDLUPSIDEGAP2CROWS","CDLXSIDEGAP3METHODS","CEIL","CMO","COS","COSH","DEMA","DX","EMA","EXP","FLOOR","HT_DCPERIOD","HT_DCPHASE","HT_PHASOR","HT_SINE","HT_TRENDLINE","HT_TRENDMODE","KAMA","LINEARREG","LINEARREG_ANGLE","LINEARREG_INTERCEPT","LINEARREG_SLOPE","LN","LOG10","MA","MACD","MACDEXT","MACDFIX","MAMA","MAX","MAXINDEX","MEDPRICE","MFI","MIDPOINT","MIDPRICE","MIN","MININDEX","MINMAX","MINMAXINDEX","MINUS_DI","MINUS_DM","MOM","NATR","OBV","PLUS_DI","PLUS_DM","PPO","ROC","ROCP","ROCR","ROCR100","RSI","SAR","SAREXT","SIN","SINH","SMA","SQRT","STDDEV","STOCH","STOCHF","STOCHRSI","SUM","T3","TAN","TANH","TEMA","TRANGE","TRIMA","TRIX","TSF","TYPPRICE","ULTOSC","VAR","WCLPRICE","WILLR","WMA"]),void(h.length>0?CodeMirror.showHint(b,CodeMirror.hint.botvs,{list:h,completeSingle:!1}):U.state.completionActive&&U.state.completionActive.close())}if(!U.state.completionActive){var i=b.getTokenAt(b.getCursor()).string;if(i.length>0){var j=i[i.length-1];if("_"==i[0]||i.length>1&&/[a-zA-Z\.]/.test(j)){var k={list:Z,completeSingle:!1};a.codeType.id==J&&(k.list=W);var l=[];_.each(a.scriptArgList,function(a){l.push(a[0])}),k.list=k.list.concat(l),CodeMirror.showHint(b,CodeMirror.hint.global,k)}}}}}),U.save=function(){a.confirmSubmit()},U.setSize("100%","100%"),a.changeFontSize(0),h(function(){U&&U.refresh()},100)}function u(){var b=ma(a.scriptArgList),c=ma(a.scriptCMDList,l.cmdMagic);return b.concat(c)}function v(a,b){return 0==b.length?"":"<"+a+">\n"+b+"\n</"+a+">\n"}function w(a,b,c){var d="<"+b+">",e=-1,f=a.indexOf(d);if(-1!=f)for(;;){var g=a.indexOf("</"+b+">",e+1);if(-1==g)break;e=g}if(-1==f||-1==e)return"";"\n"==a[f+d.length]&&f++,"\n"==a[e-1]&&e--;var h=a.slice(f+d.length,e);return void 0!==c&&c&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),h}function x(){var b=null;1===a.category.id?(a.accountBalance=1e6,b=_.findWhere(a.platforms,{eid:"Futures_CTP"})):2===a.category.id?(b=_.findWhere(a.platforms,{eid:"Futures_LTS"}),a.accountBalance=1e6):(b=a.platforms[0],a.accountBalance=1e4),b&&(a.option={platform:b,stock:b.stocks[0]},a.onPlatformSelect()),y(),ja=!0}function y(){var b="2015-02-22 00:00:00",c="2016-10-31 00:00:00",d="2016-09-01 00:00:00",e="2016-09-03 00:00:00";moment();if(1!=a.category.id&&2!=a.category.id)c=moment().format("YYYY-MM-DD 00:00:00"),d=moment().subtract(30,"days").format("YYYY-MM-DD 00:00:00"),e=c;else{b="2010-01-11 09:00:00",c=moment().subtract(1,"days").format("YYYY-MM-DD 15:00:00");var g=30;2==a.category.id&&(g=365),d=moment().subtract(g,"days").format("YYYY-MM-DD 09:00:00"),e=c}if(!ja){if(void 0!==ia.bt.start&&(d=moment(ia.bt.start).format("YYYY-MM-DD HH:mm:ss")),void 0!==ia.bt.end&&(e=moment(ia.bt.end).format("YYYY-MM-DD HH:mm:ss")),ia.args.length>0)try{l.parseArgs(ia.args,a.scriptArgList,a.scriptCMDList)}catch(a){}if("string"==typeof ia.bt.args){var h=[];try{h=angular.fromJson(ia.bt.args)}catch(a){console.log(a)}_.each(h,function(b){var c=null;if(2==b.length)c=_.findWhere(a.scriptArgList,{0:b[0]});else{var d=_.findWhere(a.templates,{id:b[2]});d&&(c=_.findWhere(d.scriptArgList,{0:b[0]}))}c&&("selected"===c[3].inputType?c.indexValue=b[1]:c.value=b[1])})}var i=function(a){if(!isNaN(a))return parseInt(a);switch(a){case"1m":return 1;case"3m":return 3;case"5m":return 5;case"15m":return 15;case"30m":return 30;case"60m":case"1h":return 60;case"1d":return 1440}};if(void 0!==ia.bt.period){var j=_.findWhere(a.kticks,{minutes:i(ia.bt.period)});j&&(a.ktick_selected=j,a.changePeriodOption())}if(void 0!==ia.bt.periodBase){var k=i(ia.bt.periodBase);3==k&&(k=5);var j=_.findWhere(a.kticks,{minutes:k});j&&(a.btBaseTick=j)}void 0!==ia.bt.mode&&(a.btMode="1"==ia.bt.mode?"1":"0")}a.stime=d,a.etime=e;var m={};m[f.instant("ui.const.range.yesterday")]=[moment().subtract(1,"days").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"days").format("YYYY-MM-DD 23:59:59")],m[f.instant("ui.const.range.last7days")]=[moment().subtract(7,"days").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"days").format("YYYY-MM-DD 23:59:59")],m[f.instant("ui.const.range.last30days")]=[moment().subtract(30,"days").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"days").format("YYYY-MM-DD 23:59:59")],m[f.instant("ui.const.range.thismonth")]=[moment().startOf("month").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"days").format("YYYY-MM-DD 23:59:59")],m[f.instant("ui.const.range.lastmonth")]=[moment().subtract(1,"month").startOf("month").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"month").endOf("month").format("YYYY-MM-DD 23:59:59")],m[f.instant("ui.const.range.lastyear")]=[moment().subtract(1,"year").subtract(1,"days").format("YYYY-MM-DD 00:00:00"),moment().subtract(1,"days").format("YYYY-MM-DD 23:59:59")];var n="zh_CN"!=f.use(),o={locale:{format:"YYYY-MM-DD HH:mm",applyLabel:n?"Apply":"应用",cancelLabel:n?"Cancel":"取消",customRangeLabel:n?"Custom":"自定义"},singleDatePicker:!0,showDropdowns:!0,timePicker:!0,timePicker24Hour:!0,autoApply:!0,startDate:d,endDate:d,minDate:b,maxDate:c,ranges:m};$("#timeRangePickerA").daterangepicker(o,function(b,c,d){if(a.stime=b.format(ha),d!=o.locale.customRangeLabel){a.etime=c.format(ha);var e=$("#timeRangePickerA").data("daterangepicker");e.setStartDate(b),e.setEndDate(b);var f=$("#timeRangePickerB").data("daterangepicker");f.setStartDate(c),f.setEndDate(c)}a.changeTickOption()});var p=_.clone(o);p.ranges=void 0,p.startDate=e,p.endDate=e,$("#timeRangePickerB").daterangepicker(p,function(b,c,d){a.etime=b.format(ha),a.changeTickOption()})}function z(a,b){var c=[.2,.2],d=1e4,e=3,f=0;switch(a){case"OKCoin_EN":c=[.15,.2],d=1e4;break;case"Huobi":case"OKEX":c=[.15,.2],"string"==typeof b&&-1!==b.indexOf("_USD")?d=1e4:(d=3,e=10);break;case"Futures_BitMEX":d=0,c=[.008,.01];break;case"Futures_OKCoin":d=0,c=[.03,.03];break;case"Futures_CTP":c=[.025,.025],d=1e6,e=0,f=5;break;case"Futures_LTS":c=[.03,.13],d=1e6,e=0,f=5;break;default:c=[.2,.2],d=1e4}return{balance:d,stocks:e,fee:c,minfee:f}}function A(b,c,d,e){if(void 0===d&&(d={}),"string"==typeof e&&e.length>0)try{e=angular.fromJson(e)}catch(a){console.log(a)}else e={};var g=[];for(var h in b){var i=moment(a.stime).unix(),j=b[h],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=null,q=[],r=-1==k.indexOf("Futures")?l:m,s=864e5==n,t=function(a){if(a=Number(a),!s)return a;var b=a%864e5;return b>0&&(a+=864e5-b),a};if(void 0!==e&&e){var u=e["__main__/"+k+"/"+r];if(void 0!==u){p={};for(var v in u)p[t(v)]=u[v]}}p||(p={});var w={},x=!1;_.each(o,function(a){!x&&i<=a[0]&&(i=a[0],x=!0);var b={time:t(1e3*a[0]),open:a[1],high:a[2],low:a[3],close:a[4],volume:a[5]},c={};_.each(p[b.time]||[],function(a){if(!(a.length<3||"string"!=typeof a[0])){c[a[0]]=[Number(a[1]),a[2]];var b=a[1].toString().split("."),d=Math.min(8,b.length>1?Math.max(d,b[1].length+1):2),e=w[a[0]];if(void 0===e){var b=[0,0];a.length>3&&(b[0]=a[3]),a.length>4&&(b[1]=a[4]),w[a[0]]={dot:d,style:wa(b),expr:$.trim(a[2])||""}}else e.dot=Math.max(e.dot,d)}}),b.runtime=c,q.push(b)});var v=k+"/"+m;(k+"_"+m).replace("_"+k,"").replace("OKCoin_EN","OKCoin");void 0===c[v]&&(c[v]=[]);var y=[{time:1e3*i,shape:"vertical_line",overrides:{linecolor:"red",linestyle:2}}].concat(c[v]);_.each(y,function(a){a.time=t(a.time)}),g.push({bars:q,title:k+":"+r,eleId:"chart_"+h,exchange:k,flags:y,symbol:r,adjust:t,period:n/1e3,runtime:p,runtimeKeys:w})}var z=["#492970","#f7a35c","#77a1e5","#a6c96a","#434348","#f45b5b","#91e8e1","#2b908f","#8bbc21","#c42525","#0d233a","#e4d354","#910000","#8085e9","#f15c80","#f28f43","#7cb5ec","#1aadce","#90ed7d","#2f7ed8"],A=[],B=0;_.each(["MACD","MA","EMA"],function(a){var b=d[a];if(void 0!==b)if("MACD"==a){var c=b[0];c[0]="number"==typeof c[0]?c[0]:12,c[1]="number"==typeof c[1]?c[1]:26,c[2]="number"==typeof c[2]?c[2]:9,A.push(["MACD",!1,!1,[c[0],c[1],"close",c[2]]])}else"MA"!=a&&"EMA"!=a||(a="EMA"==a?"Moving Average Exponential":"Moving Average",_.each(b,function(b){B++,A.push([a,!1,!1,[b[0]],null,{"plot.color":z[B%z.length]}])}))});var C=[],D=[];_.each(g,function(a,b){var c=0==b?"active":"inactive";C.push('<li role="presentation" class="'+c+'"><a href="#tab_'+a.eleId+'" role="tab" data-toggle="tab">'+a.title+"</a></li>"),D.push('<div role="tabpanel" class="tab-pane '+c+'" id="tab_'+a.eleId+'"><div style="height:500px"><div id="'+a.eleId+'" style="height: 100%; width: 100%;position:relative"></div></div></div>')});var E=$("#chart_history");E.empty(),E.append('<ul class="nav nav-tabs">'+C.join("\n")+'</ul><div class="tab-content" style="margin-top:15px;margin-bottom:15px">'+D.join("\n")+"</div>"),_.each(g,function(a){var b=NewTradingView(a.eleId,"zh_CN"==f.use()?"zh":"en",function(b){var c=null,d=b.chart();d.crossHairMoved(function(d){var e=[],g=a.runtime[a.adjust(1e3*d.time)];g&&_.each(g,function(a){".."==a[2]&&e.push(["<b>"+a[0]+"</b>: "+a[1]])}),e.length>0?(c||(c=$(b.createButton()),c.attr("title",f.instant("ui.backtest.tips.myvars")),c.attr("style","background:none;border:none;color:#68696b")),c.html("<span>"+e.join(" ")+"</span>"),c.attr("style","color:#68696b")):c&&c.attr("style","color:#ffffff")});var e=0,g=0;_.each(A,function(a){d.createStudy(a[0],a[1],a[2],a[3],a[4],a[5])});for(var h=0;h<2;h++)_.each(_.keys(a.runtimeKeys).sort(),function(b){var c=a.runtimeKeys[b];if(".."!=c.expr){var f={};for(var i in c.style)f["plot."+i]=c.style[i];0==h?"^^"==c.expr&&("string"!=typeof f["plot.color"]&&(f["plot.color"]=z[g%z.length],g++),d.createStudy("Runtime",!0,!1,[b],null,f,{priceScale:"right"})):":"!=c.expr&&""!=c.expr||("string"!=typeof f["plot.color"]&&(f["plot.color"]=z[g%z.length],g++),d.createStudy("Runtime",!1,!1,[b],function(a){e>0&&(d.getStudyById(a).mergeUp(),d.getStudyById(a).changePriceScale("right")),e++},f,{priceScale:"right"}))}})});b.addFlags(a.flags),b.update(a.bars,a.exchange,a.symbol,a.period)})}function B(a){var b=0,c=function(a){var b=0;for(var c in a)b+=a[c];return b};return void 0!==a.TradeStatus&&(b=c(a.TradeStatus)),void 0!==a.Snapshort&&_.each(a.Snapshort,function(a){b=c(a.TradeStatus)}),void 0!==a.Snapshorts&&a.Snapshorts.length>0&&_.each(a.Snapshorts[a.Snapshorts.length-1][1],function(a){b=c(a.TradeStatus)}),b}function C(a){if(void 0===a.Accounts){var b=[];if(void 0!==a.Snapshort&&(a.Snapshorts=[[a.Time,a.Snapshort]]),void 0!==a.Snapshorts&&0!=a.Snapshorts.length){for(var c=0;c<a.Task.Exchanges.length;c++){var d=a.Task.Exchanges[c],e=0==d.Id.indexOf("Futures_OKCoin")||0==d.Id.indexOf("Futures_BitMEX");b[c]={PnL:[],Name:d.Id,PlatformId:d.Id,BaseCurrency:d.BaseCurrency,QuoteCurrency:d.QuoteCurrency,Currency:d.BaseCurrency+"_"+d.QuoteCurrency,Symbol:d.BaseCurrency+"_"+d.QuoteCurrency+"_"+d.Id,InitStocks:d.Stocks,QuotePrecision:d.QuotePrecision,IsFutures:0==d.Id.indexOf("Futures_"),IsFuturesDigit:e,PositionProfit:0,CurrMargin:0,Commission:0,Returns:0,CloseProfit:0},e||(b[c].InitBalance=d.Balance)}for(var c=0;c<a.Snapshorts.length;c++)for(var f=a.Snapshorts[c],g=0;g<f[1].length;g++){var h=b[g],i=f[1][g];if(h.IsFutures){var j=0,k=0,l=0;if(i.Symbols)for(var m in i.Symbols)for(var n in i.Symbols[m])"Long"!=n&&"Short"!=n||(j+=i.Symbols[m][n].Profit,k+=i.Symbols[m][n].Margin,l+=i.Symbols[m][n].CloseProfit);var o=0;h.IsFuturesDigit?o+=j+k+i.Stocks+i.FrozenStocks-h.InitStocks:o+=j+k+i.Balance+i.FrozenBalance-h.InitBalance,h.PnL.push([f[0],o]),h.PositionProfit=j,h.CurrMargin=k,h.Returns=o,h.Commission=i.Commission,h.CloseProfit=l}else if(void 0!==i.Symbols&&i.Symbols&&void 0!==i.Symbols[h.Symbol]){var p=i.Symbols[h.Symbol].Last;if(void 0!==p){var o=i.Balance+i.FrozenBalance-h.InitBalance+(i.Stocks+i.FrozenStocks-h.InitStocks)*p;h.PnL.push([f[0],o]),h.Returns=o,h.Commission=i.Commission}}}a.Accounts=b}}}function D(b,c){if(C(b),"string"==typeof b.Exception&&b.Exception.length>0)return a.testing=!1,void k.alert("Exception: "+b.Exception);void 0!==b.httpCache&&(window.httpCache=b.httpCache),void 0!==b.Status&&""!=b.Status&&(a.summary=b.Status),a.logLimit=800,a.logsCount=b.LogsCount,a.elapsed=b.Elapsed/1e6,a.workerLoadBytes=b.LoadBytes,a.workerPending=!1;var d=1e3*moment(a.stime).unix(),e=1e3*moment(a.etime).unix();if(xa.length>0){if(ya>=0&&ya<xa.length){for(var g=xa[ya],i=!1,j=!1,m=0,n=0,o=0;o<b.Accounts.length;o++)-1!=b.Accounts[o].Name.indexOf("Futures")?(m+=b.Accounts[o].Returns,i=!0):(n+=b.Accounts[o].Returns,j=!0);g.returns=i&&j?n:n+m,g.elapsed=b.Elapsed/1e6,g.profit=b.Profit,g.tradeCount=B(b),"number"==typeof b.CloseProfit&&(g.closeProfit=b.CloseProfit),g.progress=100,g.finished=!0,g.running=!1;var p=null;void 0!==b.CloseProfitLogs&&b.CloseProfitLogs.length>0?p=l.returnAnalyze(a.btTotalDepositAssets,b.CloseProfitLogs,d,e,6e4*a.btPeriodMinutes,a.btYearDays):void 0!==b.ProfitLogs&&b.ProfitLogs.length>0?p=l.returnAnalyze(a.btTotalBalance>0?a.btTotalBalance:a.btTotalDepositAssets,b.ProfitLogs,d,e,6e4*a.btPeriodMinutes,a.btYearDays):void 0!==b.Accounts[0].PnL&&b.Accounts[0].PnL.length>0&&(p=l.returnAnalyze(void 0!==b.Accounts[0].InitBalance?b.Accounts[0].InitBalance:b.Accounts[0].InitStocks,b.Accounts[0].PnL,d,e,6e4*a.btPeriodMinutes,a.btYearDays)),p&&(g.sharpeRatio=p.sharpeRatio,g.maxDrawdown=p.maxDrawdown,g.winningRate=p.winningRate),ya++,ya>=xa.length?(ya=-1,a.testing=!1):h(za,0)}}else{a.profit=b.Profit,a.progress=b.Progress,a.taskStatus=b.TaskStatus,a.tradeCount=B(b);var q=[];if(a.logs=[],a.show_chart_market=!1,a.show_chart_strategy=!1,void 0!==b.RuntimeLogs&&_.each(b.RuntimeLogs,function(b){var c=b[1],d=b[2],e=b[3],g=e+"/"+b[8];void 0===q[g]&&(q[g]=[]);var h="string"==typeof e&&-1!=e.indexOf("Futures_");if(-1!=e){var i=null;if(0==d){var j="ui.log.type.buy",k=!1;h&&(-1!==b[9].indexOf("close")?(j="ui.log.type.buyCover",k=!0):j="ui.log.type.buyLong"),i={time:c,title:f.instant(j),shape:"arrow_up",channel:"low",color:"red",overrides:{fontsize:15},fillColor:k?"#7cb5ec":"white",text:f.instant("ui.log.type.buy")+": "+b[6]+"<br>"+f.instant("ui.order.price")+": "+(b[5]<0?f.instant("ui.order.market"):b[5])+"<br>"+f.instant("ui.order.id")+": "+b[4]+"<br>"+f.instant("ui.order.symbol")+": "+b[8]},k&&(i.shape="icon",i.overrides.icon=61538,i.overrides.size=20,i.overrides.color="#328757")}else if(1==d){var k=!1,j="ui.log.type.sell";h&&(-1!==b[9].indexOf("close")?(j="ui.log.type.sellClose",k=!0):j="ui.log.type.sellShort"),j=f.instant(j),i={time:c,shape:"arrow_down",channel:"high",color:"green",overrides:{fontsize:15},fillColor:k?"#ffffc5":"white",title:f.instant(j),text:f.instant("ui.log.type.sell")+": "+b[6]+"<br>"+f.instant("ui.order.price")+": "+(b[5]<0?f.instant("ui.order.market"):b[5])+"<br>"+f.instant("ui.order.id")+": "+b[4]+"<br>"+f.instant("ui.order.symbol")+": "+b[8]},k&&(i.shape="icon",i.overrides.icon=61539,i.overrides.size=20,i.overrides.color="#DB563E")}else 2==d&&(i={time:c,shape:"icon",channel:"high",title:"Cancel",overrides:{icon:61453,size:15},channel:"open",text:f.instant("ui.log.type.cancel")+": "+b[4]+"<br>"+f.instant("ui.order.symbol")+": "+b[8]});i&&q[g].push(i)}var m=l.getStrStyle(b[7]),n={id:b[0],log_type:b[2],show_price:0==b[2]||1==b[2]||4==b[2],platform_id:b[3],order_id:b[4],priceStr:d<2||4==d?4!=d&&-1==b[5]?f.instant("ui.order.market"):b[5]:"",amountStr:d<2?b[6]:"",platformStr:"-1"==e?"":e,logTypeStr:a.logTypes[b[2]],extra:m.body,icon:m.icon,style:m.style,contractType:b[8],direction:b[9],date:moment(c).format("YYYY-MM-DD HH:mm:ss")};switch(n.direction){case"buy":n.directionStr="ui.log.type.buyLong",n.directionStyle="label label-success";break;case"closebuy":case"closebuy_today":n.directionStr="ui.log.type.sellClose",n.directionStyle="label label-default";break;case"sell":n.directionStr="ui.log.type.sellShort",n.directionStyle="label label-danger";break;case"closesell":case"closesell_today":n.directionStr="ui.log.type.buyCover",n.directionStyle="label label-default"}n.labelStyle="label "+["label-primary","label-success","label-default","label-default","label-danger","label-info","label-warning"][n.log_type],a.logs.push(n)}),a.show_chart_market=void 0!==b.Symbols&&b.Symbols.length>0,a.show_chart_market&&void 0!==b.Symbols&&A(b.Symbols,q,b.Indicators,b.Extra),void 0!==b.Accounts){var r=[],s=[],t=$("#chart_pnl");t.empty();for(var u=0,v=[],o=0;o<b.Accounts.length;o++)if(void 0!==b.Accounts[o].PnL&&b.Accounts[o].PnL.length>0){a.show_chart_pnl=!0;var w=0==u?"active":"inactive";r.push('<li role="presentation" class="'+w+'"><a href="#tab_pnl_'+u+'" role="tab" data-toggle="tab">'+b.Accounts[o].Name+"_"+b.Accounts[o].Currency+"</a></li>"),s.push('<div role="tabpanel" class="tab-pane '+w+'" id="tab_pnl_'+u+'"><div style="height:400px"><div id="chart_pnl_'+u+'" class="chart" style="height: 100%; width: 100%"></div></div></div>');var x=l.returnAnalyze(void 0!==b.Accounts[o].InitBalance?b.Accounts[o].InitBalance:b.Accounts[o].InitStocks,b.Accounts[o].PnL,d,e,6e4*a.btPeriodMinutes,a.btYearDays);v.push([f.instant("ui.backtest.pnlChart"),"chart_pnl_"+u,b.Accounts[o].PnL,x,!1]),u++}r.length>0&&(t.append('<ul class="nav nav-tabs">'+r.join("\n")+'</ul><div class="tab-content" style="margin-top:15px">'+s.join("\n")+"</div>"),_.each(v,function(a){h(function(){l.newProfitChart.apply(window,a)},300)}))}if(void 0!==b.Chart&&""!=b.Chart.Cfg&&"{}"!=b.Chart.Cfg){a.show_chart_strategy=!0;var y=angular.fromJson(b.Chart.Cfg.replace(/useHTML/gi,"__disableHTML")),z=[];z=void 0!==y[0]?y:[y];for(var D=[],E=0,F="",G=0;G<z.length;G++){var H=z[G];void 0===H.chart&&(H.chart={});var I="group";void 0===H.extension&&(H.extension={}),"string"==typeof H.extension.layout&&(I=H.extension.layout),H.lang={_fullscreen:f.instant("ui.g.fullscreen")},H.exporting={buttons:{hideButton:{_titleKey:"_fullscreen",text:f.instant("ui.g.fullscreen"),onclick:function(){l.toggleFullScreen(this.renderTo)}}}},H.chart.renderTo="chart_strategy_"+G,void 0===H.series&&(H.series=[]);for(var J=0;J<H.series.length;J++){void 0===H.series[J]&&(H.series[J]={data:[]}),void 0===H.series[J].data&&(H.series[J].data=[]);for(var K=0;K<b.Chart.Datas.length;K++)if(b.Chart.Datas[K][0]==E)try{var L=angular.fromJson(b.Chart.Datas[K][1]);H.series[J].data.push(L)}catch(a){}E++}var w=0==G?"active":"inactive",M=void 0!==H.title&&void 0!==H.title.text?H.title.text:"图表 - "+G;"single"!=I&&I==F||(D.push({tabs:[],contents:[]}),w="active"),D[D.length-1].tabs.push('<li role="presentation" class="'+w+'"><a href="#tab_chart_strategy_'+G+'" role="tab" data-toggle="tab">'+M+"</a></li>"),D[D.length-1].contents.push('<div role="tabpanel" class="tab-pane '+w+'" id="tab_chart_strategy_'+G+'"><div style="height:'+l.getCssVal(H.extension.height,"536px")+'"><div id="chart_strategy_'+G+'" class="chart" style="height: 100%; width: 100%"></div></div></div>'),F=I}for(var N=$("#chart_strategy"),O="",O='<div class="row">',G=0,o=0;o<D.length;o++){var P=D[o];P.tabs.length>1?(o>0&&1==D[o-1].tabs.length&&(O+='</div><div class="row">'),O+='<div class="col-md-12"><ul class="nav nav-tabs">'+P.tabs.join("\n")+'</ul><div class="tab-content" style="margin-top:15px">'+P.contents.join("\n")+"</div></div>"):(o>0&&D[o-1].tabs.length>1&&(O+='</div><div class="row">'),O+='<div class="col-md-'+("number"==typeof z[G].extension.col?z[G].extension.col:12)+'">'+P.contents[0]+"</div>"),G+=P.tabs.length}O+="</div>",N.html(O),h(function(){_.each(z,function(a,b){void 0===a.plotOptions&&(a.plotOptions={}),void 0===a.plotOptions.series&&(a.plotOptions.series={}),a.plotOptions.series.turboThreshold=0,a=l.SafeObj(a),void 0===a.__isStock||a.__isStock?new Highcharts.StockChart(a):new Highcharts.Chart(a)})})}if(void 0!==b.ProfitLogs&&b.ProfitLogs.length>0){var Q=l.returnAnalyze(a.btTotalBalance>0?a.btTotalBalance:a.btTotalDepositAssets,b.ProfitLogs,d,e,6e4*a.btPeriodMinutes,a.btYearDays);a.show_chart_profit=!0,h(function(){l.newProfitChart(f.instant("ui.const.report.totalProfit"),"sandbox_chart_profit",b.ProfitLogs,Q,!0)},300)}if(void 0!==b.CloseProfitLogs&&b.CloseProfitLogs.length>0){var R=l.returnAnalyze(a.btTotalDepositAssets,b.CloseProfitLogs,d,e,6e4*a.btPeriodMinutes,a.btYearDays);a.show_chart_closeprofit=!0,h(function(){l.newProfitChart(f.instant("ui.const.report.totalCoverProfit"),"sandbox_chart_coverprofit",b.CloseProfitLogs,R,!0)},300)}a.testing=!1}}function E(){if(va&&a.autoRefresh){var b=a.btUUID;""!=b&&m.rest("BacktestIO",[a.btNodeId,a.codeType.id,JSON.stringify(["GetTaskStatus",b])]).then(function(a){var c=JSON.parse(a);0===c.Code?F(b,JSON.parse(c.Result)):k.alert("GetTaskStatus "+b+" Error: "+a)},function(b){h(E,a.btInterval)})}}function F(b,c,d){if(C(c),"number"==typeof c.BuildElapsed&&(console.log("编译完成, 耗时: "+c.BuildElapsed.toFixed(6)+" 秒"),a.testingStr=fa),void 0!==c.Accounts&&a.codeType.id==H&&(a.testingStr=fa),"string"!=typeof b||a.btUUID==b){a.tradeFee=0,a.positionProfit=0,a.currMargin=0,"string"==typeof d&&d.length>0&&console.log("Output:",d),void 0!==c.Status&&""!=c.Status&&(a.summary=c.Status),"number"==typeof c.CloseProfit&&(a.closeProfit=parseFloat(c.CloseProfit.toFixed(4)),c.TimeLine>0&&(a.updateTimeLine=moment(c.TimeLine).format(ha)));var e=!1,f=!1,g=0,i=0;if(a.tradeCount=B(c),void 0!==c.Accounts){a.accountStatus=c.Accounts;for(var j=0;j<c.Accounts.length;j++)c.Accounts[j].IsFutures=-1!=c.Accounts[j].PlatformId.indexOf("Futures"),void 0!==c.Accounts[j].Returns&&(c.Accounts[j].IsFutures?(g+=c.Accounts[j].Returns,e=!0):(i+=c.Accounts[j].Returns,f=!0)),void 0!==c.Accounts[j].Commission&&(a.tradeFee+=c.Accounts[j].Commission),void 0!==c.Accounts[j].CurrMargin&&(a.currMargin=c.Accounts[j].CurrMargin),void 0!==c.Accounts[j].PositionProfit&&(a.positionProfit+=c.Accounts[j].PositionProfit)}a.profit=c.Profit,a.progress=c.Progress,a.elapsed=c.Elapsed/1e6,a.logsCount=c.LogsCount,a.taskStatus=c.TaskStatus;var l=e&&f?i:i+g;xa.length>0&&ya>=0&&ya<xa.length&&(xa[ya].elapsed=a.elapsed,xa[ya].profit=c.Profit,xa[ya].progress=c.Progress,xa[ya].tradeCount=B(c),"number"==typeof c.CloseProfit&&(xa[ya].closeProfit=c.CloseProfit),xa[ya].returns=l),null!=b&&(0==c.TaskStatus&&void 0===d?h(E,a.btInterval):(va=!1,a.testingStr="ui.backtest.pullingResult",a.btUUID="",m.rest("BacktestIO",[a.btNodeId,a.codeType.id,JSON.stringify(["GetTaskResult",b])]).then(function(e){a.testing=!1,m.rest("BacktestIO",[a.btNodeId,a.codeType.id,JSON.stringify(["DelTask",b])]).then(function(a){},function(a){k.alert("删除任务失败: "+a)});var f=JSON.parse(e);if(0==f.Code)if(""!=f.Result)if("OOH"==f.Result||'"OOH"'==f.Result||"OOH"==d)k.alert("ui.alert.startegy.historyEmpty");else{var g=JSON.parse(f.Result);F(null,g),D(g,b)}else a.taskStatus=2;else{var h;h="OOM"==d?"回测进程占用资源超出限制, 被强制结束":JSON.stringify({Status:c,Output:d}),D({Exception:h})}},function(b){a.testing=!1,va=!1,k.alert("Error: "+b)})))}}function G(b){for(var c=[],d=Math.pow(10,6),e=0;e<b.length;e++){c[e]=[];for(var f=b[e].setting.begin;;){c[e].push(f);var g=Math.round((f+b[e].setting.step)*d)/d;if(g<=b[e].setting.end)f=g;else{if(!(g>b[e].setting.end&&f<b[e].setting.end))break;f=b[e].setting.end}}}var h=[];if(1==c.length)for(var e=0;e<c[0].length;e++)h.push([c[0][e]]);else h=[].reduce.call(c,function(a,b){var c=[];return a.forEach(function(a){b.forEach(function(b){var d=[].concat(Array.isArray(a)?a:[a]);d.push(b),c.push(d)})}),c});for(var i=[],j=0,e=0;e<h.length;e++){for(var k=[],l=!1,f=0;f<b.length;f++)k[f]={file:b[f].file,argName:b[f].argName,argDesc:b[f].argDesc,value:h[e][f]};for(var m=[],n=null,o=0;o<a.filterList.length;o++){m=[];for(var p=a.filterList[o],q=0;q<k.length;q++)k[q].file!=p.file||k[q].argDesc!=p.left[1]&&k[q].argDesc!=p.right[1]||m.push([k[q].argDesc,k[q].value]);if(2==m.length){n=p;break}}n?(m[0][0]==n.right[1]&&(m=[m[1],m[0]]),">"==n.op.op&&m[0][1]-m[1][1]>=n.diff?l=!0:"<"==n.op.op&&m[1][1]-m[0][1]>=n.diff?l=!0:"=="==n.op.op&&m[0][1]==m[1][1]&&(l=!0)):l=!0,l&&(i.push({id:j,profit:0,elapsed:0,sharpeRatio:0,maxDrawdown:0,returns:0,winningRate:0,tradeCount:0,closeProfit:0,progress:0,settings:k,running:!1,finished:!1}),j++)}return i}var H=2,I=3,J=4;void 0===window.httpCache&&(window.httpCache={});var K="object"==typeof WebAssembly&&-1==location.href.indexOf("wasm=false")?"backtest_javascript_wasm":"backtest_javascript",L=function(a){return"function main() {\n"+Blockly.JavaScript.workspaceToCode(a)+"}"};a.showWASMWarning=function(){return"backtest_javascript_wasm"!==K&&(0==a.codeType.id||a.codeType.id==I||a.codeType.id==J)},a.isOEM=m.g.oem,a.manual="",a.description="",a.note="",a.isPremiumBacktest=-1!=e.path().indexOf("backtest-strategy"),a.isCopy=-1!=e.path().indexOf("copy-strategy"),a.isEdit=void 0!==i.id&&!a.isCopy&&!a.isPremiumBacktest,a.isNew=!a.isCopy&&!a.isEdit,a.name="",a.groups=[],a.group=null,a.categories=l.categories,a.codeTypes=[{id:0,name:"JavaScript",commentStart:"/*",commentEnd:"*/",logo:"icon-language iconfont icon-lang-javascript"},{id:1,name:"Python",commentStart:"'''",commentEnd:"'''",logo:"icon-language iconfont icon-lang-python"},{id:H,commentStart:"/*",commentEnd:"*/",name:"C++",logo:"icon-language iconfont icon-lang-cpp"},{commentStart:"(*",commentEnd:"*)",id:J,name:"My语言|MyLang",logo:"icon-language iconfont icon-lang-my"},{id:I,name:"可视化|Blockly",logo:"icon-language iconfont icon-lang-blockly"}],"zh_CN"!=f.use()&&(a.categories[1].hide=!0,a.categories[2].hide=!0);var M=-1,N=null,O="",P=function(){return angular.toJson({xml:'   <xml id="defBlocklyXml" style="display: none">         <block type="ext_Log" x="200" y="100">         <value name="VALUE">             <block type="ext_exchange_GetAccount">             <field name="INPUT_0">0</field>             </block>         </value>         </block>    </xml>  ',javascript:"function main() {\n    Log(_C(exchanges[0].GetAccount));\n}"})}(),Q=P,R=["function main() {\n    Log(exchange.GetAccount());\n}","def main():\n    Log(exchange.GetAccount())\n","void main() {\n    Log(exchange.GetAccount());\n}",P,"C>HV(H, 10),SPK;\nC<LV(L, 15),BPK;\nAUTOFILTER;"],S=["/*\n-- 策略引用该模板以后直接用 $.Test() 调用此方法\n-- main 函数在策略中不会触发, 只做为模板调试的入口\n*/\n$.Test = function() {\n    Log('Test');\n};\n\nfunction main() {\n    $.Test();\n}",'def Test():\n    Log("template call")\n\next.Test = Test # 导出Test函数, 主策略可以通过ext.Test()调用','// 策略引用该模板以后直接用 ext::Test() 调用此方法\nvoid Test() {\n    Log("template call");\n}',Q,"C>HV(H, 10),SPK;\nC<LV(L, 15),BPK;\nAUTOFILTER;"],T=["javascript","python","text/x-c++src","blockly","mylanguage"],U=null,V=null,W=[],X={};a.snippets=[],a.api_doc="",a.insertSnippet=function(a,b){if(U){var c=j("trans")(a.code,!0);if("string"==typeof b&&"full"==b)k.confirm("ui.strategy.alert.addSnippet").then(function(){U.setValue(c),U.refresh()});else{c="\n"+c+"\n";var d=U.getDoc(),e=d.getCursor();d.replaceRange(c,{line:e.line,pos:0}),U.refresh()}}},a.isNew&&a.$watch("codeType",function(a,b){n(a.id)}),a.lang=f.use,a.$watch("lang()",function(a,b){if(V){r(Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(V)))}}),a.templates=[],a.templatesDisplay=[],a.isTemplateCollapsed=!0;var Y=function(){a.codeType.id!=I&&a.codeType.id!=J||20==a.category.id&&(a.category=a.categories[0]),a.templatesDisplay=[],_.each(a.templates,function(b){4==b.public&&-1!==b.name.toLowerCase().indexOf("mylanguage")&&(a.codeType.id==J?b.checked=!0:b.checked=!1,b.disabled=!0),a.canDepend(b)&&!b.disabled&&a.templatesDisplay.push(b)}),a.isTemplateCollapsed=a.templatesDisplay.length>10};a.isAutoStart=-1!=location.href.indexOf("auto=true"),a.logTypes=l.getLogTypes(),a.isFullScreen=!1,a.autoRefresh=!0,a.logEvent=!1,a.showThemePicker=!1,a.defTheme=m.KV_Get("codeTheme","eclipse"),a.defFontSize=m.KV_Get("codeFontSize",12),a.changeFontSize=function(b){a.defFontSize+=b,$(".CodeMirror").css("font-size",a.defFontSize+"pt")}
;var Z=["exchange","exchanges","ORDER_STATE_PENDING","ORDER_STATE_CLOSED","ORDER_STATE_CANCELED","ORDER_TYPE_BUY","ORDER_TYPE_SELL","LOG_TYPE_BUY","LOG_TYPE_SELL","LOG_TYPE_CANCEL","PD_LONG","PD_SHORT","PD_LONG_YD","PD_SHORT_YD","PERIOD_M1","PERIOD_M3","PERIOD_M5","PERIOD_M15","PERIOD_M30","PERIOD_H1","PERIOD_D1","onerror","onexit","onTick","Balance","FrozenBalance","Stocks","FrozenStocks","Asks","Bids","Open","High","Low","Close","Last","Volume","Buy","Sell","Amount","DealAmount","Time","Price","Type","MarginLevel","FrozenAmount","Profit","ContractType","week","this_week","next_week","quarter","Version","Log","Sleep","LogProfit","LogProfitReset","LogReset","LogStatus","EnableLog","Chart","Mail","SetErrorFilter","GetPid","GetLastError","_G","_Cross","GetCommand","HttpQuery"],aa=Z;a.editorThemes=["default","3024-day","3024-night","abcdef","ambiance","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","dracula","eclipse","elegant","erlang-dark","hopscotch","icecoder","isotope","lesser-dark","liquibyte","material","mbo","mdn-like","midnight","monokai","neat","neo","night","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","solarized dark","solarized light","the-matrix"];var ba=f.instant("ui.alert.leaveMesssage"),ca=f.instant("ui.alert.btLeaveMesssage");$(window).on("beforeunload",function(b){if(U&&U.getValue()!=O||a.testing)return a.testing&&(ba=ca),void 0===b&&(b=window.event),b&&(b.returnValue=ba),ba}),a.$on("$locationChangeStart",function(b){(U&&U.getValue()!=O||a.testing)&&(a.testing&&(ba=ca),confirm(ba)?a.testing&&m.rest("BacktestIO",[a.btNodeId,a.codeType.id,JSON.stringify(["DelTask",a.btUUID])]).then(function(a){},function(a){k.alert("ui.dialog.alertFailure")}):b.preventDefault())}),a.$on("$destroy",function(){a.autoRefresh=!1,U=null,$(window).off("beforeunload",function(){}),$(window).off("scroll",function(){}),N&&(N.terminate(),N=null)}),a.btSortBy="id",a.setSortBy=function(b){a.btSortBy=a.btSortBy==b?"-"+b:b},a.getSortStyle=function(b){return-1!==a.btSortBy.indexOf(b)?-1===a.btSortBy.indexOf("-")?"fa fa-sort-alpha-asc":"fa fa-sort-alpha-desc":"fa fa-sort"};var da=!_.findWhere(l.categories,{id:1,hide:!0}),ea=!_.findWhere(l.categories,{id:9,hide:!0});a.canDepend=function(b){return(a.codeType.id!=I||0==b.language)&&(!(-1!=b.name.indexOf("Digital")&&!ea)&&(b.language==a.codeType.id||0==b.language&&(a.codeType.id==I||a.codeType.id==J)))},a.selectTheme=function(b,c){if(U){var d=c;0==b||1==b?1==b&&(m.KV_Set("codeTheme",d),m.KV_Set("codeFontSize",a.defFontSize)):(d=m.KV_Get("codeTheme","eclipse"),a.defTheme=d),0!=b&&(a.showThemePicker=!1),U.setOption("theme",d)}},a.filterList=[],a.filterCmpList=[{op:">",desc:"大于",cls:"tag label label-success"},{op:"<",desc:"小于",cls:"tag label label-danger"},{op:"==",desc:"等于",cls:"tag label label-info"}],a.filterOpList=[{op:"加",desc:"加"},{op:"减",desc:"减"},{op:"乘",desc:"乘"},{op:"除",desc:"除"}],a.filterOpAction=a.filterOpList[0],a.filterCmpAction=a.filterCmpList[0],a.filterCmpResult=1,a.filterLeft=null,a.filterRight=null,a.showFilter=function(a){if(void 0===a)return function(a){return a.optimize};for(var b=0,c=0;c<a.length;c++)a[c].optimize&&b++;return b>1},a.addFilter=function(b){if(null!=a.filterLeft&&null!=a.filterRight&&null!=a.filterCmpAction){var c=_.find(a.filterList,function(c){return c.file==b&&(c.left==a.filterLeft&&c.right==a.filterRight||c.left==a.filterRight&&c.right==a.filterLeft)});if(c){if(c.op==a.filterCmpAction&&c.left==a.filterLeft&&c.diff==a.filterCmpResult)return void k.alert(c.desc+", Filter repeat !");c.left=a.filterLeft,c.op=a.filterCmpAction,c.right=a.filterRight,c.diff=a.filterCmpResult}else c={left:a.filterLeft,op:a.filterCmpAction,right:a.filterRight,file:b,diff:a.filterCmpResult},a.filterList.push(c);c&&("=="==c.op.op?c.desc=c.left[1]+" 等于 "+c.right[1]:">"==c.op.op?c.desc=c.left[1]+" 至少比 "+c.right[1]+" 大 "+c.diff:"<"==c.op.op&&(c.desc=c.left[1]+" 至少比 "+c.right[1]+" 小 "+c.diff))}},a.removeFilter=function(b){a.filterList.splice(b,1)},a.testingStr="";var fa="";a.showRsync=!1,a.rsyncToken="",a.btMode="0",a.saveOptimizeDownload=function(){for(var d="optimize_"+a.stime.replace(/[\-\s:]/g,"")+"_"+a.etime.replace(/[\-\s:]/g,"")+".csv",e=a.btHasFutures,f=["#"],g=0;g<xa[0].settings.length;g++)f.push('"'+xa[0].settings[g].argDesc+'"');f=f.concat(["耗时(秒)","交易次数"]),e&&f.push("平仓盈亏"),f=f.concat(["胜率(%)","最大回撤(%)","夏普","预估收益","利润"]);var h=f.join(",")+"\n";for(g=0;g<xa.length;g++){for(var i=xa[g],j=[i.id],k=0;k<i.settings.length;k++)j.push(i.settings[k].value);i.finished?(j.push(parseFloat((i.elapsed/1e3).toFixed(5))),j.push(i.tradeCount),e&&j.push(parseFloat(i.closeProfit.toFixed(5))),j.push(parseFloat((100*i.winningRate).toFixed(2))),j.push(parseFloat((100*i.maxDrawdown).toFixed(2))),j.push(parseFloat(i.sharpeRatio.toFixed(3))),j.push(parseFloat(i.returns.toFixed(5))),j.push(parseFloat(i.profit.toFixed(5)))):(j=j.concat(["","","","","",""]),e&&j.push("")),h+=o(j)}b.saveAs(new c([h],{type:"text/csv;charset=utf8;"}),d)},a.saveDownload=function(){var d=a.stime.replace(/[\-\s:]/g,"")+"_"+a.etime.replace(/[\-\s:]/g,"")+".csv",e='"时间", "平台", "定单ID", "日志类型", "价格", "数量", "消息"\n';_.each(a.logs,function(a){e+=o([a.date,a.platformStr,a.order_id>0?a.order_id:"",f.instant(a.logTypeStr),a.priceStr,a.amountStr,a.extra])}),b.saveAs(new c([e],{type:"text/csv;charset=utf8;"}),d)},a.logLimit=800,a.loadMore=function(b){a.logLimit+=Math.min(b,a.logs.length-a.logLimit)},a.summary="",a.nodes=[];var ga=moment(),ha="YYYY-MM-DD HH:mm:ss";a.stime=ga.subtract(1,"days").format("YYYY-MM-DD 00:00:00"),a.etime=ga.format("YYYY-MM-DD 00:00:00"),a.scriptArgsSelectList=l.scriptArgsSelectList,a.inputArgName="",a.inputArgDesc="",a.inputArgShowName="",a.inputArgDef="",a.inputArgType=a.scriptArgsSelectList[0],a.scriptArgList=[],a.scriptArgGroup=[],a.$watch("scriptArgList",function(b,c,d){a.scriptArgGroup=l.parseArgGroup(b)},!0),a.scriptCMDSelectList=l.scriptArgsSelectList,a.inputCMDName="",a.inputCMDDesc="",a.inputCMDShowName="",a.inputCMDDef="",a.inputCMDType=a.scriptCMDSelectList[0],a.scriptCMDList=[],a.scriptCMDGroup=[],a.$watch("scriptCMDList",function(b,c,d){a.scriptCMDGroup=l.parseArgGroup(b)},!0),a.isVimMode=!1;var ia={bt:{},args:{},def:{}},ja=!1,ka=function(a,b,c){var d=function(d,e){e=void 0!==e&&e;var f=[],g={},h=a.indexOf(b+d);if(-1!=h){var i=a.indexOf(c,h+5);if(-1!=i)for(var j=a.slice(h+d.length+2,i).split("\n"),k=0;k<j.length;k++){var l=j[k].indexOf(":");if(-1!=l){var m=j[k].slice(0,l).replace(/(^\s*)|(\s*$)/g,""),n=j[k].slice(l+1).replace(/(^\s*)|(\s*$)/g,"");if(g[m]=n,e)try{var o=angular.fromJson(n);o.unshift(m),f.push(o)}catch(i){}}}}return e?f:g};return{bt:d("backtest"),args:d("args",!0),def:d("default")}};a.exportFile=function(d){void 0===d&&(d=-1!=location.href.indexOf("?encrypt"));var e=function(e){var f="";f+=v("NAME",a.name),f+=v("DESCRIPTION",a.description),f+=v("NOTE",a.note),f+=v("MANUAL",a.manual);var g=[];_.each(u(),function(a,b){g.push(angular.toJson(a))}),f+=v("PARAM",g.join("\n")),f+=v("CODE",e),f+=v("LANG",a.codeType.id),f+=v("TYPE",a.category.id);var h=[];_.each(a.templates,function(b){b.checked&&a.canDepend(b)&&h.push(b.id)}),a.codeType.id!=J&&h.length>0&&(f+=v("DEPENDS",h.join(","))),f+=v("TIME",moment().format("YYYY-MM-DD HH:mm:ss")),b.saveAs(new c([f],{type:"text/xml;charset=utf8;"}),(a.name||"strategy")+(d?"_pack":"")+".xml")};d&&0==a.codeType.id?m.rest("JSCompile",[U.getValue()+';global.main=main;if(typeof(onexit) === "function")global.onexit=onexit;',""]).then(function(a){e('\n\neval("'+a+'")')}):e(U.getValue())},a.importFile=function(b){if(b){var c=b.name.toLowerCase().indexOf(".xtrd")==b.name.length-5,d=new FileReader;d.readAsText(b,c?"gbk":"utf8"),d.onload=function(b){a.$apply(function(){var d="Success, 导入成功, 保存后生效 !";try{var e=b.target.result,f=0,g=0;c?f=J:(f=parseInt(w(e,"LANG",!0)),g=parseInt(w(e,"TYPE",!0)));var h=[];_.each(w(e,"PARAM").split("\n"),function(a){if(-1!==a.indexOf("["))if(c){var b=a.replace("[","").replace("]","").split(",");4==b.length&&h.push([b[0],b[0],parseFloat(b[3])])}else h.push(angular.fromJson(a))}),a.scriptArgList=[],a.scriptCMDList=[],l.parseArgs(h,a.scriptArgList,a.scriptCMDList),a.name=w(e,"NAME"),a.note=w(e,"NOTE"),a.manual=w(e,"MANUAL"),a.description=w(e,"DESCRIPTION");var i=_.findWhere(a.codeTypes,{id:f}),g=_.findWhere(a.categories,{id:g});U.setValue(w(e,"CODE")),void 0!==a.codeType&&(a.codeType=i,a.category=g,a.changeCodeType(a.codeType,!0),n(f)),_.each(w(e,"DEPENDS").split(","),function(b){_.each(a.templates,function(a){a.id.toString()==b&&(a.checked=!0)})}),U.refresh();var j=w(e,"TIME");"string"==typeof j&&j.length>0&&(d+=" LastModified "+j)}catch(a){d="import error !"+a}k.alert(d)})}}},a.saveFile=function(){b.saveAs(new c([U.getValue()],{type:"application/"+T[a.codeType.id]+"charset=utf8;"}),(a.name||"strategy")+[".js",".py",".cpp",".txt",".txt"][a.codeType.id])},a.formatCode=function(){1!=a.codeType.id&&(U.setValue(js_beautify(U.getValue())),U.refresh())},a.addMeta=function(){var b=U.getValue(),c=moment(a.stime).format("YYYY-MM-DD HH:mm:ss"),d=moment(a.etime).format("YYYY-MM-DD HH:mm:ss"),e=function(a){if(isNaN(a))return a;switch(a){case 1:return"1m";case 3:return"3m";case 5:return"5m";case 15:return"15m";case 30:return"30m";case 60:return"1h";case 1440:return"1d"}}(a.ktick_selected.minutes),f=a.codeType.commentStart,g=a.codeType.commentEnd;1==a.codeType.id&&(f="'''",g="'''"),f+="backtest";var h=[];_.each(a.pairs_select,function(a){var b=z(a.eid),c={eid:a.eid,currency:a.stock};b.balance!=a.balance&&(c.balance=a.balance),b.stocks!=a.stocks&&(c.stocks=a.stocks),b.minfee!=a.minfee&&(c.minfee=a.minfee),b.fee[0]==a.fee[0]&&b.fee[1]==a.fee[1]||(c.fee=a.fee),h.push(c)});var i=angular.toJson(h),j="";h.length>0&&(j+="exchanges: "+i+"\n");var k=[a];_.each(a.templates,function(b){b.checked&&a.canDepend(b)&&k.push(b)});var l=[];_.each(k,function(a,b){_.each(a.scriptArgList,function(c){var d=null;"selected"==c[3].inputType?c.def!=c.indexValue&&(d=[c[0],c.indexValue]):c.def!=c.value&&(d=[c[0],c.value]),d&&(b>0&&d.push(a.id),l.push(d))})}),l.length>0&&(j+="args: "+angular.toJson(l)+"\n");var m=f+"\nstart: "+c+"\nend: "+d+"\nperiod: "+e+"\n"+j+g,n=b.indexOf(f),o=!1;if(-1!=n){var p=b.indexOf(g,n+f.length);p>n&&(o=!0,U.setValue(b.slice(0,n)+m+b.slice(p+g.length)))}o||U.setValue(m+"\n\n"+b),U.refresh()},a.switchVim=function(){"vim"!=U.getOption("keyMap")?(U.setOption("keyMap","vim"),a.isVimMode=!0):(U.setOption("keyMap","default"),a.isVimMode=!1),U.focus()},a.opToken=function(b){var c="ui.alert.updateKey";""===a.rsyncToken&&(c="ui.alert.genKey"),k.confirm(c).then(function(){m.rest("OpStrategyToken",[M,b]).then(function(b){a.pending_token=!0,a.rsyncToken=""==b?"":b,a.pending_token=!1},function(b){a.pending_token=!1,k.alert(b)})})},a.switchFullScreen=function(){var b=U.getOption("fullScreen");U.setOption("fullScreen",!b),a.isFullScreen=!b,U.focus(),b?$("#editor-area").css({position:"relative",height:"500px","z-index":0}):$("#editor-area").css({position:"fixed",height:"100%",top:0,left:0,right:0,"z-index":10}),"undefined"!=typeof $crisp&&$crisp.push(["do",b?"chat:show":"chat:hide"]),V&&Blockly.svgResize(V)},a.testCmdRobot=function(a){var b=j("trans")(a[0]),c=a.value,d=a[3].id;return 0===d&&isNaN(c)?void k.alert("ui.alert.startegy.invalidArg"):2===d&&0===c.length?void k.alert("ui.alert.startegy.emptyStringArg"):(3===d?b=b+":"+a.indexValue:5!=d&&(b=b+":"+a.value),b.length>200?void k.alert("ui.alert.startegy.longCommand"):void k.alert(f.instant("ui.alert.startegy.previewCommand",{cmd:b})))},a.onCheckedTemplate=function(b){30!==b.category||b.checked||k.alert(f.instant("ui.alert.strategy.checkTemplate",{strategy:b.name})),V&&(b.source.length>0?p(a.templates,V):(b.pending=!0,m.rest("GetTemplates",[[b.id]]).then(function(c){b.pending=!1;var d=_.findWhere(c,{id:b.id});d&&(b.source=d.source,p(a.templates,V))},function(a){b.pending=!1,console.log("GetTemplate",a)})))};var la=function(a,b,c,d,e,f,g){function h(g){var h=d;if(0==e.id){if(isNaN(d))return void k.alert("ui.alert.strategy.invalidArgNumber");h=parseFloat(d)}else if(1==e.id){if("boolean"==typeof d&&(d=d.toString()),"true"!=d&&"false"!=d)return void k.alert("ui.alert.strategy.invalidArgBoolean");h="true"==d}var i=[a,b,c,e,h];i.name=l.stripArgName(b),i.value=h,i.def=h,i.condition=j,i.optimize=!1,3==e.id&&(i.options=i.value.split(-1!=i.value.indexOf("||")?"||":"|")),0==e.id&&(i.optimizeSettting=l.getOptimizeSettting(i.value)),-1!=g?f[g]=i:f.push(i)}if(0==a.length||0==b.length||0==d.length&&2!=e.id&&4!=e.id&&5!=e.id)return void k.alert("ui.alert.strategy.uncompletedArg");if(5==e.id&&(d="__button__"),3==e.id&&d.split("|").length<2)return void k.alert("ui.alert.strategy.invalidSelect");a=a.replace(/\s+/g,"");var i=a,j=[],m=i.match(/^([a-zA-Z_$][0-9a-zA-Z_$]*)@([a-zA-Z_$][0-9a-zA-Z_$]*)([=!><]=|>|<)([0-9]*)$/),n=i.match(/^([a-zA-Z_$][0-9a-zA-Z_$]*)@([!]*[a-zA-Z_$][0-9a-zA-Z_$]*)$/);if(m)i=m[1],j=m.slice(2,5);else if(n)i=n[1],j=[n[2].replace(/!/g,""),"!"==n[2][0]?"!=":"==","1"];else if(!g&&!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(i))return void k.alert("ui.alert.strategy.invalidArgName");for(var o=-1,p=0;p<f.length;p++)f[p][0].split("@")[0]!=i&&f[p][1]!=b||(o=p);-1!==o?k.confirm("ui.alert.strategy.repeatArg").then(function(){h(o)}):h(o)};a.addArg=function(){la(a.inputArgName,a.inputArgShowName,a.inputArgDesc,a.inputArgDef,a.inputArgType,a.scriptArgList,!1)},a.addCMD=function(){la(a.inputCMDName,a.inputCMDShowName,a.inputCMDDesc,a.inputCMDDef,a.inputCMDType,a.scriptCMDList,!0)},a.hasArg=function(){var b=a.scriptArgList.length>0;return b||_.each(a.templates,function(a){a.checked&&a.scriptArgList.length>0&&(b=!0)}),b},a.copyArg=function(b){var c=a.scriptArgList[b];a.inputArgName=c[0],a.inputArgShowName=c[1],a.inputArgDesc=c[2],a.inputArgType=c[3],a.inputArgDef=c[4]},a.copyCMD=function(b){var c=a.scriptCMDList[b];a.inputCMDName=c[0],a.inputCMDShowName=c[1],a.inputCMDDesc=c[2],a.inputCMDType=c[3],5==a.inputCMDType.id?a.inputCMDDef="":a.inputCMDDef=c[4]},a.removeArg=function(b){k.confirm("ui.strategy.deleteArgConfirm").then(function(){a.scriptArgList.splice(b,1)})},a.removeCMD=function(b){k.confirm("ui.strategy.deleteCmdConfirm").then(function(){a.scriptCMDList.splice(b,1)})},a.showArg=l.argIsShow;var ma=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d][4];3==a[d][3].id&&(e=l.listMagic+e),4==a[d][3].id&&(e=l.encryptMagic+e);var f=[a[d][0],a[d][1],a[d][2],e];void 0!==b&&(f[0]=b+f[0]),c.push(f)}return c};a.category=_.findWhere(a.categories,{id:m.KV_Get("codeCategory",0)})||a.categories[0],a.codeType=_.findWhere(a.codeTypes,{id:m.KV_Get("codeLang",0)}),a.codeType||(a.codeType=a.codeTypes[0]),a.showCodeType=function(b){return a.codeType.id,b.id,!0},a.changeGroup=function(b){a.group=b},a.changeCategory=function(b){var c=U.getValue(),d=R[a.codeType.id],e=S[a.codeType.id];c==d&&20===b.id?(U.setValue(e),O=U.getValue()):c==e&&20!==b.id?(U.setValue(d),O=U.getValue()):20!==a.category.id&&20==b.id&&a.templates.length>0&&k.alert("ui.strategy.alertCastTemplate"),20!=b.id&&m.KV_Set("codeCategory",b.id),a.category=b,x()},a.changeCodeType=function(b,c){if(!(void 0!==c&&c||a.isNew))return void k.alert("ui.strategy.alertChangeCodeType");if(a.codeType=b,Y(),b.id!=I){var d=R[b.id],e=S[b.id],f=U.getValue().replace("_C(exchanges[0].GetAccount)","exchange.GetAccount()");-1!=_.indexOf(20!==a.category.id?R:S,f)&&(O=20!==a.category.id?d:e,U.setValue(O)),U.setOption("mode",T[b.id]),h(function(){U.focus(),U.refresh()})}else h(function(){if(V)return V.render(),void Blockly.svgResize(V);r(angular.fromJson(P).xml,function(){V&&(V.render(),Blockly.svgResize(V))})},100);a.isNew&&m.KV_Set("codeLang",b.id)},a.isEdit&&a.$on("onStrategyUpdate",function(b,c){c.id==M&&(a.pending=!0,m.rest("GetStrategyDetail",M).then(function(b){O=b.strategy.source,U.setValue(O),k.notify("ui.notify.syncStrategySuccess"),a.pending=!1},function(b){a.pending=!1,k.alert(b)}))}),a.submit=function(){if(a.pending)return void k.alert("ui.alert.strategy.busy");if(!a.name)return void k.alert("ui.alert.strategy.invalidName");if(a.frm.$invalid)return void k.alert("ui.alert.invalidForm");var b=angular.toJson(u()),c=a.name,d=a.description,f=a.note,g=a.manual,h="",i="";if(a.codeType.id==I)try{var j=Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(V)),l=js_beautify(L(V));i=l,h=angular.toJson({xml:j,javascript:l})}catch(a){k.alert(a.toString())}else{h=U.getValue(),i=h;try{fetchBlocklyMeta(h)}catch(a){return void k.alert("Blockly Error: "+a)}}if(0==i.length)return void k.alert("ui.alert.strategy.invalidSource");if(0!=c.length&&0!=i.length){a.pending=!0;var n=[];20!==a.category.id&&_.each(a.templates,function(b){b.checked&&a.canDepend(b)&&n.push(b.id)});var o=a.group?a.group.id:-1;m.KV_Set("strategy_activeGroup",o),m.rest("SaveStrategy",[M,a.category.id,a.codeType.id,o,c,d,b,h,f,g,n]).then(function(b){a.pending=!1,b?(O=i,"string"==typeof b?(a.rsyncToken=b,k.alert("ui.alert.strategy.saveSuccessWithSync")):k.alert("ui.alert.strategy.saveSuccess"),M<=-1&&e.path("/m/strategies")):k.alert("ui.alert.strategy.saveRepeat")},function(b){a.pending=!1,k.alert(-1==b.indexOf("Duplicate")?b:"ui.alert.strategy.saveRepeat")})}},a.confirmSubmit=function(){k.confirm("ui.alert.strategy.copyAlert",!a.isCopy).then(a.submit)};var na=[{eid:"Futures_CTP",name:"ui.exchange.futures.ctp",stocks:["FUTURES"],quoteCurrency:"CNY"}],oa=[{eid:"OKCoin_EN",name:"ui.exchange.okcoinEN",stocks:["BTC_USD","LTC_USD","ETH_USD","ETC_USD","BCH_USD"]},{eid:"Bitfinex",name:"Bitfinex",stocks:["BTC_USD","LTC_USD","ETH_USD","ETC_USD","BCH_USD"]},{eid:"OKEX",name:"OKEX",stocks:["BTC_USDT","LTC_USDT","ETH_USDT","ETC_USDT","BCH_USDT","LTC_BTC","ETH_BTC","ETC_BTC","BCH_BTC"]},{eid:"Huobi",name:"ui.exchange.huobi",stocks:["BTC_USDT","LTC_USDT","ETH_USDT","ETC_USDT","BCH_USDT","LTC_BTC","ETH_BTC","ETC_BTC","BCH_BTC"]},{eid:"Futures_OKCoin",name:"ui.exchange.futures.okcoin",stocks:["BTC_USD","LTC_USD","ETH_USD","ETC_USD","BCH_USD"]},{eid:"Futures_BitMEX",name:"ui.exchange.futures.bitmex",stocks:["XBT_USD"]}],pa=[];ea&&(pa=pa.concat(oa)),da&&(pa=pa.concat(na)),-1!=location.href.indexOf("lts")&&pa.push({eid:"Futures_LTS",name:"ui.exchange.stocks",stocks:["STOCK"],quoteCurrency:"CNY"});for(var qa=0;qa<pa.length;qa++)pa[qa].group=f.instant("Futures_CTP"==pa[qa].eid||"Futures_LTS"==pa[qa].eid?"ui.strategy.type.futuresStocks":"ui.strategy.type.cryptocurrency");if(a.platforms=pa,a.kticks=l.kticks,a.ktick_selected=a.kticks[5],a.btBaseTick=a.kticks[1],a.pairs_select=[],a.showAdvancedOption=m.KV_Get("showAdvancedOption",!1),a.btMaxRuntimeLogs=m.KV_Get("btMaxRuntimeLogs",8e3),a.btMaxChartLogs=m.KV_Get("btMaxChartLogs",3e3),a.btMaxProfitLogs=m.KV_Get("btMaxProfitLogs",8e3),a.btSlipPoint=m.KV_Get("btSlipPoint",0),a.btNetDelay=m.KV_Get("btNetDelay",200),a.btMaxBarLen=m.KV_Get("btMaxBarLen",300),a.btFaultTolerant=m.KV_Get("btFaultTolerant",.5),a.btHistoryMode=m.KV_Get("btHistoryMode","0"),a.switchAdvancedOption=function(){a.showAdvancedOption=!a.showAdvancedOption,m.KV_Set("showAdvancedOption",a.showAdvancedOption)},a.onPlatformSelect=function(){var b=a.option.platform.eid;a.option.stock=a.option.platform.stocks[0];var c=z(b,a.option.stock);switch(a.accountFee=c.fee,a.accountBalance=c.balance,a.accountStocks=c.stocks,b){case"Futures_CTP":case"Futures_LTS":a.ktick_selected=_.findWhere(a.kticks,{minutes:1440})}a.changePeriodOption()},a.changePeriodOption=function(){switch(a.ktick_selected.minutes){case 1440:a.btBaseTick=_.findWhere(a.kticks,{minutes:60});break;case 60:a.btBaseTick=_.findWhere(a.kticks,{minutes:15});break;case 30:case 15:a.btBaseTick=_.findWhere(a.kticks,{minutes:5});break;case 5:case 3:case 1:a.btBaseTick=_.findWhere(a.kticks,{minutes:1})}},a.changeTickOption=function(){var b=moment(a.stime).unix(),c=moment(a.etime).unix();if(a.btMode,1!=a.category.id&&1==a.btBaseTick.minutes&&b<1456070400)return k.alert("ui.alert.strategy.outofTimeLine"),void(a.showAdvancedOption=!0);if(c-b>60*a.btBaseTick.minutes*5e5){var d=moment.unix(b+60*a.btBaseTick.minutes*5e5);a.etime=d.format(ha);var e=$("#timeRangePickerB").data("daterangepicker");e.setStartDate(d),e.setEndDate(d),a.showAdvancedOption=!0,k.alert(f.instant("ui.alert.strategy.outofRange",{range:moment.duration(5e5*a.btBaseTick.minutes,"minutes").humanize()}))}},a.isPremiumBacktest)m.rest("GetStrategyDetail",parseInt(i.id)).then(function(b){l.parseArgs(b.strategy.args,a.scriptArgList,a.scriptCMDList),a.name=b.strategy.name,M=b.strategy.id,a.$emit("titleChange",a.name+" - Backtest");for(var c=0;c<a.categories.length;c++)if(a.categories[c].id==b.strategy.category){a.category=a.categories[c];break}for(var c=0;c<a.codeTypes.length;c++)if(a.codeTypes[c].id==b.strategy.language){a.codeType=a.codeTypes[c];break}a.description=b.strategy.description,a.manual=b.strategy.manual||"",void 0!==b.strategy.templates&&_.each(b.strategy.templates,function(b){b.checked=!0,b.scriptArgList=[],l.parseArgs(b.args,b.scriptArgList),b.scriptArgGroup=l.parseArgGroup(b.scriptArgList),a.templates.push(b)}),x(),Ba()},function(a){k.alert(-1==a.indexOf("no rows")?a:"ui.alert.strategy.notfound")});else{var ra=["GetStrategyList","GetStrategyGroupList","GetNodeList"],sa=[[-1,-1,-1,20,1],[],[]];if(void 0!==i.id){var ta=parseInt(i.id);ra.push("GetStrategyDetail"),sa.push([ta]),ra.push("OpStrategyToken"),sa.push([ta,0])}var ua=[];m.rest(ra,sa).then(function(b){if(a.templates=b[0].result.strategies,a.groups=[{id:-1,name:"ui.strategy.group.default"}].concat(b[1].result.items),a.group=a.groups[0],_.each(b[2].result.nodes,function(b){parseFloat(b.build)>3&&(b.desc=b.id+" : "+b.ip+" - "+b.os+(b.name?" ("+b.name+")":""),b.online&&b.is_owner&&(b.valid=!0,a.nodes.push(b)))}),a.nodes.push({id:0,online:!0,valid:!0,desc:f.instant("ui.edit.strategy.nodeCloud")}),b.length>3){var c=b[3].result;if(""!==b[4].result&&(a.rsyncToken=b[4].result),!c.strategy.is_owner&&1!=c.strategy.public&&4!=c.strategy.public)return void k.alert("Access denied");if(a.isEdit||a.isCopy){var d=_.findWhere(a.groups,{id:c.strategy.group_id||-1});d&&(a.group=d)}l.parseArgs(c.strategy.args,a.scriptArgList,a.scriptCMDList),a.name=c.strategy.name+(a.isCopy?"  (Copy)":""),a.$emit("titleChange",a.name+" - Edit");for(var e=0;e<a.categories.length;e++)if(a.categories[e].id==c.strategy.category){a.category=a.categories[e];break}for(var e=0;e<a.codeTypes.length;e++)if(a.codeTypes[e].id==c.strategy.language){a.codeType=a.codeTypes[e];break}a.description=c.strategy.description,a.manual=c.strategy.manual||"",a.note=void 0!==c.strategy.note?c.strategy.note:"",M=a.isCopy?-1-c.strategy.id:c.strategy.id,O=c.strategy.source,a.templates=_.filter(b[0].result.strategies,function(a){return a.id!==c.strategy.id}),_.each(a.templates,function(a){a.hash=a.id}),void 0!==c.strategy.templates&&("string"==typeof c.strategy.templates?ua=_.map(c.strategy.templates.split(","),function(a){return parseInt(a)}):_.each(c.strategy.templates,function(b){if(30===b.category){var c=b.name.indexOf("-");b.hash=b.name.substring(0,c),b.name=b.name.substring(c+1)}else b.hash=b.id;b.checked=!0;var d=_.findIndex(a.templates,{hash:b.hash});-1===d?a.templates.push(b):a.templates[d]=b})),n(c.strategy.language)}else O=R[a.codeType.id];var g=0;if(_.each(a.templates,function(a){a.checked||(a.source="",a.checked=-1!==_.indexOf(ua,a.id),a.checked&&g++),a.scriptArgList=[],l.parseArgs(a.args,a.scriptArgList),a.scriptArgGroup=l.parseArgGroup(a.scriptArgList),a.pending=!1}),a.isCopy?a.templates=_.filter(a.templates,function(a){return a.checked}):g<ua.length&&k.alert(f.instant("ui.alert.strategy.lostTemplate",{num:ua.length-g})),"string"==typeof a.codeType.commentStart&&(ia=ka(O,a.codeType.commentStart,a.codeType.commentEnd),"string"==typeof ia.bt.exchanges))try{_.each(angular.fromJson(ia.bt.exchanges),function(b){var c=_.findWhere(a.platforms,{eid:b.eid});if(void 0!==c){var d={eid:c.eid,name:c.name,label:c.eid};"string"==typeof b.currency&&-1!=_.indexOf(c.stocks,b.currency)?d.stock=b.currency:d.stock=c.stocks[0],"string"==typeof c.quoteCurrency&&(d.quoteCurrency=c.quoteCurrency);var e=z(d.eid,d.stock);void 0===b.balance?d.balance=e.balance:d.balance=parseFloat(b.balance),void 0===b.stocks?d.stocks=e.stocks:d.stocks=parseFloat(b.stocks),void 0===b.minfee?d.minfee=e.minfee:d.minfee=parseFloat(b.minfee),void 0===b.fee?d.fee=e.fee:d.fee=b.fee,a.addCustomPair(d)}})}catch(a){console.log(a)}x(),h(function(){if(a.codeType.id==I)try{r(angular.fromJson(O).xml)}catch(a){console.log("init block error",a)}t(O)},100),Ba()},function(a){k.alert(-1==a.indexOf("no rows")?a:"ui.alert.strategy.notfound")})}a.removePair=function(b){for(var c=0;c<a.pairs_select.length;c++)if(a.pairs_select[c].label==b.label&&a.pairs_select[c].stock==b.stock)return void a.pairs_select.splice(c,1)},a.addCustomPair=function(b){for(var c=0,d="",e=0;e<a.pairs_select.length;e++)a.pairs_select[e].name==b.name&&a.pairs_select[e].stock==b.stock&&(c++,d="-"+c);b.label=b.eid+d,"Futures_OKCoin"!=b.eid&&"Futures_BitMEX"!=b.eid||(b.balance=0),"Futures_CTP"!=b.eid&&(b.minfee=0),b.desc=("Futures_OKCoin"!=b.eid?"Balance: "+b.balance:"")+("Futures_CTP"!=b.eid?"<br>Stocks: "+b.stocks:"")+"<br>Fee: ["+b.fee+"] %"+("Futures_CTP"==b.eid?"<br>MinFee: "+b.minfee+" 元":""),a.pairs_select.push(b)},a.addPair=function(){var b={eid:a.option.platform.eid,name:a.option.platform.name,quoteCurrency:a.option.platform.quoteCurrency,stock:a.option.stock,balance:a.accountBalance,stocks:a.accountStocks,minfee:a.accountMinFee,fee:[parseFloat(a.accountFee[0]),parseFloat(a.accountFee[1])]};a.addCustomPair(b)},a.getBtnClass=function(){return a.pairs_select.length>0?"btn btn-success":"btn btn-danger"},a.elapsed=0,a.progress=0,a.workerPending=!1,a.workerLoadBytes=0,a.logsCount=0,a.closeProfit=0,a.btHasFutures=!1,a.tradeFee=0,a.accountStatus=[],a.positionProfit=0,a.currMargin=0,a.updateTimeLine="",a.taskStatus=0,a.logs=[],a.tradeCount=0,a.profit=0,a.profit_logs=[],a.testing=!1,a.accountBalance=1e4,a.accountStocks=3,a.accountFee=[.2,.2],a.accountMinFee=5,a.canStop="undefined"!=typeof Worker,a.btUUID="",a.btNodeId=0,a.btInterval=5e3,a.btTotalDepositAssets=0,a.btTotalBalance=0,a.btYearDays=365,a.btPeriodMinutes=1;var va=!1,wa=function(a){var b={linestyle:0,linewidth:1,plottype:"line"};return _.each(a,function(a){switch(a){case 1:b.linewidth=1;break;case 2:b.linewidth=2;break;case 3:b.linewidth=3;break;case 4:b.linewidth=4;break;case 5:b.linewidth=5;break;case 6:b.linewidth=6;break;case 7:b.linewidth=7;break;case 8:b.linestyle=1;break;case 9:b.linestyle=2;break;case 10:case 11:b.dashStyle=3;break;case 12:b.plottype="histogram";break;case 13:case 16:b.plottype="columns";break;case 101:b.color="#ff0000";break;case 102:b.color="#00ff00";break;case 103:b.color="#0000ff";break;case 104:b.color="#ff00ff";break;case 105:b.color="#ffff00";break;case 110:b.color="#000000";break;case 111:b.color="#ffffff";break;case 112:b.color="#00ffff";break;case 113:b.color="#808080";break;case 106:b.color="#D3D3D3";break;case 107:b.color="#FF9999";break;case 108:b.color="#90ee90";break;case 109:b.color="#ADD8E6"}}),b};a.$on("onNodeUpdate",function(b,c){0===c.event&&parseFloat(c.build)>3&&a.nodes.push(c);var d=_.findIndex(a.nodes,{id:c.id});if(-1!==d){var e=a.nodes[d],f="";switch(c.event){case 0:case 2:e.online=!0,f="状态为正常";break;case 3:e.online=!1,f="状态为离线";break;case 1:f="状态为退出",a.nodes.splice(d,1)}e.desc=e.id+" : "+e.ip+" - "+e.os+(e.name?" ("+e.name+")":""),""!==f&&0!=a.codeType.id&&k.notify("托管者 IP: "+e.ip+" "+f),a.$digest()}}),a.$on("onBacktest",function(b,c){c.uuid==a.btUUID&&""!==c.status&&F(c.uuid,JSON.parse(c.status),c.output)});var xa=[],ya=-1;a.optimizeList=[],a.optimizePos=0;var za=function(b){if(a.isPremiumBacktest||a.codeType.id!=J&&0!=a.codeType.id&&a.codeType.id!=I)return void Aa(b,"");var c="undefined"==typeof __workerjs,d="";c?(m.g.worker="",d="scripts/misc/sandbox/worker.js"):d=__workerjs;var e=void 0===m.g.worker,f=a.codeType.id==J&&void 0===m.g.bootstrapCode;if(e||f){a.testing=!0;var g=a.testingStr;a.testingStr="ui.backtest.loading";var h=[],i=[];e&&(h.push("GetSettings"),i.push([K])),f&&(h.push("GetSettings"),i.push(["bootstrap_mylanguage"])),m.rest(h,i).then(function(c){console.log("engine "+K+" OK."),e&&(m.g.worker=1==h.length?c:c[0].result),f&&(m.g.bootstrapCode=1==h.length?c:c[c.length-1].result),a.testing=!1,a.testingStr=g,Aa(b,m.g.worker,d,m.g.bootstrapCode)},function(b){a.testing=!1,a.testingStr=g})}else Aa(b,m.g.worker,d,m.g.bootstrapCode)},Aa=function(b,c,d,e){if(!a.frmtest.$invalid&&0!=a.pairs_select.length){var f=moment(a.stime).unix(),g=moment(a.etime).unix();if(g<=f)return void k.alert("ui.strategy.alert.rangeError");if(2===a.category.id){if(a.btBaseTick.minutes<1440)return void k.alert("股票回测的 低层线K线周期 暂只支持天");if(a.ktick_selected.minutes<1440)return void k.alert("股票回测的 GetRecords K线周期 暂只支持天")}if(a.isPremiumBacktest||0!=a.codeType.id){if(a.btMaxRuntimeLogs>8e3)return void k.alert("ui.strategy.alert.maxLogItemError");if(a.btMaxProfitLogs>8e3)return void k.alert("ui.strategy.alert.maxProfitItemError");if(a.btMaxChartLogs>5e3)return void k.alert("ui.strategy.alert.maxChartItemError")}var i="",j=null;if(a.isPremiumBacktest)j=M;else if(a.codeType.id==I)try{j=L(V),-1!=location.href.indexOf("debug=true")&&console.log(j)}catch(a){k.alert(a.toString())}else j=U.getValue();var l=[],n=j;if(a.isPremiumBacktest||a.codeType.id!=J||(n=e.replace("__code__",JSON.stringify(n))),20!==a.category.id&&_.each(a.templates,function(b){b.checked&&(a.isPremiumBacktest||b.source.length>0)&&a.canDepend(b)&&l.push([a.isPremiumBacktest?b.id:b.source,b.scriptArgList,b.name])}),l.push([n,a.scriptArgList,a.codeType.id==J?"mylanguage":"main"]),ya<0){var o=[];if(_.each(l,function(a){_.each(a[1],function(b,c){b.optimize&&o.push({file:a[2],argName:b[0].split("@")[0],argDesc:b[1],setting:b.optimizeSettting})})}),xa=[],o.length>0){if(xa=G(o),0==xa.length)return void k.alert("没有检测到可以回测的参数, 请重新调整优化选项!");ya=0}a.optimizeList=xa}xa.length>0&&(xa[ya].running=!0),a.optimizePos=ya,m.KV_Set("btMaxRuntimeLogs",a.btMaxRuntimeLogs),m.KV_Set("btMaxChartLogs",a.btMaxChartLogs),m.KV_Set("btMaxProfitLogs",a.btMaxProfitLogs),m.KV_Set("btSlipPoint",Math.max(0,a.btSlipPoint)),m.KV_Set("btNetDelay",Math.max(1,a.btNetDelay)),m.KV_Set("btMaxBarLen",Math.max(1,a.btMaxBarLen)),m.KV_Set("btFaultTolerant",Math.min(1,Math.max(0,a.btFaultTolerant))),m.KV_Set("btHistoryMode",a.btHistoryMode),$("#chart_history").empty(),$("#chart_strategy").empty(),$("#chart_pnl").empty(),a.btTotalDepositAssets=0,a.btPeriodMinutes=a.ktick_selected.minutes,a.summary="",a.profit=0,a.accountStatus=[],a.progress=0,a.workerLoadBytes=0,a.workerPending=!1,a.logsCount=0,a.closeProfit=0,a.tradeFee=0,a.positionProfit=0,a.currMargin=0,a.updateTimeLine="",a.elapsed=0,a.logs=[],a.testing=!0,a.show_chart_profit=!1,a.show_chart_closeprofit=!1,a.show_chart_pnl=!1,a.show_chart_strategy=!1,a.show_chart_market=!1,_.each(l,function(a){var b=[];if(_.each(a[1],function(a){var c=a[0].split("@")[0];b.push([c,3==a[3].id?a.indexValue:a.value,a[3].id])}),ya>=0)for(var c=xa[ya],d=0;d<c.settings.length;d++)if(c.settings[d].file==a[2])for(var e=0;e<b.length;e++)c.settings[d].argName==b[e][0]&&(b[e][1]=c.settings[d].value);a[1]=b});var p=[],q=0,r=0;a.btHasFutures=!1,a.btYearDays=365,_.each(a.pairs_select,function(c){var d=a.btBaseTick.minutes;"Futures_BitMEX"==c.eid?15!=d&&30!=d||(d=5):"Futures_LTS"==c.eid&&(d=1440);var e={Id:c.eid,FaultTolerant:b?a.btFaultTolerant:0,SlipPoint:Math.max(0,parseInt(a.btSlipPoint)),NetDelay:Math.max(1,parseInt(a.btNetDelay)),MaxBarLen:Math.max(100,parseInt(a.btMaxBarLen)),PreBarLen:1==a.btMode?10:100,Mode:parseInt(a.btMode),BasePeriod:d,Name:c.eid,Label:c.label,Balance:c.balance,Stocks:c.stocks,Fee:c.fee,MinFee:c.minfee,Period:a.ktick_selected.minutes,Currency:c.stock,QuoteCurrency:"string"==typeof c.quoteCurrency?c.quoteCurrency:c.stock.split("_")[1],PriceTick:.01,CurDots:2,Depth:11,DepthAmount:200};"Futures_CTP"==c.eid?(e.DepthAmount=1e3,e.DataSource="CTP",e.SymDots=0,e.CurDots=3,e.Depth=2,a.btYearDays=252,a.btHasFutures=!0):"Futures_LTS"==c.eid?(e.DepthAmount=1e3,e.DataSource="STOCK",e.SymDots=0,
e.CurDots=2,e.Depth=1,a.btYearDays=252,a.btHasFutures=!0):"Futures_BitVC"==c.eid?(e.DepthAmount=1e4,e.DataSource="week",e.SymDots=0,a.btHasFutures=!0):"Futures_OKCoin"==c.eid?(e.DepthAmount=1e4,e.DataSource="this_week",e.SymDots=0,a.btHasFutures=!0):"Futures_BitMEX"==c.eid?(e.DepthAmount=1e4,e.DataSource="XBTUSD",e.SymDots=0,e.CurDots=1,e.PriceTick=.5,a.btHasFutures=!0):"OKCoin_EN"==c.eid?(e.DataSource=c.stock,e.SymDots=3,e.CurDots=3,e.PriceTick=.01):"Bitfinex"==c.eid?(e.DataSource=c.stock,e.SymDots=4,e.CurDots=4,e.PriceTick=.001):-1!=c.stock.indexOf("_USD")?(e.DataSource=c.stock,e.SymDots=3,e.CurDots=4,e.PriceTick=.001):(e.DataSource=c.stock,e.PriceTick=1e-7,e.SymDots=4,e.CurDots=8),e.DepthDeep=e.Depth,e.FeeMin=0,e.FeeMaker=1e4*e.Fee[0],e.FeeTaker=1e4*e.Fee[1],e.FeeDenominator=6,e.BaseCurrency=c.stock.split("_")[0],e.BasePrecision=e.SymDots,e.QuotePrecision=e.CurDots,1==parseInt(a.btMode)?e.BasePeriod=1e3:e.BasePeriod=6e4*e.BasePeriod,"Futures_CTP"!=c.eid&&"Futures_LTS"!=c.eid&&(q+=e.Stocks),r+=e.Balance,p.push(e)}),a.btTotalBalance=r,a.btTotalDepositAssets=q>0?q:r;var s=g-f,t=86400;s/86400<=2?t=300:s/86400<30&&(t=3600);var u={Code:l,Engine:K,Options:{RetFlags:505,MaxRuntimeLogs:a.btMaxRuntimeLogs,MaxProfitLogs:a.btMaxProfitLogs,MaxChartLogs:a.btMaxChartLogs,DataServer:"https://www.fmz.com",TimeBegin:f,TimeEnd:g,SnapshortPeriod:1e3*t,Period:6e4*a.ktick_selected.minutes,NetDelay:Math.max(1,parseInt(a.btNetDelay)),UpdatePeriod:1==a.codeType.id?5e3:500},Exchanges:p,Start:f,End:g};if(a.logEvent&&(u.Options.RetFlags|=512),"0"==a.btHistoryMode&&(u.Options.RetFlags|=6),xa.length>0&&(u.Options.RetFlags=464,u.Options.MaxRuntimeLogs=0,u.Options.MaxProfitLogs=a.btMaxProfitLogs,u.Options.MaxChartLogs=0),void 0===d||""==d.length){a.btNodeId=a.isPremiumBacktest?0:parseInt($("#node_selected").val());var i=JSON.stringify(u);return a.testing=!0,va=!0,a.btUUID="",void m.rest("BacktestIO",[a.btNodeId,a.codeType.id+(a.isPremiumBacktest?1e3:0),JSON.stringify(["PutTask",["node","python|python2.7|python3|py","g++","node","node"][a.codeType.id],i])]).then(function(b){if(-1==b)a.testing=!1,k.alert("ui.strategy.alert.offline");else if(-2==b)a.testing=!1,k.alert("ui.strategy.alert.expired");else if("string"==typeof b&&-1!==b.indexOf("Code")){var c=JSON.parse(b);if(0==c.Code||2==c.Code)a.btUUID=c.Result,h(E,0==c.Code?500:0);else{a.testing=!1;var d=c.Result;d="Busy"==c.Result?"ui.strategy.alert.busy":c.Code+" Error: "+c.Result,k.alert(d)}}else a.testing=!1,k.alert("Error JSON: "+b)},function(b){a.testing=!1,console.log("Error: "+b)})}try{"undefined"!=typeof Worker?(N&&(N.terminate(),N=null),N=new Worker(d),N.onmessage=function(b){var c=b.data.ret;"string"==typeof c?(k.alert("ui.alert.startegy.historyEmpty"),a.testing=!1,a.taskStatus=2):void 0!==c.Pending?(a.workerPending=c.Pending,a.workerLoadBytes=c.LoadBytes):(F(null,c),0!=c.TaskStatus&&(N.terminate(),N=null,D(c))),a.$apply()},N.onerror=function(b){a.testing=!1,a.taskStatus=2,-1!=b.message.indexOf("TestEnd")||-1!=b.message.indexOf("OOH")||-1!=b.message.indexOf("history")||-1!=b.message.indexOf("Unexpected token")?k.alert("ui.alert.startegy.historyEmpty"):k.error(b.message),a.$apply()},N.postMessage([u,window.httpCache,c])):(a.testing=!1,dailog.alert("ui.alert.startegy.notSupportWorker"))}catch(a){console.log("Worker "+JSON.stringify(a))}}};a.runBacktest=function(b){if(xa=[],ya=-1,0==a.pairs_select.length)return void k.alert("ui.alert.startegy.platformEmpty");if(!a.testing&&!a.pending){if(1==a.btMode)for(var c=0;c<a.pairs_select.length;c++)if("Huobi"!=a.pairs_select[c].eid&&"OKEX"!=a.pairs_select[c].eid&&"Futures_CTP"!=a.pairs_select[c].eid)return void k.alert("ui.alert.startegy.tickSupport");fa=b?"ui.backtest.faultTolerantTesting":"ui.backtest.running",a.codeType.id==H?a.testingStr="ui.backtest.compiling":a.testingStr=fa;var d=[];_.each(a.templates,function(b){b.checked&&""===b.source&&a.canDepend(b)&&d.push(b.id)}),d.length>0?(a.pending=!0,m.rest("GetTemplates",[d]).then(function(c){a.pending=!1,_.each(a.templates,function(a){a.checked&&""===a.source&&(_.each(c,function(b){b.id===a.id&&(a.source=b.source)}),""===a.source&&k.alert(a.name+" 模板内容获取失败 !"))}),za(b)},function(b){a.pending=!1,k.alert("GetTemplates Error: "+b)})):za(b)}};var Ba=function(){Y(),a.isAutoStart&&h(function(){a.runBacktest(!1)},1e3)};a.stopBacktest=function(){N?(N.terminate(),N=null,a.testing=!1,a.taskStatus=2,$("#progress").text(f.instant("ui.alert.startegy.logs"))):32==a.btUUID.length&&m.rest("BacktestIO",[a.btNodeId,a.codeType.id,JSON.stringify(["StopTask",a.btUUID])]).then(function(b){var c=JSON.parse(b);0==c.Code||3==c.Code?a.testing=!1:console.log(c)},function(a){k.alert("停止失败: "+a)}),xa.length>0&&(ya=-1)}}]),angular.module("botvsApp").controller("MPricingCtrl",["$scope","session","dialog",function(a,b,c){function d(){a.isPending=!0;var d=a.payMethod;0!=d&&2!=d||(a.isJumping=!0),b.rest("GetPaymentArg",[d,0,a.pricingAmount,a.promotionCode]).then(function(b){if(a.isPending=!1,!b)return void c.alert("ui.alert.retry");if(0===d){var e=document.createElement("form");document.body.appendChild(e);for(var f in b.form){var g=document.createElement("input");g.type="hidden",g.name=f,g.value=b.form[f],e.appendChild(g)}e.method="GET",e.action="https://mapi.alipay.com/gateway.do",e.submit(),document.body.removeChild(e),a.isJumping=!0}else 1==d?($("#wxcodeurl").empty(),$("#wxcodeurl").qrcode({width:150,height:150,text:b.code_url})):2==d&&(a.isJumping=!0,location.href=b.code_url)},function(b){a.isJumping=!1,a.isPending=!1,c.alert(b)})}a.pricingAmount=3,a.payMethod=0,a.isPending=!1,a.notChanged=!1,a.isJumping=!1,a.discount_item=0,a.g=b.g,a.promotion={discount:0,min:0},a.promotionCode="",b.rest("GetPaymentInfo").then(function(b){a.discount_item=b.discount_item}),a.applyPromotionCode=function(d){a.isPending=!0,b.rest("GetPromotionCode",d).then(function(b){a.isPending=!1,b?a.promotion=b:(a.promotion={discount:0,min:0},c.alert("ui.pricing.alertInvalidCode"))},function(b){a.isPending=!1,c.alert(b)})},a.pay=function(){a.notChanged=!0,d()},a.$on("onPayment",function(d,e){a.notChanged=!1,b.rest("Ping").then(function(){c.alert("ui.pricing.successTips")})})}]),angular.module("botvsApp").controller("StrategyCtrl",["$scope","$sce","$translate","$routeParams","$interval","$filter","$timeout","session","dialog","util","component",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){b=b||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c="",d=0;d<a;d++){var e=Math.floor(Math.random()*b.length);c+=b.substring(e,e+1)}return c}function m(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}a.strategy={},a.error="";var n="ui.strategy.notFound";a.isOEM=h.g.oem,a.isLogin=h.isLogin(),a.isAdmin=h.isAdmin,a.scriptArgGroup=[],a.scriptArgList=[],a.scriptCMDGroup=[],a.scriptCMDList=[],a.relevants=[],a.showArg=j.argIsShow;var o=parseInt(d.id);h.rest("GetPublicStrategyDetail",o).then(function(b){if(b){var d=b.strategy;a.strategy=d,d.tags.length>0&&h.rest("GetStrategyListByName",[0,11,-2,-1,0,"tag:"+d.tags],!1,!0).then(function(b){b&&(a.relevants=_.filter(b.strategies,function(a){return a.id!=o}))}),a.strategy.category_name=j.getCategoryName(d.category),void 0!==d.args&&j.parseArgs(d.args,a.scriptArgList,a.scriptCMDList),a.scriptArgGroup=j.parseArgGroup(a.scriptArgList),a.scriptCMDGroup=j.parseArgGroup(a.scriptCMDList),a.$emit("titleChange",f("trans")(d.name)),1!=d.public&&4!=d.public||g(function(){if(3!=d.language){var b=["javascript","python","text/x-c++src","","mylanguage"][d.language];if(a.isLogin)g(function(){var a=CodeMirror(document.getElementById("code-area"),{autoRefresh:!0,lineNumbers:!0,readOnly:!0,value:d.source,mode:b});a.setSize("100%","100%"),a.refresh()},100);else{var f=[];CodeMirror.runMode(d.source,b,function(b,c){"\n"==b?a.isLogin?f.push(b):f.push('\n<div style="display:inline-block;width:1px;height:1px;overflow-y:hidden">请登录后复制完整源码</div>'):c?(a.isLogin||f.push('<div style="display:inline-block;width:1px;height:1px;overflow-y:hidden">'+l(10)+"</div>"),f.push('<span class="cm-'+m(c)+'">'+m(b)+"</span>")):f.push(m(b))});var i=f.join(""),j=a.isLogin?"":'onmousedown="return false;" onselectstart="return false;" oncut="return false;"';$("#code-area").html('<div class="markdown-body cm-s-default pre" '+j+' style="height:400px;overflow-y:auto">'+i+"</div>")}}else h.rest("GetSettings","blockly_toolbox").then(function(a){loadBlockly(function(){try{var b=angular.fromJson(a);Blockly.i18n_switch(c.use());var f=angular.fromJson(d.source).xml,g=Blockly.inject("blockly-area",{media:"../res/media/",readOnly:!0,scrollbars:!0,zoom:{controls:!0,wheel:!0}});void 0!==d.blockly_metas&&updateToolBox(c.use(),d.blockly_metas,g);for(var h in b.blocks)updateToolBox(c.use(),[b.blocks[h]],g,function(){},h);Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(f),g),Blockly.svgResize(g),g.render(),g.scrollCenter();var i=$("#editor-area");e(function(){var a=g.getWidth(),b=i.width();0==a&&b>0&&(Blockly.svgResize(g),g.render(),console.log("svgResize blocklyWorkspace",a,b))},300)}catch(a){console.log(a)}})})},0)}else a.error=n},function(b){a.error=n}),a.buyStrategy=k.dialogBuyStrategy}]),angular.module("botvsApp").controller("RobotCtrl",["$scope","$routeParams",function(a,b){a.robotId=parseInt(b.id)}]),angular.module("botvsApp").controller("BbsCtrl",["$scope","$translate","$filter","$location","$routeParams","util","dialog","session",function(a,b,c,d,e,f,g,h){var i=0==d.path().indexOf("/digest")?1:0,j=-1,k="",l=["ui.nav.bbs","ui.nav.digest"][i];a.zone_prefix=["/bbs","/digest"][i],a.keyword="",a.plane_zone=i;var m=1,n=Math.max(20,Math.ceil(window.screen.height/80));void 0!==e.slug&&(isNaN(e.slug)?(k=e.slug,0!=k.indexOf("s:")&&0!=k.indexOf("s-")||(a.keyword=e.slug.substring(2),k="",a.$emit("titleChange",b.instant(l)+" / "+a.keyword))):j=parseInt(e.slug)),void 0!==e.page&&(m=parseInt(e.page)),a.node_id=j,a.node_slug=k,a.node_name=["ui.bbs.latest","ui.digiest.latest"][i],a.page_num=m,a.pages=[],a.planes=[],a.nodes=[],a.tags=[],a.orderByHot=h.KV_Get("bbsOrderByHot",!1),a.language=h.KV_Get("bbsLanguage",b.use()),a.has_next=!1,a.has_prev=!1,a.all_page=0,a.isLogin=h.isLogin(),a.skw=a.keyword,a.go=function(a){d.path(a).replace()},a.search=function(){""!=a.skw?d.path(a.zone_prefix+"/s:"+a.skw.replace(/[\/'"%]/g,"")+"/1"):d.path(a.zone_prefix)};var o=function(d,e){a.language=d,void 0===e?e=a.orderByHot:h.KV_Set("bbsOrderByHot",e),h.KV_Set("bbsLanguage",d),a.orderByHot=e;var d="zh_CN"==d?1:2;a.loading=!0,h.rest(["GetBBSPlaneList","GetBBSNodeList","GetBBSTags","GetBBSTopicListBySlug"],[[],[],[a.plane_zone],[(e?"-":"")+k,d,(m-1)*n,n,a.keyword,a.plane_zone]],!1,!0).then(function(d){if(a.loading=!1,d){0==a.nodes.length&&(a.planes=d[0].result.items,a.nodes=d[1].result.items,a.tags=d[2].result,_.each(a.tags,function(b){b.focus="tag:"+c("trans")(b.name)==a.skw})),a.topics=d[3].result.items,_.each(a.topics,function(a){a.content=a.content.replace(/(http[s]:\/\/[^\s]+)|(\[TOC\])|#|(\*\*)|([^\s]+\.(jpg|png|gif|mp4))/g,"")}),a.topics_count=d[3].result.all_items,a.pages=f.getPages(a.topics_count,n,m);for(var e=0;e<a.topics.length;e++){for(var h=0;h<a.nodes.length;h++)if(a.topics[e].node_id==a.nodes[h].id){a.topics[e].node_name=a.nodes[h].name,a.topics[e].node_slug=a.nodes[h].slug;break}a.topics[e].timeAgo=moment(void 0!==a.topics[e].updated?a.topics[e].updated:a.topics[e].created).fromNow()}for(var h=0;h<a.nodes.length;h++)if(a.node_id==a.nodes[h].id||k==a.nodes[h].slug){a.node_name=a.nodes[h].name;break}if(""==a.keyword){var i=b.instant(l)+" - "+c("trans")(b.instant(a.node_name));m>1&&(i+=" - "+b.instant("ui.pages.current",{number:m})),a.$emit("titleChange",i)}}else a.loading=!1,g.alert("Error")},function(a){g.alert(a)})};a.refresh=function(a,b){o(a,b)},o(a.language)}]),angular.module("botvsApp").controller("BbsTopicCtrl",["$scope","$filter","$location","$translate","dialog","session","$routeParams",function(a,b,c,d,e,f,g){var h=parseInt(g.id);a.planes=[],a.nodes=[],a.relevants=[];var i=-1!=c.path().indexOf("bbs")?0:1;a.zone=i,a.zone_prefix=0==i?"/bbs":"/digest";var j="zh_CN"==d.use()?1:2;f.rest(["GetBBSTopic","GetBBSTopicListBySlug"],[[h],["",j,0,8,"near:"+h,i]],!1,!0).then(function(c){if(c){var d=c[0].result,g=c[1].result;a.topic=d,d.tags?f.rest("GetBBSTopicListBySlug",["",j,0,6,"tag:"+d.tags,d.zone],!1,!0).then(function(b){b&&(a.relevants=_.filter(b.items,function(a){return a.id!=h}),_.each(g.items,function(b){_.findWhere(a.relevants,{id:b.id})||a.relevants.push(b)}))}):a.relevants=g.items,a.$emit("titleChange",b("trans")(d.title))}else e.alert("Error")},function(a){e.alert(a)})}]),angular.module("botvsApp").controller("BbsTopicNewCtrl",["$scope","$filter","$translate","$location","$timeout","$routeParams","session","dialog",function(a,b,c,d,e,f,g,h){var i=(b("trans"),-1);void 0!==f.id&&(i=parseInt(f.id)),a.title="",a.content="",a.node_selected=-1,a.planes=[],a.nodes=[],a.isPending=!1,a.topicStatus=0;var j=function(){_.each(a.nodes,function(b){if(b.display=2!=b.hide||g.isAdmin(),b.display){var c=_.findWhere(a.planes,{id:b.plane_id});c&&(c.node=!0)}})},k="",l=c.instant("ui.alert.leaveMesssage");$(window).on("beforeunload",function(b){if(a.content!=k)return void 0===b&&(b=window.event),b&&(b.returnValue=l),l}),a.$on("$locationChangeStart",function(b){if(a.content!=k){confirm(l)||b.preventDefault()}}),a.$on("$destroy",function(){$(window).off("beforeunload",function(){})}),-1==i?g.rest(["GetBBSPlaneList","GetBBSNodeList"],[[],[]],!1,!0).then(function(b){b?(a.planes=b[0].result.items,a.nodes=b[1].result.items,a.nodes.length>0&&(a.node_selected=a.nodes[0].id),j()):h.alert("Error")},function(a){h.alert(a)}):g.rest(["GetBBSPlaneList","GetBBSNodeList","GetBBSTopic"],[[],[],[i]],!1,!0).then(function(b){b?(a.planes=b[0].result.items,a.nodes=b[1].result.items,a.title=b[2].result.title,a.content=b[2].result.content,a.topicStatus=b[2].result.status,a.node_selected=b[2].result.node_id,k=a.content,j()):h.alert("Error")},function(a){h.alert(a)}),a.submit=function(){if(a.isPending)return void h.alert("Server is Busy");if(0==a.title.length)return void h.alert("ui.alert.titleEmpty");if(-1==a.node_selected)return void h.alert("ui.alert.topicNodeEmpty");a.isPending=!0;var b="zh_CN"==c.use()?1:2;g.rest("AddBBSTopic",[i,parseInt(a.node_selected),b,a.title,a.content]).then(function(b){a.isPending=!1,isNaN(b)?h.alert(b):(k=a.content,d.path(-1===i?"/bbs":"/bbs-topic/"+i))},function(b){a.isPending=!1,h.alert(b)})}}]),angular.module("botvsApp").factory("session",["$location","localStorageService","$q","$window","$translate","$timeout","$rootScope","dialog","util",function(a,b,c,d,e,f,g,h,i){function j(){var a="";try{a=window.top.document.referrer}catch(b){if(window.parent)try{a=window.parent.document.referrer}catch(b){a=""}}return""===a&&(a=document.referrer),a}function k(a){return void 0!==a&&a?(H+=1,(1e5+H).toString()):(G+=1,G>1e4&&(G=0),G.toString())}function l(a,b,c){if("Ping"==a&&(c=!0),void 0===b&&(b=[],angular.isArray(a)))for(var d=0;d<a.length;d++)b.push([]);"string"==typeof a&&(a=[a],b=angular.isArray(b)?[b]:[[b]]);var f=z(),g=k(c),h={method:a,params:b,lang:e.use(),token:f,callbackId:g,version:p};return{data:O(angular.toJson(h)),callbackId:g}}var m=-1!=location.href.indexOf("?debug=true"),n=function(a,c){var d=b.get(a);return d||c},o=function(a,c){b.set(a,c)},p=3.7,q="",r=!1,s=0,t=function(){var a=navigator.userAgent,b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,i=/BlackBerry/i,j=/BB10/i,k=/Opera Mini/i,l=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),n=function(a,b){return a.test(b)};return n(b,a)||n(c,a)||n(d,a)||n(e,a)||n(f,a)||n(g,a)||n(h,a)||n(i,a)||n(j,a)||n(k,a)||n(l,a)||n(m,a)},u="JSESSIONID",v={init:!1,expired:"",oem:d.__OEM__,tunnel:!1,peer:"",cached:!1,fee:125e4,rate:{},balance:0,consumed:0,ref_url:n("ref_url",""),ref_user:n("ref_user","")},w=j(),x=location.href;0==w.length&&(w=x),(""==v.ref_url||w.length>0&&(-1!=w.indexOf("?")||0!=w.indexOf(location.protocol+"//"+location.hostname)))&&(v.ref_url=w,o("ref_url",w));var y=x.split("/sign-up/");2==y.length&&(v.ref_user=y[1],o("ref_user",y[1]));var z=function(){return n(u,"")},A=function(a){"string"!=typeof a&&(a=""),o(u,a)},B=function(){return z().length>0},C=function(){var a=b.get(u);return"string"==typeof a&&0===a.indexOf("1|")},D=function(c,d){if(void 0!==c&&c)return b.remove(u),delete v.ws_sandbox,a.path("/login"),void("function"==typeof d&&d());T("Logout").then(function(){b.remove(u),delete v.ws_sandbox,a.path("/login"),"function"==typeof d&&d()},function(c){h.confirm(e.instant("ui.alert.logoutError",{error:c})).then(function(){b.remove(u),delete v.ws_sandbox,a.path("/login")}),"function"==typeof d&&d()})},E=n("v",""),F=p.toString();""===E?o("v",F):E!==F&&(o("v",F),h.notify("更新成功 !")),d.pending=0;var G=0,H=0,I={},J=_.now(),K=!1,L=0,M=location.protocol.replace("http","ws")+"//"+location.host+"/ws_botvs_v1?compress=zlib",N=function(a){return pako.inflate(a,{to:"string"})},O=function(a){return pako.deflate(a)};v.oem||(M="wss://www.fmz.com/ws_botvs_v1?compress=zlib"),"undefined"==typeof __workerjs&&(M="ws://127.0.0.1:9901/ws_botvs_v1"),-1!=location.href.indexOf("127.0.0.1:9")&&window.__oem_custom&&window.__oem_custom.Server&&(M=window.__oem_custom.Server),-1==M.indexOf("zlib")&&(N=i.inflate,O=i.deflate);var P=new ReconnectingWebSocket(M,null,{timeoutInterval:1e4,binaryType:"arraybuffer"}),Q=function(a){console.log(a)},R=function(){var a=(new Date).getTime();T("Ping",[],!0).then(function(){console.log("Ping time ",(new Date).getTime()-a,"ms")})},S=function(){try{_.now()-J>18e4?(Q("网络连接中."),P.refresh()):1==P.readyState&&(K?P.send(O("P")):R())}catch(a){Q("异常: "+a)}f(S,6e4)};f(S,6e4),P.onopen=function(){Cookies.set("web_client","normal",{expires:365}),s=1,L++,K=!1;var a=!1;for(var b in I)I[b].pending&&(I[b].pending=!1,P.send(I[b].data),a=!0);a||R()},P.onmessage=function(a){J=_.now();var b=N(a.data);if("P"!=b){K=!0;var c=angular.fromJson(b);if(void 0!==c.version&&c.version>p&&h.notify({message:"网站有新版本 "+c.version.toFixed(2)+", 请清空缓存并重新刷新打开网站 !",single:!0,classes:"alert-danger"}),"string"==typeof c.peer&&(v.peer=c.peer,v.tunnel=c.tunnel,window.peer=c.peer),I.hasOwnProperty(c.callbackId)){var e=I[c.callbackId];m&&(console.log(c.callbackId,">>> Req: "+angular.toJson([e.method,e.params])),console.log(c.callbackId,"<<< Res: ",c.result));var i=e.cb;if(delete I[c.callbackId],e.ignore||d.pending--,G==c.callbackId&&g.$broadcast("onReady",c.callbackId),"string"==typeof c.expired&&(v.expired=c.expired),void 0!==c.is_oem&&v.oem!=c.is_oem?(Cookies.set("oem",c.is_oem),v.oem=c.is_oem,"Need Login"===c.error?g.$apply(D(!0,function(){location.reload()})):f(function(){location.reload()})):v.init=!0,void 0!==c.error&&c.error){if("Need Login"===c.error)return void("SaveStrategy"==e.method||"AddBBSTopic"==e.method?h.alert("<font color=red>会话发生改变, 无法保存数据, 请妥善保存好当前数据后重新登录 !</font>"):(B()&&h.alert("<font color=red>系统检测到会话发生改变, 为保证安全, 请重新登录 !</font>"),g.$apply(D(!0))));"Need Update"===c.error&&(c.error="当前版本过旧, 必须重新下载升级才能正常使用 !"),g.$apply(i.reject("REST: "+c.error))}else c.token!==z()&&A(c.token),"string"==typeof c.username&&(q=c.username),"number"==typeof c.balance&&(v.balance=c.balance),"number"==typeof c.fee&&(v.fee=c.fee),void 0!==c.rate&&(v.rate=c.rate),"number"==typeof c.consumed&&(v.consumed=c.consumed),void 0!==c.cached&&(v.cached=c.cached),r=c.is_admin,B()&&!isNaN(c.notify)&&c.notify!=window.notify&&c.notify>0&&(window.notify=c.notify,h.notify("有 "+c.notify+"条未读新消息, 请到账户管理的消息中心查看! ")),1===c.result.length?g.$apply(i.resolve(c.result[0].result)):g.$apply(i.resolve(c.result))}else void 0!==c.event&&("robot"===c.event?g.$broadcast("onTaskUpdate",c.result):"backtest"===c.event?g.$broadcast("onBacktest",c.result):"node"===c.event?g.$broadcast("onNodeUpdate",c.result):"ecs"===c.event?g.$broadcast("onECSUpdate",c.result):"rsync"===c.event?g.$broadcast("onStrategyUpdate",c.result):"payment"===c.event?g.$broadcast("onPayment",c.result):"ticket"===c.event?("feedback"==c.result.event&&window.notify++,c.index<10&&f(function(){g.$broadcast("onTicket",c.result)},3e3*c.index)):"sns"===c.event?g.$broadcast("onSNS",c.result):"charge"===c.event&&(v.balance=c.result.balance,v.consumed=c.result.consumed,g.$broadcast("onCharge",c.result)))}},P.onclose=function(){for(var a in I){var b=I[a];b.pending||(g.$apply(I[a].cb.reject("网络连接失败")),delete I[a],b.ignore||d.pending--)}s=0};var T=function(b,e,f){var g=c.defer(),h=l(b,e,f),i={method:b,params:e,cb:g,ignore:void 0!==f&&f,path:a.path(),date:(new Date).getTime(),pending:!1};return 1!=P.readyState?(i.pending=!0,i.data=h.data):P.send(h.data),f||d.pending++,I[h.callbackId]=i,g.promise};return{g:v,getReferrer:j,isLogin:B,isShadow:C,isAdmin:function(){return r},getUser:function(){return q},getRememberUser:function(){return b.get("u")},rememberUser:function(a){b.set("u",a)},getNetWorkActivity:function(){return s},rest:T,logout:D,KV_Get:n,KV_Set:o,isMobile:t}}]),angular.module("botvsApp").factory("encrypt",["session","dialog",function(a,b){var c=function(a){return CryptoJS.MD5(a+"/botvs").toString()};return{md5:function(a){return CryptoJS.MD5(a).toString()},encryptPassword:c,encryptText:function(a,b){for(var d=c(b),e=0;e<5;e++)d=CryptoJS.MD5(d).toString();return d=CryptoJS.enc.Utf8.parse(d),CryptoJS.AES.encrypt(a,d,{iv:d}).toString()},decryptText:function(a,b){for(var d=c(b),e=0;e<5;e++)d=CryptoJS.MD5(d).toString();return d=CryptoJS.enc.Utf8.parse(d),CryptoJS.AES.decrypt(a,d,{iv:d}).toString(CryptoJS.enc.Utf8)},submit:function(d,e){void 0!==e&&e&&(window.__passwordCache="");var f=function(a){window.__passwordCache=a,d(a)};if("string"==typeof window.__passwordCache&&window.__passwordCache.length>0)f(window.__passwordCache);else{var g={title:"ui.dialog.titleAuth",inputname:"ui.dialog.inputMasterPass",inputtype:"password",description:"ui.dialog.authDesc",confirmname:"ui.dialog.titleAuth",onConfirm:function(b,d){a.rest("VerifyPassword",c(b)).then(function(a){d(a)},function(a){d(!1)})},onExit:f};b.prompt(g)}}}}]),angular.module("botvsApp").controller("ModalInputCtl",["$scope","$timeout","$translate","$location","$uibModalInstance",function(a,b,c,d,e){a.inputTxt="",a.checkValue=!1,a.cfg=e.cfg,void 0===a.cfg.showConcurrent&&(a.cfg.maxConcurrent=100,a.cfg.showConcurrent=!1),void 0!==a.cfg.defaultValue&&("checkbox"===a.cfg.inputtype?a.checkValue=a.cfg.defaultValue:a.inputTxt=a.cfg.defaultValue),a.error="",a.isPending=!1,a.submit=function(){var d=a.inputTxt;if("checkbox"!==a.cfg.inputtype){if(0===a.inputTxt.length)return}else d=a.checkValue;void 0!==a.cfg.onConfirm?(a.isPending=!0,a.cfg.onConfirm(d,function(f,g,h){f?e.close(d):(a.error=void 0===g?c.instant("ui.alert.dialog.inputError",{inputname:c.instant(a.cfg.inputname)}):g,b(function(){a.error="",a.isPending=!1},void 0!==h?h:3e3))})):e.close(d)},a.cancel=function(){e.dismiss("cancel")},a.jump=function(a){e.dismiss("cancel"),d.path(a)}}]).factory("dialog",["$uibModal","$timeout","$compile","$q","$rootScope",function(a,b,c,d,e){var f=[],g=0;return{prompt:function(b){var c=a.open({templateUrl:"views/dialog-prompt.html",controller:"ModalInputCtl"});c.cfg=b,"function"==typeof b.onExit&&c.result.then(b.onExit,function(){})},alert:function(b,c,d){void 0===c&&(c="ui.dialog.alertTitle");var e="";"object"==typeof b&&(e=b.style,b=b.msg),a.open({templateUrl:"views/dialog-alert.html",controller:["$scope","$uibModalInstance",function(a,f){a.title=c,a.msg=b,a.style=e,a.cancel=function(){f.dismiss("cancel")},a.ok=function(){f.close(),void 0!==d&&d()}}]})},show:function(b,c){void 0===c&&(c="ui.dialog.alertTitle"),a.open({templateUrl:"views/dialog-show.html",controller:["$scope","$uibModalInstance",function(a,d){a.title=c,a.msg=b,a.cancel=function(){d.dismiss("cancel")},a.ok=function(){d.close()}}]})},confirm:function(c,e,f){var g="boolean"==typeof e&&e;if(void 0!==e&&(g||"boolean"==typeof e.slient&&e.slient&&(g=!0)),g){var h=d.defer();return b(function(){h.resolve()},0),h.promise}return void 0===f&&(f="ui.dialog.confirmBtn0"),a.open({templateUrl:"views/dialog-confirm.html",controller:["$scope","$uibModalInstance",function(a,b){if(a.title="ui.dialog.confirmTitle",a.btn0=f,void 0!==e&&"boolean"==typeof e.slient?(a.settings=e,a.showSlientInput=!0):(a.settings={slient:g},a.showSlientInput=!1),"string"==typeof c)a.msg=c;else{a.msg=c.msg;for(var d=0;d<10;d++){var h="btn"+d;void 0!==c[h]&&(a[h]=c[h])}}a.cancel=function(){b.dismiss("cancel")},a.confirm=function(a){b.close(a)}}]}).result},error:function(a,b){return this.notify({message:a,classes:"alert-danger",position:b||"center"})},notify:function(a,d){if("object"!=typeof a&&(a={message:a}),"number"!=typeof d&&(d=5e3),!(void 0!==a.single&&a.single&&g>0)){g++;var h=document.body;a.position=a.position?a.position:"center",a.container=a.container?a.container:h,a.classes=a.classes?a.classes:"alert-success";var i=a.scope?a.scope.$new():e.$new();i.$message=a.message,i.$classes=a.classes;var j=c('<div class="cg-notify-message" ng-class="$classes">\n\n    <div>\n        {{$message | translate}}\n    </div>\n\n    <div class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')(i);j.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(b){("opacity"===b.propertyName||b.originalEvent&&"opacity"===b.originalEvent.propertyName)&&(j.remove(),f.splice(f.indexOf(j),1),k(),"function"==typeof a.callback&&void 0===j.closed&&(j.closed=!0,a.callback()),g--)}),angular.element(a.container).append(j),f.push(j),"center"===a.position&&b(function(){j.css("margin-left","-"+j[0].offsetWidth/2+"px")}),i.$close=function(){j.css("opacity",0).attr("data-closing","true"),"function"==typeof a.callback&&void 0===j.closed&&(j.closed=!0,a.callback()),g--,k()};var k=function(){for(var a=0,b=10,c=f.length-1;c>=0;c--){var d=f[c],e=d[0].offsetHeight,g=b+e+10;d.attr("data-closing")?g+=20:b+=e+15,d.css("top",g+"px").css("margin-top","-"+(e+10)+"px").css("visibility","visible"),a++}};b(function(){k()}),d>0&&b(function(){j.css("opacity",0).attr("data-closing","true"),k()},d)}}}}]),angular.module("botvsApp").factory("util",["$translate","$filter",function($translate,$filter){function safe_obj(a){for(var b in a){var c=a[b];"object"==typeof c?safe_obj(c):"string"==typeof c&&(a[b]=filterXSS(c))}}function toggleFullScreen(a){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function deflate(a){var b=null,c=new Buffer(a),d=new Buffer(LZ4.encodeBound(c.length)),e=LZ4.encodeBlock(c,d);if(e>0&&e<c.length){b=new Buffer(8+e),b.writeUInt32LE(407708164),b.writeUInt32LE(c.length,4);for(var f=0;f<d.length;f++)b[f+8]=d[f]}else b=new Buffer(8+c.length),b.writeUInt32LE(407708164),b.writeUInt32LE(0,4),b.write(a,8);return b.toArrayBuffer()}function inflate(a){var b=new Buffer(a);if(407708164!=b.readUInt32LE(0))return console.log("invalid lz4 format"),"";var c=b.readUInt32LE(4),d=new Buffer(a.slice(8));if(0==c)return d.toString();var e=new Buffer(c);LZ4.decodeBlock(d,e);return e.toString()}function getOptimizeSettting(a){return a<1?{begin:.1,end:1,step:.1}:{begin:Math.max(1,Math.round(.5*a)),end:Math.max(2,Math.round(1.5*a)),step:Math.max(1,Math.round(.1*a))}}var BaseX=function(a){function b(b){if(0===b.length)return"";for(var c=[0],d=0;d<b.length;++d){var f=(c[0]<<8)+b[d];c[0]=f%e,f=f/e|0;for(var g=1;g<c.length;++g)f+=c[g]<<8,c[g]=f%e,f=f/e|0;for(;f>0;)c.push(f%e),f=f/e|0}for(var h=0;0===b[h]&&h<b.length-1;++h)c.push(0);for(var i=0,j=c.length-1;i<=j;++i,--j){var k=a[c[i]];c[i]=a[c[j]],c[j]=k}return c.join("")}function c(a){if(0===a.length)return[];for(var b=[0],c=0;c<a.length;c++){var g=d[a[c]];if(void 0===g)throw new Error("Non-base"+e+" character");var h=b[0]*e+g;b[0]=255&h,h>>=8;for(var i=1;i<b.length;++i)h+=b[i]*e,b[i]=255&h,h>>=8;for(;h>0;)b.push(255&h),h>>=8}for(var j=0;a[j]===f&&j<a.length-1;++j)b.push(0);return b.reverse()}for(var d={},e=a.length,f=a.charAt(0),g=0;g<a.length;g++)d[a.charAt(g)]=g;return{encode:b,decode:c}},bs58alphabet="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=BaseX(bs58alphabet),Base58={encode:function(a){if("string"==typeof a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return this.encode(b)}return bs58.encode(a)},decode:function(a){return String.fromCharCode.apply(a,bs58.decode(a))},decodeArray:function(a){return bs58.decode(a)}},scriptArgsSelectList=[{id:0,name:"ui.args.number",inputType:"number"},{id:1,name:"ui.args.boolean",inputType:"checkbox"},{id:2,name:"ui.args.string",inputType:"text"},{id:3,name:"ui.args.selected",inputType:"selected"},{id:4,name:"ui.args.encrypt",inputType:"password"},{id:5,name:"ui.args.button",inputType:"button"}],listMagic="$$$__list__$$$",cmdMagic="$$$__cmd__$$$",encryptMagic="$$$__enc__$$$",Buffer=require("buffer").Buffer,LZ4=require("lz4"),stripArgName=function(a){return 0==a.indexOf("(?")&&(a=a.slice(a.indexOf(")")+1)),a},tradeFilters={};if(void 0!==window.__oem_custom&&void 0!==window.__oem_custom.Ctx)try{var obj=angular.fromJson(window.__oem_custom.Ctx);obj.filters&&(tradeFilters=obj.filters)}catch(a){console.log(a)}var categories=[{id:0,name:"ui.strategy.type.common"},{id:1,name:"ui.strategy.type.futures"},{id:2,hide:!0,name:"ui.strategy.type.stocks"},{id:9,name:"ui.strategy.type.cryptocurrency"},{id:20,name:"ui.strategy.type.template"}];return void 0!==tradeFilters.category&&tradeFilters.category.length>0&&(-1==_.indexOf(tradeFilters.category,0)&&-1==_.indexOf(tradeFilters.category,1)&&(categories[1].hide=!0),-1==_.indexOf(tradeFilters.category,3)&&(categories[3].hide=!0)),{deflate:deflate,inflate:inflate,toggleFullScreen:toggleFullScreen,encryptMagic:encryptMagic,cmdMagic:cmdMagic,listMagic:listMagic,scriptArgsSelectList:scriptArgsSelectList,getOptimizeSettting:getOptimizeSettting,strHash:function(a){for(var b=0,c=a.length,d=0;d<c;d++)b=(b<<5)-b+a.charCodeAt(d),b|=0;return b},categories:categories,kticks:[{name:"ui.period.1m",id:0,minutes:1},{name:"ui.period.3m",id:1,minutes:3},{name:"ui.period.5m",id:2,minutes:5},{name:"ui.period.15m",id:3,minutes:15},{name:"ui.period.30m",id:4,minutes:30},{name:"ui.period.1h",id:5,minutes:60},{name:"ui.period.1d",id:10,minutes:1440}],getLogTypes:function(){return["ui.log.type.buy","ui.log.type.sell","ui.log.type.cancel","ui.log.type.error","ui.log.type.profit","ui.log.type.message","ui.log.type.reboot"]},getCategoryName:function(a){var b;switch(a){case 0:b="ui.strategy.type.common";break;case 1:b="ui.strategy.type.futures";break;case 2:b="ui.strategy.type.stocks";break;case 9:b="ui.strategy.type.cryptocurrency";break;case 20:b="ui.strategy.type.template";break;case 30:b="ui.strategy.type.snapshot";break;default:b="ui.strategy.type.na"}return b},parseSummary:function(a){var b=[];if("string"==typeof a&&a.length>0)for(var c=a.split("\n"),d=0;d<c.length;d++)if(c[d]=c[d].replace(/^\s+|\s+$/g,""),!(c[d].length>2&&"`"===c[d][0])||"{"!==c[d][1]&&"["!==c[d][1]||"}"!==c[d][c[d].length-2]&&"]"!==c[d][c[d].length-2]||"`"!==c[d][c[d].length-1])b[d]=this.getStrStyle(c[d]);else try{b[d]=JSON.parse(c[d].slice(1,c[d].length-1)),Array.isArray(b[d])||(b[d]=[b[d]]);for(var e=0;e<b[d].length;e++)if("table"===b[d][e].type){if("string"==typeof b[d][e].title&&(b[d][e].title=$filter("trans")(b[d][e].title,!0)),
void 0!==b[d][e].cols&&Array.isArray(b[d][e].cols)&&(b[d][e].cols=b[d][e].cols.map(function(a){return $filter("trans")(a,!0)})),void 0!==b[d][e].rows)for(var f=0;f<b[d][e].rows.length;f++)for(var g=0;g<b[d][e].rows[f].length;g++)b[d][e].rows[f][g]=this.getStrStyle(b[d][e].rows[f][g])}else"button"===b[d][e].type&&(b[d][e]=this.getStrStyle(b[d][e]))}catch(a){b[d]={body:a.toString(),style:{color:"red"}}}return b},getStrStyle:function(a){var b={},c="",d={type:"string",body:""};if("object"==typeof a&&a){for(var e in a)d[e]=a[e];"button"==d.type&&"string"!=typeof d.class&&(d.class="btn btn-xs btn-default")}else d.body="string"==typeof a||"number"==typeof a?a:angular.toJson(a);var f=d.body;if("string"==typeof f&&f.length>1){"@"==f[f.length-1]&&(f=f.substring(0,f.length-1),c="glyphicon glyphicon-send"),f=f.toString().replace(/^\s+|\s+$/g,"");var g=f.match(/#[0-9A-Za-z]{6,12}$/gi);if(g){var h=g[0];b.color=h.slice(0,7),h.length>7&&(b["background-color"]="#"+h.slice(7)),f=f.slice(0,f.length-h.length).replace(/(^\s*)|(\s*$)/g,"")}d.body=f}return d.style=b,d.icon=c,d.body=$filter("trans")(d.body,!0),d},argNeedEncrypt:function(a){for(var b=0;b<a.length;b++)for(var c=0;c<a[b].list.length;c++)if(4==a[b].list[c][3].id&&0!==a[b].list[c].value.indexOf(encryptMagic))return!0;return!1},argListArrayToArgs:function(a,b){var c=[];return _.each(a,function(a){_.each(a.list,function(d){var e=d[0].split("@")[0],f=[];f=3==d[3].id?[e,parseInt(d.indexValue)]:4==d[3].id&&0!==d.value.indexOf(encryptMagic)&&"function"==typeof b?[e,encryptMagic+b(d.value)]:[e,d.value],-1!=a.id&&f.push(a.id),c.push(f)})}),c},stripArgName:stripArgName,parseArgGroup:function(a){for(var b=[],c={name:"",data:[]},d=0;d<a.length;d++){0==a[d][1].indexOf("(?")&&(c.data.length>0&&b.push(c),c={name:a[d][1].slice(2,a[d][1].indexOf(")")),data:[]}),c.data.push(a[d])}return c.data.length>0&&b.push(c),b},argIsShow:function(argList,pair){if(3!=pair.condition.length)return!0;for(var ret=!0,i=0;i<argList.length;i++){var item=argList[i],argName=item[0].split("@")[0];if(argName==pair.condition[0]){var val=null;if(3==item[3].id?val=item.indexValue:"string"!=typeof item.value&&(val=item.value),null!=val)return eval(val+pair.condition[1]+pair.condition[2]);break}}return ret},argListToLine:function(a){var b=[];return _.each(a,function(a){var c=a[0].split("@")[0],d="var "+c+" = ";3==a[3].id?d+=a.indexValue:"string"==typeof a.value?d+=angular.toJson(a.value):d+=a.value,b.push(d+";")}),b},argListToDic:function(a){var b={};return _.each(a,function(a){var c=a[0].split("@")[0];b[c]=3==a[3].id?a.indexValue:a.value}),b},parseArgs:function(a,b,c,d,e){var f=[];"string"==typeof d&&-1!==d.indexOf("]")?f=angular.fromJson(d):void 0!==d&&d&&(f=d);var g=[];if("string"==typeof a){if(-1===a.indexOf("]"))return[];g=angular.fromJson(a)}else g=a;for(var h=0;h<g.length;h++){var i=null;3===g[h].length?(i=[g[h][0],g[h][1],"","",g[h][2]],i.value=g[h][2]):(i=[g[h][0],g[h][1],g[h][2],"",g[h][3]],i.value=g[h][3]),i.name=stripArgName(i[1]);var j=i[0].split("@")[0],k=i[0].match(/^([a-zA-Z_$][0-9a-zA-Z_$]*)@([a-zA-Z_$][0-9a-zA-Z_$]*)([=!><]=|>|<)([0-9]*)$/),l=i[0].match(/^([a-zA-Z_$][0-9a-zA-Z_$]*)@([!]*[a-zA-Z_$][0-9a-zA-Z_$]*)$/);i.condition=k?k.slice(2,5):l?[l[2].replace(/!/g,""),"!"===l[2][0]?"!=":"==","1"]:[],i.indexValue=0;var m=2;"number"==typeof i.value?m=0:"boolean"==typeof i.value?m=1:0===i.value.indexOf(listMagic)?(m=3,i.value=i.value.substring(listMagic.length),i.options=i.value.split(-1!=i.value.indexOf("||")?"||":"|"),i[4]=i.value):0===i.value.indexOf(encryptMagic)?(m=4,i.value=i.value.substring(encryptMagic.length),i[4]=i.value):"__button__"===i.value&&(m=5),i.def=i.value,3==m&&(i.def=0);for(var n=0;n<f.length;n++)f[n][0]===j&&(void 0===e||2==f[n].length&&-1==e||3==f[n].length&&f[n][2]===e)&&(3===m?i.indexValue=f[n][1]:i.value=f[n][1]);if(i[3]=scriptArgsSelectList[m],0===g[h][0].indexOf(cmdMagic)){if(i[0]=i[0].split(cmdMagic)[1],void 0!==c&&c){for(var o=!1,p=0;p<c.length;p++)if(c[p][0]==i[0]){c[p]=i,o=!0;break}o||c.push(i)}}else if(b){i.optimize=!1,0==i[3].id&&(i.optimizeSettting=getOptimizeSettting(i.value));for(var o=!1,p=0;p<b.length;p++)if(b[p][0]==i[0]){b[p]=i,o=!0;break}o||b.push(i)}}},newProfitChart:function(a,b,c,d,e){var f=[{type:"hour",count:1,text:"1h"},{type:"hour",count:3,text:"3h"},{type:"hour",count:8,text:"8h"},{type:"all",text:"All"}],g={credits:{enabled:!1},chart:{renderTo:b},plotOptions:{series:{turboThreshold:0,dataGrouping:{enabled:void 0!==d}}},rangeSelector:{buttons:f,selected:3,inputEnabled:!1},xAxis:{type:"datetime"},series:[{name:a,data:c,id:"primary",tooltip:{valueDecimals:8,xDateFormat:"%Y-%m-%d %H:%M:%S"},yAxis:0}],lang:{_fullscreen:$translate.instant("ui.g.fullscreen")},exporting:{enable:!0,buttons:{hideButton:{_titleKey:"_fullscreen",text:$translate.instant("ui.g.fullscreen"),onclick:function(){toggleFullScreen(this.renderTo)}}}}},h=c.length>0&&4==c[0].length;if(void 0!==d&&null!==d){g.subtitle={text:$translate.instant("ui.backtest.statistics",{statistics:d,isCoverProfit:h,showWinningRate:e})};for(var i=[],j=0;j<c.length;j++)d.maxAssetsTime==c[j][0]?i.push({x:c[j][0],y:c[j][1],title:"High",shape:"flag",text:$translate.instant("ui.const.report.maxProfit")+": "+c[j][1].toFixed(8)}):d.maxDrawdownTime==c[j][0]&&i.push({x:c[j][0],y:c[j][1],title:"Low",shape:"squarepin",color:"red",text:$translate.instant("ui.const.report.maxDrawdown")+": "+(100*d.maxDrawdown).toFixed(3)+" %, "+$translate.instant("ui.const.report.totalProfit")+" : "+c[j][1].toFixed(8)});i.length>0&&g.series.push({name:$translate.instant("ui.const.report.event"),type:"flags",shape:"circlepin",onSeries:"primary",data:i}),d.maxDrawdownTime>d.maxDrawdownStartTime&&(g.series[0].zoneAxis="x",g.series[0].zones=[{value:d.maxDrawdownStartTime,dashStyle:"solid"},{value:d.maxDrawdownTime,dashStyle:"shortdash"}])}var h=c.length>0&&4==c[0].length;if(h){for(var k=[],j=0;j<c.length;j++){var l={x:c[j][0],y:c[j][1],color:-1!==c[j][3].indexOf("buy")?"red":"blue",text:c[j][2]+" "+$translate.instant(-1!==c[j][3].indexOf("buy")?"ui.log.type.sellClose":"ui.log.type.buyCover")};k.push(l)}g.series[0].data=k,g.series[0].tooltip.pointFormat=$translate.instant("ui.const.report.coverProfit")+": {point.y}, {point.text}"}var m=null;try{m=new Highcharts.StockChart(g,function(a){a.series.length>0&&a.series[0].zones.length>0&&a.renderer.text($translate.instant("ui.const.report.vLineTips"),50,355).css({color:"#555555"}).add()})}catch(a){}return m},getSNS:function(a){var b=[{name:"ui.sns.weixin",field:"wechat",value:""},{name:"ui.sns.phone",field:"phone",value:""},{name:"ui.sns.email",field:"email",value:""},{name:"ui.sns.qq",field:"qq",value:""}];return void 0!==a&&b.map(function(b){"string"==typeof a[b.field]&&(b.value=a[b.field])}),b},getPages:function(a,b,c){var d=new Array,e=Math.ceil(a/b);if(e>1&&c<=e){var f=Math.max(1,c-5),g=Math.min(e,c+5);1!=f&&d.push({id:1,name:"ui.pages.first",cls:"first"}),c>1&&d.push({id:c-1,name:"ui.pages.previous",cls:"prev"});for(var h=f;h<=g;h++)d.push({id:h,name:h,cls:h===c?"active":""});c<e&&d.push({id:c+1,name:"ui.pages.next",cls:"next"}),g!=e&&d.push({id:e,name:"ui.pages.last",cls:"last"})}return d},returnAnalyze:function(a,b,c,d,e,f){if(e=864e5,0==b.length)return null;for(var g=864e5*f,h=b[b.length-1][1]/a,i=h*g/(d-c),j=0,k=a,l=0,m=0,n=0,o=0,p=0,q=0;q<b.length;q++)if(0==q?b[q][1]>0&&p++:b[q][1]>b[q-1][1]&&p++,b[q][1]+a>k&&(k=b[q][1]+a,l=b[q][0]),k>0){var r=1-(b[q][1]+a)/k;r>j&&(j=r,m=b[q][0],n=l)}b.length>0&&(o=p/b.length);var q=0,s=[],t=0,u=0,v=0,w=d;(d-c)%e>0&&(w=(parseInt(d/e)+1)*e);for(var x=c;x<w;x+=e){for(var y=0,z=x+e;q<b.length&&b[q][0]<z;)y+=b[q][1]-u,u=b[q][1],q++;v=y/a*g/e,t+=v,s.push(v)}var A=0,B=0;if(s.length>0){var C=t/s.length,D=0;for(q=0;q<s.length;q++)D+=Math.pow(s[q]-C,2);B=Math.sqrt(D/s.length),0!==B&&(A=(i-.03)/B)}return{totalAssets:a,yearDays:f,totalReturns:h,annualizedReturns:i,sharpeRatio:A,volatility:B,maxDrawdown:j,maxDrawdownTime:m,maxAssetsTime:l,maxDrawdownStartTime:n,winningRate:o}},SafeObj:function(a){var b=_.clone(a);return safe_obj(b),b},Base58:Base58,deleteById:function(a,b){for(var c=0;c<a.length;c++)if(b==a[c].id){a.splice(c,1);break}},getCssVal:function(a,b){return void 0===a?b:"number"==typeof a?a:(a=a.toString().toLowerCase(),a.length>1&&"%"==a[a.length-1]?Number(a.slice(0,a.length-1))+"%":a.length>2&&"p"==a[a.length-2]&&"x"==a[a.length-1]?Number(a.slice(0,a.length-2))+"px":Number(a))},tradeFilters:tradeFilters}}]),angular.module("botvsApp").service("qupload",["$http","$q","localStorageService",function(a,b,c){function d(a){var b,c,d,e;for(b="",d=a.length,c=0;c<d;c++)e=a.charCodeAt(c),e>=1&&e<=127?b+=a.charAt(c):e>2047?(b+=String.fromCharCode(224|e>>12&15),b+=String.fromCharCode(128|e>>6&63),b+=String.fromCharCode(128|e>>0&63)):(b+=String.fromCharCode(192|e>>6&31),b+=String.fromCharCode(128|e>>0&63));return b}function e(a){var b,c,d,e,g,h;for(d=a.length,c=0,b="";c<d;){if(e=255&a.charCodeAt(c++),c==d){b+=f.charAt(e>>2),b+=f.charAt((3&e)<<4),b+="==";break}if(g=a.charCodeAt(c++),c==d){b+=f.charAt(e>>2),b+=f.charAt((3&e)<<4|(240&g)>>4),b+=f.charAt((15&g)<<2),b+="=";break}h=a.charCodeAt(c++),b+=f.charAt(e>>2),b+=f.charAt((3&e)<<4|(240&g)>>4),b+=f.charAt((15&g)<<2|(192&h)>>6),b+=f.charAt(63&h)}return b}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",g="https:"==location.protocol?"/upload":"http://localhost:9901/upload",h={chunkSize:4194304,mkblkEndPoint:g+"/mkblk/",mkfileEndPoint:g+"/mkfile/",maxRetryTimes:3};if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),!this.support)return null;var i=function(a){return a.name+a.lastModified+a.size+a.type};this.upload=function(f){var g=b.defer(),j=g.promise,k=f.file;if(k){var l=i(k),m=c.get(l);m||(m=[]);var n,o=Math.ceil(k.size/h.chunkSize),p=function(a,b,c){return a[a.slice?"slice":a.mozSlice?"mozSlice":a.webkitSlice?"webkitSlice":"slice"](b,c)},q=function(a,b,c){return c===b-1?a.size-h.chunkSize*c:h.chunkSize},r=function(b,i){if(0!==i.length){for(var j,k="",m=0;m<i.length-1;m++)j=angular.fromJson(i[m]),k+=j.ctx+",";j=angular.fromJson(i[i.length-1]),k+=j.ctx;var n=h.mkfileEndPoint+b.size;f&&f.key&&(n+="/key/"+e(d(f.key))),a({url:n,method:"POST",data:k,headers:{Authorization:"UpToken "+f.token,"Content-Type":"text/plain"}}).success(function(a){g.resolve(a),c.remove(l)}).error(function(a){g.reject(a)})}},s=function(a,b,d){if(b===o)return void r(a,m);if(!d)return void g.reject("max retried,still failure");var e=q(a,o,b),i=b*h.chunkSize,j=p(a,i,i+e);n=new XMLHttpRequest,n.open("POST",h.mkblkEndPoint+e,!0),n.setRequestHeader("Authorization","UpToken "+f.token),n.upload.addEventListener("progress",function(b){if(b.lengthComputable){var c={totalSize:a.size,loaded:b.loaded+i};g.notify(c)}}),n.upload.onerror=function(){s(f.file,b,--d)},n.onreadystatechange=function(a){a&&4===n.readyState&&200===n.status&&(200===n.status?(m[b]=n.responseText,c.set(l,m),s(f.file,++b,h.maxRetryTimes)):s(f.file,b,--d))},n.send(j)};return s(f.file,m.length,h.maxRetryTimes),j.abort=function(){n.abort(),c.remove(l)},j.pause=function(){n.abort()},j}}}]).directive("ngFileSelect",["$parse","$timeout",function(a,b){return function(c,d,e){var f=a(e.ngFileSelect);if("input"!==d[0].tagName.toLowerCase()||"file"!==(d.attr("type")&&d.attr("type").toLowerCase())){for(var g=angular.element('<input type="file" accept="image/gif,image/png,image/jpeg,video/mp4,audio/mpeg,application/ogg,audio/ogg">'),h=0;h<d[0].attributes.length;h++)g.attr(d[0].attributes[h].name,d[0].attributes[h].value);d.attr("data-multiple")&&g.attr("multiple","true"),g.css("top",0).css("bottom",0).css("left",0).css("right",0).css("width","100%").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)"),d.append(g),""!==d.css("position")&&"static"!==d.css("position")||d.css("position","relative"),d=g}d.bind("change",function(a){var d,e,g=[];if(null!==(d=a.__files_||a.target.files))for(e=0;e<d.length;e++)g.push(d.item(e));b(function(){f(c,{$files:g,$event:a})})})}}]),angular.module("botvsApp").directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),angular.module("botvsApp").directive("equals",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){a.$watch(c.ngModel,function(){e()}),c.$observe("equals",function(){e()});var e=function(){var a=d.$viewValue,b=c.equals;d.$setValidity("equals",a===b)}}}}}),angular.module("botvsApp").directive("ngFocus",["$timeout",function(a){return{link:function(b,c,d){b.$watch(d.ngFocus,function(b){angular.isDefined(b)&&b&&a(function(){c[0].focus()})},!0),c.bind("blur",function(){angular.isDefined(d.ngFocusLost)&&b.$apply(d.ngFocusLost)})}}}]),angular.module("botvsApp").directive("animateOnChange",["$timeout",function(a){return function(b,c,d){b.$watch(d.animateOnChange,function(b,d){b!=d&&(c.addClass("changed"),a(function(){c.removeClass("changed")},1e3))})}}]),angular.module("botvsApp").directive("comment",["$location","$window","$log","$translate","dialog","session","qupload",function(a,b,c,d,e,f,g){return{template:'<div class="panel panel-default">    <div class="panel-heading"><i class="fa fa-comments"></i>&nbsp;        {{ (getUser() ? getUser(): "ui.comment.loginReply") | translate }}<span class="pull-right badge" style="background-color:#aab0c6" ng-show="comments_count>0">{{ comments_count }}</span>    </div>    <div class="panel-body">        <div>            <div style="margin-bottom:5px"><textarea ng-model="content" class="form-control" rows=2 placeholder="{{\'ui.comment.say\'|translate}}"></textarea></div>            <div>                <div ng-file-select="onFileSelect($files)" data-multiple="true" title="select file" onclick="this.value = null" class="btn btn-upload"><span class="glyphicon glyphicon-picture"></span></div>                <span ng-repeat="(k,v) in selectFiles">{{v.file.name}} - {{v.progress.p}}% <button ng-click="abort(k)">x</button></span>                <button class="btn btn-success pull-right" ng-disabled="pending || content.length==0" ng-click="reply()" translate="ui.comment.reply"></button>            </div>        </div>        <div ng-repeat="comment in comments" ng-style="{\'margin-left\': comment.ident*50+\'px\'}">            <blockquote ng-mouseover="comment.mouseMode=true" ng-mouseleave="comment.mouseMode=false">                <p style="font-size:16px;color:#576057" ng-bind-html="comment.content | markdown"></p>                <footer style="font-size:13px;line-height:1">                    <font color="#337ab7"><b>{{comment.username }}</b></font><font color="#cccccc">&nbsp;•&nbsp;{{comment.timeAgo}}</font><span ng-show="(comment.mouseMode && ((comment.is_owner && comment.timeDays<15) || !comment.is_owner)) || comment.is_edit_mode || comment.is_reply_mode">&nbsp;•&nbsp;<a href="" style="text-decoration:none" ng-click="comment.is_owner ? comment.is_edit_mode=!comment.is_edit_mode : comment.is_reply_mode=!comment.is_reply_mode"><font color="{{ (comment.is_edit_mode || comment.is_reply_mode) ? \'#337ab7\' : \'#cccccc\'}}">{{ (comment.is_owner ? "ui.comment.replyEdit" : "ui.comment.reply") | translate }}</font></a></span><a href="" style="margin-left:10px;text-decoration:none" ng-if="isAdmin() || (comment.is_owner && (comment.timeDays<15) && (comment.mouseMode || comment.is_edit_mode || comment.is_reply_mode))" ng-click="remove(comment)"><font color="#cccccc" translate="ui.comment.delete"></font></a>                    <adminbar type="\'reply\'" ref="comment"></adminbar>                </footer>            </blockquote>            <div ng-show="comment.is_reply_mode">                <div style="margin-bottom:5px"><textarea ng-model="comment.reply_content" class="form-control" rows=2 placeholder="@ {{comment.username}}"></textarea></div>                <div>                    <span ng-file-select="onFileSelect($files, comment)" data-multiple="true" title="select file" onclick="this.value = null" class="btn btn-upload">                        <span class="glyphicon glyphicon-picture"></span>                    </span>                    <span ng-repeat="(k,v) in comment.selectFiles">{{v.file.name}} - {{v.progress.p}}% <button ng-click="abort(k, comment)">x</button></span>                    <button class="btn btn-success pull-right" ng-disabled="pending || comment.reply_content.length==0" ng-click="reply(comment)" translate="ui.comment.reply"></button>                </div>            </div>            <div ng-show="comment.is_edit_mode" style="margin-bottom:10px">                <div style="margin-bottom:5px"><textarea ng-model="comment.content" class="form-control" rows=2></textarea></div>                <div>                    <span ng-file-select="onFileSelect($files, comment)" data-multiple="true" title="select file" onclick="this.value = null" class="btn btn-upload">                        <span class="glyphicon glyphicon-picture"></span>                    </span>                    <span ng-repeat="(k,v) in comment.selectFiles">{{v.file.name}} - {{v.progress.p}}% <button ng-click="abort(k, comment)">x</button></span>                    <button class="btn btn-success pull-right" ng-disabled="pending || comment.content.length==0" ng-click="reply(comment)" translate="ui.comment.replyEdit"></button>                </div>            </div>        </div>    </div></div>',restrict:"A",scope:{topic:"=comment"},link:function(a,b,h){a.isAdmin=f.isAdmin,a.pending=!1,a.content="",a.comments_count=0,a.comments=[],a.getUser=f.getUser,a.selectFiles=[];var i=function(b,h){var i=void 0===h?a.selectFiles:h.selectFiles;f.rest("GetQiniuToken",i[b].file.name).then(function(f){if(-1==f)return i.splice(b,1),void e.alert(d.instant("ui.comment.forbiddenFile"));i[b].progress={p:0},i[b].upload=g.upload({file:i[b].file,token:f}),i[b].upload.then(function(b){var c=" /upload/asset/"+b.key+" ";void 0!==h?h.is_reply_mode?h.reply_content+=c:h.content+=c:a.content+=c},function(a){c.info("error",a)},function(a){i[b].progress.p=Math.floor(100*a.loaded/a.totalSize)})},function(a){e.alert(a)})};a.abort=function(b,c){var d=void 0===c?a.selectFiles:c.selectFiles;d[b].upload.abort(),d.splice(b,1)},a.onFileSelect=function(b,c){for(var d=void 0===c?a.selectFiles:c.selectFiles,e=d.length,f=0;f<b.length;f++)d[f+e]={file:b[f]},i(f+e,c)},a.reply=function(b){if(!f.isLogin())return void f.logout(!0);if(!f.isShadow()){var c=-1,g=-1,h=-1,i="";void 0!==b?(c=void 0!==b.reply_id?b.reply_id:b.id,g=void 0!==b.reply_id?b.id:-1,i=b.is_edit_mode?b.content:b.reply_content,h=b.is_edit_mode?b.id:-1):i=a.content,0!=i.length&&(a.pending=!0,f.rest("SubmitComment",[a.topic,i,c,g,h]).then(function(h){if(a.pending=!1,0==h)return void e.alert(d.instant("ui.comment.forbiddenReply"));if(void 0!==b){if(b.is_edit_mode)return void(b.is_edit_mode=!1);b.is_reply_mode=!1}var j=moment().format("YYYY-MM-DD HH:mm:ss"),k={id:h,ident:0,is_owner:!0,selectFiles:[],is_edit_mode:!1,is_reply_mode:!1,reply_content:"",content:i,created:j,timeAgo:moment(j).fromNow(),username:f.getUser()};-1!=c&&(k.reply_id=c),-1!=g&&(k.sub_reply_id=g);var l=0;if(-1!=c)for(var m=0;m<a.comments.length;m++)if(-1==g){if(c==a.comments[m].id){k.ident=a.comments[m].ident+1,l=m+1;break}}else if(g==a.comments[m].id){l=m+1,k.ident=a.comments[m].ident+1;break}a.comments.splice(l,0,k),a.comments_count++},function(b){a.pending=!1,e.alert(b)}))}},a.remove=function(b){e.confirm((a.isAdmin()?"Admin: ":"")+d.instant("ui.comment.confirmDelete")).then(function(){a.pending=!0,f.rest("SubmitComment",[a.topic,"",-1,-1,b.id]).then(function(c){if(a.pending=!1,c){for(var d=(moment().format("YYYY-MM-DD HH:mm:ss"),0);d<a.comments.length;d++)if(b.id==a.comments[d].id){a.comments.splice(d,c);break}a.comments_count-=c}},function(b){a.pending=!1,e.alert(b)})})};var j=function(b){a.pending=!0,f.rest("GetCommentList",[b,-1,-1]).then(function(b){a.pending=!1;for(var c=b.reply.length-1;c>=0;c--)for(var d=0;d<b.comments.length;d++){var e=void 0!==b.reply[c].sub_reply_id;if(!e&&b.reply[c].reply_id==b.comments[d].id||e&&b.reply[c].sub_reply_id==b.comments[d].id){b.comments.splice(d+1,0,b.reply[c]);break}}for(var c=0;c<b.comments.length&&(b.comments[c].timeAgo=moment(b.comments[c].created).fromNow(),b.comments[c].timeDays=moment().diff(moment(b.comments[c].created),"days"),b.comments[c].reply_content="",b.comments[c].is_edit_mode=!1,b.comments[c].is_reply_mode=!1,b.comments[c].selectFiles=[],void 0===b.comments[c].ident&&(b.comments[c].ident=0),c!=b.comments.length-1);c++)b.comments[c+1].reply_id!=b.comments[c].id&&b.comments[c+1].sub_reply_id!=b.comments[c].id||(b.comments[c+1].ident=b.comments[c].ident+1),b.comments[c+1].reply_id==b.comments[c].reply_id&&b.comments[c+1].sub_reply_id==b.comments[c].sub_reply_id&&(b.comments[c+1].ident=b.comments[c].ident);a.comments=b.comments,a.comments_count=b.all},function(b){a.pending=!1,e.alert(b)})},k=!0;a.$watch("topic",function(b){b&&(k=!1,a.topic=b,j(b))},!0)}}}]),angular.module("botvsApp").directive("share",["$location","$sce","$timeout",function(a,b,c){return{template:'<div class="btn-group btn-group-xs" role="group"><button type="button" class="btn btn-default" popover-trigger="mouseenter" uib-popover-html="getQRContent()"><i style="color:#81d300" class="fa fa-weixin"></i>&nbsp;微信</button><a target="_blank" ng-href="{{shareQZoneUrl}}" class="btn btn-default"><i style="color:#3cb0df" class="fa fa-qq"></i>&nbsp;QQ空间</a><a target="_blank" ng-href="{{shareSinaUrl}}" class="btn btn-default"><i style="color:#e06a70" class="fa fa-weibo"></i>&nbsp;微博</a></div>',restrict:"AE",scope:{topic:"=topic"},link:function(a,d,e){var f=encodeURI(document.location),g=encodeURI(a.topic+" - FMZ"),h=encodeURI("https://www.fmz.com/images/badge.png"),i=[h],j=$(".markdown-body img");if(j.length>0){h=encodeURIComponent(j[0].src),i=[];for(var k=0;k<j.length;k++)i.push(encodeURIComponent(j[k].src))}var l=b.trustAsHtml('<div style="margin-bottom:8px"><i style="color:#81d300" class="fa fa-weixin"></i>&nbsp;<b>微信扫一扫分享</b></div><div id="qrcode" style="width:150px;height:150px;"></div>');a.getQRContent=function(){return 0==$("#qrcode").length&&c(function(){var a=$("#qrcode");a.length>0&&a.qrcode({width:150,height:150,text:location.href})}),l};var m=encodeURIComponent(a.topic);a.shareSinaUrl="http://v.t.sina.com.cn/share/share.php?title="+g+"&url="+f+"&sourceUrl="+f+"&pic="+h,a.shareQZoneUrl="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+f+"&title="+g+"&pics="+i.join("|")+"&summary="+m}}}]),angular.module("botvsApp").directive("ngLoading",["$window","$timeout","$location",function(a,b,c){return{restrict:"A",link:function(c,d,e){var f=!1;$(d).hide(),a.prerenderReady=!1;var g=$('<div align="center" style="margin-top:100px;display:none"><img src="images/loading.gif"></div>').insertBefore(d);g.fadeIn("slow");var h=function(){f||(f=!0,g.hide(),$(d).show(),b(function(){a.prerenderReady=!0},200))};0==a.pending?h():c.$on("onReady",function(a,b){h()})}}}]),angular.module("botvsApp").directive("convertToNumber",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return parseInt(a,10)}),d.$formatters.push(function(a){return""+a})}}}),angular.module("botvsApp").directive("robot",["$timeout","$filter","$translate","$location","session","util","encrypt","dialog",function(a,b,c,d,e,f,g,h){return{templateUrl:"views/directive-robot.html",restrict:"A",scope:{robotId:"=robot",isPrivate:"=private"},link:function(d,i,j){function k(){J.length>0&&(_.each(J,function(a){a.ele.destroy()}),G=0,E=0,F=0,D=0,H=0,J=[],u.show_chart_strategy=!1)}function l(a,b){switch(void 0!==a.runtime&&void 0!==a.x&&a.runtime.length>0&&(x[a.x]=a.runtime),a.constructor.name){case"Number":a={y:a,id:b};break;case"Array":var c={x:a[0],id:b};5!==a.length?c.y=a[1]:(c.open=a[1],c.high=a[2],c.low=a[3],c.close=a[4]),a=c;break;case"Object":a.id=b}return a}function m(a){void 0===a&&(a={});var b={robotId:v,logMinId:0,logMaxId:0,logOffset:0,logLimit:u.pageSize,profitMinId:0,profitMaxId:0,profitOffset:0,profitLimit:u.maxPoint,chartMinId:0,chartMaxId:0,chartOffset:0,chartLimit:u.maxPoint,chartUpdateBaseId:0,chartUpdateTime:0},c={};for(var d in b)void 0!==a[d]?c[d]=a[d]:c[d]=b[d];return[c.robotId,c.logMinId,c.logMaxId,c.logOffset,c.logLimit,c.profitMinId,c.profitMaxId,c.profitOffset,c.profitLimit,c.chartMinId,c.chartMaxId,c.chartOffset,c.chartLimit,c.chartUpdateBaseId,c.chartUpdateTime]}function n(a){var b=f.SafeObj(angular.fromJson(a)),c=[];c=void 0!==b[0]?b:[b],_.each(c,function(a,b){var c=J[b];if(void 0!==c){void 0!==a.title&&(void 0!==a.subtitle?c.ele.setTitle(a.title,a.subtitle):c.ele.setTitle(a.title)),void 0!==a.subtitle&&c.ele.setTitle(a.title),void 0!==a.series&&a.series.length>0&&_.each(a.series,function(a,b){void 0!==a.data&&a.data.length>0&&c.ele.series[b].setData(a.data)});for(var d=["x","y"],e=0;e<d.length;e++){var f=d[e]+"Axis";if(void 0!==a[f]){"Array"!==a[f].constructor.name&&(a[f]=[a[f]]);for(var g=0;g<a[f].length;g++)if(void 0!==c.cfg[f]&&void 0!==c.cfg[f][g]&&void 0!==c.cfg[f]&&void 0!==c.cfg[f][g]&&void 0!==a[f][g]&&void 0!==a[f][g].plotLines){var h=JSON.stringify(a[f][g].plotLines),i=JSON.stringify(c.cfg[f][g].plotLines);h!==i&&c.ele[f][g].update({plotLines:a[f][g].plotLines})}}}c.cfg=a}})}function o(b,d){if("{}"!=b){var e=angular.fromJson(b.replace(/useHTML/gi,"__disableHTML")),g=[];g=void 0!==e[0]?e:[e];var h=[];if(d.length>0){E=d[0][0],H=d[d.length-1][0];for(var i=d.length-1;i>=0;i--)try{var j=angular.fromJson(d[i][2]),k=d[i][1];void 0===h[k]&&(h[k]=[]),h[d[i][1]].push(l(j,d[i][0]))}catch(a){console.log(a)}}for(var m=0,n=[],o="",p=0;p<g.length;p++){var q=g[p];void 0===q.chart&&(q.chart={});var r="group";void 0===q.extension&&(q.extension={}),"string"==typeof q.extension.layout&&(r=q.extension.layout),q.chart.renderTo="chart_strategy_"+p,void 0!==q.series&&null!=q.series||(q.series=[]);for(var k=0;k<q.series.length;k++)void 0===q.series[k]&&(q.series[k]={data:[]}),void 0===q.series[k].data&&(q.series[k].data=[]),void 0!==h[m]&&(q.series[k].data=q.series[k].data.concat(h[m])),m++;void 0===q.plotOptions&&(q.plotOptions={}),void 0===q.plotOptions.series&&(q.plotOptions.series={}),void 0===q.plotOptions.series.point&&(q.plotOptions.series.point={}),void 0===q.plotOptions.series.dataGrouping&&(q.plotOptions.series.dataGrouping={enabled:!1}),q.plotOptions.series.turboThreshold=0,q.plotOptions.series.events={mouseOut:function(){this.chart.lbl&&this.chart.lbl.hide()}},q.plotOptions.series.point.events={mouseOver:function(){var a=this.series.chart;if(void 0!==x&&x){var b="",c=x[this.x];void 0!==c&&_.each(c,function(a){"string"==typeof a[0]&&(0==a[0].length?b+=" "+a[1]+" ":b+=a[0]+": "+a[1]+" ")}),0!=b.length&&(a.lbl||(a.lbl=a.renderer.label("",300,3).attr({padding:10,r:5,fill:Highcharts.getOptions().colors[1]}).css({color:"#FFFFFF"}).add()),a.lbl.show().attr({text:b}))}}},q.lang={_fullscreen:c.instant("ui.g.fullscreen")},q.exporting={buttons:{hideButton:{_titleKey:"_fullscreen",text:c.instant("ui.g.fullscreen"),onclick:function(){f.toggleFullScreen(this.renderTo)}}}};var s=0==p?"active":"inactive",t=void 0!==q.title&&void 0!==q.title.text?q.title.text:"图表 - "+p;"single"!=r&&r==o||(n.push({tabs:[],contents:[]}),s="active"),n[n.length-1].tabs.push('<li role="presentation" class="'+s+'"><a href="#tab_chart_strategy_'+p+'" role="tab" data-toggle="tab">'+t+"</a></li>"),n[n.length-1].contents.push('<div role="tabpanel" class="tab-pane '+s+'" id="tab_chart_strategy_'+p+'"><div style="height:'+f.getCssVal(q.extension.height,"536px")+'"><div id="chart_strategy_'+p+'" class="chart" style="height: 100%; width: 100%"></div></div></div>'),o=r}for(var v=$("#chart_strategy"),w="",w='<div class="row">',p=0,i=0;i<n.length;i++){var y=n[i];y.tabs.length>1?(i>0&&1==n[i-1].tabs.length&&(w+='</div><div class="row">'),w+='<div class="col-md-12"><ul class="nav nav-tabs">'+y.tabs.join("\n")+'</ul><div class="tab-content" style="margin-top:15px">'+y.contents.join("\n")+"</div></div>"):(i>0&&n[i-1].tabs.length>1&&(w+='</div><div class="row">'),w+='<div class="col-md-'+("number"==typeof g[p].extension.col?g[p].extension.col:12)+'">'+y.contents[0]+"</div>"),p+=y.tabs.length}w+="</div>",v.html(w),u.show_chart_strategy=!0,a(function(){J=[],_.each(g,function(a,b){var c=f.SafeObj(a);void 0===a.__isStock||a.__isStock?J[b]={ele:new Highcharts.StockChart(c),cfg:a}:J[b]={ele:new Highcharts.Chart(c),cfg:a}}),window._charts_obj=J,a(function(){_.each(J,function(a){a.ele.reflow()})},300),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){var b=$(this).attr("href");if(-1!==b.indexOf("tab_chart_strategy")){var c=b.split("_"),d=parseInt(c[c.length-1]);void 0!==J[d]&&J[d].ele.reflow()}})})}}function p(a){if(u.online=a.online,u.summary=a.summary,a.chartTime>0&&(u.chartTime=moment(a.chartTime).format("YYYY-MM-DD HH:mm:ss")),u.robotstatus!=a.status&&(u.robotstatus=a.status,u.robot.status=a.status),u.robotwd!=a.wd&&(u.robotwd=a.wd,u.robot.wd=a.wd),u.robot.node_id!=a.node_id){u.robot.node_id=a.node_id;for(var b=0;b<u.nodes.length;b++)u.robot.fixed_id>0?u.robot.fixed_id===u.nodes[b].id&&(u.bindNode=u.nodes[b]):u.robot.node_id>0&&u.robot.node_id===u.nodes[b].id&&(u.bindNode=u.nodes[b])}a.logs[0].Max>0&&(a.logs[0].Total!=u.log_count&&(u.log_count=a.logs[0].Total,u.pageCount=Math.ceil(a.logs[0].Total/u.pageSize)),u.pages=f.getPages(a.logs[0].Total,u.pageSize,u.currentPage)),a.logs[1].Max>1&&(a.logs[1].Total!=u.profit_count&&(u.profit_count=a.logs[1].Total,u.pageProfitCount=Math.ceil(a.logs[1].Total/u.maxPoint)),u.profit_pages=f.getPages(a.logs[1].Total,u.maxPoint,u.currentProfitPage)),a.logs[2].Max>1&&(u.chart_count=a.logs[2].Total,u.pageChartCount=Math.ceil(a.logs[2].Total/u.maxPoint),u.chart_pages=f.getPages(a.logs[2].Total,u.maxPoint,u.currentChartPage))}function q(a){if(_.each(a,function(b,c){a[c]={id:b[0],log_type:b[1],eid:b[2],order_id:b[3],price:parseFloat(b[4].toFixed(12)),amount:parseFloat(b[5].toFixed(6)),extra:b[6],date:moment(b[7]).format("YYYY-MM-DD HH:mm:ss"),contractType:b.length>8?b[8]:"",direction:b.length>9?b[9]:""}}),void 0!==a&&void 0!==a.length)for(var b=0;b<a.length;b++){a[b].show_price=0==a[b].log_type||1==a[b].log_type||4==a[b].log_type,a[b].priceStr=a[b].log_type<2||4==a[b].log_type?4!=a[b].log_type&&-1==a[b].price?"市价单":a[b].price:"",a[b].amountStr=a[b].log_type<2?a[b].amount:"";var c=f.getStrStyle(a[b].extra);switch(a[b].extra=c.body,a[b].style=c.style,a[b].icon=c.icon,a[b].logTypeStr=u.logTypes[a[b].log_type],a[b].direction){case"buy":a[b].directionStr="ui.log.type.buyLong",a[b].directionStyle="label label-success";break;case"closebuy":case"closebuy_today":a[b].directionStr="ui.log.type.sellClose",a[b].directionStyle="label label-default";break;case"sell":a[b].directionStr="ui.log.type.sellShort",a[b].directionStyle="label label-danger";break;case"closesell":case"closesell_today":a[b].directionStr="ui.log.type.buyCover",a[b].directionStyle="label label-default"}a[b].labelStyle="label "+["label-primary","label-success","label-default","label-default","label-danger","label-info","label-warning"][a[b].log_type]}}function r(b){if(u.currentPage>1||(!u.autoRefresh||u.robotstatus>2)&&void 0===b)return void s();u.log_loading=!0;var c=m({logMinId:B,profitMinId:C,profitLimit:1==u.currentProfitPage?u.maxPoint:0,chartMinId:E,chartLimit:1==u.currentChartPage?u.maxPoint:0,chartUpdateBaseId:H,chartUpdateTime:G});z++,e.rest("GetRobotLogs",c).then(function(b){if(b){var c=b;G=b.chartTime;var d=b.logs[1].Arr;if(p(b),d.length>0){C=d[0][0];for(var e=d.length-1;e>=0;e--){var f=w+1>u.maxPoint;f||w++,I.series[0].addPoint([d[e][2],d[e][1]],!1,f)}!u.show_chart_profit&&I?(u.show_chart_profit=!0,a(function(){I.reflow()},300)):I.redraw()}if(J.length>0&&""!==b.chart)try{n(b.chart)}catch(a){console.log("UpdateChart",a)}var g=b.logs[2].Arr,i=b.logs[2].Min;if(g.length>0){if(J.length>0){if(i>F)for(var e=F;e<i;e++)for(var j=0;j<J.length;j++){var k=J[j].ele.get(e);if(k){
k.remove(!1);break}}u.show_chart_strategy=!0;var m=0,r=[],t={};_.each(J,function(a,b){for(var c=0;c<a.cfg.series.length;c++)r[m]={ele:a.ele,chartIdx:b,data:[],seriesIdx:c,min:NaN,max:NaN},m++});for(var v=Math.ceil(u.maxPoint/J.length),e=g.length-1;e>=0;e--){var x=g[e][1];if(void 0!==r[x]){var A=r[x];t[A.chartIdx]=!0;try{var D=angular.fromJson(g[e][2]),K=void 0!==A.ele.xAxis[0]&&void 0!==A.ele.xAxis[0].categories&&void 0!==A.ele.xAxis[0].categories.length,L=g[e][0],M=A.ele.series[A.seriesIdx],D=l(D,g[e][0]),k=A.ele.get(L);if(k){k.update(D,!1,!1);continue}if(K&&A.ele.xAxis[0].categories.length<=M.data.length)continue;var f=M.data.length>v;M.addPoint(D,!1,f)}catch(a){console.log("Sync",a)}}}for(var N in t)J[N].ele.redraw()}else if(""!==b.chart)try{o(b.chart,g)}catch(a){h.alert("Build chart: "+a)}E=Math.max(E,g[0][0]),F=i,0===H&&(H=g[g.length-1][0])}var O=c.logs[0].Arr;if(O.length>0){var P=!1;q(O),B=O[0].id;for(var e=O.length-1;e>=0;e--){if(!P)for(var j=0;j<u.logFilter.length;j++)O[e].log_type===u.logFilter[j].log_type&&u.logFilter[j].selected&&(P=!0);u.logs.unshift(O[e])}for(var Q=u.logs.length-u.pageSize,e=0;e<Q;e++)u.logs.pop();P&&u.autoPlay&&u.playAudio()}}y=(new Date).getTime(),z--,u.log_loading=!1,s()},function(a){y=(new Date).getTime(),z--,u.log_loading=!1,console.log("Sync",a),s()})}function s(){null!=A&&(a.cancel(A),A=null),u.refreshTime>0||(A=a(r,5e3))}function t(a){u.io_loading=!0,e.rest("RestartRobot",a.id).then(function(b){u.io_loading=!1,-1===b?h.alert("ui.dashboard.alert.strategyExpire"):-2===b?h.alert("ui.dashboard.alert.noDocker"):-3===b?h.alert("ui.dashboard.alert.internalError"):-4===b?h.alert("ui.dashboard.alert.alreadyRunning"):-5===b?h.alert("ui.dashboard.alert.insufficientBalance"):-6==b?h.alert("ui.dashboard.alert.exceedConcurrency"):-7===b?h.alert("ui.dashboard.alert.passwordNeed"):-8===b?h.alert("ui.dashboard.alert.planExpired"):"string"==typeof b?h.alert(b):(a.status=b,k(),u.robotstatus=b,u.robotwd=0,u.autoRefresh=!0)},function(a){u.io_loading=!1,h.alert(a)})}var u=d;u.maxPoint=e.KV_Get("robot_maxPoint",1e3),u.isOEM=e.g.oem,u.confirmSettings={slient:!1},u.animation="slide-left";var v=d.robotId;u.hasFutures=!1,u.isOld=!1,u.isPending=!0,u.isShadow=e.isShadow(),u.online=!0,u.robot={},u.error="",u.nodes=[],u.scriptArgList=[],u.node=null,u.logs=[],u.canChangePlatform=!1;var w=0;u.profit_pages=[],u.profit_count=0,u.currentProfitPage=1,u.profitJumpPage=u.currentProfitPage,u.pageProfitCount=0,u.node_selected=null,u.node_selected_id=-1,u.chartTime="",u.chart_pages=[],u.chart_count=0,u.currentChartPage=1,u.pageChartCount=0,u.currentPage=1,u.logsJumpPage=u.currentPage,u.pageSize=20,u.log_count=0,u.pages=[],u.pageCount=0,u.autoRefresh=!1,u.isHideErrors=!1,u.io_loading=!1,u.chart_loading=!1,u.profit_loading=!1,u.log_loading=!1,u.summary="",u.robotstatus=0,u.robotwd=0,u.btnpending=!1,u.kticks=f.kticks,u.ktick_selected=u.kticks[0],u.pairs_select=[],u.hideErrors=function(a){u.isHideErrors=a},u.autoPlay=!1,u.logTypes=f.getLogTypes(),u.logFilter=[],u.option={};var x={};u.refreshTime=0;var y=0,z=0;u.getStderroCls=function(){return u.robot.debug.Stdout.length>0?"tab-pane fade in inactive":"tab-pane fade in active"},u.$on("onTaskUpdate",function(a,b){if(b.id==u.robotId){var c=!1;1&b.flags&&(u.robotstatus=b.status,b.status>2&&(u.robotwd=0,e.rest("GetRobotDetail",u.robotId).then(function(a){if(u.robot.summary=a.robot.summary,"string"==typeof a.robot.debug)try{u.robot.debug=angular.fromJson(a.robot.debug),u.robot.debugTime=moment(u.robot.debug.Nano/1e6).format("YYYY-MM-DD HH:mm:ss")}catch(a){}u.robot.start_time=a.robot.start_time,u.robot.end_time=a.robot.end_time})),c=!0),(16&b.flags||4&b.flags)&&(u.refreshTime=(new Date).getTime(),c=!0),c&&0==z&&r(!0)}}),u.hasPublic=function(){for(var a=0;a<u.nodes.length;a++)if(1==u.nodes[a].public&&!u.nodes[a].is_owner&&-2!=u.nodes[a].id)return!0;return!1},u.hasPrivate=function(){for(var a=0;a<u.nodes.length;a++)if((0==u.nodes[a].public||u.nodes[a].is_owner)&&-1!=u.nodes[a].id)return!0;return!1},u.showTradeTime=function(){e.rest("GetSettings","info_tradetime").then(function(a){"string"==typeof a&&a.length>0&&h.show(a,"商品期货交易时间表")})},u.show_chart_strategy=!1;for(var A=null,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=null,J=[],K=0;K<u.logTypes.length;K++)u.logFilter.push({log_type:K,name:u.logTypes[K],selected:!0});u.playAudio=function(a){try{void 0===a&&(a="1");var b="msg_"+a,c=document.getElementById(b);null==c&&(c=document.createElement("audio"),c.id=b,c.src="res/"+a+".mp3",document.body.appendChild(c)),c.play()}catch(a){}},u.removePair=function(a){for(var b=0;b<u.pairs_select.length;b++)if(u.pairs_select[b].label===a.label&&u.pairs_select[b].stock===a.stock)return void u.pairs_select.splice(b,1)},u.addPair=function(){u.option.stock=u.option.stock.toUpperCase();for(var a=0;a<u.pairs_select.length;a++)if(u.pairs_select[a].label===u.option.platform.label&&u.pairs_select[a].stock===u.option.stock)return void h.alert("ui.robot.alert.platformRepeat");u.pairs_select.push({id:u.option.platform.id,label:u.option.platform.label,eid:u.option.platform.eid,stock:u.option.stock})},u.$on("$destroy",function(){null!=A&&(a.cancel(A),A=null),u.autoRefresh=!1,e.rest("SubscribeRobot",0).then(function(a){})}),u.goChart=function(a,b){if(u.currentChartPage!==a||void 0!==b){e.KV_Set("robot_maxPoint",u.maxPoint),u.currentChartPage=a;var c=(a-1)*u.maxPoint;u.chart_loading=!0;var d=m({logLimit:0,profitLimit:0,chartOffset:c,chartLimit:u.maxPoint});e.rest("GetRobotLogs",d).then(function(a){if(a){p(a);var b=a.logs[2].Arr,c=0,d=[];_.each(J,function(a,b){for(var e=0;e<a.cfg.series.length;e++)d[c]={ele:a.ele,chartIdx:b,data:[],seriesIdx:e,min:NaN,max:NaN},c++});for(var e=b.length-1;e>=0;e--){var f=b[e][1];if(void 0!==d[f]){var g=d[f],i=angular.fromJson(b[e][2]),j=i[0]||i.x;"number"==typeof j&&(isNaN(g.min)?(g.max=j,g.min=j):(g.max=Math.max(j,g.max),g.min=Math.min(j,g.min))),g.data.push(l(i,b[e][0]))}}var k={};_.each(d,function(a){isNaN(a.min)||(void 0!==a.ele.series[a.seriesIdx]&&(a.ele.series[a.seriesIdx].setData(a.data,!1,!1,!1),k[a.chartIdx]=!0),a.ele.xAxis[0].setExtremes(a.min,a.max,!0))});for(var m in k)J[m].ele.redraw()}else h.alert("找不到该机器人对应的托管者 !");u.chart_loading=!1},function(a){u.chart_loading=!1,h.error(a)})}},u.goProfit=function(a){if("number"==typeof a&&(a=Math.max(1,Math.min(u.pageProfitCount,a)),u.profitJumpPage=a,u.currentProfitPage!==a)){u.currentProfitPage=a;var b=(a-1)*u.maxPoint;u.profit_loading=!0;var c=m({logLimit:0,chartLimit:0,profitMinId:0,profitOffset:b,profitLimit:u.maxPoint});e.rest("GetRobotLogs",c).then(function(b){if(b){p(b);var c=b.logs[1].Arr;1===a&&(w=c.length),I.xAxis[0].setExtremes(c[c.length-1][2],c[0][2],!1);for(var d=[],e=c.length-1;e>=0;e--)d.push([c[e][2],c[e][1]]);I.series[0].setData(d,!1),I.redraw()}else h.alert("找不到该机器人对应的托管者 !");u.profit_loading=!1},function(a){u.profit_loading=!1,h.error(a)})}},u.go=function(a){if("number"==typeof a&&(a=Math.max(1,Math.min(u.pageCount,a)),u.logsJumpPage=a,u.currentPage!==a)){u.currentPage=a;var b=(a-1)*u.pageSize;u.log_loading=!0;var c=m({logMinId:0,logOffset:b,profitLimit:0,chartLimit:0});e.rest("GetRobotLogs",c).then(function(a){a?(p(a),q(a.logs[0].Arr),u.logs=a.logs[0].Arr):h.alert("找不到该机器人对应的托管者 !"),u.log_loading=!1},function(a){u.log_loading=!1,h.error(a)})}};var L=["GetRobotDetail","SubscribeRobot","GetRobotLogs"],M=[[v],[v],m()];u.isPrivate&&!u.isShadow&&(L.push("GetNodeList"),L.push("GetPlatformList"),M.push([]),M.push([])),u.log_loading=!0,z++,e.rest(L,M).then(function(d){if(d){u.isPending=!1;var e=d[0].result.robot;u.robot=e,e.desc="",e.is_manager&&e.status<2&&moment(e.start_time).diff(moment(e.strategy_last_modified))<0&&(e.desc=c.instant("ui.dashboard.alert.strategyUpdate",{date:e.strategy_last_modified}),h.notify(e.desc)),u.isPrivate=e.is_manager&&(d.length>3||u.isShadow);var g=d[2];G=g.result.chartTime,1===G&&(u.isOld=!0),void 0!==g.result.updateTime&&g.result.updateTime>0&&(u.refreshTime=(new Date).getTime());var i=g.result.chart,j=(g.result.line,g.result.logs[1].Arr),k=g.result.logs[2].Arr;w=j.length;var l=null;if(""!==i){F=g.result.logs[2].Min;try{o(i,k)}catch(a){h.alert("Build chart: "+a)}}if(u.isPrivate&&!u.isShadow){var m=d[3].result.nodes;u.nodes=[],l=d[4].result.platforms,m.splice(0,0,{id:-1,public:0,is_owner:!0,name:c.instant("ui.robot.autoDistribution")});for(var n=0;n<m.length;n++)if(!(m[n].id>0&&"string"!=typeof m[n].peer)){if(e.fixed_id===m[n].id&&(u.node_selected=m[n],u.node_selected_id=m[n].id),e.fixed_id>0?e.fixed_id===m[n].id&&(u.bindNode=m[n]):e.node_id>0&&e.node_id===m[n].id&&(u.bindNode=m[n]),-1!=m[n].id)if(1!=m[n].public||m[n].is_owner)m[n].name=m[n].id+" : "+m[n].ip+" - "+m[n].os+("string"==typeof m[n].name?" ("+m[n].name+")":"");else{var r=b("trans")(m[n].region);-1==r.indexOf("N/A")&&0!=r.length||(r=m[n].name),m[n].name=r+" : "+m[n].ip+" - "+m[n].os+" ("+c.instant("ui.const.publicUse")+")"}u.nodes.push(m[n])}}else u.node_selected_id=-1,u.node_selected={id:-1,public:0,name:c.instant("ui.robot.autoDistribution")};u.autoRefresh=e.status<3,s();for(var t=angular.fromJson(e.strategy_exchange_pairs),v=[],n=j.length-1;n>=0;n--)v.push([j[n][2],j[n][1]]);u.show_chart_profit=j.length>0,v.length>0&&(C=j[0][0]),I=f.newProfitChart("累计收益","chart_profit",v),a(function(){I.reflow();I.xAxis[0].removePlotLine("plot-line-1"),I.xAxis[0].addPlotLine({color:"#FF0000",width:2,dashStyle:"Dot",value:1e3*moment(u.robot.start_time).unix(),id:"plot-line-1"}),window.cc=I},300),q(g.result.logs[0].Arr),u.logs=g.result.logs[0].Arr,p(g.result),u.logs.length>0&&(B=u.logs[0].id),u.ktick_selected=u.kticks[0];for(var n=0;n<u.kticks.length;n++)if(u.kticks[n].id===t[0]){u.ktick_selected=u.kticks[n];break}if(u.isPrivate&&!u.isShadow){for(var x=[],y=c.instant("ui.platformNew.type.cryptocurrency"),n=0;n<l.length;n++){var A=l[n],D="";D="Futures_CTP"==A.eid||"Futures_Esunny"==A.eid?c.instant("ui.exchange.futures.ctp"):"Futures_LTS"==A.eid?c.instant("ui.exchange.stocks"):y,x.push({id:A.id,eid:A.eid,label:A.label,name:A.label,ename:A.name,stocks:A.stocks.sort(),group:D})}x.length>0&&(u.platforms=x,u.option.platform=u.platforms[0],u.option.stock=u.platforms[0].stocks[0])}for(var n=0;n<t[1].length;n++){void 0===e.plabels[t[1][n]]&&h.alert("ui.robot.alert.platformDelete");var E={id:t[1][n],label:e.plabels[t[1][n]],eid:e.pexchanges[t[1][n]],stock:t[2][n]};E.id>-10&&(u.canChangePlatform=!0),"Futures_CTP"===E.eid&&(u.hasFutures=!0),u.pairs_select.push(E)}if("string"==typeof e.debug)try{e.debug=angular.fromJson(e.debug),e.debugTime=moment(e.debug.Nano/1e6).format("YYYY-MM-DD HH:mm:ss")}catch(a){}u.scriptCMDList=[],e.scriptArgList=[],f.parseArgs(e.strategy_args,e.scriptArgList,u.scriptCMDList,e.robot_args,-1),u.scriptCMDGroup=f.parseArgGroup(u.scriptCMDList),u.scriptArgGroup=f.parseArgGroup(u.scriptArgList),u.scriptArgList.push({id:-1,name:c.instant("ui.robotNew.arg"),list:e.scriptArgList,group:f.parseArgGroup(e.scriptArgList),cls:"panel panel-default"}),_.each(e.templates,function(a){30===a.category&&(a.name=a.name.substring(a.name.indexOf("-")+1)),a.scriptArgList=[],f.parseArgs(a.args,a.scriptArgList,null,e.robot_args,a.id),u.scriptArgList.push({id:a.id,name:a.name,group:f.parseArgGroup(a.scriptArgList),list:a.scriptArgList,cls:"panel panel-info"})}),u.$emit("titleChange","Robot - "+b("trans")(e.name))}z--,u.log_loading=!1},function(a){z--,u.log_loading=!1,a.indexOf("now rows")&&(u.error="ui.robot.alert.robotNotfound")}),u.importArgs=function(a){if(a){var b=new FileReader;b.readAsText(a),b.onload=function(a){u.$apply(function(){var b="Success, 导入成功, 保存后生效 !";try{var c=angular.fromJson(a.target.result);if(void 0!==c.period)for(var d=0;d<u.kticks.length;d++)if(u.kticks[d].id===c.period){u.ktick_selected=u.kticks[d];break}f.parseArgs(u.robot.strategy_args,u.robot.scriptArgList,u.scriptCMDList,c.args,-1),_.each(u.robot.templates,function(a){f.parseArgs(a.args,a.scriptArgList,null,c.args,a.id)}),_.each(u.scriptArgList,function(a){a.group=f.parseArgGroup(a.list)}),void 0!==c.timestamp&&(b+=" 参数配置文件时间 "+moment(c.timestamp).format("YYYY-MM-DD hh:mm:ss"))}catch(a){b="导入失败, 请检查配置文件是否有效 !"}h.alert(b)})}}},u.submit=function(a){var b=u.pairs_select;if(u.frm.$invalid||!u.isShadow&&0===b.length)return void h.alert("ui.robot.alert.argError");for(var c=[],d=[],i=0;i<b.length;i++){var j=b[i];c.push(j.id),d.push(j.stock)}if(void 0!==a&&a){var k=angular.toJson({timestamp:(new Date).getTime(),period:u.ktick_selected.id,args:f.argListArrayToArgs(u.scriptArgList,null)}),l="export_"+u.robot.name+"_"+moment().format("YYYYMMDDhhmmss")+".json";return void saveAs(new Blob([k],{type:"application/json;charset=utf8;"}),l)}var m=function(a){u.btnpending=!0;var b=f.argListArrayToArgs(u.scriptArgList,function(b){return g.encryptText("$$$__"+b,a)}),i=parseInt(u.node_selected_id);e.rest("ModifyRobot",[u.robot.id,u.robot.name,i,u.ktick_selected.id,c,d,angular.toJson(b)]).then(function(a){u.btnpending=!1,a?(u.node_selected=_.findWhere(u.nodes,{id:i}),-1!=i&&(u.bindNode=u.node_selected),h.alert("ui.robot.alert.argUpdateSuccess")):h.alert("ui.robot.alert.argUpdateError")},function(a){u.btnpending=!1,h.alert(a)})};f.argNeedEncrypt(u.scriptArgList)?g.submit(m):m()},u.showArg=f.argIsShow,u.cmdRobot=function(a){if(1!=u.robotstatus)return void h.alert("ui.robot.alert.sendCmdStatusError");if(u.bindNode&&parseFloat(u.bindNode.build)<3)return void h.alert("ui.robot.alert.dockerVersionOld");var d=b("trans")(a[0].toString()),f=a.value,g=a[3].id;return 0===g&&isNaN(f)?void h.alert("ui.alert.startegy.invalidArg"):2===g&&0===f.length?void h.alert("ui.alert.startegy.emptyStringArg"):(3===g?d=d+":"+a.indexValue:5!=g&&(d=d+":"+a.value),d.length>200?void h.alert("ui.alert.startegy.longCommand"):void h.confirm(c.instant("ui.robot.alert.sendCmdConfirm",{cmd:d}),u.confirmSettings).then(function(){u.io_loading=!0,e.rest("CommandRobot",[v,d]).then(function(a){if(u.io_loading=!1,a){var b=c.instant("ui.robot.alert.senCmdSuccess",{cmd:d});u.confirmSettings.slient?h.notify(b):h.alert(b)}else h.alert("ui.robot.alert.senCmdFailure")},function(a){u.io_loading=!1,h.alert(a)})}))},u.setRobotWD=function(a){var b=a.wd>0?0:1;h.confirm(b>0?"ui.dashboard.confirmMoniterRobotOn":"ui.dashboard.confirmMoniterRobotOff").then(function(){e.rest("SetRobotWD",[a.id,b]).then(function(c){c?(a.wd=b,u.robotwd=b,h.alert("ui.dialog.alertSuccess")):h.alert("ui.dialog.alertFailure")},function(a){h.alert(a),console.log(a)})})},u.stopRobot=function(a){var b="ui.dashboard.alert.stopRobot";2===a.status&&(b="ui.dashboard.alert.killRobot"),h.confirm(b).then(function(){e.rest("StopRobot",a.id).then(function(b){b?(a.status=b,a.wd=0,u.robotstatus=b,u.robotwd=0):h.alert("ui.dashboard.alert.stopError")},function(a){h.alert(a)})})},u.restartRobot=function(a){if(!u.canChangePlatform)return void h.alert("ui.robot.alertFromAPI");h.confirm("ui.dashboard.confirmReboot").then(function(){u.node_selected&&1==u.node_selected.public&&!e.g.cached?g.submit(function(b){t(a)}):t(a)})}}}}]),angular.module("botvsApp").filter("text",["$sce",function(a){return function(b){if("string"!=typeof b){if("number"==typeof b)return b;if(void 0===b||null===b)return"null";b=JSON.stringify(b)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=b.replace(/[&<>"']/g,function(a){return c[a]});return d=d.replace(/`[^`]+`/g,function(a){return 1==a.indexOf("data:image/")&&(a='<img src="'+a.substring(1,a.length-1)+'">'),a}),a.trustAsHtml(d)}}]),angular.module("botvsApp").filter("markdown",["$sce","$timeout",function(a,b){function c(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}function d(a,b,c){var d=a.attrIndex(b),e=[b,c];d<0?a.attrPush(e):a.attrs[d]=e}function e(a,b){for(var c=a[b].level-1,d=b-1;d>=0;d--)if(a[d].level===c)return d;return-1}function f(a,b){return k(a[b])&&l(a[b-1])&&m(a[b-2])&&o(a[b])}function g(a,b){a.children.unshift(h(a,b)),a.children[1].content=a.children[1].content.slice(3),a.content=a.content.slice(3),r&&(a.children.unshift(i(b)),a.children.push(j(b)))}function h(a,b){var c=new b("html_inline","",0),d=q?' disabled="" ':"";return 0===a.content.indexOf("[ ] ")?c.content='<input class="task-list-item-checkbox"'+d+'type="checkbox">':0!==a.content.indexOf("[x] ")&&0!==a.content.indexOf("[X] ")||(c.content='<input class="task-list-item-checkbox" checked=""'+d+'type="checkbox">'),c}function i(a){var b=new a("html_inline","",0);return b.content="<label>",b}function j(a){var b=new a("html_inline","",0);return b.content="</label>",b}function k(a){return"inline"===a.type}function l(a){return"paragraph_open"===a.type}function m(a){return"list_item_open"===a.type}function n(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function o(a){return 0===a.content.indexOf("[ ] ")||0===a.content.indexOf("[x] ")||0===a.content.indexOf("[X] ")}var p=window.markdownit({html:!1,linkify:!0,breaks:!0,highlight:function(a,b){if(void 0===b&&(b=""),"flow"===b)return'<div class="code-flow">'+a+"</div>";if("javascript"===b||"python"===b||"text"!==b&&"plain"!==b){""===b?b="javascript":"c++"!=b&&"cpp"!=b&&"c"!=b||(b="text/x-c++src");var d=[];return CodeMirror.runMode(a,b,function(a,b){"\n"==a?d.push(a):b?d.push('<span class="cm-'+c(b)+'">'+c(a)+"</span>"):d.push(c(a))}),d.join("")}return a}});p.use(window.markdownitEmoji),p.use(window.multimd_table_plugin,{enableMultilineRows:!0}),p.renderer.rules.link_open=function(a,b,d,e){var f=a[b];if("a"==f.tag)return'<a target="_blank" href="'+c(f.attrs[0][1])+'">';if("img"==f.tag)return'<img src="'+c(f.meta.url)+'">';if("audio"==f.tag)return'<audio controls preload="none" src="'+c(f.meta.url)+'"></audio>';if("video"==f.tag)return'<video controls preload="none" src="'+c(f.meta.url)+'"></video>';if("attachment"==f.tag){var g=f.meta.url.split("/");return'<a target="_blank" class="label label-default outline" href="'+c(f.meta.url)+'">'+c(g[g.length-1])+"</a>"}};var q=!0,r=!1;return p.core.ruler.after("inline","github-task-lists",function(a){for(var b=a.tokens,c=2;c<b.length;c++)f(b,c)&&(g(b[c],a.Token),d(b[c-2],"class","task-list-item"+(q?"":" enabled")),d(b[c-2],"style","list-style:none"),d(b[e(b,c-2)],"class","contains-task-list"))}),p.core.ruler.push("html5media",function(a){return a.tokens.forEach(function(a){if(a.children&&a.children.length&&"inline"===a.type)for(var b=0;b<a.children.length;b++)if("link_open"==a.children[b].type){var c=!1;if(void 0!==a.children[b].attrs)for(var d=0;d<a.children[b].attrs.length;d++)if(!(a.children[b].attrs[d].length<2)&&"href"==a.children[b].attrs[d][0]){var e=a.children[b].attrs[d][1];if(0!=e.toLowerCase().indexOf("http")){a.children[b].attrs[d][1]="";continue}var f=e.split("."),g=f[f.length-1].toLowerCase();n(g,["jpg","png","bmp","jpeg","gif","svg"])?(a.children[b].tag="img",c=!0):n(g,["mp3","ogg"])?(a.children[b].tag="audio",c=!0):n(g,["mp4","mpg"])?(a.children[b].tag="video",c=!0):n(g,["zip","rar","7z","pdf","gz","tar","txt","json"])&&(a.children[b].tag="attachment",c=!0),c&&(a.children[b].meta={url:e,suffix:g})}if(!c)continue;for(b++;b<a.children.length;b++)if("text"==a.children[b].type&&(a.children[b].hidden=!0,a.children[b].content=""),"link_close"==a.children[b].type){a.children[b].hidden=!0;break}}}),!1}),p.showhead=!1,p.tocAst=function(){var a={};return a.reset=function(){a.id=0,a.root={id:a.id,p:null,d:0,label:"",nodes:[]},a.current=a.root},a.push=function(b,d){a.id++;var e={id:a.id,p:null,d:d,text:c(b),nodes:[]};if(d<a.current.d){for(;d<a.current.d&&a.current.p;)a.current=a.current.p;e.p=a.current.p}else d==a.current.d?e.p=a.current.p:d>a.current.d&&(e.p=a.current);return e.p?e.p.nodes.push(e):a.root.nodes.push(e),a.current=e,e.id},a.dump=function(b,c,d){var e="",f=void 0===b||!b;if(f){b=a.root.nodes;e+='<div class="panel panel-default"><div class="panel-heading"><a id="tocEleRoot" href="#"><span id="'+c+'-head" class="fa fa-chevron-down" style="margin-right:8px"></span><b>目录</b></a></div><div id="'+c+'-data" style="max-width:300px; max-height:'+Math.min(500,parseInt(.7*$(window).height()))+'px; overflow-x: hidden; overflow-y:auto;" class="panel-body">'}e+="<ul>";for(var g=[],h=0;h<b.length;h++){var i={id:b[h].id,selectable:!0,text:b[h].text};if(e+="<li>",e+=void 0!==d&&d?'<a href="javascript:void(0)">'+i.text+"</a>":"<a href=\"javascript:gotoElement('toc-node-"+b[h].id+"')\">"+i.text+"</a>",b[h].nodes.length>0){var j=a.dump(b[h].nodes,c,d);i.nodes=j.data,e+=j.html}e+="</li>",g.push(i)}return e+="</ul>",f&&(e+="</div></div>"),{data:g,html:e}},a.reset(),a}(),p.hCounter=0,p.renderer.rules.heading_open=function(a,b,c,d,e){var f=p.renderer.renderToken(a,b,c,d,e),g=a[b+1].children;if(p.showhead&&g&&g.length){for(var h="",i=0;i<g.length;i++)"text"==g[i].type&&(h+=g[i].content);f="<div id='toc-node-"+p.tocAst.push(h,parseInt(a[b].tag.slice(1)))+"'></div>"+f}else f="<div id='toc-node-"+p.hCounter+++"'></div>"+f;return f},function(c,d){if(!c)return c;if("string"==typeof c){var e=location.protocol+"//"+location.host+"/upload/asset/";c=c.split("https://dn-filebox.qbox.me/").join("/upload/asset/"),c=c.split(e).join("/upload/asset/").split("/upload/asset/").join(e)}var f="",g=void 0!==d&&"string"==typeof d.toc;if(g){var h=c.indexOf("[TOC]");if(0==h){for(var i="[TOC]".length;i<c.length&&("\r"==c[i]||"\n"==c[i]||" "==c[i]);i++)h++;p.showhead=!0,c=c.slice(h+"[TOC]".length)}}p.showhead&&p.tocAst.reset();try{var f='<div class="markdown-body cm-s-default">'+p.render(c)+"</div>"}catch(a){}if(g){var j=d.toc;p.showhead?($("#"+j).html(p.tocAst.dump(null,j,d.preview).html),$("#tocEleRoot").click(function(){$("#"+j+"-data").toggle()})):$("#"+j).html("")}var k=location.href.split("#");if(2==k.length&&k[1].length>0){var l=decodeURIComponent(k[1]);b(function(){for(var a=$("div[id*='toc-node']"),b=0;b<a.length;b++)if(-1!=$(a[b]).next().text().indexOf(l)){gotoElement(a[b].id,!0);break}},500)}return p.showhead=!1,void 0!==d&&d.raw?f:a.trustAsHtml(f)}}]),angular.module("botvsApp").filter("eid2png",function(){return function(a){var b={"-1":"default.png",0:"huobi.png",1:"okcoin.png",2:"btcc.png",3:"yunbi.png",4:"chbtc.png",5:"btctrade.png",6:"btc100.png",7:"binance.png",8:"796.png",9:"haobtc.png",10:"bter.png",11:"huobi.png",12:"okex.png",13:"protocol.png",14:"viabtc.png",15:"jubi.png",16:"botvs.png",17:"btc38.png",20:"btc-e.png",21:"bitstamp.png",22:"bitfinex.png",23:"okcoin.png",24:"bithumb.png",25:"korbit.png",26:"default.png",27:"poloniex.png",28:"kraken.png",30:"ztrade.png",31:"quoine.png",32:"coincheck.png",33:"zaif.png",34:"bitmex.png",35:"okex.png",36:"bittrex.png",100:"futures.png",101:"hbstock.png"}[a.toString()];return"string"!=typeof b?"":"icon/"+b}}),angular.module("botvsApp").filter("eid2str",function(){return function(a){var b={"-1":"",0:"ui.exchange.huobi",1:"OKCoin",2:"BTCC",3:"ui.exchange.yunbi",4:"ui.exchange.chbtc",5:"ui.exchange.btctrade",6:"BTC100",7:"Binance",8:"ui.exchange.796",9:"HaoBTC",10:"ui.exchange.bter",11:"ui.exchange.futures.bitvc",12:"ui.exchange.futures.okcoin",13:"ui.exchange.protocol",14:"ViaBTC",15:"Jubi",16:"BotVS",17:"ui.exchange.btc38",20:"BTC-E",21:"Bitstamp",22:"Bitfinex",23:"ui.exchange.okcoinEN",24:"Bithumb",25:"Korbit",26:"CoinPlus",27:"Poloniex",28:"Kraken",30:"ZTrade",31:"Quoine",32:"Coincheck",33:"Zaif",34:"BitMEX",35:"ui.exchange.okex",36:"Bittrex",100:"CTP",101:"LTS"}[a.toString()];return"string"!=typeof b?a:b}}),angular.module("botvsApp").filter("eid2url",function(){return function(a){var b={"-1":"",0:"http://www.huobi.com/",1:"http://www.okcoin.cn/",2:"http://www.btcchina.com/",3:"http://yunbi.com/",4:"http://www.chbtc.com/",5:"http://www.btctrade.com/",6:"http://www.btc100.org/",7:"https://www.binance.com/",8:"http://www.796.com/",9:"http://haobtc.com/",10:"http://www.bter.com/",11:"http://www.bitvc.com/",12:"http://www.okex.com/",13:"http://www.botvs.com/",14:"http://www.viabtc.com/",15:"https://www.jubi.com/",16:"https://www.botvs.com/",17:"https://www.btc38.com/",20:"http://btc-e.com",21:"http://www.bitstamp.net/",22:"http://www.bitfinex.com/",23:"http://www.okcoin.com/",24:"https://www.bithumb.com/",25:"http://www.korbit.co.kr/",26:"http://www.coinplus.kr/",27:"http://www.poloniex.com/",28:"https://www.kraken.com/",30:"http://www.z-trade.com/",31:"https://quoinex.com/",32:"https://coincheck.com/",33:"https://zaif.jp/",34:"https://www.bitmex.com/",35:"https://www.okex.com/",36:"https://www.bittrex.com/",100:"http://www.sfit.com.cn/",101:"http://www.cnhbstock.com/"}[a.toString()];return"string"!=typeof b?"":b}}),angular.module("botvsApp").filter("trans",["$translate",function(a){var b=function(a,b){var c=a.split("|");if(2!=c.length&&(c=a.split("||"),2!=c.length))return a;var d=/[\u4E00-\u9FA5]/gi;return d.exec(c[1])&&!d.exec(c[0])?"en_US"==b?c[0]:c[1]:"zh_CN"==b?c[0]:c[1]};return function(c,d){if("string"!=typeof c)return c;var e=a.use();if("boolean"==typeof d&&d){for(var f=c,g="";;){var h=f.indexOf("[trans]");if(-1!=h){var i=f.indexOf("[/trans]",h);if(-1!=i){g+=f.substring(0,h)+b(f.substring(h+"[trans]".length,i),e),f=f.substring(i+"[/trans]".length);continue}}g+=f;break}return g}return b(c,e)}}]).directive("trans",["$filter",function(a){return{restrict:"A",template:function(b,c){return a("trans")(c.trans)}}}]),angular.module("botvsApp").filter("ago",function(){return function(a){return moment(a).fromNow()}}),angular.module("botvsApp").controller("CompetitionCtrl",["$scope","session","dialog",function(a,b,c){function d(){for(var b=0;h<a.items.length&&b<16;h++)a.items[h].hide=!1,b++}function e(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];var d=b/a.length,e=0;for(c=0;c<a.length;c++)e+=Math.pow(a[c]-d,2);var f=Math.sqrt(e/a.length);return 0===f?0:(d-.05/365/24)/f}a.plotOptions={shadowSize:2,grid:{hoverable:!0,show:!1},xaxes:[{mode:"time",ticks:!1,timezone:"browser"}],yaxes:[{},{}]};var f=$("#tooltip");0==f.length&&(f=$("<div id='tooltip'></div>").css({position:"absolute",display:"none",border:"1px solid #fdd",padding:"2px","background-color":"#fee",opacity:.8}).appendTo("body")),a.onChartHover=function(a,b,c){c?f.html(moment(c.datapoint[0]).format("YYYY-MM-DD HH:mm:ss")+(1==c.seriesIndex?" 利润: ":" 交易量: ")+c.datapoint[1].toFixed(2)).css({top:c.pageY-32,left:c.pageX+6}).show():f.hide()},a.zoom=function(a){a.zoom?(a.cls="col-md-4 col-sm-6 col-xs-12 .col-lg-3",a.zoom=!1,a.height="80px"):(a.cls="col-md-12",a.height="280px",a.zoom=!0)},a.allProfit=0,a.order="-profit",a.update="",a.ts="",a.items=[],a.items_idle=[],a.pending=!1;var g=new Date;a.endDate="",a.currentEpoch=12*(g.getFullYear()-2016)+g.getMonth()+1,a.epoch=a.currentEpoch,a.range=_.range;var h=0;a.sort=function(b,c){a.order=void 0===c||c?"Mdd"==b?a.order!=b||a.order=="-"+b?b:"-"+b:a.order==b||a.order!="-"+b?"-"+b:b:b,a.items.sort(function(c,d){return"-"==a.order[0]?("-"==b[0]&&(b=b.substring(1)),c[b]>d[b]?-1:c[b]<d[b]?1:0):c[b]>d[b]?1:c[b]<d[b]?-1:0});for(var e=0;e<a.items.length;e++)a.items[e].hide=!0;h=0,d()},$(window).on("scroll",function(b){$(document).scrollTop()+$(window).height()>=$(document).height()-50-$("#competition_comment").height()&&a.$apply(d)}),a.$on("$destroy",function(){$(window).unbind("scroll")}),a.refresh=function(d){if(void 0===d&&(d=a.currentEpoch),a.epoch=d,!a.pending){var f=moment().subtract(a.currentEpoch-d,"months"),g=moment(new Date(f.year(),f.month()+1,0));a.endDate=g.format("YYYY-MM-DD"),a.pending=!0,b.rest("GetCompetitionList",[f.format("YYYY-MM-01 00:00:00"),g.format("YYYY-MM-DD 22:00:00")]).then(function(c){a.ts="",a.update="",a.items=[],a.items_idle=[];for(var d=void 0===window.show?1:0;d<c.items.length;d++){c.items[d][1].sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0});for(var f=[],g=[],h=0,i=0,j=0,k=0,l=c.items[d][1].length,m=0,n=0;n<l;n++){var o=c.items[d][1][n];0==n?(""==a.ts||a.ts>o[0])&&(a.ts=o[0]):n==l-1&&(h=o[1],i=o[2],j=o[3],k=o[4],(""==a.update||a.update<o[0])&&(a.update=o[0])),g.push([new Date(o[0].replace(/-/g,"/")).getTime(),o[2]+o[3]-m]),f.push([new Date(o[0].replace(/-/g,"/")).getTime(),o[1]-0]),m=o[2]+o[3]}var p=[],q=0,r=1e4;"Zero"==c.items[d][0]&&(r=1e9);var s=r;if(f.length>1){s=r+f[0][1];var t=s;for(n=1;n<f.length;n++)q=Math.max(q,1-(f[n][1]+r)/t),t=Math.max(t,r+f[n][1]),p.push((f[n][1]-f[n-1][1])/s)}var o={cls:"col-md-4 col-sm-6 col-xs-12 .col-lg-3",height:"80px",zoom:!1,focus:!1,sharpeRatio:e(p),username:c.items[d][0],profit:h-0,data:[{data:g,color:"#afd8f8",bars:{show:!0},yaxis:2},{data:f}],TMaker:i-0,TTaker:j-0,Txn:k-0,Tx:parseInt(1e3*(i-0+j-0))/1e3,Mdd:q,hide:!0,refBalance:s,profitRatio:(h-0)/s};o.Tx>0?a.items.push(o):a.items_idle.push(o)}a.allProfit=0,a.sort("-profit",!1);for(var u=Math.min(10,a.items.length),d=0;d<u;d++)a.allProfit+=a.items[d].profit;a.sort(a.order,!1),a.pending=!1,b.g.competition=_.pick(a,"epoch","currentEpoch","pending","ts","endDate","update","allProfit","items","items_idle")},function(b){a.pending=!1,c.alert(b)})}},void 0!==b.g.competition&&(_.now()-new Date(b.g.competition.update.replace(/-/g,"/")).getTime())/6e4<60?(_.extend(a,b.g.competition),a.sort(a.order,!1)):a.refresh()}]),angular.module("botvsApp").controller("MStatsCtrl",["$scope","$timeout","session","dialog",function(a,b,c,d){function e(e){var f=e&j||e&k||e&l||e&m;f&&(a.pending=!0),c.rest("GetStats",[e,a.gaDays.days]).then(function(c){function d(a){return moment(parseInt(a)).format("YYYY-MM-DD HH:mm:ss")}if(f&&(a.pending=!1),a.s={},void 0!==c.Stats){var e=new Date-new Date(c.Stats.Started/1e6);if((e/=1e3)>3600){var i=e,j=Math.floor(i/3600),k=Math.floor((i-3600*j)/60),l=Math.floor(i-3600*j-60*k);j<10&&(j="0"+j),k<10&&(k="0"+k),l<10&&(l="0"+l),e=j+":"+k+":"+l}else e+=" s";c.Stats.StartedStr=d(c.Stats.Started/1e6),c.Stats.NowStr=d(c.Stats.Now/1e6),a.s=c.Stats,a.uptime=e;var m=[];_.each(c.Stats.Mem.PauseNs,function(a,b){m.push([b,a/1e6])}),null==g?b(function(){g=new Highcharts.Chart({title:{text:null},credits:{enabled:!1},chart:{borderWidth:0,backgroundColor:null,renderTo:"gcChart",type:"area"},plotOptions:{column:{pointPadding:.2,borderWidth:0}},exporting:{enabled:!1},xAxis:{endOnTick:!1,startOnTick:!1,tickPositions:[],labels:{enabled:!1},title:{text:null}},yAxis:{gridLineWidth:0,title:{text:"PauseNs (ms)"}},legend:{enabled:!1},series:[{name:"PauseNs (ms)",data:[]}]},function(a){a.series[0].setData(m)})},0):g.series[0].setData(m)}if(void 0!==c.Analytics){var n={};_.each(c.Analytics,function(a){var b=1e3*moment(a.date,"YYYYMMDD").unix();for(var c in a)"date"!=c&&(void 0===n[c]&&(n[c]=[]),n[c].push({x:b,y:a[c]}))});var o=[];for(var p in n)o.push({name:p.toUpperCase(),type:"line",data:n[p]});null==h?b(function(){h=new Highcharts.stockChart({title:{text:null},credits:{enabled:!1},rangeSelector:{inputEnabled:!1},chart:{borderWidth:0,backgroundColor:null,renderTo:"gaChart",type:"line"},legend:{enabled:!0},series:o},function(a){})},0):_.each(o,function(a,b){h.series[b].setData(a.data)})}if(void 0!==c.Docker){c.Docker.sort(function(a,b){return a[3]-b[3]});for(var q=[],r=[],s=0;s<c.Docker.length;s++)if(c.Docker[s][0]=d(c.Docker[s][0]/1e6),c.Docker[s][12]>0){c.Docker[s][12]=d(c.Docker[s][12]/1e6);var t=c.Docker[s][4];t>0&&void 0!==q[t]?r.push(t):q[t]=!0}a.repeatNid=r.join(","),a.Docker=c.Docker}if(void 0!==c.Cluster){c.Cluster.sort(function(a,b){return a[3]-b[3]});for(var r=[],s=0;s<c.Cluster.length;s++)c.Cluster[s].priority=c.Cluster[s][15],c.Cluster[s][0]=d(c.Cluster[s][0]/1e6),c.Cluster[s][12]>0&&(c.Cluster[s][12]=d(c.Cluster[s][12]/1e6));a.Cluster=c.Cluster}if(void 0!==c.Websocket){c.Websocket.sort(function(a,b){return a[2]-b[2]});for(var s=0;s<c.Websocket.length;s++)c.Websocket[s][0]=d(c.Websocket[s][0]/1e6);a.Websocket=c.Websocket}},function(b){(e&j||e&k)&&(a.pending=!1),d.alert(b)})}function f(){o&&(e(null===n?i|j|k|l|m:i),n=b(f,1e4))}a.pending=!1,a.Docker=[],a.Websocket=[],a.Cluster=[],a.repeatNid="";var g=null,h=null;a.ranges=[{name:"30天",days:30},{name:"60天",days:60},{name:"90天",days:90},{name:"180天",days:180},{name:"365天",days:365}],a.gaDays=a.ranges[0];var i=1,j=2,k=4,l=8,m=16;a.changeGADays=function(){e(m)},a.reload=function(a){e(a)},a.savePriority=function(a){c.rest("SetClusterPriority",[a[13],a.priority]).then(function(b){b?(a[15]=a.priority,
d.notify("修改优先级成功")):(a.priority=a[15],d.notify("修改优先级失败"))},function(a){d.error(a)})};var n=null,o=!0;a.$on("$destroy",function(){o=!1,null!=n&&(b.cancel(n),n=null)}),f()}]),angular.module("botvsApp").filter("precision",function(){return function(a,b){return void 0===a?a:("string"==typeof a&&(a=Number(a)),void 0===b&&(b=4),0==b?parseInt(a):parseFloat(a.toFixed(b)))}}),angular.module("botvsApp").filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";if(a<=0)return a;void 0===b&&(b=2);var c=["bytes","KB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}}),angular.module("botvsApp").controller("LiveCtrl",["$scope","$filter","$routeParams","$location","session","dialog","util",function(a,b,c,d,e,f,g){if(a.isLogin=e.isLogin(),e.g.oem&&!e.isLogin())return void d.path("/login");a.public_robots=[],a.showIndex=0,a.focus=function(b){a.showIndex=b},a.$emit("titleChange","ui.nav.live");var h=b("precision");e.rest("GetPublicRobotList",[-1,-1,-1],!1,!0).then(function(b){if(b){_.each(b.robots,function(b){if(0===b.profit?b.profitStr="":b.profitStr=h(b.profit,4),b.cls=b.is_sandbox?"btn btn-default btn-xs outline":"btn btn-success btn-xs outline",1==b.status){var c=_.findWhere(a.public_robots,{strategy_id:b.strategy_id});void 0===c?a.public_robots.push({showMore:!1,strategy_id:b.strategy_id,name:b.strategy_name,robots:[b]}):c.robots.push(b)}})}else f.alert("Error")},function(a){f.alert(a)})}]),angular.module("botvsApp").directive("summary",["util","dialog",function(a,b){var c={id:0};return{templateUrl:"views/directive-summary.html",restrict:"A",scope:{data:"=summary"},link:function(d,e,f){function g(a,b,c){a.sort(function(a,d){return a[b].body>d[b].body?c?1:-1:a[b].body<d[b].body?c?-1:1:0})}c.id++,d.unique_kv=c,d.summary=[],d.hasTable=!1,d.showFullScreen=-1==location.href.indexOf("/live"),d.isFullScreen=!1,"function"!=typeof d.$parent.testCmdRobot&&"function"!=typeof d.$parent.cmdRobot?d.btnDisabled=!0:d.btnDisabled="function"==typeof d.$parent.cmdRobot&&!d.$parent.isPrivate;var h=-1,i=-1,j=[];d.setTabActive=function(a,b){j[a]=b},d.getTabActive=function(a,b){var c=0===b;return void 0!==j[a]&&(c=j[a]==b),c?"active":"inactive"},d.switchFullScreen=function(){a.toggleFullScreen(document.getElementById("summary-tbl"))},d.setFocus=function(a,b){h=a,i=b},d.sendCommand=function(a){var c=[a,"","",{id:5},"__button__"];if("function"==typeof d.$parent.testCmdRobot)d.$parent.testCmdRobot(c);else if("function"==typeof d.$parent.cmdRobot){if(!d.$parent.isPrivate)return void b.alert("ui.robot.alert.noPermission");if(d.$parent.io_loading)return void b.alert("ui.alert.strategy.busy");d.$parent.cmdRobot(c)}},d.isFocus=function(a,b,c){if(void 0!==d.summary[a]&&void 0!==d.summary[a][b]&&void 0!==d.summary[a][b].rows&&d.summary[a][b].rows.length<2)return!1;var e=h==a&&i==b;return e||(e="fa fa-sort"!==d.getSortStyle(a,b,c)),e};var k=[];d.setSortBy=function(a,b,c){var e=a+"-"+b,f={idx:c,asc:!0};if(void 0!==k[e]){var h=k[e];h.idx===c&&(f.asc=!h.asc)}k[e]=f,g(d.summary[a][b].rows,c,f.asc)},d.getSortStyle=function(a,b,c){var d="fa fa-sort",e=a+"-"+b;if(void 0!==k[e]){var f=k[e];f.idx===c&&(d=f.asc?"fa fa-sort-amount-asc":"fa fa-sort-amount-desc")}return d},void 0!==d.data&&(d.summary=a.parseSummary(d.data)),d.$watch("data",function(b,c){if(b!==c){d.summary=a.parseSummary(b);for(var e=0;e<d.summary.length;e++)if(Array.isArray(d.summary))for(var f=0;f<d.summary[e].length;f++){"string"==typeof d.summary[e][f].title&&(d.hasTable=!0);var h=e+"-"+f;if(void 0!==k[h]){var i=k[h];g(d.summary[e][f].rows,i.idx,i.asc)}}}})}}}]),angular.module("botvsApp").controller("MRentCtrl",["$scope","$location","$translate","$routeParams","session","dialog",function(a,b,c,d,e,f){function g(b){var c=0,d=0;for(c=a.pricing.length-1;c>=0&&b>0;c--){var e=a.pricing[c],f=Math.floor(b/e.period),g=b%e.period;f>0&&(d+=f*e.rent,b-=f*e.period),0==c&&b>0&&(d+=g*e.rent/e.period,b=0)}return Math.ceil(d)}function h(b){e.rest("GetPublicStrategyDetail",i).then(function(c){if(c){"string"==typeof c.strategy.expire_date?c.strategy.expired=1e3*moment(c.strategy.expire_date).unix()<(new Date).getTime():c.strategy.expired=!0,a.pricing=[];for(var d=c.strategy.pricing.split(","),e=0;e<d.length;e++){var g=d[e].split("/");a.pricing.push({period:parseInt(g[1]),rent:parseInt(g[0])}),a.periodMin=Math.min(a.periodMin,parseInt(g[1]))}a.buyPeriod=a.periodMin,a.strategy=c.strategy,a.updateDate(),void 0!==b&&b&&f.notify("支付成功, 额度及支付信息已更新!")}})}if(!e.isLogin())return void e.logout(!0);a.isPrivate=-1!=b.path().indexOf("m/s"),a.regCode="",a.g=e.g;var i=parseInt(d.id);a.isPending=!1,a.payMethod=0,a.buyPeriod=30,a.payRent=0,a.pricing=[],a.notChanged=!1,a.periodMin=30,a.isJumping=!1,a.$emit("titleChange",c.instant("ui.rent.internalRent")),a.buyStrategy=function(){a.isPending=!0,e.rest("VerifyKey",[i,a.regCode]).then(function(c){a.isPending=!1,c?f.alert("ui.rent.buySuccess",void 0,function(){b.path("/m/strategies")}):f.alert("ui.rent.invalidKey")},function(b){a.isPending=!1,f.error(b)})};var j=function(){if(a.buyPeriod<a.periodMin)return void f.alert("租用日期不能小于 "+a.periodMin+" 天 !");a.notChanged=!0,a.isPending=!0;var c=a.payMethod;0!=c&&2!=c||(a.isJumping=!0),e.rest("GetPaymentArg",[c,-i,a.buyPeriod,""]).then(function(d){if(a.isPending=!1,0===c){var g=document.createElement("form");document.body.appendChild(g);for(var h in d.form){var i=document.createElement("input");i.type="hidden",i.name=h,i.value=d.form[h],g.appendChild(i)}g.method="GET",g.action="https://mapi.alipay.com/gateway.do",g.submit(),document.body.removeChild(g),a.isJumping=!0}else 1==c?($("#wxcodeurl").empty(),$("#wxcodeurl").qrcode({width:150,height:150,text:d.code_url})):2==c?(a.isJumping=!0,location.href=d.code_url):3==c&&(d?f.alert("ui.rent.buySuccess",void 0,function(){e.KV_Set("strategy_activeGroup",-1),b.path("/m/strategies")}):f.alert("ui.rent.buyFail"))},function(b){a.isPending=!1,a.isJumping=!1,f.alert(b)})};a.pay=function(){3==a.payMethod?f.confirm("ui.rent.balanceTips").then(function(){j()}):j()},a.updateDate=function(){if(a.buyPeriod){a.notChanged=!1;var b=0;a.strategy.expired||(b=Math.max(0,moment(a.strategy.expire_date).unix()-moment().unix())),a.newExpireDate=moment().add(b,"seconds").add(a.buyPeriod,"days").format("YYYY-MM-DD HH:mm:ss"),a.payRent=g(a.buyPeriod)}},a.$on("onPayment",function(b,c){a.notChanged=!1,h(!0)}),a.isPrivate||h()}]),angular.module("botvsApp").controller("MSalesCtrl",["$scope","session","dialog",function(a,b,c){a.title="出售记录",a.trades=[],a.sortBy="-id",a.setSortBy=function(b){a.sortBy=a.sortBy==b?"-"+b:b},a.getSortStyle=function(b){return-1!==a.sortBy.indexOf(b)?-1===a.sortBy.indexOf("-")?"fa fa-sort-alpha-asc":"fa fa-sort-alpha-desc":"fa fa-sort"},b.rest("GetTradeHistory",[-1,-1,-1]).then(function(b){a.trades=b.items;var c=moment(),d=0;_.each(a.trades,function(a){a.idx=d++,a.expire_date_new=a.expire_date,a.is_expire=moment(a.expire_date).diff(c)<0,a.concurrent_new=a.concurrent})},function(a){console.log(a)}),a.saveTrade=function(a){if(""==a.expire_date_new||"number"!=typeof a.concurrent_new)return void(a.isOpen=!1);a.pending=!0,b.rest("SaveTradeHistory",[a.id,a.expire_date_new,a.concurrent_new]).then(function(b){if(a.pending=!1,a.isOpen=!1,b){var d=moment();a.expire_date=a.expire_date_new,a.concurrent=a.concurrent_new,a.is_expire=moment(a.expire_date).diff(d)<0,c.notify("修改成功 !")}else a.expire_date_new=a.expire_date,a.concurrent_new=a.concurrent,c.alert("修改失败, 请注意时间格式 !")},function(b){a.pending=!1,a.isOpen=!1,console.log(b)})}}]),angular.module("botvsApp").filter("highlight",function(){function a(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}return function(b,c){if("string"!=typeof b||"string"!=typeof c||0===c.length)return b;b=a(b);var d=b.toLowerCase().indexOf(c.toLowerCase());return-1===d?b:b.substring(0,d)+'<font color="red">'+b.substring(d,d+c.length)+"</font>"+b.substring(d+c.length)}}),angular.module("botvsApp").filter("cut",["$filter",function(a){return function(b,c){return"number"!=typeof c&&(c=2048),b=b.toString(),c=Math.min(2048,c),b.length<=c?b:a("limitTo")(b,c)+" ..."}}]),angular.module("botvsApp").filter("tfmt",function(){return function(a,b){return"string"!=typeof b&&(b="YYYY-MM-DD HH:mm:ss"),moment(a).format(b)}}),angular.module("botvsApp").controller("AboutCtrl",["$scope","session",function(a,b){a.content="",b.rest("GetSettings","about").then(function(b){a.content=b})}]),angular.module("botvsApp").directive("footer",["$translate","session","$window",function(a,b,c){return{templateUrl:"views/directive-footer.html",restrict:"C",link:function(d,e,f){d.userAgent=navigator.userAgent+" | "+(navigator.language||navigator.userLanguage),d.footer="",void 0!==window.__oem_custom&&"string"==typeof window.__oem_custom.Footer&&(d.footer=window.__oem_custom.Footer),d.lang=function(){return a.use()},d.isDemo=b.g.oem&&-1!=document.domain.indexOf(".fmz.com"),d.getNetCls=function(){return 0==c.pending?"fa fa-signal":"fa fa-spinner fa-spin"}}}}]),angular.module("botvsApp").controller("AgreementCtrl",["$scope","session",function(a,b){a.content="",b.rest("GetSettings","agreement").then(function(b){a.content=b})}]),angular.module("botvsApp").controller("MShareCtrl",["$scope","$location","$translate","$routeParams","session","dialog",function(a,b,c,d,e,f){if(!e.isLogin())return void e.logout(!0);a.regCode="";var g=parseInt(d.id);a.isPending=!1,a.$emit("titleChange",c.instant("ui.share.internalShare")),a.buyStrategy=function(){a.isPending=!0,e.rest("VerifyKey",[g,a.regCode]).then(function(c){a.isPending=!1,c?f.alert("ui.share.copySuccess",void 0,function(){b.path("/m/strategies")}):f.alert("ui.share.invalidKey")},function(b){a.isPending=!1,f.error(b)})}}]),angular.module("botvsApp").filter("xss",function(){return function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}}),angular.module("botvsApp").service("component",["$translate","$location","$filter","session","dialog",function(a,b,c,d,e){return{dialogBuyStrategy:function(f){if(!d.isLogin())return void d.logout(!0);if("string"==typeof f.pricing&&-1!==f.pricing.indexOf("/"))return void b.path("/m/rent/"+f.id);var g={title:"ui.dialog.buy.title",inputname:"ui.dialog.buy.key",inputtype:"input",description:a.instant("ui.dialog.buy.description",{strategy:c("trans")(f.name),author:f.username,email:f.email}),confirmname:"ui.dialog.buy.btnConfirm",onConfirm:function(a,b){d.rest("VerifyKey",[f.id,a]).then(function(a){a?b(!0):b(!1,"ui.dialog.buy.errorKey",3e3)},function(a){b(!1,a,3e3)})},onExit:function(){e.alert("ui.dialog.buy.success")}};e.prompt(g)}}}]),angular.module("botvsApp").directive("adminbar",["$location","session","dialog","$sce","$timeout",function(a,b,c,d,e){return{template:'<div ng-if="isAdmin() && !isOEM" style="margin-top:5px;margin-bottom:5px"><span ng-if="type==\'reply\'&&obj.mouseMode"><a href="" style="margin-left:10px;text-decoration:none" ng-click="lockUser(obj)"><span class="glyphicon glyphicon-lock"></span>&nbsp;锁定该用户</a>&nbsp;<a class="btn btn-warning btn-xs" ng-click="muteUser(obj)"><span class="glyphicon glyphicon-lock"></span>&nbsp;禁言该用户</a></span><div ng-if="type!=\'reply\'" class="btn-group" role="group">     <button class="btn btn-danger btn-xs" ng-click="lockUser(obj)"><span class="glyphicon glyphicon-lock"></span>&nbsp;锁定该用户</button>     <button class="btn btn-warning btn-xs" ng-click="muteUser(obj)"><span class="glyphicon glyphicon-lock"></span>&nbsp;禁言该用户</button>     <button ng-if="type==\'strategy\'" class="btn btn-primary btn-xs" ng-click="updateStrategyPriority(obj)"><span class="glyphicon glyphicon-sort-by-order-alt"></span>&nbsp;设置优先级 ({{obj.priority}})</button>     <button ng-if="type==\'strategy\'" class="btn btn-success btn-xs" ng-click="updateTags(obj, \'strategy_tags\')"><span class="glyphicon glyphicon-tags"></span>&nbsp;设置标签 <span ng-if="obj.tags">({{obj.tags}})</span></button>     <button ng-if="type==\'strategy\'&&obj.public!=0" class="btn btn-warning btn-xs" ng-click="unpublicStrategy(obj)"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;{{obj.public==1 ?"取消公开":"取消出售"}}</button>     <button ng-if="type==\'robot\'&&obj.public!=0" class="btn btn-warning btn-xs" ng-click="unpublicRobot(obj)"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;取消围观</button> </div><div ng-if="type==\'topic\'" class="btn-group" role="group" style="margin-left:30px">     <a href="bbs-topic-new/{{obj.id}}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-pencil"></span>&nbsp;{{"ui.bbs.edit"|translate}}</a>     <button ng-if="obj.status==0" class="btn btn-warning btn-xs" ng-click="setItemStatus(obj, 2)"><span class="glyphicon glyphicon-trash"></span>&nbsp;删除该主题</button>     <button ng-if="obj.status!=0" class="btn btn-success btn-xs" ng-click="setItemStatus(obj, 0)"><span class="glyphicon glyphicon-repeat"></span>&nbsp;恢复该主题</button>     <button ng-if="obj.top!=1" class="btn btn-default btn-xs" ng-click="setItemTop(obj, 1)"><span class="glyphicon glyphicon-pushpin"></span>&nbsp;节点置顶</button>     <button ng-if="obj.top!=2" class="btn btn-default btn-xs" ng-click="setItemTop(obj, 2)"><span class="glyphicon glyphicon-pushpin"></span>&nbsp;全局置顶</button>     <button ng-if="obj.top!=0" class="btn btn-default btn-xs" ng-click="setItemTop(obj, 0)"><span class="glyphicon glyphicon-trash"></span>&nbsp;取消置顶</button>     <button class="btn btn-success btn-xs" ng-click="updateTags(obj, \'bbs_tags\')"><span class="glyphicon glyphicon-tags"></span>&nbsp;设置标签 <span ng-if="obj.tags">({{obj.tags}})</span></button></div><div ng-if="type==\'market\'" class="btn-group" role="group" style="margin-left:30px">     <a href="market-{{obj.side==0?\'demand\':\'offer\'}}-new/{{obj.id}}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-pencil"></span>&nbsp;{{"ui.bbs.edit"|translate}}</a>     <button ng-if="obj.status!=0" class="btn btn-success btn-xs" ng-click="setItemStatus(obj, 0)"><span class="glyphicon glyphicon-eye-open"></span>&nbsp;设置为开放</button>     <button ng-if="obj.status!=1" class="btn btn-warning btn-xs" ng-click="setItemStatus(obj, 1)"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;设置为关闭</button>     <button ng-if="obj.status!=2" class="btn btn-danger btn-xs" ng-click="setItemStatus(obj,2)"><span class="glyphicon glyphicon-trash"></span>&nbsp;设置为删除</button>     <button ng-if="obj.top!=1" class="btn btn-default btn-xs" ng-click="setItemTop(obj, 1)"><span class="glyphicon glyphicon-pushpin"></span>&nbsp;设置置顶</button>     <button ng-if="obj.top!=0" class="btn btn-default btn-xs" ng-click="setItemTop(obj, 0)"><span class="glyphicon glyphicon-trash"></span>&nbsp;取消置顶</button></div><div ng-if="type!=\'reply\'" class="pull-right"><button class="btn btn-warning btn-xs" ng-click="pushurl()"><span class="glyphicon glyphicon-open"></span>&nbsp;推送到百度</button></div> </div>',restrict:"AE",scope:{obj:"=ref",type:"=type"},link:function(a,d,e){a.isAdmin=b.isAdmin,a.isOEM=b.g.oem,a.muteUser=function(d){c.confirm("禁言后, "+(("topic"==a.type?d.author:d.username)||"该用户")+" 所有公开信息将不可见, 确定要这样做吗 ?").then(function(){b.rest("M_Action",["user_by_"+a.type,d.id,2]).then(function(a){c.alert("操作成功")})})},a.pushurl=function(){c.prompt({title:"Push To Baidu",inputname:"URL",inputtype:"string",defaultValue:location.href,confirmname:"Push",onConfirm:function(a,d){b.rest("M_PushURL",[a]).then(function(b){d(!0),c.alert(a+"<br>Result: "+b)},function(a){d(!0),c.alert(a)})}})},a.lockUser=function(d){c.confirm("锁定后, "+(("topic"==a.type?d.author:d.username)||"该用户")+" 将不可登录, 确定要这样做吗 ?").then(function(){b.rest("M_Action",["user_by_"+a.type,d.id,1]).then(function(a){c.alert("操作成功")})})},a.updateStrategyPriority=function(d){c.prompt({title:"优先级",inputname:"优先级",inputtype:"number",showConcurrent:!1,description:"输入优先级, 从高到低排序",confirmname:"确定",onConfirm:function(e,f){e=parseInt(e),isNaN(e)||b.rest("M_Action",["strategy_priority",d.id,e]).then(function(b){a.obj.priority=b,c.alert("操作成功")}),f(!0)}})},a.updateTags=function(a,d){c.prompt({title:"标签",inputname:"标签",inputtype:"text",defaultValue:a.tags,showConcurrent:!1,description:"用逗号或者空格隔开",confirmname:"确定",onConfirm:function(e,f){b.rest("M_Action",[d,a.id,e]).then(function(b){a.tags=b,c.alert("操作成功")}),f(!0)}})},a.unpublicStrategy=function(d){c.confirm("确定将此策略设置为未公开吗 ?").then(function(){b.rest("M_Action",["strategy_status",d.id,0]).then(function(b){a.obj.public=b,c.alert("操作成功")})})},a.unpublicRobot=function(d,e){c.confirm("确定将此机器人设置为未公开吗 ?").then(function(){b.rest("M_Action",["robot_status",d.id,0]).then(function(b){a.obj.public=b,c.alert("操作成功")})})},a.setItemStatus=function(d,e){c.confirm("确定要这样做吗 ?").then(function(){b.rest("M_Action",[a.type+"_status",d.id,e]).then(function(b){a.obj.status=b,c.alert("操作成功")})})},a.setItemTop=function(d,e){b.rest("M_Action",[a.type+"_top",d.id,e]).then(function(b){a.obj.top=b,c.alert("操作成功")})}}}}]),angular.module("botvsApp").controller("MRouteCtrl",["$scope","$timeout","dialog","util","$translate","session",function(a,b,c,d,e,f){function g(b){if(_.each(b,function(a,c){b[c]={id:c++,log_type:a.LogType,eid:a.PlatformId,order_id:a.OrderId,price:parseFloat(a.Price.toFixed(12)),amount:parseFloat(a.Amount.toFixed(6)),extra:a.Extra,date:moment(a.Time).format("YYYY-MM-DD HH:mm:ss"),contractType:a.Instrument,direction:a.Direction}}),void 0!==b&&void 0!==b.length){for(var c=0;c<b.length;c++){b[c].show_price=0==b[c].log_type||1==b[c].log_type||4==b[c].log_type,b[c].priceStr=b[c].log_type<2||4==b[c].log_type?4!=b[c].log_type&&-1==b[c].price?"市价单":b[c].price:"",b[c].amountStr=b[c].log_type<2?b[c].amount:"";var e=d.getStrStyle(b[c].extra);switch(b[c].extra=e.body,b[c].style=e.style,b[c].icon=e.icon,b[c].logTypeStr=a.logTypes[b[c].log_type],b[c].direction){case"buy":b[c].directionStr="ui.log.type.buyLong",b[c].directionStyle="label label-success";break;case"closebuy":case"closebuy_today":b[c].directionStr="ui.log.type.sellClose",b[c].directionStyle="label label-default";break;case"sell":b[c].directionStr="ui.log.type.sellShort",b[c].directionStyle="label label-danger";break;case"closesell":case"closesell_today":b[c].directionStr="ui.log.type.buyCover",b[c].directionStyle="label label-default"}b[c].labelStyle="label "+["label-primary","label-success","label-default","label-default","label-danger","label-info","label-warning"][b[c].log_type]}return b.reverse()}}a.nodes=[],a.platforms=[],a.option={},a.option.node_selected_id="-1",a.logs=[],a.result="",a.pending=!1,a.runCount=0;var h=null;a.logTypes=d.getLogTypes(),a.hasPrivate=function(){for(var b=0;b<a.nodes.length;b++)if((0==a.nodes[b].public||a.nodes[b].is_owner)&&-1!=a.nodes[b].id)return!0;return!1},a.runPlugin=function(){var b=a.option;if("object"!=typeof b.platform)return void c.alert("请选择要执行插件的交易所");var d={};d.period=60,d.source=h.getValue(),d.node=parseInt(b.node_selected_id),d.exchanges=[{pid:b.platform.id,pair:b.stock}],a.pending=!0,f.rest("PluginRun",angular.toJson(d)).then(function(b){a.pending=!1,a.result=angular.fromJson(b),a.result.logs=g(a.result.logs),a.result.result.length>0?a.result.result=angular.fromJson(a.result.result):a.result.result="无返回值",void 0!==b.error&&c.alert(b.error),a.runCount++},function(b){a.pending=!1,a.runCount++,c.alert(b)})},f.rest(["GetPlatformList","GetNodeList"],[[],[]]).then(function(d){if(d){a.platforms=d[0].result.platforms,a.platforms.length>0&&(a.option.platform=a.platforms[0],a.option.stock=a.platforms[0].stocks[0]),a.nodes=[];var f=!1;_.each(d[1].result.nodes,function(b){-1!=b.version.indexOf("plugin")&&(1!=b.public||b.is_owner?(b.desc=b.id+" : "+b.ip+" - "+b.os+(b.name?" ("+b.name+")":""),f=!0,a.nodes.push(b)):b.desc=b.city+" : "+b.ip+" - "+b.os+" ("+e.instant("ui.const.publicUse")+")")}),a.nodes.length>0&&(a.option.node_selected_id=a.nodes[0].id.toString()),0==a.nodes.length&&c.alert("此功能需要最新托管者支持, 您更新或布署自己的私有托管者 !"),b(function(){h=CodeMirror(document.getElementById("plugin-area"),{lineNumbers:!0,theme:"eclipse",value:"function main() {\n    Log(exchange.GetName(), exchange.GetCurrency(), exchange.GetUSDCNY());\n    return exchange.GetTicker();\n}",insertSoftTab:!0,indentUnit:4,styleActiveLine:!0,gutters:["CodeMirror-lint-markers"],lint:{"-W041":!1,latedef:!0,lastsemic:!0,loopfunc:!0,asi:!0},showHint:!0,matchBrackets:!0,mode:"javascript"}),h.setSize(null,300)})}})}]),angular.module("botvsApp").controller("MDebugCtrl",["$scope","$timeout","dialog","util","$translate","session",function(a,b,c,d,e,f){function g(b){if(_.each(b,function(a,c){b[c]={id:c++,log_type:a.LogType,eid:a.PlatformId,order_id:a.OrderId,price:parseFloat(a.Price.toFixed(12)),amount:parseFloat(a.Amount.toFixed(6)),extra:a.Extra,date:moment(a.Time).format("YYYY-MM-DD HH:mm:ss"),contractType:a.Instrument,direction:a.Direction}}),void 0!==b&&void 0!==b.length){for(var c=0;c<b.length;c++){b[c].show_price=0==b[c].log_type||1==b[c].log_type||4==b[c].log_type,b[c].priceStr=b[c].log_type<2||4==b[c].log_type?4!=b[c].log_type&&-1==b[c].price?"å¸‚ä»·å•":b[c].price:"",b[c].amountStr=b[c].log_type<2?b[c].amount:"";var e=d.getStrStyle(b[c].extra);switch(b[c].extra=e.body,b[c].style=e.style,b[c].icon=e.icon,b[c].logTypeStr=a.logTypes[b[c].log_type],b[c].direction){case"buy":b[c].directionStr="ui.log.type.buyLong",b[c].directionStyle="label label-success";break;case"closebuy":case"closebuy_today":b[c].directionStr="ui.log.type.sellClose",b[c].directionStyle="label label-default";break;case"sell":b[c].directionStr="ui.log.type.sellShort",b[c].directionStyle="label label-danger";break;case"closesell":case"closesell_today":b[c].directionStr="ui.log.type.buyCover",b[c].directionStyle="label label-default"}b[c].labelStyle="label "+["label-primary","label-success","label-default","label-default","label-danger","label-info","label-warning"][b[c].log_type]}return b.reverse()}}a.nodes=[],a.platforms=[],a.option={},a.option.node_selected_id="-1",a.logs=[],a.result="",a.pending=!1,a.runCount=0;var h=null;a.logTypes=d.getLogTypes(),a.hasPrivate=function(){for(var b=0;b<a.nodes.length;b++)if((0==a.nodes[b].public||a.nodes[b].is_owner)&&-1!=a.nodes[b].id)return!0;return!1},a.resetDebug=function(){c.confirm("ui.debug.alertRestart").then(function(){a.runPlugin('function main() {__syscall("ExitProcess");}')})},a.runPlugin=function(b){var d=a.option;if(0==a.platforms.length)return void c.alert("ui.alert.noPlatform");if(0==a.nodes.length)return void c.alert("ui.debug.alertDocker");if("object"!=typeof d.platform)return void c.alert("ui.debug.selectPlatform");f.KV_Set("debug_node_idx",d.node_selected_id),f.KV_Set("debug_platform_idx",d.platform.id);var e={};e.period=60,e.source="string"==typeof b?b:h.getValue(),e.node=parseInt(d.node_selected_id),e.exchanges=[{pid:d.platform.id,pair:d.stock}],a.pending=!0,a.result={result:"",logs:[]},f.rest("PluginRun",angular.toJson(e)).then(function(b){return a.runCount++,void 0!==b.error?void c.alert(b.error):(a.pending=!1,a.result=angular.fromJson(b),void 0!==a.result.error?void c.alert(a.result.error):(a.result.logs=g(a.result.logs),void(a.result.result.length>0?a.result.result=angular.fromJson(a.result.result):a.result.result="No result")))},function(b){a.pending=!1,a.runCount++,-1!=e.source.indexOf("ExitProcess")&&b.indexOf("not connected")?c.alert("ui.dialog.alertSuccess"):c.alert(b)})},f.rest(["GetPlatformList","GetNodeList"],[[],[]]).then(function(c){if(c){if(a.platforms=c[0].result.platforms,a.platforms.length>0){a.option.platform=a.platforms[0];var d=f.KV_Get("debug_platform_idx");if(d){var g=_.findWhere(a.platforms,{id:parseInt(d)});g&&(a.option.platform=g)}a.option.stock=a.option.platform.stocks[0]}a.nodes=[];var i=!1;if(_.each(c[1].result.nodes,function(b){void 0!==b.peer&&-1!=b.version.indexOf("plugin")&&(1!=b.public||b.is_owner?(b.desc=b.id+" : "+b.ip+" - "+b.os+(b.name?" ("+b.name+")":""),i=!0,a.nodes.push(b)):b.desc=b.city+" : "+b.ip+" - "+b.os+" ("+e.instant("ui.const.publicUse")+")")}),a.nodes.length>0){a.option.node_selected_id=a.nodes[0].id.toString();var j=_.findWhere(a.nodes,{id:parseInt(f.KV_Get("debug_node_idx",0))});j&&(a.option.node_selected_id=j.id.toString())}b(function(){h=CodeMirror(document.getElementById("plugin-area"),{lineNumbers:!0,theme:"eclipse",value:'function main() {\n    exchange.SetTimeout(2000);\n    Log(exchange.GetCurrency(), "USDCNY:", exchange.GetUSDCNY());\n    return exchange.GetName();\n}',insertSoftTab:!0,indentUnit:4,styleActiveLine:!0,gutters:["CodeMirror-lint-markers"],lint:{"-W041":!1,latedef:!0,lastsemic:!0,loopfunc:!0,asi:!0},showHint:!0,matchBrackets:!0,mode:"javascript"}),h.setSize(null,300),h.focus(),h.refresh()},100)}})}]),angular.module("botvsApp").controller("MTokensCtrl",["$scope","session","dialog",function(a,b,c){a.title="出售记录",a.tokens=[],a.sortBy="-id",a.docker=null,a.setSortBy=function(b){a.sortBy=a.sortBy==b?"-"+b:b},a.getSortStyle=function(b){return-1!==a.sortBy.indexOf(b)?-1===a.sortBy.indexOf("-")?"fa fa-sort-alpha-asc":"fa fa-sort-alpha-desc":"fa fa-sort"},b.rest(["GetTokens","GetSettings"],[[-1,-1,-1],["docker"]]).then(function(b){a.tokens=b[0].result.items,a.docker=angular.fromJson(b[1].result),console.log(a.docker);var c=moment(),d=0;_.each(a.tokens,function(a){a.idx=d++,a.expire_date_new=a.expire_date,a.is_expire=moment(a.expire_date).diff(c)<0,a.concurrent_new=a.concurrent})},function(a){console.log(a)})}]),angular.module("botvsApp").controller("MarketCtrl",["$scope","$translate","$filter","$location","$routeParams","util","dialog","session",function(a,b,c,d,e,f,g,h){a.sides=[{side:0,number:0},{side:1,number:0}],a.items=[],a.isLogin=h.isLogin(),a.publish_number=0,a.session_number=0,a.total_hits=0,a.total_number=0,a.isPending=!1,a.viewStatus=0;var i=function(c,d){a.isPending=!0,h.rest("GetMarketList",[-1,-1,d,-1,-1,""]).then(function(c){if(a.isPending=!1,c){a.total_number=c.items.length,a.total_hits=c.total_hits;var d=[],e=0,f=0;"number"==typeof c.session_number&&(a.publish_number=c.publish_number,a.session_number=c.session_number),c.items.map(function(a){a.letter=a.title[0].toUpperCase();for(var c=0;c<a.title.length;c++){var g=a.title[c];if(" "!==g&&"'"!=g&&'"'!=g&&"‘"!=g&&"“"!=g&&"["!==g&&"【"!==g&&"▉"!=g){a.letter=g.toUpperCase();break}}a.timeAgo=moment(void 0!==a.updated?a.updated:a.created).fromNow(),d.push(a),0==a.side?e+=1:f+=1,a.rate_avg>0&&(a.rateTips=b.instant("ui.market.tipsTotalRate",{rate_count:a.rate_count,rate_avg:a.rate_avg.toFixed(2)}))}),a.items=d,a.sides[0].number=e,a.sides[1].number=f}else g.alert("Error")},function(b){a.isPending=!1,g.alert(b)})},j=b.use();a.lang=b.use,a.$watch("lang()",function(b,c){b!=j&&(j=b,i(0,a.viewStatus))}),a.refresh=function(c){a.viewStatus=c,i(b.use(),a.viewStatus)},i(b.use(),a.viewStatus)}]),angular.module("botvsApp").controller("MarketItemNewCtrl",["$scope","$filter","$translate","$location","$timeout","$routeParams","session","util","dialog",function(a,b,c,d,e,f,g,h,i){var j=(b("trans"),-1);a.isEdit=!1,void 0!==f.id&&(a.isEdit=!0,j=parseInt(f.id)),a.isDemand=-1!=d.path().indexOf("demand"),a.item={title:"",unit_price:5,budget:100,sns:{},content:""},a.isPending=!1,a.min_unit_price=1,a.max_unit_price=1,a.sns_methods=h.getSNS();var k=["MarketGetSettings"],l=[[]];-1!=j&&(k.push("GetMarketItem"),l.push([j])),g.rest(k,l).then(function(b){var c={};k.length>1?(c=b[0].result,a.item=b[1].result,a.sns_methods=h.getSNS(a.item.sns)):c=b,a.min_unit_price=a.isDemand?c.ask_unit_price:c.bid_unit_price,a.max_unit_price=a.isDemand?c.ask_unit_price_max:c.bid_unit_price_max,a.isEdit?a.item.unit_price=Math.max(a.item.unit_price,a.min_unit_price):(a.item.unit_price=a.min_unit_price,a.item.budget=20*a.min_unit_price)},function(a){i.alert(a)}),a.submit=function(){if(a.isPending)return void i.alert("Server is Busy");if(a.item.budget<a.item.unit_price)return void i.alert("ui.market.alert.invalidPrice");if(0==a.item.title.length)return void i.alert("ui.market.alert.invalidForm");var b="zh_CN"==c.use()?1:2,e={},f=!1;if(a.sns_methods.map(function(a){a.value&&(e[a.field]=a.value,f=!0)}),!f)return void i.alert("ui.market.alert.invalidForm");i.confirm("ui.market.alert.confirmSubmit").then(function(){a.isPending=!0,g.rest("AddMarketItem",[j,a.isDemand?0:1,b,a.item.title,a.item.content,a.item.unit_price,a.item.budget,angular.toJson(e)]).then(function(b){a.isPending=!1,"number"!=typeof b?i.alert("ui.market.alert.unknownError"):b>0?(a.isPending=!1,d.path(-1===j?"/market":(a.isDemand?"/market-demand/":"/market-offer/")+j)):-1==b?i.alert("ui.market.alert.invalidInfo"):-2==b?i.alert("ui.market.alert.invalidUnitPrice"):-3==b&&i.confirm("ui.market.alert.insufficientBalance")},function(b){a.isPending=!1,i.alert(b)})})}}]),angular.module("botvsApp").controller("MarketItemCtrl",["$scope","$filter","dialog","util","session","$translate","$location","$routeParams",function(a,b,c,d,e,f,g,h){a.rateitVal=0,a.sns=[],a.isLogin=e.isLogin(),a.isDemand=-1!=g.path().indexOf("-demand"),a.item={};var i=parseInt(h.id);e.rest("GetMarketItem",i).then(function(e){e?(a.item=e,a.sns=d.getSNS(e.sns),a.$emit("titleChange",b("trans")(e.title)),a.item.rateTips=f.instant("ui.market.tipsTotalRate",{rate_count:a.item.trate_count,rate_avg:a.item.trate_avg.toFixed(2)})):c.alert("Error")},function(a){c.alert(a)}),a.MarketSetStatus=function(b){c.confirm("ui.dialog.alertConfirm").then(function(){e.rest("MarketSetStatus",[i,b]).then(function(b){a.item.status=b,c.alert("ui.dialog.alertSuccess")},function(a){c.alert(a)})})},a.request_session=function(){if(!e.isLogin())return void g.path("/login");c.confirm(f.instant("ui.market.alertSessionCharge",{price:a.item.click_price})).then(function(){e.rest("MarketRequestSession",i).then(function(b){b?e.rest("GetMarketItem",i).then(function(b){b?(a.item=b,a.sns=d.getSNS(b.sns),c.alert("ui.market.alertSessionSuccess")):c.alert("Error")},function(a){c.alert(a)}):c.alert("ui.market.alertSessionFailed")},function(a){c.alert(a)})})},a.updateRate=function(a,b){e.rest("MarketRateSession",[b.id,parseFloat(a)]).then(function(a){b.rate=a,c.alert(f.instant("ui.market.tipsRate",{obj:b}))})}}]),angular.module("botvsApp").directive("letterAvatar",function(){function a(a,b){a=String(a)||"",b=b||60;for(var c=0,d=0;d<a.length;d++)c+=a.charCodeAt(d);var e,f,g,h,i=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],j=String(a).toUpperCase().split(" ");return 1==j.length?j[0]?(e=j[0].charAt(0),!(j[0].length>1)||isNaN(j[0].charAt(0))&&isNaN(j[0].charAt(1))||(e+=j[0].charAt(1))):e="?":e=j[0].charAt(0)+j[1].charAt(0),window.devicePixelRatio&&(b*=window.devicePixelRatio),NaN,f=document.createElement("canvas"),f.width=b,f.height=b,g=f.getContext("2d"),g.fillStyle=i[c%i.length],g.fillRect(0,0,f.width,f.height),g.font=Math.round(f.width/2)+"px Arial",g.textAlign="center",g.fillStyle="#FFF",g.fillText(e,b/2,b/1.5),h=f.toDataURL(),f=null,h}return{template:'<span><img width={{imgSize}} height={{imgSize}} ng-src="{{imgSrc}}" class="round"></span>',restrict:"AE",link:function(b,c,d){b.imgSize=d.imgSize||60,b.imgSrc=a(d.letterAvatar,b.imgSize)}}}),angular.module("botvsApp").directive("framework",["$location","$window","session",function(a,b,c){return{templateUrl:"views/directive-framework.html",restrict:"EAC",link:function(d,e,f){d.badge="images/badge.svg",d.badgeTips="FMZ",void 0!==window.__oem_custom&&("string"==typeof window.__oem_custom.Logo&&window.__oem_custom.Logo.length>0&&(d.badge=window.__oem_custom.Logo),"string"==typeof window.__oem_custom.Title&&window.__oem_custom.Title.length>0&&(d.badgeTips=window.__oem_custom.Title)),d.isOEM=b.__OEM__,d.isShadow=c.isShadow,d.getNetCls=function(){return 0==b.pending?"fa fa-signal":"fa fa-spinner fa-spin"},d.toggleLeft=function(){var a=$(".wrapper");a.toggleClass("active"),c.KV_Set("navleft",a.hasClass("active")?1:0)},1==c.KV_Get("navleft",0)&&d.toggleLeft(),d.tools=[{
path:"https://www.quantinfo.com/Tools/View/4/chart.html",name:"ui.nav.tools.market"},{path:"https://www.quantinfo.com/Tools/View/3/formula.html",name:"ui.nav.tools.alpha"},{path:"https://wex.app",name:"ui.nav.tools.sandbox"}],b.__OEM__&&(d.tools=[]),d.subNavs=[{path:"/m/dashboard",name:"ui.nav.dashboard",icon:"fa fa-dashboard"},{path:"/m/robots",name:"ui.dashboard.tabs.robotNav",icon:"fa fa-tasks",shadow:!0},{path:"/m/strategies",name:"ui.dashboard.tabs.strategyNav",icon:"fa fa-cube"},{path:"/m/nodes",name:"ui.dashboard.tabs.dockerNav",icon:"fa fa-cloud"},{path:"/m/platforms",name:"ui.dashboard.tabs.platformNav",icon:"fa fa-university"},{path:"/m/trade",name:"ui.nav.trade",icon:"fa fa-calculator"},{path:"/m/pricing",name:"ui.dashboard.charge",icon:"fa fa-plug"},{path:"/m/tickets",name:"ui.nav.ticket",icon:"fa fa-commenting"},{path:"/m/account",name:"ui.nav.account",icon:"fa fa-user-circle-o"},{path:"/m/account/affiliate",name:"ui.nav.affiliate",icon:"fa fa-share-alt"}],d.clsTab=function(b){return a.path()==b.path?"active":""},$(window).on("scroll",function(){var b=$(".goTopFix");if("/"==a.path()||"/m/dashboard"==a.path())return void b.hide();$(this).scrollTop()>500?b.fadeIn():b.fadeOut()}),d.goTop=function(a){$("html, body").animate({scrollTop:a>=0?a:document.body.scrollHeight},100)}}}}]),angular.module("botvsApp").controller("MRobotsCtrl",["$scope","$window","$translate","session","encrypt","dialog","util",function(a,b,c,d,e,f,g){function h(a){a.io_loading=!0,d.rest("StopRobot",a.id).then(function(b){a.io_loading=!1,b?(a.status=b,a.wd=0):f.alert("ui.dashboard.alert.stopError")},function(b){a.io_loading=!1,f.alert(b),console.log(b)})}function i(a){a.io_loading=!0,d.rest("RestartRobot",a.id).then(function(b){a.io_loading=!1,-1===b?f.alert("ui.dashboard.alert.strategyExpire"):-2===b?f.alert("ui.dashboard.alert.noDocker"):-3===b?f.alert("ui.dashboard.alert.internalError"):-4===b?f.alert("ui.dashboard.alert.alreadyRunning"):-5===b?f.alert("ui.dashboard.alert.insufficientBalance"):-6==b?f.alert("ui.dashboard.alert.exceedConcurrency"):-7===b?f.alert("ui.dashboard.alert.passwordNeed"):-8===b?f.alert("ui.dashboard.alert.planExpired"):"string"==typeof b?f.alert(b):a.status=b},function(b){a.io_loading=!1,f.alert(b)})}function j(b,e,h){d.rest("DeleteRobot",[b.id,e]).then(function(d){g.deleteById(a.robots,b.id),-2===d?void 0!==h||h||f.alert(c.instant("ui.dashboard.alert.deletedWithLog",{id:b.id})):-1===d&&f.alert("ui.dashboard.alert.deletedRobotError")},function(a){f.alert(a)})}a.$on("onCharge",function(b,c){a.$digest()}),a.isOEM=b.__OEM__,a.robots=[],a.has_arrears=!1,a.g=d.g,a.isShadow=d.isShadow(),a.totalProfit=0;var k="date_"+d.getRememberUser(),l="rs_"+d.getRememberUser();a.robotDate=d.KV_Get(k,"date"),a.robotsortBy=d.KV_Get(l,"-date"),a.getConcurrentAbout=function(){var b=0;return _.each(a.robots,function(a){a.status<3&&0==a.is_sandbox&&b++}),Math.max(1,b)},a.checkAll=function(b){_.each(a.robots,function(a){a.checked=-1==b?!a.checked:b})},a.consumedAbout=function(){var b=0,c=1e4*parseInt(a.serverTime/1e4),e=0;_.each(a.robots,function(a){a.status<3&&0==a.is_sandbox&&(e+=1e3*a.charge_time-c,b++)});var f=parseInt((e+d.g.balance/1e8/(d.g.fee/1e8)*36e5)/Math.max(1,b));return moment(c+f).format("YYYY-MM-DD HH:mm:ss")},a.switchRobotDate=function(){a.robotDate="date"==a.robotDate?"refreshTime":"date",a.setSortBy("-"+a.robotDate),d.KV_Set(k,a.robotDate)},a.setSortBy=function(b){a.robotsortBy=a.robotsortBy==b?-1===a.robotsortBy.indexOf("-")?"-"+b:b.replace("-",""):b,d.KV_Set(l,a.robotsortBy)},a.getSortStyle=function(b){return-1!==a.robotsortBy.indexOf(b)?-1===a.robotsortBy.indexOf("-")?"fa fa-sort-alpha-asc":"fa fa-sort-alpha-desc":"fa fa-sort"},a.$on("onTaskUpdate",function(b,c){var d=_.findWhere(a.robots,{id:c.id});if(d){if(1&c.flags&&(d.status=c.status),2&c.flags){var e=c.profit-d.profit;d.profit=c.profit,d.profitColor=e>0?"#1fb265":"#ca3521"}4&c.flags&&(d.summary=c.summary),16&c.flags&&(d.refresh=c.refresh,d.refresh>0&&(d.refreshTime=moment(d.refresh).format("YYYY-MM-DD HH:mm:ss"))),a.$digest()}}),a.serverTime=(new Date).getTime();var m=[],n=[],o=d.isShadow();o?(m=["GetRobotList","GetServerTime"],n=[[-1,-1,-1],[]]):(m=["GetServerTime","GetNodeList","GetRobotList"],n=[[],[],[-1,-1,-1]]),d.rest(m,n).then(function(b){if(!b)return void f.alert("Error");var c=null;o?c=b[0].result:(c=b[2].result,void 0!==b[0].error&&b[0].error?a.platforms=[]:a.platforms=[{eid:"BotVS",id:-1,label:"BotVS",name:"BotVS",stocks:["BTC_USD"]}].concat(b[0].result.platforms),a.serverTime=b[0].result/1e6),void 0!==b[1].error&&b[1].error||(a.nodes=_.where(b[1].result.nodes,{is_owner:!0})),a.robots=c.robots;var d=["#e67e22","#8e44ad","#f1c40f","#34495e","#16a085","#3498db","#bdc3c7","#27ae60","#1abc9c","#2ecc71","#d35400","#e74c3c","#9b59b6","#2c3e50","#2980b9","#c0392b","#95a5a6","#f39c12","#7f8c8d"],e=[],g=0,h=parseInt((new Date).getTime()/864e5),i=a.serverTime;_.each(a.robots,function(b){b.checked=!1,a.totalProfit+=b.profit,b.in_arrears=b.status<3&&0==b.is_sandbox&&i-1e3*b.charge_time>864e5,b.in_arrears&&(a.has_arrears?a.has_arrears=!0:(a.has_arrears=!0,f.alert("ui.robot.in_arrears"))),b.profitColor="black",b.io_loading=!1,b.desc="",b.docker_id="number"==typeof b.fixed_id&&b.fixed_id>0?b.fixed_id:b.node_id,b.node=_.findWhere(a.nodes,{id:b.docker_id}),b.node||(b.docker_id=-1),b.refresh>0?b.refreshTime=moment(b.refresh).format("YYYY-MM-DD HH:mm:ss"):b.refreshTime="-";var c=b.docker_id;void 0!==e[c]?b.borderStyle=e[c]:(b.borderStyle=d[h%d.length],e[c]=b.borderStyle,g++,h++),b.borderStyle="3px double "+b.borderStyle}),1==g&&_.each(a.robots,function(a){a.borderStyle=""})},function(a){f.alert(a)}),a.stopRobot=function(a){var b="ui.dashboard.alert.stopRobot";2===a.status&&(b="ui.dashboard.alert.killRobot"),f.confirm(b).then(function(){h(a)})},a.batchStop=function(){var b=[];if(_.each(a.robots,function(a){a.checked&&(a.status<=2?b.push(a):a.checked=!1)}),0==b.length)return void f.alert("ui.dashboard.robot.alertNoAction");b.length>0&&f.confirm(c.instant("ui.dashboard.confirmBatchStop",{num:b.length})).then(function(){_.each(b,function(a){h(a)})})},a.batchRestart=function(){var b=[],g=!1;if(_.each(a.robots,function(a){a.checked&&(a.status>2?(void 0===a.node_public||1!=a.node_public||d.g.cached||(g=!0),b.push(a)):a.checked=!1)}),0==b.length)return void f.alert("ui.dashboard.robot.alertNoAction");b.length>0&&f.confirm(c.instant("ui.dashboard.confirmBatchReboot",{num:b.length})).then(function(){g?e.submit(function(a){_.each(b,function(a){i(a)})}):_.each(b,function(a){i(a)})})},a.batchDelete=function(){var b=[];if(_.each(a.robots,function(a){a.checked&&(a.status>2?b.push(a):a.checked=!1)}),0==b.length)return void f.alert("ui.dashboard.robot.alertNoAction");if(b.length>0){var d={title:c.instant("ui.dashboard.confirmBatchDelete",{num:b.length}),inputname:c.instant("ui.dashboard.inputBatchDeleteRobot"),inputtype:"checkbox",defaultValue:!0,confirmname:"ui.g.delete",onExit:function(a){_.each(b,function(b){j(b,a,!0)})}};f.prompt(d)}},a.restartRobot=function(a){f.confirm("ui.dashboard.confirmReboot").then(function(){void 0===a.node_public||1!=a.node_public||d.g.cached?i(a):e.submit(function(b){i(a)})})},a.deleteRobot=function(a){var b={title:"ui.dashboard.confirmDeleteRobot",inputname:c.instant("ui.dashboard.inputDeleteRobot",{id:a.id}),inputtype:"checkbox",defaultValue:!0,confirmname:"ui.g.delete",onExit:function(b){j(a,b)}};f.prompt(b)},a.publicRobot=function(a,b){f.confirm(0==b?"ui.dashboard.confirmCancelPublicRobot":"ui.dashboard.confirmPublicRobot").then(function(){d.rest("PublicRobot",[a.id,b]).then(function(c){c&&(a.public=b)},function(a){f.alert(a)})})},a.setRobotWD=function(a){var b=a.wd>0?0:1;f.confirm(b>0?"ui.dashboard.confirmMoniterRobotOn":"ui.dashboard.confirmMoniterRobotOff").then(function(){d.rest("SetRobotWD",[a.id,b]).then(function(c){c?(a.wd=b,f.alert("ui.dialog.alertSuccess")):f.alert("ui.dialog.alertFailure")},function(a){f.alert(a),console.log(a)})})}}]),angular.module("botvsApp").controller("MStrategiesCtrl",["$scope","$translate","$location","dialog","session","util",function(a,b,c,d,e,f){if(!e.isLogin())return void c.path("/login");a.$on("onPayment",function(a,b){-1!==b.orderId.indexOf("R")&&d.notify("ui.notify.rentStrategySuccess")}),a.isOEM=e.g.oem,a.canPublic=!e.g.oem||void 0!==f.tradeFilters.modules&&_.contains(f.tradeFilters.modules,"square"),a.dockerSettings={base:""},a.categories=f.categories,a.filterCategory=null,a.switchCategory=function(b){return a.filterCategory=b},a.activeGroupId=e.KV_Get("strategy_activeGroup",-1),a.switchGroup=function(b){"number"==typeof b?a.activeGroupId=b:(a.activeGroupId=b.id,e.KV_Set("strategy_activeGroup",b.id))},a.showCategory=function(b){return a.filterCategory==b},a.groups=[],a.sortChanged=!1,a.isPending=!1,a.moveItem=function(b,c){var d=_.findWhere(a.groups,{id:c});if(d){for(var g=null,h=null,i=0;i<a.groups.length;i++)if(g=_.findWhere(a.groups[i].items,{id:b})){h=a.groups[i];break}g&&g.group_id!=c&&(f.deleteById(h.items,b),d.items.unshift(g),g.group_id=c,e.rest("ChangeStrategyGroup",[b,c]).then(function(a){}))}},a.onDropComplete=function(b,c,d){a.moveItem(b,d.group.id)},a.onSortUpdate=function(b){a.sortChanged=!0},a.applyGroupSort=function(){for(var b=[],c=[],f=1,g=a.groups.length-1;g>=0;g--){var h=a.groups[g];h.id>0&&(b.push("SaveStrategyGroup"),c.push([h.id,"",++f]))}b.length>0&&(a.isPending=!0,e.rest(b,c).then(function(b){d.alert("ui.dialog.alertSuccess"),a.sortChanged=!1,a.isPending=!1},function(b){a.isPending=!1,d.error(b)}))},a.strategyCount=0,a.buyCount=0;var g="ss_"+e.getRememberUser();a.strategysortBy=e.KV_Get(g,"-date"),a.setSSortBy=function(b){a.strategysortBy=a.strategysortBy==b?"-"+b:b,e.KV_Set(g,a.strategysortBy)},a.getSSortStyle=function(b){return-1!==a.strategysortBy.indexOf(b)?-1===a.strategysortBy.indexOf("-")?"fa fa-sort-alpha-asc":"fa fa-sort-alpha-desc":"fa fa-sort"};var h=["GetServerTime","GetStrategyList","GetStrategyGroupList","GetSettings"],i=[[],[-1,-1,-1,-1,0],[],["docker"]];e.rest(h,i).then(function(b){if(!b)return void d.alert("Error");a.serverTime=b[0].result/1e6;var c={};_.each(b[1].result.strategies,function(b){(4!=b.public||b.is_owner)&&("number"==typeof b.buy_count&&(a.buyCount+=b.buy_count),b.last_modified_ago=moment(b.last_modified).fromNow(),b.is_owner?(b.need_rebuy=!1,"number"!=typeof b.group_id&&(b.group_id=-1)):(b.is_expire=moment(b.expire_date).diff(moment())<0,b.need_rebuy=!0,b.group_id=-1),void 0===c[b.group_id]&&(c[b.group_id]=[]),c[b.group_id].push(b),a.strategyCount++)}),void 0===c[a.activeGroupId]&&(a.activeGroupId=-1),a.groups=b[2].result.items.concat([{id:-1,priority:-1e3,name:"ui.strategy.group.default"}]),_.each(a.groups,function(a){a.items=c[a.id]||[]});try{a.dockerSettings=angular.fromJson(b[3].result)}catch(a){}},function(a){d.alert(a)}),a.shareStrategy=function(b,c){var f={msg:["ui.dashboard.confirmCancelPublicStrategy","ui.dashboard.confirmPublicStrategy","ui.dashboard.confirmSaleStrategy"][c]};1==c?(f.btn0="ui.dashboard.publicShare",f.btn1="ui.dashboard.privateShare"):2==c&&(f.btn0="ui.dashboard.publicSale",f.btn1="ui.dashboard.privateSale",f.btn2="ui.dashboard.appSale",a.isOEM&&(f.btn2="")),a.canPublic||(f.btn0=""),d.confirm(f).then(function(f){0==f?e.rest("ShareStrategy",[b.id,c]).then(function(a){a&&(b.public=c,2==c&&d.alert("ui.dashboard.alert.shareSuccess"))},function(a){d.alert(a)}):1==f?1==c?a.createShare(b):a.createKey(b,1):2==f&&2==c&&a.createKey(b,2)})},a.deleteStrategy=function(a,c){d.confirm(b.instant(c.is_owner?"ui.dashboard.confirmDeleteStrategySelf":"ui.dashboard.confirmDeleteStrategyPremium",{strategy:c.name})).then(function(){e.rest("DeleteStrategy",c.id).then(function(b){-1===b?d.alert("ui.dashboard.alert.strategyBusy"):f.deleteById(a.items,c.id)},function(a){d.alert(a),console.log(a)})})},a.rebuyStrategy=function(a){if("string"==typeof a.pricing&&-1!==a.pricing.indexOf("/"))return void c.path("/m/rent/"+a.id);var f={title:"ui.dialog.buy.title",inputname:"ui.dialog.buy.key",inputtype:"input",description:b.instant("ui.dialog.buy.description",{strategy:a.name,author:a.username,email:a.email}),confirmname:"ui.dialog.buy.btnConfirmRenew",onConfirm:function(b,c){e.rest("VerifyKey",[a.id,b]).then(function(a){a?c(!0):c(!1,"ui.dialog.buy.errorKey",3e3)},function(a){c(!1,a,1e3)})},onExit:function(){d.alert("ui.dialog.buy.successRenew")}};d.prompt(f)},a.createShare=function(a){var c=location.protocol+"//"+location.host+"/m/t/"+a.id,f={title:"ui.dialog.genShare.title",inputname:"ui.dialog.genShare.days",inputtype:"number",showConcurrent:!0,maxConcurrent:1,concurrentLabel:"ui.dialog.maxCopy",concurrentTip:"ui.dialog.maxCopyTip",description:"ui.dialog.genShare.description",confirmname:"ui.dialog.genShare.btnConfirm",onConfirm:function(d,g){if((d=parseInt(d))<1)return void g(!1,"ui.dialog.invalidDays",3e3);e.rest("GenKey",[0,a.id,d,parseInt(f.maxConcurrent)]).then(function(d){if(d){var e=b.instant("ui.dialog.genShare.key")+": "+d;0==a.public&&(e=b.instant("ui.dialog.genShare.urlDesc")+": "+c+"<br>"+e),g(!1,e,6e5)}else g(!1,"ui.dialog.genKey.noPermission",1e4)},function(a){g(!1,a,3e3)})}};d.prompt(f)},a.createKey=function(c,f){var g=location.protocol+"//"+location.host+"/m/s/"+c.id;if(2==f){var h=a.dockerSettings.base;g="<br><b>Windows:<b> <a target='_blank' href='"+h+"/fmz.7z'>"+h+"/fmz.7z</a></b><br><b>Mac:<b> <a target='_blank' href='"+h+"/fmz.dmg'>"+h+"/fmz.dmg</a>"}var i={title:1==f?"ui.dialog.genKey.title":"ui.dialog.genKeyApp.title",inputname:"ui.dialog.genKey.days",inputtype:"number",showConcurrent:1==f,keyType:f,fee:e.g.fee,maxConcurrent:0,concurrentLabel:"ui.dialog.concurrent",concurrentTip:"ui.dialog.concurrentTip",description:1==f?"ui.dialog.genKey.description":"ui.dialog.genKey.descriptionApp",confirmname:"ui.dialog.genKey.btnConfirm",onConfirm:function(a,d){if((a=parseInt(a))<1)return void d(!1,"ui.dialog.invalidDays",3e3);e.rest("GenKey",[f,c.id,a,parseInt(i.maxConcurrent)]).then(function(a){if(a){var e=b.instant("ui.dialog.genKey.key")+": "+a;0==c.public&&(e=1==f?b.instant("ui.dialog.genKey.urlDesc")+": "+g+"<br>"+e:b.instant("ui.dialog.genKey.downDesc")+": "+g+"<br>"+e),d(!1,e,6e5)}else d(!1,"ui.dialog.genKey.noPermission",1e4)},function(a){d(!1,a,3e3)})}};d.prompt(i)},a.delGroup=function(b){d.confirm("ui.strategy.alertDel").then(function(){e.rest("DelStrategyGroup",[b.id]).then(function(c){if(f.deleteById(a.groups,b.id),b.items.length>0){var d=_.findWhere(a.groups,{id:-1});d&&(d.items=b.items.concat(d.items))}2==a.groups.length&&(a.sortChanged=!1)},function(a){d.alert(a)})})},a.saveGroup=function(b){var c=-1,f="";void 0!==b&&(c=b.id,f=b.name);var g={title:c>0?"ui.dialog.changeGroup.title":"ui.dialog.addGroup.title",inputname:"ui.dialog.addGroup.name",inputtype:"text",defaultValue:f,description:c>0?"":"ui.dialog.addGroup.description",confirmname:"ui.dialog.addGroup.btnConfirm",onConfirm:function(d,f){0!=d.length&&e.rest("SaveStrategyGroup",[c,d,0]).then(function(c){f(!0),void 0!==b?b.name=d:a.groups.splice(a.groups.length-1,0,{id:c,name:d,items:[]})},function(a){f(!1,a,3e3)})}};d.prompt(g)}}]),angular.module("botvsApp").controller("MNodesCtrl",["$scope","$translate","dialog","session","util","encrypt",function(a,b,c,d,e,f){a.nodes=[],a.showList=d.KV_Get("nodes_style_list",!1),a.isAdmin=d.isAdmin,a.switchStyle=function(){a.showList=!a.showList,d.KV_Set("nodes_style_list",a.showList)},a.$on("onECSUpdate",function(b,c){var d=_.findWhere(a.nodes,{ecs_id:c.id});d&&(void 0!==c.ip&&(d.ip=c.ip),void 0!==c.status&&(d.ecs_status=c.status),a.$digest())}),a.$on("onNodeUpdate",function(d,f){var g=_.findWhere(a.nodes,{id:f.id});if(0===f.event&&(f.online=!0,g?(void 0!==g.unit_price&&(f.region=g.region,f.city=""),_.extend(g,f)):(g=f,a.nodes.unshift(f))),g){var h="";switch(f.event){case 0:case 2:g.online=!0,h="ui.nodes.tips.status.online";break;case 3:g.online=!1,h="ui.nodes.tips.status.offline";break;case 1:h="ui.nodes.tips.status.logout",g.online=!1,e.deleteById(a.nodes,g.id)}""!==h&&c.notify(b.instant(h,{node:g})),a.$digest()}}),a.installDocker=function(a,b){c.confirm("ui.ecs.reinstallTips").then(function(){f.submit(function(b){a.pending=!0,d.rest("ECSInstall",a.id).then(function(b){a.pending=!1,b?c.alert("ui.ecs.installSuccess"):c.alert("ui.ecs.installFailed")},function(b){a.pending=!1,c.alert(b)})})})},d.rest(["GetSettings","GetNodeList"],[["docker"],[]]).then(function(b){if(!b)return void c.alert("Error");try{a.dockerSettings=angular.fromJson(b[0].result)}catch(a){}a.nodes=_.where(b[1].result.nodes,{is_owner:!0});var d=parseFloat(a.dockerSettings.version);_.each(a.nodes,function(b){"string"==typeof b.os&&(-1!=b.os.indexOf("linux")?b.icon="fa fa-linux":-1!=b.os.indexOf("windows")?b.icon="fa fa-windows":-1!=b.os.indexOf("darwin")?b.icon="fa fa-apple":b.icon="fa fa-microchip",b.regionValid=b.region.length>1&&"N/A"!=b.region,b.isOld=b.build&&b.build<d,parseFloat(b.build)<d&&(a.hasOld=!0))})},function(a){c.alert(a)}),a.deleteNode=function(b){c.confirm("ui.dashboard.confirmDeleteDocker").then(function(){b.pending=!0,d.rest("DeleteNode",b.id).then(function(d){b.pending=!1,-1===d?c.alert("ui.dashboard.alert.dockerBusy"):e.deleteById(a.nodes,b.id)},function(a){b.pending=!1,c.alert(a),console.log(a)})})},a.setNodeWD=function(a){var b=a.wd>0?0:1;c.confirm(b>0?"ui.dashboard.confirmMoniterDockerOn":"ui.dashboard.confirmMoniterDockerOff").then(function(){d.rest("SetNodeWD",[a.id,b]).then(function(d){d?(a.wd=b,c.alert("ui.dialog.alertSuccess")):c.alert("ui.dialog.alertFailure")},function(a){c.alert(a),console.log(a)})})}}]),angular.module("botvsApp").controller("MPlatformsCtrl",["$scope","$translate","dialog","session","util",function(a,b,c,d,e){a.platforms=[],a.showList=d.KV_Get("platforms_style_list",!1),a.switchStyle=function(){a.showList=!a.showList,d.KV_Set("platforms_style_list",a.showList)},d.rest("GetPlatformList").then(function(b){a.platforms=b.platforms},function(a){c.alert(a)}),a.deletePlatform=function(f){c.confirm(b.instant("ui.dashboard.confirmDeletePlatform",{platform:f.label})).then(function(){d.rest("DeletePlatform",f.id).then(function(b){b&&e.deleteById(a.platforms,f.id)},function(a){c.alert(a)})})}}]),angular.module("botvsApp").directive("editor",["$timeout","$parse","$filter","session","qupload","dialog",function(a,b,c,d,e,f){function g(a,b,c){b&&(b.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-obj cannot use an object or an array as a model");return a}),b.$render=function(){a.setValue(b.$viewValue||"")},a.on("change",function(a){var d=a.getValue();d!==b.$viewValue&&c.$evalAsync(function(){b.$setViewValue(d)})}))}function h(a){var b=a.getWrapperElement();if(b.style.display="none",void 0===a.previewNode){var d=document.createElement("div");d.style.width="100%",d.style.height="100%",d.style.padding="15px",d.style.border="dashed 1px #000",d.style.overflow="auto",d.style.backgroundColor="white",b.parentElement.appendChild(d),a.previewNode=d}a.previewNode.innerHTML=c("markdown")(a.getValue(),{raw:!0}),a.previewNode.style.display="block"}function i(a){a.getWrapperElement().style.display="block",void 0!==a.previewNode&&(a.previewNode.innerHTML="",a.previewNode.style.display="none"),a.refresh()}function j(a,b){var c=_.assign(Object.create(l),{element:a,options:b});return c.render(),c.cm}var k=0;CodeMirror.defineOption("preview",!1,function(a,b,c){c==CodeMirror.Init&&(c=!1),!c!=!b&&(b?h(a):i(a))});var l={render:function(){this.cm=CodeMirror(this.element,this.options),this.options.showToolbar&&this.setToolbar(this.tools)},setToolbar:function(a){var b=document.createElement("ul");b.className="mirrormark-toolbar";var a=this.generateToolList(a);a.forEach(function(a){b.appendChild(a)});var c=this.cm.getWrapperElement();c.parentNode.insertBefore(b,c)},registerActions:function(a){return _.assign(this.actions,a)},registerTools:function(a,b){for(var c in a)if(this.actions[a[c].action]&&"function"!=typeof this.actions[a[c].action])throw"MirrorMark - '"+a[c].action+"' is not a registered action";if(b)return void(this.tools=a);this.tools=this.tools.concat(a)},generateToolList:function a(b){return b.map(function(b){var c=document.createElement("li"),d=document.createElement("a");if("preview"!=b.name&&"fullScreen"!=b.name||(c.style.float="right"),b.className&&(d.className=b.className),b.showName){var e=document.createTextNode(b.name);d.appendChild(e)}if(b.action&&(d.onclick=function(a){if("preview"!==b.action&&"fullScreen"!==b.action&&this.cm.getOption("preview"))return void this.cm.setOption("preview",!1);this.cm.focus(),this.actions[b.action].call(this,d)}.bind(this)),c.appendChild(d),b.nested){c.className+=" has-nested";var f=document.createElement("ul");f.className=this.options.theme+"-toolbar-list";a.call(this,b.nested).forEach(function(a){f.appendChild(a)}),c.appendChild(f)}return c}.bind(this))},tools:[{name:"bold",action:"bold",className:"fa fa-bold"},{name:"italicize",action:"italicize",className:"fa fa-italic"},{name:"blockquote",action:"blockquote",className:"fa fa-quote-left"},{name:"link",action:"link",className:"fa fa-link"},{name:"image",action:"image",className:"fa fa-image"},{name:"table",action:"table",className:"fa fa-table"},{name:"unorderedList",action:"unorderedList",className:"fa fa-list"},{name:"orderedList",action:"orderedList",className:"fa fa-list-ol"},{name:"vim",action:"vimMode",className:"iconfont icon-vim"},{name:"fullScreen",action:"fullScreen",className:"fa fa-expand"},{name:"preview",action:"preview",className:"fa fa-eye"}],actions:{bold:function(){this.insertAround("**","**")},italicize:function(){this.insertAround("*","*")},code:function(){this.insertAround("```\r\n","\r\n```")},blockquote:function(){this.insertBefore("> ",2)},orderedList:function(){this.insertBefore("1. ",3)},unorderedList:function(){this.insertBefore("* ",2)},table:function(){this.insert("\n| head1 | head2 | head3 |\n| ------ | ------ | ------ |\n| column1 | column2 | column3 |\n| column1 | column2 | column3 |\n")},image:function(){this.insertBefore("![](http://)",2)},link:function(){this.insertAround("[","](http://)")},hr:function(){this.insert("---")},preview:function(a){var b=this.cm.getOption("preview");this.cm.setOption("preview",!b),a.style=b?"color:#888":"color:green"},vimMode:function(a){"vim"!=this.cm.getOption("keyMap")?(this.cm.setOption("keyMap","vim"),a.style="color:green"):(this.cm.setOption("keyMap","default"),a.style="color:#888"),this.cm.focus()},fullScreen:function(){var a=this.element,b=document,c=b.fullScreen||b.mozFullScreen||b.webkitFullScreen,d=function(){b.cancelFullScreen?b.cancelFullScreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.webkitCancelFullScreen&&b.webkitCancelFullScreen()};c?d&&d():function(){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}()}},insert:function(a){var b=this.cm.getDoc(),c=b.getCursor();b.replaceRange(a,{line:c.line,ch:c.ch})},insertAround:function(a,b){var c=this.cm.getDoc(),d=c.getCursor();if(c.somethingSelected()){var e=c.getSelection();c.replaceSelection(a+e+b)}else c.replaceRange(a+b,{line:d.line,ch:d.ch}),c.setCursor({line:d.line,ch:d.ch+a.length})},insertBefore:function(a,b){var c=this.cm.getDoc(),d=c.getCursor();if(c.somethingSelected()){c.listSelections().forEach(function(d){for(var e=[d.head.line,d.anchor.line].sort(),f=e[0];f<=e[1];f++)c.replaceRange(a,{line:f,ch:0});c.setCursor({line:e[0],ch:b||0})})}else c.replaceRange(a,{line:d.line,ch:0}),c.setCursor({line:d.line,ch:b||0})}};return{templateUrl:"views/directive-editor.html",restrict:"EA",require:"?ngModel",link:function(b,c,h,i){b.height=h.height||"400px",b.isVimMode=!1,b.editorId="md-editor-"+k,k++;var l=null;a(function(){var a=document.getElementById(b.editorId);l=j(a,{autoRefresh:!0,showToolbar:!0,value:i?i.$viewValue:"",readOnly:void 0!==h.readOnly&&"true"==h.readOnly,lineWrapping:!0,lineNumbers:!0,insertSoftTab:!0,indentUnit:4,theme:"default",styleActiveLine:!0,showHint:!0,mode:"markdown",highlightFormatting:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:function(a){var b=Array(a.getOption("indentUnit")+1).join(" ");a.replaceSelection(b)}}}),g(l,i,b),l.setSize("100%","100%"),l.refresh(),$(a).on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("paste drop",function(a){var c=[],d=[];d="paste"==a.type?(a.originalEvent.clipboardData||a.originalEvent.originalEvent.clipboardData).items:(a.originalEvent.dataTransfer||a.originalEvent.originalEvent.dataTransfer).files;for(var e=".png,.jpg,.zip,.7z,.tar,.gz,.bz2,.mp4,.mp3,",g=0;g<d.length;g++){var h=d[g];if("drop"==a.type||"file"===h.kind){var i=h.type.match(/^image/i);if(!i&&"string"==typeof h.name){var j=h.name.split(".");-1!=e.indexOf(j[j.length-1]+",")&&(i=!0)}if(!i)return void f.alert("ui.alert.fileForbidden");var k="drop"==a.type?h:h.getAsFile();k&&c.push(k)}}c.length>0&&b.onFileSelect(c)})}),b.switchVim=function(){"vim"!=l.getOption("keyMap")?(l.setOption("keyMap","vim"),b.isVimMode=!0):(l.setOption("keyMap","default"),b.isVimMode=!1),l.focus()},b.selectFiles=[];var m=function(a){var c=b.selectFiles;d.rest("GetQiniuToken",c[a].file.name).then(function(b){if(-1==b)return c.splice(a,1),void f.alert("ui.alert.fileForbidden");c[a].progress={p:0},c[a].upload=e.upload({file:c[a].file,token:b}),c[a].upload.then(function(a){var b=" /upload/asset/"+a.key+" ";l.replaceSelection(b)},function(a){console.log("error",a)},function(b){c[a].progress.p=Math.floor(100*b.loaded/b.totalSize)})},function(a){f.alert(a)})};b.abort=function(a){var c=b.selectFiles;c[a].upload.abort(),c.splice(a,1)},b.onFileSelect=function(a){for(var c=b.selectFiles,d=c.length,e=0;e<a.length;e++)c[e+d]={file:a[e]},m(e+d)}}}}]),angular.module("botvsApp").controller("MTicketsCtrl",["$scope","session","util",function(a,b,c){var d=Math.max(20,Math.ceil(window.screen.height/80));a.items=[],a.pages=[],a.pending=!1,a.isAdmin=b.isAdmin,a.keyword="",a.skw="",a.stOptions=[{id:-1,name:"ui.ticket.status.all"},{id:0,name:"ui.ticket.status.open"},{id:1,name:"ui.ticket.status.processing"},{id:2,name:"ui.ticket.status.feedback"},{id:3,name:"ui.ticket.status.closed"}],a.st=a.stOptions[0],a.items_count=0,a.go=function(e,f){"string"!=typeof f&&(f=""),a.keyword=f,a.skw=f,a.pending=!0,b.rest(["TicketGetCategories","TicketGetTopicList"],[[],[a.st.id,(e-1)*d,d,f]]).then(function(b){a.pending=!1,a.items=b[1].result.items,a.items_count=b[1].result.all_items,a.pages=c.getPages(b[1].result.all_items,d,e)},function(b){a.pending=!1,dialog.alert(b)})},a.$on("onTicket",function(c,d){b.isAdmin()&&"new"==d.event&&b.rest("TicketGetTopic",d.tid).then(function(b){b?(b.is_new=!0,a.items.unshift(b),a.items_count++):dialog.alert("Error")},function(a){dialog.alert(a)})}),a.go(1)}]),angular.module("botvsApp").filter("letter",function(){return function(a){if("string"!=typeof a||0==a.length)return"";for(var b=a[0].toUpperCase(),c=0;c<a.length;c++){var b=a[c];if(" "!==b&&"'"!=b&&'"'!=b&&"‘"!=b&&"“"!=b&&"["!==b&&"【"!==b&&"▉"!=b){b=b.toUpperCase();break}}return b}}),angular.module("botvsApp").controller("MAddTicketCtrl",["$scope","$filter","$translate","$location","$timeout","$routeParams","session","dialog",function(a,b,c,d,e,f,g,h){b("trans");a.title="",a.content="",a.node_selected=-1,a.nodes=[],a.isPending=!1,a.topicStatus=0;c.instant("ui.alert.leaveMesssage");g.rest("TicketGetCategories").then(function(b){b?a.nodes=b.items:h.alert("Error")},function(a){h.alert(a)}),a.submit=function(){return g.isAdmin()?void h.alert("You are Admin -:)"):a.isPending?void h.alert("Server is Busy"):0==a.title.length?void h.alert("ui.alert.titleEmpty"):-1==a.node_selected?void h.alert("ui.alert.ticketNodeEmpty"):(a.isPending=!0,void g.rest("TicketAddTopic",[-1,parseInt(a.node_selected),a.title,a.content]).then(function(b){isNaN(b)?(a.isPending=!1,h.alert(b)):(a.isPending=!1,d.path("m/tickets"),h.alert("ui.ticket.alertAddSuccess"))},function(a){h.alert(a)}))}}]),angular.module("botvsApp").controller("MTicketTopicCtrl",["$scope","$translate","$routeParams","$location","session","dialog",function(a,b,c,d,e,f){a.reply_content="",a.replys=[];var g=parseInt(c.id);a.steps=[["ui.ticket.step.open","ui.ticket.step.accepted"],["ui.ticket.step.process","ui.ticket.step.processed"],["ui.ticket.step.wait","ui.ticket.step.confirmed"],["ui.ticket.step.close","ui.ticket.step.closed"]],e.rest(["TicketGetTopic","TicketGetReplyList"],[[g],[g,-1,-1]]).then(function(c){if(c){var d=c[0].result;"string"==typeof d.content&&0!=d.content.length||(d.content=d.title),d.is_admin=!1,a.topic=d,a.replys=c[1].result.items,a.replys.push(d),_.each(a.replys,function(a){":closed_by_user"==a.content?(a.content=b.instant("ui.ticket.closedByUser"),a.system=!0):":closed_by_admin"==a.content&&(a.content=b.instant("ui.ticket.closedByAdmin"),a.system=!0)}),a.$emit("titleChange",d.title)}else f.alert("Error")},function(a){f.alert(a)}),a.close=function(b){"boolean"!=typeof b&&(b=!1),f.confirm(b?"ui.ticket.closeDelete":"ui.ticket.closeConfirm").then(function(){var c=b?e.isAdmin()?":deleted_by_admin":":deleted_by_user":e.isAdmin()?":closed_by_admin":":closed_by_user";e.rest(["TicketAddReply","TicketClose"],[[g,c],[g,b?1:0]]).then(function(b){a.topic.status=3,d.path("m/tickets")},function(a){f.alert(a)})})},a.reply=function(){0!=a.reply_content.length&&e.rest("TicketAddReply",[g,a.reply_content]).then(function(b){b&&(a.topic.status=e.isAdmin()?2:a.topic.status>0?1:0,a.replys.unshift({content:a.reply_content,is_admin:e.isAdmin(),created:moment().format("YYYY-MM-DD HH:mm:ss")}))},function(a){f.alert(a)})},a.$on("onTicket",function(b,c){if(c.tid==g){if(0==c.content.indexOf(":closed"))return void(a.topic.status=3);"feedback"===c.event?(a.replys.unshift({content:c.content,is_admin:!0,created:c.time}),a.topic.status=2):"processing"===c.event&&(a.replys.unshift({content:c.content,is_admin:!1,created:c.time}),a.topic.status>0&&(a.topic.status=1))}})}]),angular.module("botvsApp").directive("ngDragdrop",["$rootScope","$location",function(a,b){return a.$on("$locationChangeSuccess",function(){a.dragNumer=0}),{restrict:"A",link:function(b,c,d){void 0===a.dragNumer&&(a.dragNumer=0);var e=c.css("border"),f=function(a){a?"2px dashed #666666"!=c.css("border")&&c.css("border","2px dashed #666666"):c.css("border")!=e&&c.css("border",e)},g=b.$eval(d.ngDragdrop);g.drag?(c.attr("draggable","true"),c.on("dragstart",function(b){if(b.dataTransfer.setData("Text",angular.toJson({dragData:g.data})),b.dataTransfer.setDragImage){var c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAArUlEQVQ4T7WTrQ1CQRCE9zrAUQEWcSMRGByd0AEJDkMFVIJFYHAzCZ4WSOhgyXvq/Rz3Dh6svvsyMzsbbOSE6n+M8RZCmOdY7n6VtOi+qQEAniQn34j5PaDETqXU3c+SVj0FpXYAPEhOiwAAjiQ3zYw+BfRC/j8AwN7MdonVHkhuWwpijBdJy3edSAXbAnTCSfnNZ1AAyG9hCJCqeM7CyczWQ3fh7ndJs7pIY+YFVLShNU7/WxcAAAAASUVORK5CYII=",b.dataTransfer.setDragImage(c,20,20)}a.dragNumer++}),c.on("dragend",function(b){a.dragNumer--})):g.drop&&(c.on("dragover",function(b){0!=a.dragNumer&&(b.preventDefault(),f(!0))}),c.on("dragleave",function(b){0!=a.dragNumer&&(b.preventDefault(),f(!1))}),c.on("drop",function(b){if(0!=a.dragNumer){b.preventDefault(),f(!1);var c=b.dataTransfer.getData("Text");c&&-1!==c.indexOf("dragData")&&g.drop(angular.fromJson(c).dragData,b,g)}}))}}}]),angular.module("botvsApp").controller("MInvoiceCtrl",["$scope","$translate","session","util","dialog",function(a,b,c,d,e){a.loading=!1;var f=moment().format("YYYY-MM-DD 23:59:59"),g=moment().startOf("year").format("YYYY-MM-DD 00:00:00");a.stime=g,a.etime=f;var h="zh_CN"!=b.use(),i={};i[b.instant("ui.const.range.today")]=[moment(),moment()],i[b.instant("ui.const.range.yesterday")]=[moment().subtract(1,"days"),moment().subtract(1,"days")],i[b.instant("ui.const.range.last7days")]=[moment().subtract(6,"days"),moment()],i[b.instant("ui.const.range.last30days")]=[moment().subtract(29,"days"),moment()],
i[b.instant("ui.const.range.thismonth")]=[moment().startOf("month"),moment().endOf("month")],i[b.instant("ui.const.range.lastmonth")]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],i[b.instant("ui.const.range.thisyear")]=[moment().startOf("year"),moment()];var j={locale:{format:"YYYY-MM-DD",applyLabel:h?"Apply":"应用",cancelLabel:h?"Cancel":"取消",customRangeLabel:h?"Custom":"自定义"},showDropdowns:!0,timePicker:!1,autoApply:!1,startDate:g,endDate:f,maxDate:f,ranges:i};$("#invoiceRangePicker").daterangepicker(j,function(b,c,d){a.stime=b.format("YYYY-MM-DD HH:mm:ss"),a.etime=c.format("YYYY-MM-DD 23:59:59")});a.pages=[],a.product="-1",a.go=function(b){a.pending=!0,c.rest("GetInvoiceList",[parseInt(a.product),a.stime,a.etime,20*(b-1),20]).then(function(c){a.pending=!1,c&&(a.invoice=c,_.each(c.items,function(a){if(a.show=!1,1!=a.product&&2!=a.product&&4!=a.product&&5!=a.product||"string"!=typeof a.remark||0!=a.remark.indexOf("{"))a.remark=!1;else try{a.remark=angular.fromJson(a.remark)}catch(a){console.log(a)}}),a.pages=d.getPages(c.all_items,20,b))},function(b){a.pending=!1,e.alert(b)})},a.go(1)}]),angular.module("botvsApp").controller("MTradeCtrl",["$scope","$timeout","dialog","util","$filter","$translate","session","$routeParams",function(a,b,c,d,e,f,g,h){function i(){if(K(),a.timerCount++,null!=o&&(b.cancel(o),o=null),a.autoSync&&!a.isFastSync&&a.timerCount%5==0){w=v();L("var tasks = ['GetTicker', 'GetDepth', 'GetRecords']; _.each(tasks, function(t, i) {tasks[i] = (t == 'GetRecords' ? exchange.Go(t, period) : exchange.Go(t))}); _.each(tasks, function(t, i) {tasks[i] = tasks[i].wait();}); tasks.push(ct);return tasks;",function(a,b){B(a[0]),D(a[1]),a.length>3&&null!=a[3]&&s(a[3]),F(a[2])},null,!1,function(){o=b(i,1e3)})}else o=b(i,1e3)}function j(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(b){z();for(var c=0;c<b.length;c++)if(c>0&&b[c].Time<b[c-1].Time)throw"ERROR";var g=a.option.platform.eid,h="Futures_CTP"==g?"Futures":e("trans")(g),i=a.option.stock.toLowerCase(),j=60*a.currentPeriod.minutes;if(null==x){var k=[];_.each(d.kticks,function(b){k.push({id:"btn_ktick_"+b.id,minutes:b.minutes,text:f.instant(b.name),select:a.currentPeriod.minutes==b.minutes})}),x=NewTradingView("ohlc_chart","zh_CN"==f.use()?"zh":"en",function(b){_.each(k,function(c){var d=$(b.createButton());c.button=d,d.addClass(c.select?"select time_button_header":"time_button_header").attr("style","background:none;border:none;color:"+(c.select?"#02BC77":"#68696b")).attr("id",c.id).html("<span>"+c.text+"</span>").on("click",function(b){_.each(k,function(a){a.select=a.button==d,a.button.attr("style","color:"+(a.select?"#02BC77":"#68696b"))}),a.switchPeriod(c)})})})}x.update(b,h,i,j)}a.isFastSync=!1,a.kticks=d.kticks,a.currentPeriod=d.kticks[Math.min(d.kticks.length-1,g.KV_Get("trade_period_idx",4))],a.trades=[],a.nodes=[],a.account={Stocks:0,FrozenStocks:0,Balance:0,FrozenBalance:0},a.positions=[],a.marginLevel=g.KV_Get("trade_marginLevel",10),a.flowRate=g.KV_Get("trade_flowRate",1e3),a.depthMax=0,a.currencyFixed=8,a.op={},a.ct=null,a.isSHFE=!1,a.error=!1,a.pending_orders=[],a.assets={},a.platforms=[],a.autoSync=!1,a.option={},a.option.node_selected_id=g.KV_Get("trade_node_idx","-1");var l={};try{l=angular.fromJson(g.KV_Get("trade_custom","{}"))}catch(a){console.log(a)}a.result="",a.pending=!1,a.ready=!1,a.isFutures=!1,a.isCryptoFutures=!1,a.isCTP=!1,a.isCoverToday=!0,a.loopCounter=function(a){for(var b=[],c=0;c<a;c++)b.push(c);return b};var m=function(a){return 1==a?"PERIOD_M1":3==a?"PERIOD_M3":5==a?"PERIOD_M5":15==a?"PERIOD_M15":30==a?"PERIOD_M30":60==a?"PERIOD_H1":1440==a?"PERIOD_D1":"PERIOD_M30"},n=function(){var a={OPENLONG:"多开|OpenLong",OPENSHORT:"空开|OpenShort",OPENDOUBLE:"双开|OpenDouble",CLOSELONG:"多平|CloseLong",CLOSESHORT:"空平|CloseShort",CLOSEDOUBLE:"双平|CloseDouble",EXCHANGELONG:"多换|ExchangeLong",EXCHANGESHORT:"空换|ExchangeShort",OPENUNKOWN:"开仓|OpenUnkown",CLOSEUNKOWN:"平仓|CloseUnkown",EXCHANGEUNKOWN:"换仓|ExchangeUnkown",UNKOWN:"未知|Unkown",NOCHANGE:"空闲|NoChange"},b={RED:"green",GREEN:"red",WHITE:"#666"},c={delta_enum_NONE:{forward_enum_UP:[a.NOCHANGE,b.WHITE],forward_enum_DOWN:[a.NOCHANGE,b.WHITE],forward_enum_MIDDLE:[a.NOCHANGE,b.WHITE]},delta_enum_EXCHANGE:{forward_enum_UP:[a.EXCHANGELONG,b.RED],forward_enum_DOWN:[a.EXCHANGESHORT,b.GREEN],forward_enum_MIDDLE:[a.EXCHANGEUNKOWN,b.WHITE]},delta_enum_OPENFWDOUBLE:{forward_enum_UP:[a.OPENDOUBLE,b.RED],forward_enum_DOWN:[a.OPENDOUBLE,b.GREEN],forward_enum_MIDDLE:[a.OPENDOUBLE,b.WHITE]},delta_enum_OPEN:{forward_enum_UP:[a.OPENLONG,b.RED],forward_enum_DOWN:[a.OPENSHORT,b.GREEN],forward_enum_MIDDLE:[a.OPENUNKOWN,b.WHITE]},delta_enum_CLOSEFWDOUBLE:{forward_enum_UP:[a.CLOSEDOUBLE,b.RED],forward_enum_DOWN:[a.CLOSEDOUBLE,b.GREEN],forward_enum_MIDDLE:[a.CLOSEDOUBLE,b.WHITE]},delta_enum_CLOSE:{forward_enum_UP:[a.CLOSESHORT,b.RED],forward_enum_DOWN:[a.CLOSELONG,b.GREEN],forward_enum_MIDDLE:[a.CLOSEUNKOWN,b.WHITE]}},d=null;return{feed:function(a){if(!d)return d=a,[];var b=a.Volume-d.Volume,e=a.OpenInterest-d.OpenInterest,f="delta_enum_UNKOWN";0==e&&0==b?f="delta_enum_NONE":0==e&&b>0?f="delta_enum_EXCHANGE":e>0?f=e-b==0?"delta_enum_OPENFWDOUBLE":"delta_enum_OPEN":e<0&&(f=e+b==0?"delta_enum_CLOSEFWDOUBLE":"delta_enum_CLOSE");var g=c[f],h=null;if(void 0!==g){var i="";if(""!=(i=a.LastPrice>=d.AskPrice1?"forward_enum_UP":a.LastPrice<=d.BidPrice1?"forward_enum_DOWN":a.LastPrice>=a.AskPrice1?"forward_enum_UP":a.LastPrice<=a.BidPrice1?"forward_enum_DOWN":"forward_enum_MIDDLE")){var j=g[i];void 0!==j&&(h=[a.LastPrice,b,j[0],j[1]])}}return d=a,h}}}(),o=null;a.timerCount=0;var p=!1,q=null,r=!1;a.$on("$destroy",function(){null!=o&&(b.cancel(o),o=null),q&&q.close(),a.autoSync=!1,p=!0}),a.showInfo=function(a){c.alert({msg:js_beautify(angular.toJson(a)),style:"textarea"})};var s=function(b){a.ct=b,a.isSHFE=!1,a.ct&&("SHFE"==a.ct.ExchangeID&&(a.isSHFE=!0),a.ct.Commodity&&"SHFE"==a.ct.Commodity.ExchangeNo&&(a.isSHFE=!0))},t=function(){return"Futures_CTP"==a.option.platform.eid||"Futures_Esunny"==a.option.platform.eid?"FUTURES."+a.option.stock:(a.option.platform.eid+"."+a.option.stock).toLowerCase()},u=function(){if(q){var b=t(),c=[];["ticker","depth","trade","ohlc@"+60*a.currentPeriod.minutes].map(function(a){c.push(b+"."+a)});try{q.send("unsub:"),r||q.send('{"method":"symbols"}'),q.send("sub:"+c.join("/"))}catch(a){console.log(a)}}},v=function(){return a.option.node_selected_id+" "+a.option.platform.id+" "+a.option.stock},w="",x=null;Highcharts.setOptions({global:{useUTC:!1},credits:{enabled:!1}});var y="",z=function(){var b=e("trans")(a.option.platform.name)+":"+a.option.stock;b!=y&&(a.$emit("titleChange",b),y=b)},A=function(b){if(b){a.account=b,a.error_assets=null,a.assets.Info=b.Info,a.currencyFixed=8;var c=a.option.platform.eid;if("Futures_CTP"==c)a.assets.items=[{currency:"CNY",free:b.Balance,frozen:b.FrozenBalance}],a.currencyFixed=2;else if(0==c.indexOf("Futures_Esunny")){var d=!1,e=[{currency:"Base",free:b.Balance,frozen:b.FrozenBalance}];b.Info.forEach(function(a){void 0!==a.TAvailable&&(d=!0),0==a.TAvailable&&0==a.Frozen||e.push({currency:a.CurrencyNo,free:a.TAvailable,frozen:a.Frozen})}),d||(e=[{currency:"CNY",free:b.Balance,frozen:b.FrozenBalance}]),a.assets.items=e,a.currencyFixed=2}else if(0==c.indexOf("Futures_")){var f={};f="Futures_BFX"==c?{currency:"USDT",free:b.Balance,frozen:b.FrozenBalance}:{currency:"Futures_BitMEX"==c?"XBT":-1!=a.option.stock.indexOf(".")?a.option.stock.split(".")[0]:"BTC",free:b.Stocks,frozen:b.FrozenStocks},a.assets.items=[f]}else if(-1!==a.option.stock.indexOf("_")){var g=a.option.stock.split("_");2==g.length&&(a.assets.items=[{currency:g[0],free:b.Stocks,frozen:b.FrozenStocks},{currency:g[1],free:b.Balance,frozen:b.FrozenBalance}])}}};a.preTicker=null;var B=function(b,c){if(b){if(!0){var d=b.Info;if(d&&d.QOpeningPrice&&(d={AskPrice1:d.QAskPrice[0],BidPrice1:d.QBidPrice[0],LastPrice:d.QLastPrice,Volume:d.QTotalQty,OpenInterest:d.QPositionQty,InstrumentID:a.option.stock}),void 0!==d&&"string"==typeof d.InstrumentID)try{var e=n.feed(d);e&&e[1]>0&&E([{t:b.Time,p:e[0],v:e[1],a:e[2],c:e[3]}])}catch(a){console.log("Feed",a)}}a.preTicker?a.ticker.Volume!=b.Volume&&(a.preTicker=a.ticker):a.preTicker=b,a.ticker=b}},C=null,D=function(b){if(b){var c=a.option.platform.eid,d=l[c],e=!1;void 0===d&&(d={def:a.option.stock,stocks:[]},l[c]=d),angular.isArray(d.stocks)||(d.stocks=[],d.def=a.option.stock,e=!0),-1==_.indexOf(a.option.platform.stocks,a.option.stock)&&(a.option.platform.stocks.unshift(a.option.stock),d.def=a.option.stock,d.stocks=_.union([a.option.stock].concat(d.stocks)),e=!0),d.def!=a.option.stock&&(d.def=a.option.stock,e=!0),e&&g.KV_Set("trade_custom",angular.toJson(l))}else b={Asks:[],Bids:[]};var h=b.Asks.length>0&&b.Bids.length>0;if(C||h){var i=[],j=[];b.Bids.forEach(function(a){i.push(a.Price),j.push(a.Amount)}),i.reverse(),j.reverse(),h&&(i.push((b.Asks[0].Price+b.Bids[0].Price)/2),j.push(0)),b.Asks.forEach(function(a){i.push(a.Price),j.push(a.Amount)}),C?(C.series[0].zones[0].value=b.Bids.length,C.series[0].setData(j)):C=Highcharts.chart("depth_chart",{chart:{type:"area"},title:{text:null},legend:{enabled:!1},credits:{enabled:!1},xAxis:{title:{enabled:!1},labels:{formatter:function(){return i[this.value]}},visible:!1,tickmarkPlacement:"on"},yAxis:{title:{enabled:!1},visible:!1,minPadding:0,startOnTick:!1,tickWidth:1,gridLineWidth:0},exporting:{enabled:!1},tooltip:{headerFormat:"",enabled:!1,pointFormatter:function(){return"<b>"+f.instant("ui.order.price")+": "+i[this.x]+"</b><br/><b>"+f.instant("ui.order.amount")+": "+this.y+"</b>"}},plotOptions:{series:{states:{hover:{enabled:!1}}},area:{marker:{enabled:!1,symbol:"circle",radius:4,states:{hover:{enabled:!0}}}}},series:[{zoneAxis:"x",color:"#ffd6d6",zones:[{value:b.Bids.length,color:"#d3ebd8"}],data:j}]})}a.depth=b,a.depthMax=Math.min(50,Math.max(a.depth.Bids.length,a.depth.Asks.length)),a.isEsunny&&(a.depthMax=1),_.each([b.Asks,b.Bids],function(b){var c=0;_.each(b,function(b,d){d<a.depthMax&&(c+=b.Amount)}),_.each(b,function(a){a.Weight=parseInt(100*a.Amount/c)})})},E=function(b){_.each(b,function(b){if(b.trend=0,a.trades.length>0){var c=Number(b.p)-Number(a.trades[a.trades.length-1].p);c>0?b.trend=1:c<0&&(b.trend=-1)}"string"!=typeof b.c&&(b.c="bid"==b.s||"buy"==b.s?"#70a800":"#ea0070"),a.trades.push(b)});a.trades.length>100&&(a.trades=a.trades.slice(a.trades.length-100))},F=function(a){if(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({time:d.Time,open:d.Open,high:d.High,low:d.Low,close:d.Close,volume:d.Volume})}k(b)}},G=function(){g.KV_Set("trade_platform_idx",a.option.platform.id),b(function(){v()!=w&&(a.ticker=null,a.preTicker=null,D(null),a.refresh()),$("#tradeTabs a:first").tab("show"),$("#privateTabs a:last").tab("show")},100)};a.changeNode=function(){g.KV_Set("trade_node_idx",a.option.node_selected_id.toString()),a.refresh()},a.switchPlatform=function(b,c){var d=l[b.eid];a.option.stock=d?d.def||b.stocks[0]:b.stocks[0],G()},a.switchSymbol=function(){G()},a.switchPeriod=function(b){var c=_.findIndex(a.kticks,{minutes:b.minutes}),d=a.kticks[c];g.KV_Set("trade_period_idx",c),a.currentPeriod=d,u(),L("return [exchange.GetRecords("+m(d.minutes)+"), ct];",function(a){F(a[0]),null!=a[1]&&s(a[1])})};var H=function(a){var b=document.createElement("canvas");b.width=10,b.height=10;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,b.width,b.height),b.toDataURL()},I=H("#efefef"),J=H("#ffffff");a.getStyle=function(b,c,d){if(a.depth){var e={color:"#70a800"};"Asks"==b&&(e.color="#ea0070");var f=a.depth[b];if(f&&f.length>2){var g=f[d];g&&"Amount"==c&&(e.color="#666","Bids"==b?(e["padding-right"]="1px",e["background-image"]='url("'+J+'")',e["background-size"]=100-g.Weight+"% auto",e["background-color"]="#efefef",e["background-repeat"]="repeat-y"):(e["padding-left"]="1px",e["background-image"]='url("'+I+'")',e["background-size"]=g.Weight+"% auto",e["background-repeat"]="repeat-y"))}return e}},a.setInput=function(b,c,d){if(""==b)return void(a.op["bid"+c]=a.op["ask"+c]=d);if(a.depth){var e=a.depth[b];if(e){var f=e[d];f&&(a.op["bid"+c]=a.op["ask"+c]=f[c])}}},a.saveSettings=function(){g.KV_Set("trade_flowRate",a.flowRate),g.KV_Set("trade_marginLevel",a.marginLevel)};var K=function(){if(a.option&&a.option.platform){var b=a.option.platform.eid;a.isCTP="Futures_CTP"==b||"Futures_Esunny"==b||"Futures_LTS"==b,a.isEsunny="Futures_Esunny"==b,a.isFutures=0==b.indexOf("Futures_"),a.isCryptoFutures=0==b.indexOf("Futures_")&&!a.isCTP}},L=function(b,d,e,h,i){h=!(void 0!==h&&!h);var k=a.option.platform.eid;K();var l=a.option;if("object"!=typeof l.platform)return i&&i(),void c.alert("ui.debug.selectPlatform");if(0==a.nodes.length)return i&&i(),void c.error("ui.debug.alertDocker");var n=l.stock,o=l.node_selected_id,q=l.stock,r="var period="+m(a.currentPeriod.minutes)+";";if(0==k.indexOf("Futures"))if("Futures_CTP"==k)q="FUTURES",r+="exchange.IO('flow', "+1e6*a.flowRate+");",r+="ct=_R(exchange.SetContractType, "+angular.toJson(l.stock)+");";else if("Futures_Esunny"==k)q="FUTURES",r+="ct=_R(exchange.SetContractType, "+angular.toJson(l.stock)+");";else if("Futures_OKCoin"==k||"Futures_HuobiDM"==k){var s=l.stock,t=s.split(".");2==t.length&&(q=t[0].toUpperCase(),s=t[1]),r+="ct=exchange.SetContractType("+angular.toJson(s)+");"}else r+="ct=exchange.SetContractType("+angular.toJson(l.stock)+");";var u={};u.period=60,u.source="function _R(method) { var r; var n = 0; while (!(r = method.apply(this, Array.prototype.slice.call(arguments).slice(1)))) {var err = GetLastError(); if(exchange.GetName()=='Futures_CTP'&&(err.indexOf('密码')!=-1||err.indexOf('就续')!=-1))break;n++; if (n >= 3) { break; } Sleep(1000); } return r; } \nfunction main() {var eName=exchange.GetName(); var isPush = (eName == 'Futures_CTP' || eName == 'Futures_Esunny' || eName == 'Futures_LTS'); if(isPush){ for (var i = 0; i < 200; i++) { if (exchange.IO('status')) { break; } else { Sleep(50); } } } var ct=null;exchange.SetTimeout(10000); if(exchange.GetName()=='Futures_BitMEX'){ct=exchange.SetContractType('XBTUSD')}; if(isPush){exchange.IO('mode', 0)}; "+r+b+" } ",u.node=parseInt(l.node_selected_id),u.exchanges=[{pid:l.platform.id,pair:q}],h&&(a.pending=!0),g.rest("PluginRun",angular.toJson(u)).then(function(b){if(i&&i(),h&&(a.pending=!1),!p&&l.node_selected_id==o&&l.platform.id==u.exchanges[0].pid&&l.stock==n){if(void 0!==b.error)return void(e?e(b.error):c.alert(b.error));if(d){var g=angular.fromJson(b);if(g){if(void 0!==g.error)return void(e?e(g.error):c.alert(g.error));if(void 0!==g.logs){for(var k=[],m=0;m<g.logs.length;m++)3==g.logs[m].LogType&&k.push(g.logs[m].Extra);var q=k.join("\n");q.length>0&&(q.length>1024&&(q=q.substring(0,1024)+" ..."),q=j(q),-1!==q.indexOf("not login")?c.alert(f.instant("ui.trade.tip.retry")+" "+q):c.error("Error: "+q))}g.result.length>0?d(angular.fromJson(g.result),g.logs):d(null,g.logs)}}}},function(b){i&&i(),h&&(a.pending=!1),-1!=u.source.indexOf("ExitProcess")&&b.indexOf("not connected")?c.alert("ui.dialog.alertSuccess"):c.alert(b)})};a.update=function(b){"asset"==b?L("return exchange.GetAccount()",function(b){null!=b&&(a.error_assets=null,A(b))}):"orders"==b?L("return exchange.GetOrders()",function(b){angular.isArray(b)&&(a.error_orders=null,a.pending_orders=b)}):"positions"==b&&L("return exchange.GetPosition()",function(b){angular.isArray(b)&&(a.error_positions=null,a.positions=b)})};var M=function(){if(a.isFastSync=!1,q)return void u();var b=null;q=new ReconnectingWebSocket("wss://www.fmz.com/market/wsapi/stream?compress=zlib",null,{binaryType:"arraybuffer"}),q.onopen=function(){u()},q.onclose=function(){},q.onmessage=function(c){a.$apply(function(){var d=pako.inflate(c.data,{to:"string"});angular.fromJson(d).map(function(c){if("string"==typeof c.e){if("symbols"==c.e)return _.each(c.d,function(b){var c=b.symbol.split("."),d=c[0],e=c.slice(1).join(".");if(-1!=e.indexOf("."))e=c[1].toUpperCase()+"."+c.slice(2).join(".");else{if(-1==e.indexOf("_"))return;e=e.toUpperCase()}_.each(a.platforms,function(a){a.eid.toLowerCase()==d&&-1==a.stocks.indexOf(e)&&a.stocks.push(e)})}),void(r=!0);var d=c.e.split(".");if(!(d.length<3)){var e=a.option.platform.eid.toLowerCase();"futures_ctp"!=e&&"futures_esunny"!=e||(e="FUTURES");var f=(d[0],d.slice(1,d.length-1).join(".")),g=d[d.length-1];if(e==d[0]&&void 0!==a.option.stock&&a.option.stock.toLowerCase()==f.toLowerCase()){var h=g.split("@");if("ohlc"!=h[0]||60*a.currentPeriod.minutes==h[1]){a.isFastSync||(a.isFastSync="depth"==g);var i=g;if("ticker"==i)B({Time:c.t,Info:c.d.info,Last:Number(c.d.last),Buy:Number(c.d.bid),Sell:Number(c.d.ask),High:Number(c.d.high),Low:Number(c.d.low),Volume:Number(c.d.vol)},!0);else if(-1!==i.indexOf("ohlc")){for(var j=[],l=0;l<c.d.length;l++){var m=c.d[l];j.push({time:m.t,open:Number(m.o),high:Number(m.h),low:Number(m.l),close:Number(m.c),volume:Number(m.v)})}k(j)}else if("trade"==i)t()+".trade"!=c.e&&(a.trades=[]),E(c.d);else if("depth"==i){if(c.d.s){var n={asks:{},bids:{}};for(var o in n)_.each(c.d[o],function(a){n[o][a[0]]=a[1]});b=c,b.mp=n}else if(b&&c.d.u-b.d.u==1){for(var o in b.mp)_.each(c.d[o],function(a){"0"==a[1]?delete b.mp[o][a[0]]:b.mp[o][a[0]]=a[1]});b.d.u=c.d.u}if(!b)return void console.log("ignore",c);var p={Time:c.t,Asks:[],Bids:[]};for(var o in b.mp.asks)p.Asks.push({Price:Number(o),Amount:Number(b.mp.asks[o])});for(var o in b.mp.bids)p.Bids.push({Price:Number(o),Amount:Number(b.mp.bids[o])});p.Asks.sort(function(a,b){return a.Price>b.Price?1:a.Price<b.Price?-1:0}),p.Bids.sort(function(a,b){return a.Price>b.Price?-1:a.Price<b.Price?1:0}),D(p)}a.ticker&&(a.ticker.Time=c.t)}}}}})})}};a.resetDebug=function(){c.confirm("ui.trade.alertRestart").then(function(){L('__syscall("ExitProcess");',function(a){console.log(a)})})},a.refresh=function(b,c){void 0===c&&(c=!0),c&&(a.trades=[],M()),w=v(),"string"!=typeof b&&(b=""),L(b+"var md="+c+"; var tasks = ['GetTicker', 'GetDepth', 'GetRecords', 'GetAccount']; if(md){_.each(tasks, function(t, i) {tasks[i] = (t == 'GetRecords' ? exchange.Go(t, period) : exchange.Go(t))}); _.each(tasks, function(t, i) {tasks[i] = tasks[i].wait()});} else {tasks=[null, null, null, _R(exchange.GetAccount)]} tasks.push(_R(exchange.GetOrders)); if(exchange.GetName().indexOf('Futures_')==0)tasks.push(_R(exchange.GetPosition));tasks.push(ct);return tasks;",function(b,d){a.error_assets=!1,a.error_orders=!1,a.error_positions=!1,s(null),c&&(B(b[0]),D(b[1]));var e=b[3];null!=e?A(e):(a.assets={},a.error_assets="ui.trade.tip.error"),null!=b[4]?a.pending_orders=b[4]:(a.pending_orders=[],a.error_orders="ui.trade.tip.error"),b.length>5?angular.isArray(b[5])?a.positions=b[5]:(a.positions=[],a.error_positions="ui.trade.tip.error"):a.positions=[],b.length>6&&null!=b[6]&&b[6]&&s(b[6]),c&&F(b[2])})};var N=function(b,c,d){var e="";if("CancelAll"==b)e="_.each(exchange.GetOrders(), function(order){exchange.CancelOrder(order.Id)});";else if("CancelOrder"==b)e+="exchange['"+b+"'].apply(this, "+angular.toJson(d)+");";else{if(0==a.option.platform.eid.indexOf("Futures_")){"XBT"==c?c="XBTUSD":-1!=c.indexOf(".")&&(c=c.split(".")[1]),e+="var symbol='"+c+"';ct=exchange.SetContractType(symbol); if(ct&&typeof(ct.InstrumentID)=='string'&&ct.InstrumentID!=symbol){exchange.SetContractType(ct.InstrumentID)};";var f=b.toLowerCase();-1!=f.indexOf("close")&&a.isSHFE&&a.isCoverToday&&(f+="_today"),e+="exchange.SetDirection('"+f+"');",a.isCryptoFutures&&a.marginLevel>0&&(e+="exchange.SetMarginLevel("+parseInt(a.marginLevel)+");")}var g="buy"==b.toLowerCase()||"closesell"==b.toLowerCase()?"Buy":"Sell";e+="exchange['"+g+"'].apply(this, "+angular.toJson(d)+");"}a.isEsunny&&(e+="exchange.IO('wait_order', 500);"),a.refresh(e,!1)};a.buy=function(b){var c=parseFloat(a.op.bidPrice),d=parseFloat(a.op.bidAmount);a.op.isMarket&&(a.isCTP&&a.depth&&a.ticker&&a.ticker.Info?0==(c=a.isEsunny?a.ticker.Info.QLimitUpPrice:a.ticker.Info.UpperLimitPrice)&&a.depth.Asks.length>0&&(c=a.depth.Asks[a.depth.Asks.length-1].Price):(d=a.isFutures?d:c,c=-1)),isNaN(c)||isNaN(d)||N(b?"closesell":"Buy",a.option.stock,[c,d])},a.sell=function(b){var c=parseFloat(a.op.askPrice),d=parseFloat(a.op.askAmount);a.op.isMarket&&(a.isCTP&&a.depth&&a.ticker&&a.ticker.Info?0==(c=a.isEsunny?a.ticker.Info.QLimitDownPrice:a.ticker.Info.LowerLimitPrice)&&a.depth.Bids.length>0&&(c=a.depth.Bids[a.depth.Bids.length-1].Price):c=-1),isNaN(c)||isNaN(d)||N(b?"closebuy":"Sell",a.option.stock,[c,d])},a.cancel=function(b){N("CancelOrder",a.option.stock,[b.Id])},a.cancelAll=function(){N("CancelAll")},g.rest(["GetPlatformList","GetNodeList"],[[],[]]).then(function(b){if(b){if(a.platforms=b[0].result.platforms,a.platforms.length>0){_.each(a.platforms,function(a){"Futures_CTP"==a.eid||"Futures_Esunny"==a.eid?a.stocks=["a888","ag888","al888","au888","b888","bb888","bu888","c888","cs888","cu888","eg888","fb888","fu888","hc888","i888","j888","jd888","jm888","l888","m888","ni888","p888","pb888","pp888","rb888","ru888","sc888","sn888","sp888","v888","wr888","y888","zn888","MA888","CF888","CY888","FG888","IC888","IF888","IH888","JR888","LR888","AP888","OI888","PM888","RI888","RM888","RS888","SF888","SM888","SR888","T888","TA888","TF888","TS888","WH888","ZC888"]:"Futures_BFX"==a.eid?a.stocks=["btc","eth","ltc","eos"]:"Futures_OKCoin"==a.eid?(a.stocks=[],_.each(["BTC","ETH","LTC","EOS"],function(b){_.each(["this_week","next_week","quarter","swap"],function(c){a.stocks.push(b+"."+c)})})):"Futures_HuobiDM"==a.eid?(a.stocks=[],_.each(["BTC","ETH","LTC","EOS"],function(b){_.each(["this_week","next_week","quarter"],function(c){a.stocks.push(b+"."+c)})})):"Futures_BitMEX"==a.eid&&(a.stocks=["XBTUSD"]);var b=l[a.eid];void 0!==b&&angular.isArray(b.stocks)&&(a.stocks=_.uniq(b.stocks.concat(a.stocks)))}),a.option.platform=_.findWhere(a.platforms,{id:parseInt(void 0!==h.id?h.id:g.KV_Get("trade_platform_idx",0))}),a.option.platform||(a.option.platform=a.platforms[0]);var c=a.option.platform.stocks[0],d=l[a.option.platform.eid];a.option.stock=d?d.def||c:c}a.nodes=[];var e=!1;_.each(b[1].result.nodes,function(b){void 0!==b.peer&&-1!=b.version.indexOf("plugin")&&(1!=b.public||b.is_owner?(b.desc=b.id+" : "+b.ip+" - "+b.os+(b.name?" ("+b.name+")":""),a.nodes.push(b),a.option.node_selected_id==b.id&&(e=!0)):b.desc=b.city+" : "+b.ip+" - "+b.os+" ("+f.instant("ui.const.publicUse")+")")}),a.nodes.length>0&&(e||(a.option.node_selected_id=a.nodes[0].id.toString())),a.platforms.length>0&&(a.ready=!0,a.nodes.length>0?a.refresh():M())}i(),Split(["#trade_chart","#trade_depth"],{sizes:[70,30],cursor:"pointer",direction:"horizontal"}),Split(["#trade_private","#trade_terminal","#trade_history"],{sizes:[45,25,30],cursor:"pointer",gutter:function(a,b){var c=document.createElement("div");return c.className="gutter gutter-"+b.toString(),c.style.height="55px",c},direction:"horizontal"})})}]),angular.module("botvsApp").controller("TimelineCtrl",["$scope","session",function(a,b){a.items=[],a.version="",b.rest("GetTimeLine",[0,50]).then(function(b){a.items=b.items,_.each(a.items,function(b){""==a.version&&b.version&&(a.version=b.version),b.date=b.created.split(" ")[0]})})}]),angular.module("botvsApp").controller("ProductsCtrl",function(){}),angular.module("botvsApp").directive("chat",["$translate",function(a){return{template:'<div class="chatFix"> <a target="_blank" ng-href="{{lang() == \'zh_CN\' ? \'http://wpa.qq.com/msgrd?v=3&uin=359706687&site=qq&menu=yes\': \'https://t.me/fmzquant\'}}" class="btn btn-primary"> <span class="fa fa-comments"></span> </a> </div>',restrict:"E",link:function(b,c,d){a.use}}}]),angular.module("botvsApp").controller("DigestCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});